var ie=Object.defineProperty,se=Object.defineProperties;var ae=Object.getOwnPropertyDescriptors;var X=Object.getOwnPropertySymbols;var ne=Object.prototype.hasOwnProperty,re=Object.prototype.propertyIsEnumerable;var te=(t,e,n)=>e in t?ie(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,z=(t,e)=>{for(var n in e||(e={}))ne.call(e,n)&&te(t,n,e[n]);if(X)for(var n of X(e))re.call(e,n)&&te(t,n,e[n]);return t},K=(t,e)=>se(t,ae(e));var oe=(t,e)=>{var n={};for(var r in t)ne.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&X)for(var r of X(t))e.indexOf(r)<0&&re.call(t,r)&&(n[r]=t[r]);return n};const p=function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))r(o);new MutationObserver(o=>{for(const i of o)if(i.type==="childList")for(const s of i.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&r(s)}).observe(document,{childList:!0,subtree:!0});function n(o){const i={};return o.integrity&&(i.integrity=o.integrity),o.referrerpolicy&&(i.referrerPolicy=o.referrerpolicy),o.crossorigin==="use-credentials"?i.credentials="include":o.crossorigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(o){if(o.ep)return;o.ep=!0;const i=n(o);fetch(o.href,i)}};p();function noop(){}const identity=t=>t;function assign(t,e){for(const n in e)t[n]=e[n];return t}function is_promise(t){return t&&typeof t=="object"&&typeof t.then=="function"}function run(t){return t()}function blank_object(){return Object.create(null)}function run_all(t){t.forEach(run)}function is_function(t){return typeof t=="function"}function safe_not_equal(t,e){return t!=t?e==e:t!==e||t&&typeof t=="object"||typeof t=="function"}let src_url_equal_anchor;function src_url_equal(t,e){return src_url_equal_anchor||(src_url_equal_anchor=document.createElement("a")),src_url_equal_anchor.href=e,t===src_url_equal_anchor.href}function is_empty(t){return Object.keys(t).length===0}function subscribe(t,...e){if(t==null)return noop;const n=t.subscribe(...e);return n.unsubscribe?()=>n.unsubscribe():n}function component_subscribe(t,e,n){t.$$.on_destroy.push(subscribe(e,n))}function create_slot(t,e,n,r){if(t){const o=get_slot_context(t,e,n,r);return t[0](o)}}function get_slot_context(t,e,n,r){return t[1]&&r?assign(n.ctx.slice(),t[1](r(e))):n.ctx}function get_slot_changes(t,e,n,r){if(t[2]&&r){const o=t[2](r(n));if(e.dirty===void 0)return o;if(typeof o=="object"){const i=[],s=Math.max(e.dirty.length,o.length);for(let a=0;a<s;a+=1)i[a]=e.dirty[a]|o[a];return i}return e.dirty|o}return e.dirty}function update_slot_base(t,e,n,r,o,i){if(o){const s=get_slot_context(e,n,r,i);t.p(s,o)}}function get_all_dirty_from_scope(t){if(t.ctx.length>32){const e=[],n=t.ctx.length/32;for(let r=0;r<n;r++)e[r]=-1;return e}return-1}function set_store_value(t,e,n){return t.set(n),e}function action_destroyer(t){return t&&is_function(t.destroy)?t.destroy:noop}const is_client=typeof window!="undefined";let now$1=is_client?()=>window.performance.now():()=>Date.now(),raf=is_client?t=>requestAnimationFrame(t):noop;const tasks=new Set;function run_tasks(t){tasks.forEach(e=>{e.c(t)||(tasks.delete(e),e.f())}),tasks.size!==0&&raf(run_tasks)}function loop$1(t){let e;return tasks.size===0&&raf(run_tasks),{promise:new Promise(n=>{tasks.add(e={c:t,f:n})}),abort(){tasks.delete(e)}}}function append(t,e){t.appendChild(e)}function get_root_for_style(t){if(!t)return document;const e=t.getRootNode?t.getRootNode():t.ownerDocument;return e&&e.host?e:t.ownerDocument}function append_empty_stylesheet(t){const e=element("style");return append_stylesheet(get_root_for_style(t),e),e.sheet}function append_stylesheet(t,e){append(t.head||t,e)}function insert(t,e,n){t.insertBefore(e,n||null)}function detach(t){t.parentNode.removeChild(t)}function destroy_each(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}function element(t){return document.createElement(t)}function text(t){return document.createTextNode(t)}function space(){return text(" ")}function empty(){return text("")}function listen(t,e,n,r){return t.addEventListener(e,n,r),()=>t.removeEventListener(e,n,r)}function prevent_default(t){return function(e){return e.preventDefault(),t.call(this,e)}}function stop_propagation(t){return function(e){return e.stopPropagation(),t.call(this,e)}}function self(t){return function(e){e.target===this&&t.call(this,e)}}function attr(t,e,n){n==null?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function children(t){return Array.from(t.childNodes)}function set_data(t,e){e=""+e,t.wholeText!==e&&(t.data=e)}function set_input_value(t,e){t.value=e==null?"":e}function set_style(t,e,n,r){n===null?t.style.removeProperty(e):t.style.setProperty(e,n,r?"important":"")}function toggle_class(t,e,n){t.classList[n?"add":"remove"](e)}const managed_styles=new Map;let active=0;function hash(t){let e=5381,n=t.length;for(;n--;)e=(e<<5)-e^t.charCodeAt(n);return e>>>0}function create_style_information(t,e){const n={stylesheet:append_empty_stylesheet(e),rules:{}};return managed_styles.set(t,n),n}function create_rule(t,e,n,r,o,i,s,a=0){const l=16.666/r;let u=`{
`;for(let y=0;y<=1;y+=l){const g=e+(n-e)*i(y);u+=y*100+`%{${s(g,1-g)}}
`}const d=u+`100% {${s(n,1-n)}}
}`,f=`__svelte_${hash(d)}_${a}`,c=get_root_for_style(t),{stylesheet:_,rules:m}=managed_styles.get(c)||create_style_information(c,t);m[f]||(m[f]=!0,_.insertRule(`@keyframes ${f} ${d}`,_.cssRules.length));const h=t.style.animation||"";return t.style.animation=`${h?`${h}, `:""}${f} ${r}ms linear ${o}ms 1 both`,active+=1,f}function delete_rule(t,e){const n=(t.style.animation||"").split(", "),r=n.filter(e?i=>i.indexOf(e)<0:i=>i.indexOf("__svelte")===-1),o=n.length-r.length;o&&(t.style.animation=r.join(", "),active-=o,active||clear_rules())}function clear_rules(){raf(()=>{active||(managed_styles.forEach(t=>{const{stylesheet:e}=t;let n=e.cssRules.length;for(;n--;)e.deleteRule(n);t.rules={}}),managed_styles.clear())})}function create_animation(t,e,n,r){if(!e)return noop;const o=t.getBoundingClientRect();if(e.left===o.left&&e.right===o.right&&e.top===o.top&&e.bottom===o.bottom)return noop;const{delay:i=0,duration:s=300,easing:a=identity,start:l=now$1()+i,end:u=l+s,tick:d=noop,css:f}=n(t,{from:e,to:o},r);let c=!0,_=!1,m;function h(){f&&(m=create_rule(t,0,1,s,i,a,f)),i||(_=!0)}function y(){f&&delete_rule(t,m),c=!1}return loop$1(g=>{if(!_&&g>=l&&(_=!0),_&&g>=u&&(d(1,0),y()),!c)return!1;if(_){const I=g-l,T=0+1*a(I/s);d(T,1-T)}return!0}),h(),d(0,1),y}function fix_position(t){const e=getComputedStyle(t);if(e.position!=="absolute"&&e.position!=="fixed"){const{width:n,height:r}=e,o=t.getBoundingClientRect();t.style.position="absolute",t.style.width=n,t.style.height=r,add_transform(t,o)}}function add_transform(t,e){const n=t.getBoundingClientRect();if(e.left!==n.left||e.top!==n.top){const r=getComputedStyle(t),o=r.transform==="none"?"":r.transform;t.style.transform=`${o} translate(${e.left-n.left}px, ${e.top-n.top}px)`}}let current_component;function set_current_component(t){current_component=t}function get_current_component(){if(!current_component)throw new Error("Function called outside component initialization");return current_component}function onDestroy(t){get_current_component().$$.on_destroy.push(t)}function bubble(t,e){const n=t.$$.callbacks[e.type];n&&n.slice().forEach(r=>r.call(this,e))}const dirty_components=[],binding_callbacks=[],render_callbacks=[],flush_callbacks=[],resolved_promise=Promise.resolve();let update_scheduled=!1;function schedule_update(){update_scheduled||(update_scheduled=!0,resolved_promise.then(flush))}function add_render_callback(t){render_callbacks.push(t)}const seen_callbacks=new Set;let flushidx=0;function flush(){const t=current_component;do{for(;flushidx<dirty_components.length;){const e=dirty_components[flushidx];flushidx++,set_current_component(e),update(e.$$)}for(set_current_component(null),dirty_components.length=0,flushidx=0;binding_callbacks.length;)binding_callbacks.pop()();for(let e=0;e<render_callbacks.length;e+=1){const n=render_callbacks[e];seen_callbacks.has(n)||(seen_callbacks.add(n),n())}render_callbacks.length=0}while(dirty_components.length);for(;flush_callbacks.length;)flush_callbacks.pop()();update_scheduled=!1,seen_callbacks.clear(),set_current_component(t)}function update(t){if(t.fragment!==null){t.update(),run_all(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(add_render_callback)}}const outroing=new Set;let outros;function group_outros(){outros={r:0,c:[],p:outros}}function check_outros(){outros.r||run_all(outros.c),outros=outros.p}function transition_in(t,e){t&&t.i&&(outroing.delete(t),t.i(e))}function transition_out(t,e,n,r){if(t&&t.o){if(outroing.has(t))return;outroing.add(t),outros.c.push(()=>{outroing.delete(t),r&&(n&&t.d(1),r())}),t.o(e)}}function handle_promise(t,e){const n=e.token={};function r(o,i,s,a){if(e.token!==n)return;e.resolved=a;let l=e.ctx;s!==void 0&&(l=l.slice(),l[s]=a);const u=o&&(e.current=o)(l);let d=!1;e.block&&(e.blocks?e.blocks.forEach((f,c)=>{c!==i&&f&&(group_outros(),transition_out(f,1,1,()=>{e.blocks[c]===f&&(e.blocks[c]=null)}),check_outros())}):e.block.d(1),u.c(),transition_in(u,1),u.m(e.mount(),e.anchor),d=!0),e.block=u,e.blocks&&(e.blocks[i]=u),d&&flush()}if(is_promise(t)){const o=get_current_component();if(t.then(i=>{set_current_component(o),r(e.then,1,e.value,i),set_current_component(null)},i=>{if(set_current_component(o),r(e.catch,2,e.error,i),set_current_component(null),!e.hasCatch)throw i}),e.current!==e.pending)return r(e.pending,0),!0}else{if(e.current!==e.then)return r(e.then,1,e.value,t),!0;e.resolved=t}}function update_await_block_branch(t,e,n){const r=e.slice(),{resolved:o}=t;t.current===t.then&&(r[t.value]=o),t.current===t.catch&&(r[t.error]=o),t.block.p(r,n)}const globals=typeof window!="undefined"?window:typeof globalThis!="undefined"?globalThis:global;function destroy_block(t,e){t.d(1),e.delete(t.key)}function fix_and_destroy_block(t,e){t.f(),destroy_block(t,e)}function update_keyed_each(t,e,n,r,o,i,s,a,l,u,d,f){let c=t.length,_=i.length,m=c;const h={};for(;m--;)h[t[m].key]=m;const y=[],g=new Map,I=new Map;for(m=_;m--;){const v=f(o,i,m),w=n(v);let b=s.get(w);b?r&&b.p(v,e):(b=u(w,v),b.c()),g.set(w,y[m]=b),w in h&&I.set(w,Math.abs(m-h[w]))}const T=new Set,R=new Set;function L(v){transition_in(v,1),v.m(a,d),s.set(v.key,v),d=v.first,_--}for(;c&&_;){const v=y[_-1],w=t[c-1],b=v.key,A=w.key;v===w?(d=v.first,c--,_--):g.has(A)?!s.has(b)||T.has(b)?L(v):R.has(A)?c--:I.get(b)>I.get(A)?(R.add(b),L(v)):(T.add(A),c--):(l(w,s),c--)}for(;c--;){const v=t[c];g.has(v.key)||l(v,s)}for(;_;)L(y[_-1]);return y}function create_component(t){t&&t.c()}function mount_component(t,e,n,r){const{fragment:o,on_mount:i,on_destroy:s,after_update:a}=t.$$;o&&o.m(e,n),r||add_render_callback(()=>{const l=i.map(run).filter(is_function);s?s.push(...l):run_all(l),t.$$.on_mount=[]}),a.forEach(add_render_callback)}function destroy_component(t,e){const n=t.$$;n.fragment!==null&&(run_all(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function make_dirty(t,e){t.$$.dirty[0]===-1&&(dirty_components.push(t),schedule_update(),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function init(t,e,n,r,o,i,s,a=[-1]){const l=current_component;set_current_component(t);const u=t.$$={fragment:null,ctx:null,props:i,update:noop,not_equal:o,bound:blank_object(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(l?l.$$.context:[])),callbacks:blank_object(),dirty:a,skip_bound:!1,root:e.target||l.$$.root};s&&s(u.root);let d=!1;if(u.ctx=n?n(t,e.props||{},(f,c,..._)=>{const m=_.length?_[0]:c;return u.ctx&&o(u.ctx[f],u.ctx[f]=m)&&(!u.skip_bound&&u.bound[f]&&u.bound[f](m),d&&make_dirty(t,f)),c}):[],u.update(),d=!0,run_all(u.before_update),u.fragment=r?r(u.ctx):!1,e.target){if(e.hydrate){const f=children(e.target);u.fragment&&u.fragment.l(f),f.forEach(detach)}else u.fragment&&u.fragment.c();e.intro&&transition_in(t.$$.fragment),mount_component(t,e.target,e.anchor,e.customElement),flush()}set_current_component(l)}class SvelteComponent{$destroy(){destroy_component(this,1),this.$destroy=noop}$on(e,n){const r=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return r.push(n),()=>{const o=r.indexOf(n);o!==-1&&r.splice(o,1)}}$set(e){this.$$set&&!is_empty(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}const get_after_slot_changes=t=>({}),get_after_slot_context=t=>({}),get_before_slot_changes=t=>({}),get_before_slot_context=t=>({});function create_fragment$b(t){let e,n,r,o,i;const s=t[1].before,a=create_slot(s,t,t[0],get_before_slot_context),l=t[1].default,u=create_slot(l,t,t[0],null),d=t[1].after,f=create_slot(d,t,t[0],get_after_slot_context);return{c(){e=element("div"),a&&a.c(),n=space(),r=element("div"),u&&u.c(),o=space(),f&&f.c(),attr(r,"class","absolute top-1/2 -translate-y-1/2 left-1/2 -translate-x-1/2 text-center"),attr(e,"class","relative w-full h-full")},m(c,_){insert(c,e,_),a&&a.m(e,null),append(e,n),append(e,r),u&&u.m(r,null),append(e,o),f&&f.m(e,null),i=!0},p(c,[_]){a&&a.p&&(!i||_&1)&&update_slot_base(a,s,c,c[0],i?get_slot_changes(s,c[0],_,get_before_slot_changes):get_all_dirty_from_scope(c[0]),get_before_slot_context),u&&u.p&&(!i||_&1)&&update_slot_base(u,l,c,c[0],i?get_slot_changes(l,c[0],_,null):get_all_dirty_from_scope(c[0]),null),f&&f.p&&(!i||_&1)&&update_slot_base(f,d,c,c[0],i?get_slot_changes(d,c[0],_,get_after_slot_changes):get_all_dirty_from_scope(c[0]),get_after_slot_context)},i(c){i||(transition_in(a,c),transition_in(u,c),transition_in(f,c),i=!0)},o(c){transition_out(a,c),transition_out(u,c),transition_out(f,c),i=!1},d(c){c&&detach(e),a&&a.d(c),u&&u.d(c),f&&f.d(c)}}}function instance$a(t,e,n){let{$$slots:r={},$$scope:o}=e;return t.$$set=i=>{"$$scope"in i&&n(0,o=i.$$scope)},[o,r]}class Center extends SvelteComponent{constructor(e){super(),init(this,e,instance$a,create_fragment$b,safe_not_equal,{})}}var Spinner_svelte_svelte_type_style_lang="";function create_default_slot$4(t){let e,n,r,o,i;return{c(){e=element("span"),n=space(),r=element("br"),o=space(),i=element("span"),i.textContent="Loading\u2026",attr(e,"class","loader svelte-gg29y1"),attr(i,"class","font-extrabold")},m(s,a){insert(s,e,a),insert(s,n,a),insert(s,r,a),insert(s,o,a),insert(s,i,a)},p:noop,d(s){s&&detach(e),s&&detach(n),s&&detach(r),s&&detach(o),s&&detach(i)}}}function create_fragment$a(t){let e,n;return e=new Center({props:{$$slots:{default:[create_default_slot$4]},$$scope:{ctx:t}}}),{c(){create_component(e.$$.fragment)},m(r,o){mount_component(e,r,o),n=!0},p(r,[o]){const i={};o&1&&(i.$$scope={dirty:o,ctx:r}),e.$set(i)},i(r){n||(transition_in(e.$$.fragment,r),n=!0)},o(r){transition_out(e.$$.fragment,r),n=!1},d(r){destroy_component(e,r)}}}class Spinner extends SvelteComponent{constructor(e){super(),init(this,e,null,create_fragment$a,safe_not_equal,{})}}function create_fragment$9(t){let e,n,r,o,i;const s=t[2].default,a=create_slot(s,t,t[1],null);return{c(){e=element("button"),a&&a.c(),attr(e,"class",n="bg-blue-600 text-white p-1.5 rounded-2xl hover:bg-blue-700 "+t[0])},m(l,u){insert(l,e,u),a&&a.m(e,null),r=!0,o||(i=listen(e,"click",t[3]),o=!0)},p(l,[u]){a&&a.p&&(!r||u&2)&&update_slot_base(a,s,l,l[1],r?get_slot_changes(s,l[1],u,null):get_all_dirty_from_scope(l[1]),null),(!r||u&1&&n!==(n="bg-blue-600 text-white p-1.5 rounded-2xl hover:bg-blue-700 "+l[0]))&&attr(e,"class",n)},i(l){r||(transition_in(a,l),r=!0)},o(l){transition_out(a,l),r=!1},d(l){l&&detach(e),a&&a.d(l),o=!1,i()}}}function instance$9(t,e,n){let{$$slots:r={},$$scope:o}=e,{class:i=""}=e;function s(a){bubble.call(this,t,a)}return t.$$set=a=>{"class"in a&&n(0,i=a.class),"$$scope"in a&&n(1,o=a.$$scope)},[i,o,r,s]}class PrimaryButton extends SvelteComponent{constructor(e){super(),init(this,e,instance$9,create_fragment$9,safe_not_equal,{class:0})}}function create_default_slot_1$3(t){let e=t[0]?"Authorize":"Sign in",n;return{c(){n=text(e)},m(r,o){insert(r,n,o)},p(r,o){o&1&&e!==(e=r[0]?"Authorize":"Sign in")&&set_data(n,e)},d(r){r&&detach(n)}}}function create_default_slot$3(t){let e,n,r=t[0]?"authorize this app":"sign in",o,i,s,a,l,u,d;return u=new PrimaryButton({props:{class:"w-full",$$slots:{default:[create_default_slot_1$3]},$$scope:{ctx:t}}}),u.$on("click",signIn),{c(){e=element("p"),n=text("Please "),o=text(r),i=text(" to continue"),s=space(),a=element("br"),l=space(),create_component(u.$$.fragment)},m(f,c){insert(f,e,c),append(e,n),append(e,o),append(e,i),insert(f,s,c),insert(f,a,c),insert(f,l,c),mount_component(u,f,c),d=!0},p(f,c){(!d||c&1)&&r!==(r=f[0]?"authorize this app":"sign in")&&set_data(o,r);const _={};c&3&&(_.$$scope={dirty:c,ctx:f}),u.$set(_)},i(f){d||(transition_in(u.$$.fragment,f),d=!0)},o(f){transition_out(u.$$.fragment,f),d=!1},d(f){f&&detach(e),f&&detach(s),f&&detach(a),f&&detach(l),destroy_component(u,f)}}}function create_fragment$8(t){let e,n;return e=new Center({props:{$$slots:{default:[create_default_slot$3]},$$scope:{ctx:t}}}),{c(){create_component(e.$$.fragment)},m(r,o){mount_component(e,r,o),n=!0},p(r,[o]){const i={};o&3&&(i.$$scope={dirty:o,ctx:r}),e.$set(i)},i(r){n||(transition_in(e.$$.fragment,r),n=!0)},o(r){transition_out(e.$$.fragment,r),n=!1},d(r){destroy_component(e,r)}}}function signIn(){return gapi.auth2.getAuthInstance().signIn()}function instance$8(t,e,n){let{isSignedIn:r}=e;return t.$$set=o=>{"isSignedIn"in o&&n(0,r=o.isSignedIn)},[r]}class LoginScreen extends SvelteComponent{constructor(e){super(),init(this,e,instance$8,create_fragment$8,safe_not_equal,{isSignedIn:0})}}const subscriber_queue=[];function writable(t,e=noop){let n;const r=new Set;function o(a){if(safe_not_equal(t,a)&&(t=a,n)){const l=!subscriber_queue.length;for(const u of r)u[1](),subscriber_queue.push(u,t);if(l){for(let u=0;u<subscriber_queue.length;u+=2)subscriber_queue[u][0](subscriber_queue[u+1]);subscriber_queue.length=0}}}function i(a){o(a(t))}function s(a,l=noop){const u=[a,l];return r.add(u),r.size===1&&(n=e(o)||noop),a(t),()=>{r.delete(u),r.size===0&&(n(),n=null)}}return{set:o,update:i,subscribe:s}}function getDefaultExportFromCjs(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var browserCookies={};(function(t){t.defaults={},t.set=function(e,n,r){var o=r||{},i=t.defaults,s=o.expires||i.expires,a=o.domain||i.domain,l=o.path!==void 0?o.path:i.path!==void 0?i.path:"/",u=o.secure!==void 0?o.secure:i.secure,d=o.httponly!==void 0?o.httponly:i.httponly,f=o.samesite!==void 0?o.samesite:i.samesite,c=s?new Date(typeof s=="number"?new Date().getTime()+s*864e5:s):0;document.cookie=e.replace(/[^+#$&^`|]/g,encodeURIComponent).replace("(","%28").replace(")","%29")+"="+n.replace(/[^+#$&/:<-\[\]-}]/g,encodeURIComponent)+(c&&c.getTime()>=0?";expires="+c.toUTCString():"")+(a?";domain="+a:"")+(l?";path="+l:"")+(u?";secure":"")+(d?";httponly":"")+(f?";samesite="+f:"")},t.get=function(e){for(var n=document.cookie.split(";");n.length;){var r=n.pop(),o=r.indexOf("=");o=o<0?r.length:o;var i=decodeURIComponent(r.slice(0,o).replace(/^\s+/,""));if(i===e)return decodeURIComponent(r.slice(o+1))}return null},t.erase=function(e,n){t.set(e,"",{expires:-1,domain:n&&n.domain,path:n&&n.path,secure:0,httponly:0})},t.all=function(){for(var e={},n=document.cookie.split(";");n.length;){var r=n.pop(),o=r.indexOf("=");o=o<0?r.length:o;var i=decodeURIComponent(r.slice(0,o).replace(/^\s+/,""));e[i]=decodeURIComponent(r.slice(o+1))}return e}})(browserCookies);var bundle={};(function(exports){(function(t,e){for(var n in e)t[n]=e[n];e.__esModule&&Object.defineProperty(t,"__esModule",{value:!0})})(exports,(()=>{var __webpack_modules__={607:(module,exports,__webpack_require__)=>{Object.defineProperty(exports,"__esModule",{value:!0});var serializer_1=__webpack_require__(810),deserializer_1=__webpack_require__(496),Module;typeof process!="undefined"&&process.release.name==="node"&&(Module=eval("require")("module"));var ESSerializer=function(){function t(){}return t.throwErrorIfInNonNodeEnvironment=function(){if(!Module)throw new Error("Cannot intercept require in non-Node environment.")},t.interceptRequire=function(){this.isRequireIntercepted||(this.isRequireIntercepted=!0,this.throwErrorIfInNonNodeEnvironment(),t.originRequire=Module.prototype.require,Module.prototype.require=function(){var e=t.originRequire.apply(this,arguments),n=e.name;return t.requiredClasses[n]||(t.requiredClasses[n]=e),e})},t.stopInterceptRequire=function(){this.throwErrorIfInNonNodeEnvironment(),Module.prototype.require=t.originRequire,this.isRequireIntercepted=!1},t.isInterceptingRequire=function(){return this.isRequireIntercepted},t.getRequiredClasses=function(){return this.requiredClasses},t.clearRequiredClasses=function(){this.requiredClasses={}},t.registerClass=function(e){this.registeredClasses.push(e)},t.registerClasses=function(e){this.registeredClasses=this.registeredClasses.concat(e)},t.clearRegisteredClasses=function(){this.registeredClasses=[]},t.serialize=function(e,n){return n===void 0&&(n={}),JSON.stringify(serializer_1.getSerializeValueWithClassName(e,n))},t.deserialize=function(e,n,r){return n===void 0&&(n=[]),r===void 0&&(r={}),deserializer_1.deserializeFromParsedObj(JSON.parse(e),Object.values(this.requiredClasses).concat(this.registeredClasses).concat(n),r)},t.originRequire=null,t.isRequireIntercepted=!1,t.requiredClasses={},t.registeredClasses=[],t}();module.exports=ESSerializer},917:function(t,e){var n=this&&this.__spreadArrays||function(){for(var B=0,x=0,Z=arguments.length;x<Z;x++)B+=arguments[x].length;var V=Array(B),Y=0;for(x=0;x<Z;x++)for(var j=arguments[x],G=0,S=j.length;G<S;G++,Y++)V[Y]=j[G];return V};Object.defineProperty(e,"__esModule",{value:!0}),e.TO_STRING_FIELD=e.TIMESTAMP_FIELD=e.OPTIONS_FIELD=e.CLASS_NAME_FIELD=e.BOOLEAN_FIELD=e.ARRAY_FIELD=e.BUILTIN_TYPE_UNDEFINED=e.BUILTIN_TYPE_NOT_FINITE=e.BUILTIN_TYPE_BIG_INT=e.BUILTIN_CLASS_AGGREGATE_ERROR=e.BUILTIN_CLASS_URI_ERROR=e.BUILTIN_CLASS_TYPE_ERROR=e.BUILTIN_CLASS_SYNTAX_ERROR=e.BUILTIN_CLASS_REFERENCE_ERROR=e.BUILTIN_CLASS_RANGE_ERROR=e.BUILTIN_CLASS_EVAL_ERROR=e.BUILTIN_CLASS_ERROR=e.BUILTIN_CLASS_STRING=e.BUILTIN_CLASS_SET=e.BUILTIN_CLASS_REGEXP=e.BUILTIN_CLASS_INTL_RELATIVETIMEFORMAT=e.BUILTIN_CLASS_INTL_PLURALRULES=e.BUILTIN_CLASS_INTL_NUMBERFORMAT=e.BUILTIN_CLASS_INTL_LOCALE=e.BUILTIN_CLASS_INTL_LISTFORMAT=e.BUILTIN_CLASS_INTL_DATETIMEFORMAT=e.BUILTIN_CLASS_INTL_COLLATOR=e.BUILTIN_CLASS_DATE=e.BUILTIN_CLASS_DATAVIEW=e.BUILTIN_CLASS_BOOLEAN=e.BUILTIN_CLASS_SHAREDARRAYBUFFER=e.BUILTIN_CLASS_ARRAYBUFFER=e.BUILTIN_CLASS_BIGUINT64ARRAY=e.BUILTIN_CLASS_BIGINT64ARRAY=e.BUILTIN_CLASS_FLOAT64ARRAY=e.BUILTIN_CLASS_FLOAT32ARRAY=e.BUILTIN_CLASS_UINT32ARRAY=e.BUILTIN_CLASS_INT32ARRAY=e.BUILTIN_CLASS_UINT16ARRAY=e.BUILTIN_CLASS_INT16ARRAY=e.BUILTIN_CLASS_UINT8CLAMPEDARRAY=e.BUILTIN_CLASS_UINT8ARRAY=e.BUILTIN_CLASS_INT8ARRAY=e.CLASSNAMES_WHOSE_ENUMERABLE_PROPERTIES_SHOULD_BE_IGNORED=e.ALL_BUILTIN_INTLS=e.ALL_BUILTIN_ERRORS=e.ALL_BUILTIN_ARRAYS=e.ESSERIALIZER_NULL=void 0,e.ESSERIALIZER_NULL="__ESSERIALIZER_NULL__",e.ARRAY_FIELD="ess_arr",e.BOOLEAN_FIELD="ess_bool",e.CLASS_NAME_FIELD="ess_cn",e.OPTIONS_FIELD="ess_opt",e.TIMESTAMP_FIELD="ess_ts",e.TO_STRING_FIELD="ess_str";var r="Int8Array";e.BUILTIN_CLASS_INT8ARRAY=r;var o="Uint8Array";e.BUILTIN_CLASS_UINT8ARRAY=o;var i="Uint8ClampedArray";e.BUILTIN_CLASS_UINT8CLAMPEDARRAY=i;var s="Int16Array";e.BUILTIN_CLASS_INT16ARRAY=s;var a="Uint16Array";e.BUILTIN_CLASS_UINT16ARRAY=a;var l="Int32Array";e.BUILTIN_CLASS_INT32ARRAY=l;var u="Uint32Array";e.BUILTIN_CLASS_UINT32ARRAY=u;var d="Float32Array";e.BUILTIN_CLASS_FLOAT32ARRAY=d;var f="Float64Array";e.BUILTIN_CLASS_FLOAT64ARRAY=f;var c="BigInt64Array";e.BUILTIN_CLASS_BIGINT64ARRAY=c;var _="BigUint64Array";e.BUILTIN_CLASS_BIGUINT64ARRAY=_,e.BUILTIN_CLASS_ARRAYBUFFER="ArrayBuffer",e.BUILTIN_CLASS_SHAREDARRAYBUFFER="SharedArrayBuffer",e.BUILTIN_CLASS_BOOLEAN="Boolean",e.BUILTIN_CLASS_DATAVIEW="DataView",e.BUILTIN_CLASS_DATE="Date";var m="Collator";e.BUILTIN_CLASS_INTL_COLLATOR=m;var h="DateTimeFormat";e.BUILTIN_CLASS_INTL_DATETIMEFORMAT=h;var y="ListFormat";e.BUILTIN_CLASS_INTL_LISTFORMAT=y,e.BUILTIN_CLASS_INTL_LOCALE="Locale";var g="NumberFormat";e.BUILTIN_CLASS_INTL_NUMBERFORMAT=g;var I="PluralRules";e.BUILTIN_CLASS_INTL_PLURALRULES=I;var T="RelativeTimeFormat";e.BUILTIN_CLASS_INTL_RELATIVETIMEFORMAT=T,e.BUILTIN_CLASS_REGEXP="RegExp",e.BUILTIN_CLASS_SET="Set";var R="String";e.BUILTIN_CLASS_STRING=R;var L="Error";e.BUILTIN_CLASS_ERROR=L;var v="EvalError";e.BUILTIN_CLASS_EVAL_ERROR=v;var w="RangeError";e.BUILTIN_CLASS_RANGE_ERROR=w;var b="ReferenceError";e.BUILTIN_CLASS_REFERENCE_ERROR=b;var A="SyntaxError";e.BUILTIN_CLASS_SYNTAX_ERROR=A;var O="TypeError";e.BUILTIN_CLASS_TYPE_ERROR=O;var N="URIError";e.BUILTIN_CLASS_URI_ERROR=N;var P="AggregateError";e.BUILTIN_CLASS_AGGREGATE_ERROR=P,e.BUILTIN_TYPE_BIG_INT="BI",e.BUILTIN_TYPE_NOT_FINITE="NF",e.BUILTIN_TYPE_UNDEFINED="UD";var M=[r,o,i,s,a,l,u,d,f,c,_];e.ALL_BUILTIN_ARRAYS=M;var F=[L,v,w,b,A,O,N,P];e.ALL_BUILTIN_ERRORS=F;var k=[m,h,y,g,I,T];e.ALL_BUILTIN_INTLS=k;var q=n([R],M);e.CLASSNAMES_WHOSE_ENUMERABLE_PROPERTIES_SHOULD_BE_IGNORED=q},496:function(t,e,n){var r=this&&this.__spreadArrays||function(){for(var g=0,I=0,T=arguments.length;I<T;I++)g+=arguments[I].length;var R=Array(g),L=0;for(I=0;I<T;I++)for(var v=arguments[I],w=0,b=v.length;w<b;w++,L++)R[L]=v[w];return R};Object.defineProperty(e,"__esModule",{value:!0}),e.getParentClassName=e.getClassMappingFromClassArray=e.deserializeFromParsedObjWithClassMapping=e.deserializeFromParsedObj=void 0;var o=n(821),i=n(917),s=/^\s*class\s+/;function a(g,I,T){if(T===void 0&&(T={}),o.notObject(g))return g;if(Array.isArray(g))return l(g,I);var R=g[i.CLASS_NAME_FIELD],L=function(w,b,A){switch(w){case i.BUILTIN_CLASS_INT8ARRAY:return u(b[i.ARRAY_FIELD],Int8Array);case i.BUILTIN_CLASS_UINT8ARRAY:return u(b[i.ARRAY_FIELD],Uint8Array);case i.BUILTIN_CLASS_UINT8CLAMPEDARRAY:return u(b[i.ARRAY_FIELD],Uint8ClampedArray);case i.BUILTIN_CLASS_INT16ARRAY:return u(b[i.ARRAY_FIELD],Int16Array);case i.BUILTIN_CLASS_UINT16ARRAY:return u(b[i.ARRAY_FIELD],Uint16Array);case i.BUILTIN_CLASS_INT32ARRAY:return u(b[i.ARRAY_FIELD],Int32Array);case i.BUILTIN_CLASS_UINT32ARRAY:return u(b[i.ARRAY_FIELD],Uint32Array);case i.BUILTIN_CLASS_FLOAT32ARRAY:return u(b[i.ARRAY_FIELD],Float32Array);case i.BUILTIN_CLASS_FLOAT64ARRAY:return u(b[i.ARRAY_FIELD],Float64Array);case i.BUILTIN_CLASS_BIGINT64ARRAY:return d(b[i.ARRAY_FIELD],BigInt64Array);case i.BUILTIN_CLASS_BIGUINT64ARRAY:return d(b[i.ARRAY_FIELD],BigUint64Array);case i.BUILTIN_TYPE_BIG_INT:return f(b[i.TO_STRING_FIELD]);case i.BUILTIN_TYPE_UNDEFINED:return;case i.BUILTIN_TYPE_NOT_FINITE:return o.getValueFromToStringResult(b[i.TO_STRING_FIELD]);case i.BUILTIN_CLASS_ARRAYBUFFER:return O=b[i.ARRAY_FIELD],new Uint8Array(O).buffer;case i.BUILTIN_CLASS_SHAREDARRAYBUFFER:return function(N){var P=new SharedArrayBuffer(N.length),M=new Uint8Array(P);return N.forEach(function(F,k){M[k]=F}),P}(b[i.ARRAY_FIELD]);case i.BUILTIN_CLASS_BOOLEAN:return function(N){return new Boolean(N[i.BOOLEAN_FIELD])}(b);case i.BUILTIN_CLASS_DATAVIEW:return function(N){return new DataView(new Uint8Array(N).buffer)}(b[i.ARRAY_FIELD]);case i.BUILTIN_CLASS_DATE:return function(N){return typeof N[i.TIMESTAMP_FIELD]=="number"?new Date(N[i.TIMESTAMP_FIELD]):null}(b);case i.BUILTIN_CLASS_INTL_COLLATOR:return c(b,Intl.Collator);case i.BUILTIN_CLASS_INTL_DATETIMEFORMAT:return c(b,Intl.DateTimeFormat);case i.BUILTIN_CLASS_INTL_LISTFORMAT:return c(b,Intl.ListFormat);case i.BUILTIN_CLASS_INTL_LOCALE:return new Intl.Locale(b[i.TO_STRING_FIELD]);case i.BUILTIN_CLASS_INTL_NUMBERFORMAT:return c(b,Intl.NumberFormat);case i.BUILTIN_CLASS_INTL_PLURALRULES:return c(b,Intl.PluralRules);case i.BUILTIN_CLASS_INTL_RELATIVETIMEFORMAT:return c(b,Intl.RelativeTimeFormat);case i.BUILTIN_CLASS_REGEXP:return function(N){var P=N[i.TO_STRING_FIELD],M=P.lastIndexOf("/");return new RegExp(P.substring(1,M),P.substring(M+1))}(b);case i.BUILTIN_CLASS_SET:return function(N,P){return new Set(l(N[i.ARRAY_FIELD],P))}(b,A);case i.BUILTIN_CLASS_STRING:return function(N){return new String(N[i.TO_STRING_FIELD])}(b);case i.BUILTIN_CLASS_ERROR:return _(b,Error);case i.BUILTIN_CLASS_EVAL_ERROR:return _(b,EvalError);case i.BUILTIN_CLASS_RANGE_ERROR:return _(b,RangeError);case i.BUILTIN_CLASS_REFERENCE_ERROR:return _(b,ReferenceError);case i.BUILTIN_CLASS_SYNTAX_ERROR:return _(b,SyntaxError);case i.BUILTIN_CLASS_TYPE_ERROR:return _(b,TypeError);case i.BUILTIN_CLASS_URI_ERROR:return _(b,URIError);case i.BUILTIN_CLASS_AGGREGATE_ERROR:return _(b,AggregateError);default:return i.ESSERIALIZER_NULL}var O}(R,g,I);if(L!==i.ESSERIALIZER_NULL)return L;if(R&&!I[R])throw new Error("Class "+R+" not found");var v=[];return T.fieldsForConstructorParameters&&(v=T.fieldsForConstructorParameters.map(function(w){return w in g?g[w]:{}})),function(w,b,A,O){for(var N in b){var P=b[N];if(!O.ignoreProperties||!O.ignoreProperties.includes(N))if(O.rawProperties&&O.rawProperties.includes(N))w[N]=JSON.stringify(P);else{var M=Object.getOwnPropertyDescriptor(w,N);F=P,k=M,N===i.CLASS_NAME_FIELD||k&&(typeof k.set=="function"||k.writable===!1&&typeof F!="object")||(M&&M.writable===!1&&typeof P=="object"?h(w[N],P,A):w[N]=a(P,A))}}var F,k;return w}(function(w,b){var A={};if(!w)return A;var O=w.length-b.length;if(O>0&&(b=b.concat(Array.from(Array(O),function(){return{}}))),s.test(w.toString()))try{A=new(w.bind.apply(w,r([void 0],b)))}catch{m(w.name),A={},Object.setPrototypeOf(A,w?w.prototype:Object.prototype)}else{A=Object.create(w.prototype.constructor.prototype);try{w.prototype.constructor.call(A,b)}catch{m(w.name)}}return A}(I[R],v),g,I,T)}function l(g,I){return g.map(function(T){return a(T,I)})}function u(g,I){return new I(g)}function d(g,I){return new I(g.map(function(T){return f(T[i.TO_STRING_FIELD])}))}function f(g){return BigInt(g)}function c(g,I){var T=g[i.OPTIONS_FIELD],R=T.locale;return delete T.locale,new I(R,T)}function _(g,I){var T;return delete(T=g.message?new I(g.message):new I).stack,g.name&&(T.name=g.name),g.stack&&(T.stack=g.stack),I===AggregateError&&(T.errors=a(g.errors,{})),T}function m(g){console.warn("Incorrect parameter type passed to constructor: "+g)}function h(g,I,T){for(var R in I){var L=Object.getOwnPropertyDescriptor(g,R);L&&L.writable!==!0&&typeof L.set!="function"||(g[R]=a(I[R],T))}}function y(g){g===void 0&&(g=[]);var I={};return g.forEach(function(T){if(o.isClass(T)){var R=T.name,L=I[R];L&&L!==T&&console.warn("WARNING: Found class definition with the same name: "+R),I[R]=T}}),I}e.deserializeFromParsedObj=function(g,I,T){return a(g,y(I),T)},e.deserializeFromParsedObjWithClassMapping=a,e.getClassMappingFromClassArray=y,e.getParentClassName=function(g){return g.prototype.__proto__.constructor.name}},821:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.isClass=e.notObject=e.getValueFromToStringResult=void 0,e.notObject=function(n){return n===null||typeof n!="object"},e.getValueFromToStringResult=function(n){switch(n){case"Infinity":return 1/0;case"-Infinity":return-1/0;case"NaN":return NaN;default:return null}},e.isClass=function(n){if(function(r){return[Date].indexOf(r)>=0}(n))return!0;try{Reflect.construct(String,[],n)}catch{return!1}return!0}},810:(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.getSerializeValueWithClassName=void 0;var r=n(917),o=n(821);function i(a,l){l===void 0&&(l={});var u=function(_){var m,h,y;return _===void 0?((m={})[r.CLASS_NAME_FIELD]=r.BUILTIN_TYPE_UNDEFINED,m):typeof _!="number"||isFinite(_)?typeof _=="bigint"?((y={})[r.CLASS_NAME_FIELD]=r.BUILTIN_TYPE_BIG_INT,y[r.TO_STRING_FIELD]=_.toString(),y):o.notObject(_)?_:r.ESSERIALIZER_NULL:((h={})[r.CLASS_NAME_FIELD]=r.BUILTIN_TYPE_NOT_FINITE,h[r.TO_STRING_FIELD]=_.toString(),h)}(a);if(u!==r.ESSERIALIZER_NULL)return u;if(Array.isArray(a))return s(a);var d={};if(!function(_){var m=_.__proto__.constructor.name;return r.CLASSNAMES_WHOSE_ENUMERABLE_PROPERTIES_SHOULD_BE_IGNORED.includes(m)}(a)){if(l.ignoreProperties&&l.ignoreProperties.forEach(function(_){delete a[_]}),l.interceptProperties)for(var f in l.interceptProperties)a[f]=l.interceptProperties[f].call(a,a[f]);for(var c in a)d[c]=i(a[c])}return function(_,m){var h=_.__proto__.constructor.name;return h!=="Object"&&(m[r.CLASS_NAME_FIELD]=h,h===r.BUILTIN_CLASS_ARRAYBUFFER||h===r.BUILTIN_CLASS_SHAREDARRAYBUFFER?m[r.ARRAY_FIELD]=s(Array.from(new Uint8Array(_))):h===r.BUILTIN_CLASS_BOOLEAN?m[r.BOOLEAN_FIELD]=_.valueOf():h===r.BUILTIN_CLASS_DATAVIEW?m[r.ARRAY_FIELD]=s(Array.from(new Uint8Array(_.buffer))):h===r.BUILTIN_CLASS_DATE?m[r.TIMESTAMP_FIELD]=_.getTime():h===r.BUILTIN_CLASS_INTL_LOCALE||h===r.BUILTIN_CLASS_REGEXP?m[r.TO_STRING_FIELD]=_.toString():h===r.BUILTIN_CLASS_SET?m[r.ARRAY_FIELD]=s(Array.from(_)):h===r.BUILTIN_CLASS_STRING?m[r.TO_STRING_FIELD]=_.toString():r.ALL_BUILTIN_ARRAYS.includes(h)?m[r.ARRAY_FIELD]=s(Array.from(_)):r.ALL_BUILTIN_ERRORS.includes(h)?function(y,g,I){y.name!=="Error"&&(g.name=y.name),y.message&&(g.message=y.message),y.stack&&(g.stack=y.stack),I===r.BUILTIN_CLASS_AGGREGATE_ERROR&&(g.errors=i(y.errors))}(_,m,h):r.ALL_BUILTIN_INTLS.includes(h)&&(m[r.OPTIONS_FIELD]=_.resolvedOptions())),m}(a,d)}function s(a){return a.map(function(l){return i(l)})}e.getSerializeValueWithClassName=i}},__webpack_module_cache__={};function __webpack_require__(t){if(__webpack_module_cache__[t])return __webpack_module_cache__[t].exports;var e=__webpack_module_cache__[t]={exports:{}};return __webpack_modules__[t].call(e.exports,e,e.exports,__webpack_require__),e.exports}return __webpack_require__(607)})())})(bundle);var ESSerializer=getDefaultExportFromCjs(bundle);function idbReady(){if(!(!navigator.userAgentData&&/Safari\//.test(navigator.userAgent)&&!/Chrom(e|ium)\//.test(navigator.userAgent))||!indexedDB.databases)return Promise.resolve();let e;return new Promise(n=>{const r=()=>indexedDB.databases().finally(n);e=setInterval(r,100),r()}).finally(()=>clearInterval(e))}function promisifyRequest(t){return new Promise((e,n)=>{t.oncomplete=t.onsuccess=()=>e(t.result),t.onabort=t.onerror=()=>n(t.error)})}function createStore(t,e){const n=idbReady().then(()=>{const r=indexedDB.open(t);return r.onupgradeneeded=()=>r.result.createObjectStore(e),promisifyRequest(r)});return(r,o)=>n.then(i=>o(i.transaction(e,r).objectStore(e)))}let defaultGetStoreFunc;function defaultGetStore(){return defaultGetStoreFunc||(defaultGetStoreFunc=createStore("keyval-store","keyval")),defaultGetStoreFunc}function get(t,e=defaultGetStore()){return e("readonly",n=>promisifyRequest(n.get(t)))}function set(t,e,n=defaultGetStore()){return n("readwrite",r=>(r.put(e,t),promisifyRequest(r.transaction)))}function del(t,e=defaultGetStore()){return e("readwrite",n=>(n.delete(t),promisifyRequest(n.transaction)))}const alreadyWarnFor=[],warnStorageNotFound=t=>{var e;const n=typeof process!="undefined"&&((e=process.env)===null||e===void 0?void 0:e.NODE_ENV)==="production";if(alreadyWarnFor.indexOf(t)===-1&&!n){let r=`Unable to find the ${t}. No data will be persisted.`;typeof window=="undefined"&&(r+=`
Are you running on a server? Most of storages are not available while running on a server.`),console.warn(r),alreadyWarnFor.push(t)}},allowedClasses=[],serialize=t=>ESSerializer.serialize(t),deserialize=t=>{if(t!=="undefined"){if(t!=null){try{return ESSerializer.deserialize(t,allowedClasses)}catch{}try{return JSON.parse(t)}catch{}}return t}};function persist(t,e,n){const r=e.getValue(n);return r!==null&&t.set(r),e.addListener&&e.addListener(n,o=>{t.set(o)}),t.subscribe(o=>{e.setValue(n,o)}),Object.assign(Object.assign({},t),{delete(){e.deleteValue(n)}})}function indexedDBStorage(){if(typeof indexedDB!="object"||typeof window=="undefined"||typeof(window==null?void 0:window.indexedDB)!="object")return warnStorageNotFound("IndexedDB"),noopSelfUpdateStorage();const t=createStore("svelte-persist","persist"),e=[],n=(r,o)=>{o!==void 0&&e.filter(({key:i})=>i===r).forEach(({listener:i})=>i(o))};return{addListener(r,o){e.push({key:r,listener:o})},removeListener(r,o){const i=e.indexOf({key:r,listener:o});i!==-1&&e.splice(i,1)},getValue(r){return get(r,t).then(o=>n(r,deserialize(o))),null},setValue(r,o){set(r,serialize(o),t)},deleteValue(r){del(r,t)}}}function noopSelfUpdateStorage(){return{addListener(){},removeListener(){},getValue(){return null},deleteValue(){},setValue(){}}}const subscriptionsStore=persist(writable(),indexedDBStorage(),"subscriptions"),settingsStore=writable(),editorVisible=writable(!1),playerStore=writable();function create_default_slot_2$1(t){let e;return{c(){e=element("a"),e.textContent="Youtube Video Deck",attr(e,"class","font-extrabold"),attr(e,"href","#")},m(n,r){insert(n,e,r)},p:noop,d(n){n&&detach(e)}}}function create_if_block_1$2(t){let e,n;return e=new PrimaryButton({props:{class:"w-20 m-1",$$slots:{default:[create_default_slot_1$2]},$$scope:{ctx:t}}}),e.$on("click",t[2]),{c(){create_component(e.$$.fragment)},m(r,o){mount_component(e,r,o),n=!0},p(r,o){const i={};o&16&&(i.$$scope={dirty:o,ctx:r}),e.$set(i)},i(r){n||(transition_in(e.$$.fragment,r),n=!0)},o(r){transition_out(e.$$.fragment,r),n=!1},d(r){destroy_component(e,r)}}}function create_default_slot_1$2(t){let e;return{c(){e=text("Edit")},m(n,r){insert(n,e,r)},d(n){n&&detach(e)}}}function create_before_slot(t){let e,n,r=t[1]&&create_if_block_1$2(t);return{c(){e=element("div"),r&&r.c(),attr(e,"slot","before"),attr(e,"class","float-left p-1")},m(o,i){insert(o,e,i),r&&r.m(e,null),n=!0},p(o,i){o[1]?r?(r.p(o,i),i&2&&transition_in(r,1)):(r=create_if_block_1$2(o),r.c(),transition_in(r,1),r.m(e,null)):r&&(group_outros(),transition_out(r,1,1,()=>{r=null}),check_outros())},i(o){n||(transition_in(r),n=!0)},o(o){transition_out(r),n=!1},d(o){o&&detach(e),r&&r.d()}}}function create_if_block$4(t){let e,n;return e=new PrimaryButton({props:{class:"w-20 m-1",$$slots:{default:[create_default_slot$2]},$$scope:{ctx:t}}}),e.$on("click",signOut),{c(){create_component(e.$$.fragment)},m(r,o){mount_component(e,r,o),n=!0},p(r,o){const i={};o&16&&(i.$$scope={dirty:o,ctx:r}),e.$set(i)},i(r){n||(transition_in(e.$$.fragment,r),n=!0)},o(r){transition_out(e.$$.fragment,r),n=!1},d(r){destroy_component(e,r)}}}function create_default_slot$2(t){let e;return{c(){e=text("Sign out")},m(n,r){insert(n,e,r)},d(n){n&&detach(e)}}}function create_after_slot(t){let e,n,r=t[0]&&create_if_block$4(t);return{c(){e=element("div"),r&&r.c(),attr(e,"slot","after"),attr(e,"class","float-right p-1")},m(o,i){insert(o,e,i),r&&r.m(e,null),n=!0},p(o,i){o[0]?r?(r.p(o,i),i&1&&transition_in(r,1)):(r=create_if_block$4(o),r.c(),transition_in(r,1),r.m(e,null)):r&&(group_outros(),transition_out(r,1,1,()=>{r=null}),check_outros())},i(o){n||(transition_in(r),n=!0)},o(o){transition_out(r),n=!1},d(o){o&&detach(e),r&&r.d()}}}function create_fragment$7(t){let e,n,r;return n=new Center({props:{$$slots:{after:[create_after_slot],before:[create_before_slot],default:[create_default_slot_2$1]},$$scope:{ctx:t}}}),{c(){e=element("header"),create_component(n.$$.fragment),attr(e,"class","w-full h-12")},m(o,i){insert(o,e,i),mount_component(n,e,null),r=!0},p(o,[i]){const s={};i&19&&(s.$$scope={dirty:i,ctx:o}),n.$set(s)},i(o){r||(transition_in(n.$$.fragment,o),r=!0)},o(o){transition_out(n.$$.fragment,o),r=!1},d(o){o&&detach(e),destroy_component(n)}}}function signOut(){gapi.auth2.getAuthInstance().signOut()}function instance$7(t,e,n){let r;component_subscribe(t,editorVisible,a=>n(3,r=a));let{isSignedIn:o}=e,{isAuthorized:i}=e;function s(){set_store_value(editorVisible,r=!0,r)}return t.$$set=a=>{"isSignedIn"in a&&n(0,o=a.isSignedIn),"isAuthorized"in a&&n(1,i=a.isAuthorized)},[o,i,s]}class Header extends SvelteComponent{constructor(e){super(),init(this,e,instance$7,create_fragment$7,safe_not_equal,{isSignedIn:0,isAuthorized:1})}}function Video(t){return{title:t.snippet.title,description:t.snippet.description.substring(0,313),publishedAt:t.snippet.publishedAt,thumbnailUrl:t.snippet.thumbnails.medium.url,videoId:t.snippet.resourceId.videoId}}function Subscription(t,e){return{channelId:t.snippet.resourceId.channelId,title:t.snippet.title,thumbnailUrl:t.snippet.thumbnails.default.url,uploadsPlaylistId:e.contentDetails.relatedPlaylists.uploads,uploads:[]}}function addUploads(t,e){t.uploadsEtag==null&&(t.uploadsEtag=e.etag),t.nextUploadPageToken=e.nextPageToken,e.items.forEach(n=>t.uploads.push(Video(n)))}function clearUploads(t){t.uploadsEtag=null,t.nextUploadPageToken=null,t.uploads=[]}function Subscriptions(t,e){return{etag:t.etag,items:t.items.flatMap(n=>n.map(r=>{const o=e.get(r.snippet.resourceId.channelId);return Subscription(r,o)}))}}var defaultLocale$1="en",localesData$1={},lowercaseLocaleLookup={};function getDefaultLocale(){return defaultLocale$1}function setDefaultLocale(t){defaultLocale$1=t}function getLocaleData$1(t){return localesData$1[t]}function addLocaleData$1(t){if(!t)throw new Error("No locale data passed");localesData$1[t.locale]=t,lowercaseLocaleLookup[t.locale.toLowerCase()]=t.locale}function resolveLocale$1(t){if(localesData$1[t])return t;if(lowercaseLocaleLookup[t.toLowerCase()])return lowercaseLocaleLookup[t.toLowerCase()]}function resolveLocale(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=e.localeMatcher||"lookup";switch(n){case"lookup":return resolveLocaleLookup(t);case"best fit":return resolveLocaleLookup(t);default:throw new RangeError('Invalid "localeMatcher" option: '.concat(n))}}function resolveLocaleLookup(t){var e=resolveLocale$1(t);if(e)return e;for(var n=t.split("-");t.length>1;){n.pop(),t=n.join("-");var r=resolveLocale$1(t);if(r)return r}}var $={af:function t(e){return e==1?"one":"other"},am:function t(e){return e>=0&&e<=1?"one":"other"},ar:function t(e){var n=String(e).split("."),r=Number(n[0])==e,o=r&&n[0].slice(-2);return e==0?"zero":e==1?"one":e==2?"two":o>=3&&o<=10?"few":o>=11&&o<=99?"many":"other"},ast:function t(e){var n=String(e).split("."),r=!n[1];return e==1&&r?"one":"other"},be:function t(e){var n=String(e).split("."),r=Number(n[0])==e,o=r&&n[0].slice(-1),i=r&&n[0].slice(-2);return o==1&&i!=11?"one":o>=2&&o<=4&&(i<12||i>14)?"few":r&&o==0||o>=5&&o<=9||i>=11&&i<=14?"many":"other"},br:function t(e){var n=String(e).split("."),r=Number(n[0])==e,o=r&&n[0].slice(-1),i=r&&n[0].slice(-2),s=r&&n[0].slice(-6);return o==1&&i!=11&&i!=71&&i!=91?"one":o==2&&i!=12&&i!=72&&i!=92?"two":(o==3||o==4||o==9)&&(i<10||i>19)&&(i<70||i>79)&&(i<90||i>99)?"few":e!=0&&r&&s==0?"many":"other"},bs:function t(e){var n=String(e).split("."),r=n[0],o=n[1]||"",i=!n[1],s=r.slice(-1),a=r.slice(-2),l=o.slice(-1),u=o.slice(-2);return i&&s==1&&a!=11||l==1&&u!=11?"one":i&&s>=2&&s<=4&&(a<12||a>14)||l>=2&&l<=4&&(u<12||u>14)?"few":"other"},ceb:function t(e){var n=String(e).split("."),r=n[0],o=n[1]||"",i=!n[1],s=r.slice(-1),a=o.slice(-1);return i&&(r==1||r==2||r==3)||i&&s!=4&&s!=6&&s!=9||!i&&a!=4&&a!=6&&a!=9?"one":"other"},cs:function t(e){var n=String(e).split("."),r=n[0],o=!n[1];return e==1&&o?"one":r>=2&&r<=4&&o?"few":o?"other":"many"},cy:function t(e){return e==0?"zero":e==1?"one":e==2?"two":e==3?"few":e==6?"many":"other"},da:function t(e){var n=String(e).split("."),r=n[0],o=Number(n[0])==e;return e==1||!o&&(r==0||r==1)?"one":"other"},dsb:function t(e){var n=String(e).split("."),r=n[0],o=n[1]||"",i=!n[1],s=r.slice(-2),a=o.slice(-2);return i&&s==1||a==1?"one":i&&s==2||a==2?"two":i&&(s==3||s==4)||a==3||a==4?"few":"other"},dz:function t(e){return"other"},es:function t(e){var n=String(e).split("."),r=n[0],o=!n[1],i=r.slice(-6);return e==1?"one":r!=0&&i==0&&o?"many":"other"},ff:function t(e){return e>=0&&e<2?"one":"other"},fr:function t(e){var n=String(e).split("."),r=n[0],o=!n[1],i=r.slice(-6);return e>=0&&e<2?"one":r!=0&&i==0&&o?"many":"other"},ga:function t(e){var n=String(e).split("."),r=Number(n[0])==e;return e==1?"one":e==2?"two":r&&e>=3&&e<=6?"few":r&&e>=7&&e<=10?"many":"other"},gd:function t(e){var n=String(e).split("."),r=Number(n[0])==e;return e==1||e==11?"one":e==2||e==12?"two":r&&e>=3&&e<=10||r&&e>=13&&e<=19?"few":"other"},he:function t(e){var n=String(e).split("."),r=n[0],o=!n[1],i=Number(n[0])==e,s=i&&n[0].slice(-1);return e==1&&o?"one":r==2&&o?"two":o&&(e<0||e>10)&&i&&s==0?"many":"other"},is:function t(e){var n=String(e).split("."),r=n[0],o=Number(n[0])==e,i=r.slice(-1),s=r.slice(-2);return o&&i==1&&s!=11||!o?"one":"other"},it:function t(e){var n=String(e).split("."),r=n[0],o=!n[1],i=r.slice(-6);return e==1&&o?"one":r!=0&&i==0&&o?"many":"other"},ksh:function t(e){return e==0?"zero":e==1?"one":"other"},lt:function t(e){var n=String(e).split("."),r=n[1]||"",o=Number(n[0])==e,i=o&&n[0].slice(-1),s=o&&n[0].slice(-2);return i==1&&(s<11||s>19)?"one":i>=2&&i<=9&&(s<11||s>19)?"few":r!=0?"many":"other"},lv:function t(e){var n=String(e).split("."),r=n[1]||"",o=r.length,i=Number(n[0])==e,s=i&&n[0].slice(-1),a=i&&n[0].slice(-2),l=r.slice(-2),u=r.slice(-1);return i&&s==0||a>=11&&a<=19||o==2&&l>=11&&l<=19?"zero":s==1&&a!=11||o==2&&u==1&&l!=11||o!=2&&u==1?"one":"other"},mk:function t(e){var n=String(e).split("."),r=n[0],o=n[1]||"",i=!n[1],s=r.slice(-1),a=r.slice(-2),l=o.slice(-1),u=o.slice(-2);return i&&s==1&&a!=11||l==1&&u!=11?"one":"other"},mt:function t(e){var n=String(e).split("."),r=Number(n[0])==e,o=r&&n[0].slice(-2);return e==1?"one":e==0||o>=2&&o<=10?"few":o>=11&&o<=19?"many":"other"},pa:function t(e){return e==0||e==1?"one":"other"},pl:function t(e){var n=String(e).split("."),r=n[0],o=!n[1],i=r.slice(-1),s=r.slice(-2);return e==1&&o?"one":o&&i>=2&&i<=4&&(s<12||s>14)?"few":o&&r!=1&&(i==0||i==1)||o&&i>=5&&i<=9||o&&s>=12&&s<=14?"many":"other"},pt:function t(e){var n=String(e).split("."),r=n[0],o=!n[1],i=r.slice(-6);return r==0||r==1?"one":r!=0&&i==0&&o?"many":"other"},ro:function t(e){var n=String(e).split("."),r=!n[1],o=Number(n[0])==e,i=o&&n[0].slice(-2);return e==1&&r?"one":!r||e==0||i>=2&&i<=19?"few":"other"},ru:function t(e){var n=String(e).split("."),r=n[0],o=!n[1],i=r.slice(-1),s=r.slice(-2);return o&&i==1&&s!=11?"one":o&&i>=2&&i<=4&&(s<12||s>14)?"few":o&&i==0||o&&i>=5&&i<=9||o&&s>=11&&s<=14?"many":"other"},se:function t(e){return e==1?"one":e==2?"two":"other"},si:function t(e){var n=String(e).split("."),r=n[0],o=n[1]||"";return e==0||e==1||r==0&&o==1?"one":"other"},sl:function t(e){var n=String(e).split("."),r=n[0],o=!n[1],i=r.slice(-2);return o&&i==1?"one":o&&i==2?"two":o&&(i==3||i==4)||!o?"few":"other"}};$.as=$.am;$.az=$.af;$.bg=$.af;$.bn=$.am;$.brx=$.af;$.ca=$.ast;$.ce=$.af;$.chr=$.af;$.de=$.ast;$.ee=$.af;$.el=$.af;$.en=$.ast;$.et=$.ast;$.eu=$.af;$.fa=$.am;$.fi=$.ast;$.fil=$.ceb;$.fo=$.af;$.fur=$.af;$.fy=$.ast;$.gl=$.ast;$.gu=$.am;$.ha=$.af;$.hi=$.am;$.hr=$.bs;$.hsb=$.dsb;$.hu=$.af;$.hy=$.ff;$.ia=$.ast;$.id=$.dz;$.ig=$.dz;$.ja=$.dz;$.jgo=$.af;$.jv=$.dz;$.ka=$.af;$.kea=$.dz;$.kk=$.af;$.kl=$.af;$.km=$.dz;$.kn=$.am;$.ko=$.dz;$.ku=$.af;$.ky=$.af;$.lb=$.af;$.lkt=$.dz;$.lo=$.dz;$.ml=$.af;$.mn=$.af;$.mr=$.af;$.ms=$.dz;$.my=$.dz;$.nb=$.af;$.ne=$.af;$.nl=$.ast;$.nn=$.af;$.no=$.af;$.or=$.af;$.pcm=$.am;$.ps=$.af;$.rm=$.af;$.sah=$.dz;$.sc=$.ast;$.sd=$.af;$.sk=$.cs;$.so=$.af;$.sq=$.af;$.sr=$.bs;$.su=$.dz;$.sv=$.ast;$.sw=$.ast;$.ta=$.af;$.te=$.af;$.th=$.dz;$.ti=$.pa;$.tk=$.af;$.to=$.dz;$.tr=$.af;$.ug=$.af;$.uk=$.ru;$.ur=$.ast;$.uz=$.af;$.vi=$.dz;$.wae=$.af;$.wo=$.dz;$.yi=$.ast;$.yo=$.dz;$.yue=$.dz;$.zh=$.dz;$.zu=$.am;var PluralRuleFunctions=$;function getPluralRulesLocale(t){return t==="pt-PT"?t:getLanguageFromLanguageTag(t)}var LANGUAGE_REG_EXP=/^([a-z0-9]+)/i;function getLanguageFromLanguageTag(t){var e=t.match(LANGUAGE_REG_EXP);if(!e)throw new TypeError("Invalid locale: ".concat(t));return e[1]}function _classCallCheck$3(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _defineProperties$3(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function _createClass$3(t,e,n){return e&&_defineProperties$3(t.prototype,e),n&&_defineProperties$3(t,n),t}var PluralRules=function(){function t(e,n){_classCallCheck$3(this,t);var r=t.supportedLocalesOf(e);if(r.length===0)throw new RangeError("Unsupported locale: "+e);if(n&&n.type!=="cardinal")throw new RangeError('Only "cardinal" "type" is supported');this.$=PluralRuleFunctions[getPluralRulesLocale(r[0])]}return _createClass$3(t,[{key:"select",value:function(n){return this.$(n)}}],[{key:"supportedLocalesOf",value:function(n){return typeof n=="string"&&(n=[n]),n.filter(function(r){return PluralRuleFunctions[getPluralRulesLocale(r)]})}}]),t}();function _typeof$5(t){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?_typeof$5=function(n){return typeof n}:_typeof$5=function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},_typeof$5(t)}function _objectSpread$9(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{},r=Object.keys(n);typeof Object.getOwnPropertySymbols=="function"&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(o){return Object.getOwnPropertyDescriptor(n,o).enumerable}))),r.forEach(function(o){_defineProperty$a(t,o,n[o])})}return t}function _slicedToArray$1(t,e){return _arrayWithHoles$1(t)||_iterableToArrayLimit$1(t,e)||_nonIterableRest$1()}function _nonIterableRest$1(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function _iterableToArrayLimit$1(t,e){var n=[],r=!0,o=!1,i=void 0;try{for(var s=t[Symbol.iterator](),a;!(r=(a=s.next()).done)&&(n.push(a.value),!(e&&n.length===e));r=!0);}catch(l){o=!0,i=l}finally{try{!r&&s.return!=null&&s.return()}finally{if(o)throw i}}return n}function _arrayWithHoles$1(t){if(Array.isArray(t))return t}function _classCallCheck$2(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _defineProperties$2(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function _createClass$2(t,e,n){return e&&_defineProperties$2(t.prototype,e),n&&_defineProperties$2(t,n),t}function _defineProperty$a(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var UNITS=["second","minute","hour","day","week","month","quarter","year"],NUMERIC_VALUES=["auto","always"],STYLE_VALUES=["long","short","narrow"],LOCALE_MATCHER_VALUES=["lookup","best fit"],RelativeTimeFormat=function(){function t(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};_classCallCheck$2(this,t),_defineProperty$a(this,"numeric","always"),_defineProperty$a(this,"style","long"),_defineProperty$a(this,"localeMatcher","lookup");var r=n.numeric,o=n.style,i=n.styleFallback,s=n.localeMatcher;if(r!==void 0){if(NUMERIC_VALUES.indexOf(r)<0)throw new RangeError('Invalid "numeric" option: '.concat(r));this.numeric=r}if(o!==void 0){if(STYLE_VALUES.indexOf(o)<0&&!i)throw new RangeError('Invalid "style" option: '.concat(o));this.style=o}if(s!==void 0){if(LOCALE_MATCHER_VALUES.indexOf(s)<0)throw new RangeError('Invalid "localeMatcher" option: '.concat(s));this.localeMatcher=s}if(typeof e=="string"&&(e=[e]),e.push(getDefaultLocale()),this.locale=t.supportedLocalesOf(e,{localeMatcher:this.localeMatcher})[0],!this.locale)throw new Error("No supported locale was found");if(PluralRules.supportedLocalesOf(this.locale).length>0?this.pluralRules=new PluralRules(this.locale):console.warn('"'.concat(this.locale,'" locale is not supported')),typeof Intl!="undefined"&&Intl.NumberFormat?(this.numberFormat=new Intl.NumberFormat(this.locale),this.numberingSystem=this.numberFormat.resolvedOptions().numberingSystem):this.numberingSystem="latn",this.locale=resolveLocale(this.locale,{localeMatcher:this.localeMatcher}),i)for(var a=Object.keys(getLocaleData$1(this.locale)),l=[this.style].concat(STYLE_VALUES,[a[0]]),u=0;u<l.length;u++){var d=l[u];if(a.indexOf(d)>=0){this.style=d;break}}}return _createClass$2(t,[{key:"format",value:function(){var n=parseFormatArgs(arguments),r=_slicedToArray$1(n,2),o=r[0],i=r[1];return this.getRule(o,i).replace("{0}",this.formatNumber(Math.abs(o)))}},{key:"formatToParts",value:function(){var n=parseFormatArgs(arguments),r=_slicedToArray$1(n,2),o=r[0],i=r[1],s=this.getRule(o,i),a=s.indexOf("{0}");if(a<0)return[{type:"literal",value:s}];var l=[];return a>0&&l.push({type:"literal",value:s.slice(0,a)}),l=l.concat(this.formatNumberToParts(Math.abs(o)).map(function(u){return _objectSpread$9({},u,{unit:i})})),a+3<s.length-1&&l.push({type:"literal",value:s.slice(a+3)}),l}},{key:"getRule",value:function(n,r){var o=getLocaleData$1(this.locale)[this.style][r];if(typeof o=="string")return o;if(this.numeric==="auto"){if(n===-2||n===-1){var i=o["previous".concat(n===-1?"":"-"+Math.abs(n))];if(i)return i}else if(n===1||n===2){var s=o["next".concat(n===1?"":"-"+Math.abs(n))];if(s)return s}else if(n===0&&o.current)return o.current}var a=o[isNegative(n)?"past":"future"];if(typeof a=="string")return a;var l=this.pluralRules&&this.pluralRules.select(Math.abs(n))||"other";return a[l]||a.other}},{key:"formatNumber",value:function(n){return this.numberFormat?this.numberFormat.format(n):String(n)}},{key:"formatNumberToParts",value:function(n){return this.numberFormat&&this.numberFormat.formatToParts?this.numberFormat.formatToParts(n):[{type:"integer",value:this.formatNumber(n)}]}},{key:"resolvedOptions",value:function(){return{locale:this.locale,style:this.style,numeric:this.numeric,numberingSystem:this.numberingSystem}}}]),t}();RelativeTimeFormat.supportedLocalesOf=function(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(typeof t=="string")t=[t];else if(!Array.isArray(t))throw new TypeError('Invalid "locales" argument');return t.filter(function(n){return resolveLocale(n,e)})};RelativeTimeFormat.addLocale=addLocaleData$1;RelativeTimeFormat.setDefaultLocale=setDefaultLocale;RelativeTimeFormat.getDefaultLocale=getDefaultLocale;RelativeTimeFormat.PluralRules=PluralRules;var UNIT_ERROR='Invalid "unit" argument';function parseUnit(t){if(_typeof$5(t)==="symbol")throw new TypeError(UNIT_ERROR);if(typeof t!="string")throw new RangeError("".concat(UNIT_ERROR,": ").concat(t));if(t[t.length-1]==="s"&&(t=t.slice(0,t.length-1)),UNITS.indexOf(t)<0)throw new RangeError("".concat(UNIT_ERROR,": ").concat(t));return t}var NUMBER_ERROR='Invalid "number" argument';function parseNumber(t){if(t=Number(t),Number.isFinite&&!Number.isFinite(t))throw new RangeError("".concat(NUMBER_ERROR,": ").concat(t));return t}function isNegativeZero(t){return 1/t===-1/0}function isNegative(t){return t<0||t===0&&isNegativeZero(t)}function parseFormatArgs(t){if(t.length<2)throw new TypeError('"unit" argument is required');return[parseNumber(t[0]),parseUnit(t[1])]}function _typeof$4(t){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?_typeof$4=function(n){return typeof n}:_typeof$4=function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},_typeof$4(t)}function _classCallCheck$1(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _defineProperties$1(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function _createClass$1(t,e,n){return e&&_defineProperties$1(t.prototype,e),n&&_defineProperties$1(t,n),t}function _defineProperty$9(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var Cache=function(){function t(){_classCallCheck$1(this,t),_defineProperty$9(this,"cache",{})}return _createClass$1(t,[{key:"get",value:function(){for(var n=this.cache,r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];for(var s=0;s<o.length;s++){var a=o[s];if(_typeof$4(n)!=="object")return;n=n[a]}return n}},{key:"put",value:function(){for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];for(var i=r.pop(),s=r.pop(),a=this.cache,l=0;l<r.length;l++){var u=r[l];_typeof$4(a[u])!=="object"&&(a[u]={}),a=a[u]}return a[s]=i}}]),t}();function _typeof$3(t){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?_typeof$3=function(n){return typeof n}:_typeof$3=function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},_typeof$3(t)}function chooseLocale(t,e){for(var o=t,n=Array.isArray(o),r=0,o=n?o:o[Symbol.iterator]();;){var i;if(n){if(r>=o.length)break;i=o[r++]}else{if(r=o.next(),r.done)break;i=r.value}var s=i;if(e(s))return s;for(var a=s.split("-");a.length>1;)if(a.pop(),s=a.join("-"),e(s))return s}throw new Error("No locale data has been registered for any of the locales: ".concat(t.join(", ")))}function intlDateTimeFormatSupported(){var t=(typeof Intl=="undefined"?"undefined":_typeof$3(Intl))==="object";return t&&typeof Intl.DateTimeFormat=="function"}function _typeof$2(t){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?_typeof$2=function(n){return typeof n}:_typeof$2=function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},_typeof$2(t)}function isStyleObject(t){return isObject(t)&&(Array.isArray(t.steps)||Array.isArray(t.gradation)||Array.isArray(t.flavour)||typeof t.flavour=="string"||Array.isArray(t.labels)||typeof t.labels=="string"||Array.isArray(t.units)||typeof t.custom=="function")}var OBJECT_CONSTRUCTOR={}.constructor;function isObject(t){return _typeof$2(t)!==void 0&&t!==null&&t.constructor===OBJECT_CONSTRUCTOR}var minute=60,hour=60*minute,day=24*hour,week=7*day,month=30.44*day,year=146097/400*day;function getSecondsInUnit(t){switch(t){case"second":return 1;case"minute":return minute;case"hour":return hour;case"day":return day;case"week":return week;case"month":return month;case"year":return year}}function getStepDenominator(t){return t.factor!==void 0?t.factor:getSecondsInUnit(t.unit||t.formatAs)||1}function getRoundFunction(t){switch(t){case"floor":return Math.floor;default:return Math.round}}function getDiffRatioToNextRoundedNumber(t){switch(t){case"floor":return 1;default:return .5}}function _typeof$1(t){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?_typeof$1=function(n){return typeof n}:_typeof$1=function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},_typeof$1(t)}function getStepMinTime(t,e){var n=e.prevStep,r=e.timestamp,o=e.now,i=e.future,s=e.round,a;return n&&(n.id||n.unit)&&(a=t["threshold_for_".concat(n.id||n.unit)]),a===void 0&&t.threshold!==void 0&&(a=t.threshold,typeof a=="function"&&(a=a(o,i))),a===void 0&&(a=t.minTime),_typeof$1(a)==="object"&&(n&&n.id&&a[n.id]!==void 0?a=a[n.id]:a=a.default),typeof a=="function"&&(a=a(r,{future:i,getMinTimeForUnit:function(u,d){return _getMinTimeForUnit(u,d||n&&n.formatAs,{round:s})}})),a===void 0&&t.test&&(t.test(r,{now:o,future:i})?a=0:a=9007199254740991),a===void 0&&(n?t.formatAs&&n.formatAs&&(a=_getMinTimeForUnit(t.formatAs,n.formatAs,{round:s})):a=0),a===void 0&&console.warn("[javascript-time-ago] A step should specify `minTime`:\n"+JSON.stringify(t,null,2)),a}function _getMinTimeForUnit(t,e,n){var r=n.round,o=getSecondsInUnit(t),i;if(e==="now"?i=getSecondsInUnit(t):i=getSecondsInUnit(e),o!==void 0&&i!==void 0)return o-i*(1-getDiffRatioToNextRoundedNumber(r))}function _objectSpread$8(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{},r=Object.keys(n);typeof Object.getOwnPropertySymbols=="function"&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(o){return Object.getOwnPropertyDescriptor(n,o).enumerable}))),r.forEach(function(o){_defineProperty$8(t,o,n[o])})}return t}function _defineProperty$8(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function getStep(t,e,n){var r=n.now,o=n.future,i=n.round,s=n.units,a=n.getNextStep;t=filterStepsByUnits(t,s);var l=_getStep(t,e,{now:r,future:o,round:i});if(a){if(l){var u=t[t.indexOf(l)-1],d=t[t.indexOf(l)+1];return[u,l,d]}return[void 0,void 0,t[0]]}return l}function _getStep(t,e,n){var r=n.now,o=n.future,i=n.round;if(t.length!==0){var s=getStepIndex(t,e,{now:r,future:o||e<0,round:i});if(s!==-1){var a=t[s];if(a.granularity){var l=getRoundFunction(i)(Math.abs(e)/getStepDenominator(a)/a.granularity)*a.granularity;if(l===0&&s>0)return t[s-1]}return a}}}function getStepIndex(t,e,n){var r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0,o=getStepMinTime(t[r],_objectSpread$8({prevStep:t[r-1],timestamp:n.now-e*1e3},n));return o===void 0||Math.abs(e)<o?r-1:r===t.length-1?r:getStepIndex(t,e,n,r+1)}function filterStepsByUnits(t,e){return t.filter(function(n){var r=n.unit,o=n.formatAs;return r=r||o,r?e.indexOf(r)>=0:!0})}function getTimeToNextUpdateForUnit(t,e,n){var r=n.now,o=n.round;if(!!getSecondsInUnit(t)){var i=getSecondsInUnit(t)*1e3,s=e>r,a=Math.abs(e-r),l=getRoundFunction(o)(a/i)*i;return s?l>0?a-l+getDiffToPreviousRoundedNumber(o,i):a-l+1:-(a-l)+getDiffToNextRoundedNumber(o,i)}}function getDiffToNextRoundedNumber(t,e){return getDiffRatioToNextRoundedNumber(t)*e}function getDiffToPreviousRoundedNumber(t,e){return(1-getDiffRatioToNextRoundedNumber(t))*e+1}var YEAR=365*24*60*60*1e3,INFINITY=1e3*YEAR;function getTimeToNextUpdate(t,e,n){var r=n.prevStep,o=n.nextStep,i=n.now,s=n.future,a=n.round,l=t.getTime?t.getTime():t,u=function(m){return getTimeToNextUpdateForUnit(m,l,{now:i,round:a})},d=getTimeToStepChange(s?e:o,l,{future:s,now:i,round:a,prevStep:s?r:e});if(d!==void 0){var f;if(e&&(e.getTimeToNextUpdate&&(f=e.getTimeToNextUpdate(l,{getTimeToNextUpdateForUnit:u,getRoundFunction,now:i,future:s,round:a})),f===void 0)){var c=e.unit||e.formatAs;c&&(f=u(c))}return f===void 0?d:Math.min(f,d)}}function getStepChangesAt(t,e,n){var r=n.now,o=n.future,i=n.round,s=n.prevStep,a=getStepMinTime(t,{timestamp:e,now:r,future:o,round:i,prevStep:s});if(a!==void 0)return o?e-a*1e3+1:a===0&&e===r?INFINITY:e+a*1e3}function getTimeToStepChange(t,e,n){var r=n.now,o=n.future,i=n.round,s=n.prevStep;if(t){var a=getStepChangesAt(t,e,{now:r,future:o,round:i,prevStep:s});return a===void 0?void 0:a-r}else return o?e-r+1:INFINITY}var localesData={};function getLocaleData(t){return localesData[t]}function addLocaleData(t){if(!t)throw new Error("[javascript-time-ago] No locale data passed.");localesData[t.locale]=t}var round$1=[{formatAs:"now"},{formatAs:"second"},{formatAs:"minute"},{formatAs:"hour"},{formatAs:"day"},{formatAs:"week"},{formatAs:"month"},{formatAs:"year"}],round={steps:round$1,labels:"long"};function _objectSpread$7(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{},r=Object.keys(n);typeof Object.getOwnPropertySymbols=="function"&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(o){return Object.getOwnPropertyDescriptor(n,o).enumerable}))),r.forEach(function(o){_defineProperty$7(t,o,n[o])})}return t}function _defineProperty$7(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var defaultStyle=_objectSpread$7({},round,{steps:round.steps.filter(function(t){return t.formatAs!=="second"})}),approximate$1=[{factor:1,unit:"now"},{threshold:1,threshold_for_now:45.5,factor:1,unit:"second"},{threshold:45.5,factor:minute,unit:"minute"},{threshold:2.5*minute,granularity:5,factor:minute,unit:"minute"},{threshold:22.5*minute,factor:.5*hour,unit:"half-hour"},{threshold:42.5*minute,threshold_for_minute:52.5*minute,factor:hour,unit:"hour"},{threshold:20.5/24*day,factor:day,unit:"day"},{threshold:5.5*day,factor:week,unit:"week"},{threshold:3.5*week,factor:month,unit:"month"},{threshold:10.5*month,factor:year,unit:"year"}],approximate={gradation:approximate$1,flavour:"long",units:["now","minute","hour","day","week","month","year"]},approximateTime={gradation:approximate$1,flavour:"long-time",units:["now","minute","hour","day","week","month","year"]};function getDate(t){return t instanceof Date?t:new Date(t)}var steps=[{formatAs:"second"},{formatAs:"minute"},{formatAs:"hour"}],formatters={},monthAndDay={minTime:function t(e,n){n.future;var r=n.getMinTimeForUnit;return r("day")},format:function t(e,n){return formatters[n]||(formatters[n]={}),formatters[n].dayMonth||(formatters[n].dayMonth=new Intl.DateTimeFormat(n,{month:"short",day:"numeric"})),formatters[n].dayMonth.format(getDate(e))}},yearMonthAndDay={minTime:function t(e,n){var r=n.future;if(r){var o=new Date(new Date(e).getFullYear(),0).getTime()-1;return(e-o)/1e3}else{var i=new Date(new Date(e).getFullYear()+1,0).getTime();return(i-e)/1e3}},format:function t(e,n){return formatters[n]||(formatters[n]={}),formatters[n].dayMonthYear||(formatters[n].dayMonthYear=new Intl.DateTimeFormat(n,{year:"numeric",month:"short",day:"numeric"})),formatters[n].dayMonthYear.format(getDate(e))}};intlDateTimeFormatSupported()?steps.push(monthAndDay,yearMonthAndDay):steps.push({formatAs:"day"},{formatAs:"week"},{formatAs:"month"},{formatAs:"year"});var twitter={steps,labels:["mini","short-time","narrow","short"]};function _objectSpread$6(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{},r=Object.keys(n);typeof Object.getOwnPropertySymbols=="function"&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(o){return Object.getOwnPropertyDescriptor(n,o).enumerable}))),r.forEach(function(o){_defineProperty$6(t,o,n[o])})}return t}function _defineProperty$6(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var twitterNow=_objectSpread$6({},twitter,{steps:[{formatAs:"now"}].concat(twitter.steps)});function _objectSpread$5(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{},r=Object.keys(n);typeof Object.getOwnPropertySymbols=="function"&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(o){return Object.getOwnPropertyDescriptor(n,o).enumerable}))),r.forEach(function(o){_defineProperty$5(t,o,n[o])})}return t}function _defineProperty$5(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var twitterMinute=_objectSpread$5({},twitter,{steps:twitter.steps.filter(function(t){return t.formatAs!=="second"})});function _objectSpread$4(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{},r=Object.keys(n);typeof Object.getOwnPropertySymbols=="function"&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(o){return Object.getOwnPropertyDescriptor(n,o).enumerable}))),r.forEach(function(o){_defineProperty$4(t,o,n[o])})}return t}function _defineProperty$4(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var twitterMinuteNow=_objectSpread$4({},twitterMinute,{steps:[{formatAs:"now"}].concat(twitterMinute.steps)});function _objectSpread$3(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{},r=Object.keys(n);typeof Object.getOwnPropertySymbols=="function"&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(o){return Object.getOwnPropertyDescriptor(n,o).enumerable}))),r.forEach(function(o){_defineProperty$3(t,o,n[o])})}return t}function _defineProperty$3(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var twitterFirstMinute=_objectSpread$3({},twitter,{steps:twitter.steps.filter(function(t){return t.formatAs!=="second"}).map(function(t){return t.formatAs==="minute"?_objectSpread$3({},t,{minTime:minute}):t})}),mini$1={steps:[{formatAs:"second"},{formatAs:"minute"},{formatAs:"hour"},{formatAs:"day"},{formatAs:"month"},{formatAs:"year"}],labels:["mini","short-time","narrow","short"]};function _objectSpread$2(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{},r=Object.keys(n);typeof Object.getOwnPropertySymbols=="function"&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(o){return Object.getOwnPropertyDescriptor(n,o).enumerable}))),r.forEach(function(o){_defineProperty$2(t,o,n[o])})}return t}function _defineProperty$2(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var miniNow=_objectSpread$2({},mini$1,{steps:[{formatAs:"now"}].concat(mini$1.steps)});function _objectSpread$1(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{},r=Object.keys(n);typeof Object.getOwnPropertySymbols=="function"&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(o){return Object.getOwnPropertyDescriptor(n,o).enumerable}))),r.forEach(function(o){_defineProperty$1(t,o,n[o])})}return t}function _defineProperty$1(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var miniMinute=_objectSpread$1({},mini$1,{steps:mini$1.steps.filter(function(t){return t.formatAs!=="second"})});function _objectSpread(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{},r=Object.keys(n);typeof Object.getOwnPropertySymbols=="function"&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(o){return Object.getOwnPropertyDescriptor(n,o).enumerable}))),r.forEach(function(o){_defineProperty(t,o,n[o])})}return t}function _defineProperty(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var miniMinuteNow=_objectSpread({},miniMinute,{steps:[{formatAs:"now"}].concat(miniMinute.steps)});function getStyleByName(t){switch(t){case"default":case"round":return round;case"round-minute":return defaultStyle;case"approximate":return approximate;case"time":case"approximate-time":return approximateTime;case"mini":return mini$1;case"mini-now":return miniNow;case"mini-minute":return miniMinute;case"mini-minute-now":return miniMinuteNow;case"twitter":return twitter;case"twitter-now":return twitterNow;case"twitter-minute":return twitterMinute;case"twitter-minute-now":return twitterMinuteNow;case"twitter-first-minute":return twitterFirstMinute;default:return approximate}}function _typeof(t){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?_typeof=function(n){return typeof n}:_typeof=function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},_typeof(t)}function _slicedToArray(t,e){return _arrayWithHoles(t)||_iterableToArrayLimit(t,e)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function _iterableToArrayLimit(t,e){var n=[],r=!0,o=!1,i=void 0;try{for(var s=t[Symbol.iterator](),a;!(r=(a=s.next()).done)&&(n.push(a.value),!(e&&n.length===e));r=!0);}catch(l){o=!0,i=l}finally{try{!r&&s.return!=null&&s.return()}finally{if(o)throw i}}return n}function _arrayWithHoles(t){if(Array.isArray(t))return t}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _defineProperties(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function _createClass(t,e,n){return e&&_defineProperties(t.prototype,e),n&&_defineProperties(t,n),t}var TimeAgo=function(){function t(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=n.polyfill;_classCallCheck(this,t),typeof e=="string"&&(e=[e]),this.locale=chooseLocale(e.concat(t.getDefaultLocale()),getLocaleData),typeof Intl!="undefined"&&Intl.NumberFormat&&(this.numberFormat=new Intl.NumberFormat(this.locale)),r===!1?(this.IntlRelativeTimeFormat=Intl.RelativeTimeFormat,this.IntlPluralRules=Intl.PluralRules):(this.IntlRelativeTimeFormat=RelativeTimeFormat,this.IntlPluralRules=RelativeTimeFormat.PluralRules),this.relativeTimeFormatCache=new Cache,this.pluralRulesCache=new Cache}return _createClass(t,[{key:"format",value:function(n,r,o){o||(r&&!isStyle(r)?(o=r,r=void 0):o={}),r||(r=defaultStyle),typeof r=="string"&&(r=getStyleByName(r));var i=getTimestamp(n),s=this.getLabels(r.flavour||r.labels),a=s.labels,l=s.labelsType,u;r.now!==void 0&&(u=r.now),u===void 0&&o.now!==void 0&&(u=o.now),u===void 0&&(u=Date.now());var d=(u-i)/1e3,f=o.future||d<0,c=getNowLabel(a,getLocaleData(this.locale).now,getLocaleData(this.locale).long,f);if(r.custom){var _=r.custom({now:u,date:new Date(i),time:i,elapsed:d,locale:this.locale});if(_!==void 0)return _}var m=getTimeIntervalMeasurementUnits(r.units,a,c),h=o.round||r.round,y=getStep(r.gradation||r.steps||defaultStyle.steps,d,{now:u,units:m,round:h,future:f,getNextStep:!0}),g=_slicedToArray(y,3),I=g[0],T=g[1],R=g[2],L=this.formatDateForStep(i,T,d,{labels:a,labelsType:l,nowLabel:c,now:u,future:f,round:h})||"";if(o.getTimeToNextUpdate){var v=getTimeToNextUpdate(i,T,{nextStep:R,prevStep:I,now:u,future:f,round:h});return[L,v]}return L}},{key:"formatDateForStep",value:function(n,r,o,i){var s=this,a=i.labels,l=i.labelsType,u=i.nowLabel,d=i.now,f=i.future,c=i.round;if(!!r){if(r.format)return r.format(n,this.locale,{formatAs:function(g,I){return s.formatValue(I,g,{labels:a,future:f})},now:d,future:f});var _=r.unit||r.formatAs;if(!_)throw new Error("[javascript-time-ago] Each step must define either `formatAs` or `format()`. Step: ".concat(JSON.stringify(r)));if(_==="now")return u;var m=Math.abs(o)/getStepDenominator(r);r.granularity&&(m=getRoundFunction(c)(m/r.granularity)*r.granularity);var h=-1*Math.sign(o)*getRoundFunction(c)(m);switch(h===0&&(f?h=0:h=-0),l){case"long":case"short":case"narrow":return this.getFormatter(l).format(h,_);default:return this.formatValue(h,_,{labels:a,future:f})}}}},{key:"formatValue",value:function(n,r,o){var i=o.labels,s=o.future;return this.getFormattingRule(i,r,n,{future:s}).replace("{0}",this.formatNumber(Math.abs(n)))}},{key:"getFormattingRule",value:function(n,r,o,i){var s=i.future;if(this.locale,n=n[r],typeof n=="string")return n;var a=o===0?s?"future":"past":o<0?"past":"future",l=n[a]||n;if(typeof l=="string")return l;var u=this.getPluralRules().select(Math.abs(o));return l[u]||l.other}},{key:"formatNumber",value:function(n){return this.numberFormat?this.numberFormat.format(n):String(n)}},{key:"getFormatter",value:function(n){return this.relativeTimeFormatCache.get(this.locale,n)||this.relativeTimeFormatCache.put(this.locale,n,new this.IntlRelativeTimeFormat(this.locale,{style:n}))}},{key:"getPluralRules",value:function(){return this.pluralRulesCache.get(this.locale)||this.pluralRulesCache.put(this.locale,new this.IntlPluralRules(this.locale))}},{key:"getLabels",value:function(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];typeof n=="string"&&(n=[n]),n=n.map(function(u){switch(u){case"tiny":case"mini-time":return"mini";default:return u}}),n=n.concat("long");for(var r=getLocaleData(this.locale),s=n,o=Array.isArray(s),i=0,s=o?s:s[Symbol.iterator]();;){var a;if(o){if(i>=s.length)break;a=s[i++]}else{if(i=s.next(),i.done)break;a=i.value}var l=a;if(r[l])return{labelsType:l,labels:r[l]}}}}]),t}(),defaultLocale="en";TimeAgo.getDefaultLocale=function(){return defaultLocale};TimeAgo.setDefaultLocale=function(t){return defaultLocale=t};TimeAgo.addDefaultLocale=function(t){if(defaultLocaleHasBeenSpecified)return console.error("[javascript-time-ago] `TimeAgo.addDefaultLocale()` can only be called once. To add other locales, use `TimeAgo.addLocale()`.");defaultLocaleHasBeenSpecified=!0,TimeAgo.setDefaultLocale(t.locale),TimeAgo.addLocale(t)};var defaultLocaleHasBeenSpecified;TimeAgo.addLocale=function(t){addLocaleData(t),RelativeTimeFormat.addLocale(t)};TimeAgo.locale=TimeAgo.addLocale;TimeAgo.addLabels=function(t,e,n){var r=getLocaleData(t);r||(addLocaleData({locale:t}),r=getLocaleData(t)),r[e]=n};function getTimestamp(t){if(t.constructor===Date||isMockedDate(t))return t.getTime();if(typeof t=="number")return t;throw new Error("Unsupported relative time formatter input: ".concat(_typeof(t),", ").concat(t))}function isMockedDate(t){return _typeof(t)==="object"&&typeof t.getTime=="function"}function getTimeIntervalMeasurementUnits(t,e,n){var r=Object.keys(e);return n&&r.push("now"),t&&(r=t.filter(function(o){return o==="now"||r.indexOf(o)>=0})),r}function getNowLabel(t,e,n,r){var o=t.now||e&&e.now;if(o)return typeof o=="string"?o:r?o.future:o.past;if(n&&n.second&&n.second.current)return n.second.current}function isStyle(t){return typeof t=="string"||isStyleObject(t)}const locale="en",long={year:{previous:"last year",current:"this year",next:"next year",past:{one:"{0} year ago",other:"{0} years ago"},future:{one:"in {0} year",other:"in {0} years"}},quarter:{previous:"last quarter",current:"this quarter",next:"next quarter",past:{one:"{0} quarter ago",other:"{0} quarters ago"},future:{one:"in {0} quarter",other:"in {0} quarters"}},month:{previous:"last month",current:"this month",next:"next month",past:{one:"{0} month ago",other:"{0} months ago"},future:{one:"in {0} month",other:"in {0} months"}},week:{previous:"last week",current:"this week",next:"next week",past:{one:"{0} week ago",other:"{0} weeks ago"},future:{one:"in {0} week",other:"in {0} weeks"}},day:{previous:"yesterday",current:"today",next:"tomorrow",past:{one:"{0} day ago",other:"{0} days ago"},future:{one:"in {0} day",other:"in {0} days"}},hour:{current:"this hour",past:{one:"{0} hour ago",other:"{0} hours ago"},future:{one:"in {0} hour",other:"in {0} hours"}},minute:{current:"this minute",past:{one:"{0} minute ago",other:"{0} minutes ago"},future:{one:"in {0} minute",other:"in {0} minutes"}},second:{current:"now",past:{one:"{0} second ago",other:"{0} seconds ago"},future:{one:"in {0} second",other:"in {0} seconds"}}},short={year:{previous:"last yr.",current:"this yr.",next:"next yr.",past:"{0} yr. ago",future:"in {0} yr."},quarter:{previous:"last qtr.",current:"this qtr.",next:"next qtr.",past:{one:"{0} qtr. ago",other:"{0} qtrs. ago"},future:{one:"in {0} qtr.",other:"in {0} qtrs."}},month:{previous:"last mo.",current:"this mo.",next:"next mo.",past:"{0} mo. ago",future:"in {0} mo."},week:{previous:"last wk.",current:"this wk.",next:"next wk.",past:"{0} wk. ago",future:"in {0} wk."},day:{previous:"yesterday",current:"today",next:"tomorrow",past:{one:"{0} day ago",other:"{0} days ago"},future:{one:"in {0} day",other:"in {0} days"}},hour:{current:"this hour",past:"{0} hr. ago",future:"in {0} hr."},minute:{current:"this minute",past:"{0} min. ago",future:"in {0} min."},second:{current:"now",past:"{0} sec. ago",future:"in {0} sec."}},narrow={year:{previous:"last yr.",current:"this yr.",next:"next yr.",past:"{0} yr. ago",future:"in {0} yr."},quarter:{previous:"last qtr.",current:"this qtr.",next:"next qtr.",past:{one:"{0} qtr. ago",other:"{0} qtrs. ago"},future:{one:"in {0} qtr.",other:"in {0} qtrs."}},month:{previous:"last mo.",current:"this mo.",next:"next mo.",past:"{0} mo. ago",future:"in {0} mo."},week:{previous:"last wk.",current:"this wk.",next:"next wk.",past:"{0} wk. ago",future:"in {0} wk."},day:{previous:"yesterday",current:"today",next:"tomorrow",past:{one:"{0} day ago",other:"{0} days ago"},future:{one:"in {0} day",other:"in {0} days"}},hour:{current:"this hour",past:"{0} hr. ago",future:"in {0} hr."},minute:{current:"this minute",past:"{0} min. ago",future:"in {0} min."},second:{current:"now",past:"{0} sec. ago",future:"in {0} sec."}},now={now:{current:"now",future:"in a moment",past:"just now"}},tiny={year:"{0}yr",month:"{0}mo",week:"{0}wk",day:"{0}d",hour:"{0}h",minute:"{0}m",second:"{0}s",now:"now"},mini={year:"{0}yr",month:"{0}mo",week:"{0}wk",day:"{0}d",hour:"{0}h",minute:"{0}m",second:"{0}s",now:"now"};var en={locale,long,short,narrow,"short-time":{year:"{0} yr.",month:"{0} mo.",week:"{0} wk.",day:{one:"{0} day",other:"{0} days"},hour:"{0} hr.",minute:"{0} min.",second:"{0} sec."},"long-time":{year:{one:"{0} year",other:"{0} years"},month:{one:"{0} month",other:"{0} months"},week:{one:"{0} week",other:"{0} weeks"},day:{one:"{0} day",other:"{0} days"},hour:{one:"{0} hour",other:"{0} hours"},minute:{one:"{0} minute",other:"{0} minutes"},second:{one:"{0} second",other:"{0} seconds"}},now,tiny,mini};TimeAgo.addDefaultLocale(en);const timeAgo=new TimeAgo("en-US");function create_fragment$6(t){let e,n,r,o,i,s,a,l=t[0].title+"",u,d,f,c,_=timeAgo.format(new Date(t[0].publishedAt))+"",m,h,y=t[0].channelTitle+"",g,I,T,R=t[0].description+"",L,v,w,b;return{c(){e=element("a"),n=element("div"),r=element("img"),i=space(),s=element("div"),a=element("p"),u=text(l),f=space(),c=element("p"),m=text(_),h=text(" - "),g=text(y),I=space(),T=element("p"),L=text(R),src_url_equal(r.src,o=t[0].thumbnailUrl)||attr(r,"src",o),attr(r,"alt",""),attr(r,"loading","lazy"),attr(r,"width","320"),attr(r,"height","180"),attr(n,"class","inline-block w-[11rem] align-text-bottom p-1"),attr(a,"class","font-bold truncate"),attr(a,"title",d=t[0].title),attr(c,"class","text-neutral-400 truncate"),attr(T,"class","text-ellipsis line-clamp-3"),attr(s,"class","inline-block w-[17rem] align-top text-sm"),attr(e,"class","block w-[30rem] bg-neutral-600 p-2 m-2 first:mt-0 last:mb-0 rounded-2xl"),attr(e,"href",v="https://www.youtube.com/watch?v="+t[0].videoId)},m(A,O){insert(A,e,O),append(e,n),append(n,r),append(e,i),append(e,s),append(s,a),append(a,u),append(s,f),append(s,c),append(c,m),append(c,h),append(c,g),append(s,I),append(s,T),append(T,L),w||(b=listen(e,"click",prevent_default(t[1])),w=!0)},p(A,[O]){O&1&&!src_url_equal(r.src,o=A[0].thumbnailUrl)&&attr(r,"src",o),O&1&&l!==(l=A[0].title+"")&&set_data(u,l),O&1&&d!==(d=A[0].title)&&attr(a,"title",d),O&1&&_!==(_=timeAgo.format(new Date(A[0].publishedAt))+"")&&set_data(m,_),O&1&&y!==(y=A[0].channelTitle+"")&&set_data(g,y),O&1&&R!==(R=A[0].description+"")&&set_data(L,R),O&1&&v!==(v="https://www.youtube.com/watch?v="+A[0].videoId)&&attr(e,"href",v)},i:noop,o:noop,d(A){A&&detach(e),w=!1,b()}}}function instance$6(t,e,n){let{video:r}=e;function o(){playerStore.set({videoId:r.videoId})}return t.$$set=i=>{"video"in i&&n(0,r=i.video)},[r,o]}class VideoCard extends SvelteComponent{constructor(e){super(),init(this,e,instance$6,create_fragment$6,safe_not_equal,{video:0})}}const NOT_MODIFIED="Not Modified";function appendQuery(t,e){if(e){const n=new URLSearchParams(e);return`${t}?${n}`}else return t}function toRequest(t,e={}){const n=appendQuery("https://www.googleapis.com"+t,e.query);return e.headers=new Headers(e.headers),e.headers.append("Authorization","Bearer "+gapi.auth.getToken().access_token),e.etag&&e.headers.append("If-None-Match",e.etag),new Request(n,e)}async function request(t,e={}){typeof t=="string"&&(t=toRequest(t,e));const n=await fetch(t);if(n.status===304)throw NOT_MODIFIED;if(!n.ok)throw n;return n}async function batchRequest(t,e){const n=`boundary${Date.now()}`,r="/batch"+t,o=await request(r,{method:"POST",headers:{"Content-Type":`multipart/mixed; boundary=${n}`},body:await batchRequestsToBody(e,n)});return batchResponseToMap(o)}async function batchRequestsToBody(t,e){let n=[];for(const[r,o]of t){if(n.push(`--${e}`),n.push("Content-Type: application/http"),n.push(`Content-ID: ${r}`),o.bodyUsed&&n.push(`Content-Length: ${(await o.blob()).size}`),n.push(""),n.push(`${o.method} ${o.url}`),o.headers)for(const[i,s]of o.headers.entries())n.push(`${i}: ${s}`);o.bodyUsed&&(n.push(""),n.push(await o.text()))}return n.push(`--${e}--`),n.join(`\r
`)}async function batchResponseToMap(t){const e=t.headers.get("Content-Type").match(/^multipart\/mixed; boundary=(.+)$/)[1],r=(await t.text()).split(new RegExp(`\r
--${e}(?:--)?\r
`,"g")).slice(1,-1),o=new Map;for(const i of r){const[s,a,l]=i.split(`\r
\r
`,3),d=headerStringToHeaders(s).get("Content-ID").match(/^response-(.+)$/)[1],[f,c]=a.split(`\r
`,2),[_,m,h]=f.split(" ",3),y=headerStringToHeaders(c),g=l.length===0?null:l,I=new Response(g,{status:parseInt(m,10),statusText:h,headers:y});o.set(d,I)}return o}function headerStringToHeaders(t){const e=new Headers;for(const n of t.split(`\r
`)){const[r,o]=n.split(": ");e.append(r,o)}return e}function jsonBlob(t){return new Blob([JSON.stringify(t)],{type:"application/json"})}async function listAllSubscriptions(t){let e=await listSubscriptions({etag:t});const n=e.etag,r=[e.items];for(;e.nextPageToken;)e=await listSubscriptions({pageToken:e.nextPageToken}),r.push(e.items);return{etag:n,items:r}}async function listSubscriptions(t={}){return(await request(listSubscriptionsRequest(t))).json()}function listSubscriptionsRequest(t={}){return toRequest("/youtube/v3/subscriptions",z({method:"GET",query:z({part:"snippet",fields:"etag,items(snippet(title,resourceId/channelId,thumbnails/default/url)),nextPageToken",mine:"true",order:"alphabetical",maxResults:"50"},t.pageToken&&{pageToken:t.pageToken})},t.etag&&{etag:t.etag}))}async function listAllChannels(t){const e=new Map(t.map((o,i)=>[`${i}`,listChannelsRequest(o)])),n=await batchRequest("/youtube/v3",e),r=await Promise.all(Array.from(n.values()).map(o=>o.json()));return new Map(r.flatMap(o=>o.items.map(i=>[i.id,i])))}function listChannelsRequest(t){return toRequest("/youtube/v3/channels",{method:"GET",query:{part:"contentDetails",fields:"items(id,contentDetails/relatedPlaylists/uploads)",id:t.map(e=>e.snippet.resourceId.channelId).join(","),maxResults:"50"}})}async function listAllPlaylistItems(t,e){const n=new Set(e.subscriptionGroups.flatMap(r=>r.subscriptionIds));if(n.size>0){const r=t.items.filter(s=>n.has(s.channelId)),o=new Map(r.map(s=>[s.uploadsPlaylistId,listPlaylistItemsRequest(s,!0)])),i=await batchRequest("/youtube/v3",o);await Promise.all(r.map(s=>listPlaylistItemsResponse(s,i.get(s.uploadsPlaylistId),!0)))}}async function listPlaylistItems(t){const e=await request(listPlaylistItemsRequest(t,!1));await listPlaylistItemsResponse(t,e,!1)}function listPlaylistItemsRequest(t,e){return toRequest("/youtube/v3/playlistItems",z({method:"GET",query:z({part:"snippet",fields:"etag,items(snippet(title,description,publishedAt,thumbnails/medium/url,resourceId/videoId)),nextPageToken",playlistId:t.uploadsPlaylistId,maxResults:"50"},!e&&t.nextUploadPageToken&&{pageToken:t.nextUploadPageToken})},e&&t.uploadsEtag&&{etag:t.uploadsEtag}))}async function listPlaylistItemsResponse(t,e,n){if(n){if(t.uploadsEtag&&e.status===304)return;clearUploads(t)}if(!e.ok)throw e;addUploads(t,await e.json())}async function SubscriptionGroup(t,e){const n={name:t,subscriptions:e.map(r=>({subscription:r,uploadIndex:0})),videos:[]};return await loadMoreVideos(n),n}async function getPlaylist(t){return t.subscriptions.length===1?{playlistId:t.subscriptions[0].subscription.uploadsPlaylistId}:(t.videos.length<200&&await loadMoreVideos(t,200-t.videos.length),{customPlaylist:t.videos.slice(0,200).map(e=>e.videoId)})}async function loadMoreVideos(t,e=10){for(let n=0;n<e;n++){let r,o;for(const i of t.subscriptions){if(i.uploadIndex===i.subscription.uploads.length){if(!i.subscription.nextUploadPageToken)continue;await listPlaylistItems(i.subscription)}const s=i.subscription.uploads[i.uploadIndex];(!r||s.publishedAt>r.publishedAt)&&(r=s,o=i)}if(!r||!o)break;r.channelTitle=o.subscription.title,t.videos.push(r),o.uploadIndex++}}function get_each_context$2(t,e,n){const r=t.slice();return r[6]=e[n],r}function create_else_block$2(t){let e,n=t[0].name+"",r,o,i,s=t[0].videos.length>0&&create_if_block_2(t);return{c(){e=element("span"),r=text(n),o=space(),s&&s.c(),i=empty(),attr(e,"class","cursor-default")},m(a,l){insert(a,e,l),append(e,r),insert(a,o,l),s&&s.m(a,l),insert(a,i,l)},p(a,l){l&1&&n!==(n=a[0].name+"")&&set_data(r,n),a[0].videos.length>0?s?s.p(a,l):(s=create_if_block_2(a),s.c(),s.m(i.parentNode,i)):s&&(s.d(1),s=null)},d(a){a&&detach(e),a&&detach(o),s&&s.d(a),a&&detach(i)}}}function create_if_block$3(t){let e,n,r,o,i=t[0].name+"",s,a,l,u,d=t[0].videos.length>0&&create_if_block_1$1(t);return{c(){e=element("a"),n=element("img"),o=space(),s=text(i),l=space(),d&&d.c(),u=empty(),attr(n,"class","inline-block h-8 w-8 rounded-2xl"),src_url_equal(n.src,r=t[0].subscriptions[0].subscription.thumbnailUrl)||attr(n,"src",r),attr(n,"alt",""),attr(n,"loading","lazy"),attr(n,"width","88"),attr(n,"height","88"),attr(e,"href",a="https://www.youtube.com/channel/"+t[0].subscriptions[0].subscription.channelId)},m(f,c){insert(f,e,c),append(e,n),append(e,o),append(e,s),insert(f,l,c),d&&d.m(f,c),insert(f,u,c)},p(f,c){c&1&&!src_url_equal(n.src,r=f[0].subscriptions[0].subscription.thumbnailUrl)&&attr(n,"src",r),c&1&&i!==(i=f[0].name+"")&&set_data(s,i),c&1&&a!==(a="https://www.youtube.com/channel/"+f[0].subscriptions[0].subscription.channelId)&&attr(e,"href",a),f[0].videos.length>0?d?d.p(f,c):(d=create_if_block_1$1(f),d.c(),d.m(u.parentNode,u)):d&&(d.d(1),d=null)},d(f){f&&detach(e),f&&detach(l),d&&d.d(f),f&&detach(u)}}}function create_if_block_2(t){let e,n,r;return{c(){e=element("span"),e.textContent="\u25B8",attr(e,"class","float-right pl-2 pr-2 -ml-8 text-[2rem] leading-[0.75] cursor-pointer")},m(o,i){insert(o,e,i),n||(r=listen(e,"click",t[1]),n=!0)},p:noop,d(o){o&&detach(e),n=!1,r()}}}function create_if_block_1$1(t){let e,n,r,o,i;return{c(){e=element("a"),n=text("\u25B8"),attr(e,"class","float-right pl-2 pr-2 -ml-8 text-[2rem] leading-[0.75]"),attr(e,"href",r="https://www.youtube.com/watch?v="+t[0].videos[0].videoId+"&list="+t[0].subscriptions[0].subscription.uploadsPlaylistId)},m(s,a){insert(s,e,a),append(e,n),o||(i=listen(e,"click",prevent_default(t[1])),o=!0)},p(s,a){a&1&&r!==(r="https://www.youtube.com/watch?v="+s[0].videos[0].videoId+"&list="+s[0].subscriptions[0].subscription.uploadsPlaylistId)&&attr(e,"href",r)},d(s){s&&detach(e),o=!1,i()}}}function create_each_block$2(t){let e,n;return e=new VideoCard({props:{video:t[6]}}),{c(){create_component(e.$$.fragment)},m(r,o){mount_component(e,r,o),n=!0},p(r,o){const i={};o&1&&(i.video=r[6]),e.$set(i)},i(r){n||(transition_in(e.$$.fragment,r),n=!0)},o(r){transition_out(e.$$.fragment,r),n=!1},d(r){destroy_component(e,r)}}}function create_fragment$5(t){let e,n,r,o,i,s,a;function l(m,h){return m[0].subscriptions.length===1?create_if_block$3:create_else_block$2}let u=l(t),d=u(t),f=t[0].videos,c=[];for(let m=0;m<f.length;m+=1)c[m]=create_each_block$2(get_each_context$2(t,f,m));const _=m=>transition_out(c[m],1,1,()=>{c[m]=null});return{c(){e=element("div"),n=element("p"),d.c(),r=space(),o=element("div");for(let m=0;m<c.length;m+=1)c[m].c();attr(n,"class","text-center font-bold h-9"),attr(o,"class","overflow-y-scroll y-scroll-hover overflow-x-hidden"),set_style(o,"height","calc(100% - 2.25rem)"),attr(e,"class","inline-block h-full w-[32rem] bg-neutral-800 p-1 pb-4 ml-1 mr-1 rounded-2xl")},m(m,h){insert(m,e,h),append(e,n),d.m(n,null),append(e,r),append(e,o);for(let y=0;y<c.length;y+=1)c[y].m(o,null);i=!0,s||(a=[listen(o,"wheel",stop_propagation(t[3]),{passive:!0}),listen(o,"scroll",t[2])],s=!0)},p(m,[h]){if(u===(u=l(m))&&d?d.p(m,h):(d.d(1),d=u(m),d&&(d.c(),d.m(n,null))),h&1){f=m[0].videos;let y;for(y=0;y<f.length;y+=1){const g=get_each_context$2(m,f,y);c[y]?(c[y].p(g,h),transition_in(c[y],1)):(c[y]=create_each_block$2(g),c[y].c(),transition_in(c[y],1),c[y].m(o,null))}for(group_outros(),y=f.length;y<c.length;y+=1)_(y);check_outros()}},i(m){if(!i){for(let h=0;h<f.length;h+=1)transition_in(c[h]);i=!0}},o(m){c=c.filter(Boolean);for(let h=0;h<c.length;h+=1)transition_out(c[h]);i=!1},d(m){m&&detach(e),d.d(),destroy_each(c,m),s=!1,run_all(a)}}}function instance$5(t,e,n){let r;component_subscribe(t,playerStore,u=>n(5,r=u));let{subscriptionGroup:o}=e,i=!1;async function s(){set_store_value(playerStore,r={loading:!0},r);const u=await getPlaylist(o);n(0,o),set_store_value(playerStore,r=u,r)}async function a(u){const d=u.target;!i&&d.scrollHeight-d.scrollTop-122<=d.clientHeight&&(i=!0,await loadMoreVideos(o),n(0,o),i=!1)}function l(u){bubble.call(this,t,u)}return t.$$set=u=>{"subscriptionGroup"in u&&n(0,o=u.subscriptionGroup)},[o,s,a,l]}class SubscriptionOverview extends SvelteComponent{constructor(e){super(),init(this,e,instance$5,create_fragment$5,safe_not_equal,{subscriptionGroup:0})}}function cubicOut(t){const e=t-1;return e*e*e+1}function is_date(t){return Object.prototype.toString.call(t)==="[object Date]"}function get_interpolator(t,e){if(t===e||t!==t)return()=>t;const n=typeof t;if(n!==typeof e||Array.isArray(t)!==Array.isArray(e))throw new Error("Cannot interpolate values of different type");if(Array.isArray(t)){const r=e.map((o,i)=>get_interpolator(t[i],o));return o=>r.map(i=>i(o))}if(n==="object"){if(!t||!e)throw new Error("Object cannot be null");if(is_date(t)&&is_date(e)){t=t.getTime(),e=e.getTime();const i=e-t;return s=>new Date(t+s*i)}const r=Object.keys(e),o={};return r.forEach(i=>{o[i]=get_interpolator(t[i],e[i])}),i=>{const s={};return r.forEach(a=>{s[a]=o[a](i)}),s}}if(n==="number"){const r=e-t;return o=>t+o*r}throw new Error(`Cannot interpolate ${n} values`)}function tweened(t,e={}){const n=writable(t);let r,o=t;function i(s,a){if(t==null)return n.set(t=s),Promise.resolve();o=s;let l=r,u=!1,{delay:d=0,duration:f=400,easing:c=identity,interpolate:_=get_interpolator}=assign(assign({},e),a);if(f===0)return l&&(l.abort(),l=null),n.set(t=o),Promise.resolve();const m=now$1()+d;let h;return r=loop$1(y=>{if(y<m)return!0;u||(h=_(t,s),typeof f=="function"&&(f=f(t,s)),u=!0),l&&(l.abort(),l=null);const g=y-m;return g>f?(n.set(t=s),!1):(n.set(t=h(c(g/f))),!0)}),r.promise}return{set:i,update:(s,a)=>i(s(o,t),a),subscribe:n.subscribe}}function create_fragment$4(t){let e,n,r,o;const i=t[4].default,s=create_slot(i,t,t[3],null);return{c(){e=element("div"),s&&s.c(),attr(e,"class","w-full h-full pb-[2px] overflow-x-scroll x-scroll")},m(a,l){insert(a,e,l),s&&s.m(e,null),t[5](e),n=!0,r||(o=[listen(e,"wheel",t[1],{passive:!0}),listen(e,"scroll",t[2])],r=!0)},p(a,[l]){s&&s.p&&(!n||l&8)&&update_slot_base(s,i,a,a[3],n?get_slot_changes(i,a[3],l,null):get_all_dirty_from_scope(a[3]),null)},i(a){n||(transition_in(s,a),n=!0)},o(a){transition_out(s,a),n=!1},d(a){a&&detach(e),s&&s.d(a),t[5](null),r=!1,run_all(o)}}}const duration=100;function instance$4(t,e,n){let{$$slots:r={},$$scope:o}=e,i;const s=tweened(0,{duration});let a=!1,l;onDestroy(s.subscribe(_=>{a&&n(0,i.scrollLeft=_,i)}));function u(_){_.deltaX?(a=!1,s.update(m=>d(m+_.deltaX),{duration:0})):_.deltaY&&(a=!0,s.update(m=>d(m+_.deltaY)))}function d(_){return Math.max(0,Math.min(_,i.scrollWidth-i.clientWidth))}function f(){clearTimeout(l),l=setTimeout(()=>{a=!1,s.set(i.scrollLeft,{duration:0})},duration)}function c(_){binding_callbacks[_?"unshift":"push"](()=>{i=_,n(0,i)})}return t.$$set=_=>{"$$scope"in _&&n(3,o=_.$$scope)},[i,u,f,o,r,c]}class HorizontalScroll extends SvelteComponent{constructor(e){super(),init(this,e,instance$4,create_fragment$4,safe_not_equal,{})}}const settingsFileName="settings.json";let settingsFileId;async function getSettingsFileId(){const e=await(await request("/drive/v3/files",{method:"GET",query:{spaces:"appDataFolder",fields:"files(id)",q:`name = '${settingsFileName}'`,pageSize:"1"}})).json();settingsFileId=e.files.length>0?e.files[0].id:null}async function readSettings(){return settingsFileId===void 0&&await getSettingsFileId(),settingsFileId==null?null:(await request(`/drive/v3/files/${settingsFileId}`,{method:"GET",query:{alt:"media"}})).json()}async function writeSettings(t){settingsFileId===void 0&&await getSettingsFileId(),settingsFileId==null?await createSettings(t):await updateSettings(t)}async function createSettings(t){const e={name:settingsFileName,mimeType:"application/json",parents:["appDataFolder"]},n=new FormData;n.append("metadata",jsonBlob(e)),n.append("file",jsonBlob(t),settingsFileName),settingsFileId=(await(await request("/upload/drive/v3/files",{method:"POST",query:{uploadType:"multipart"},body:n})).json()).id}async function updateSettings(t){await request(`/upload/drive/v3/files/${settingsFileId}`,{method:"PATCH",query:{uploadType:"media"},body:jsonBlob(t)})}function Settings(t=[]){return{subscriptionGroups:t.map(e=>({name:e.name,subscriptionIds:e.subscriptions.map(n=>n.subscription.channelId)}))}}function get_each_context$1(t,e,n){const r=t.slice();return r[9]=e[n],r}function create_catch_block$1(t){let e,n=JSON.stringify(t[12])+"",r;return{c(){e=element("p"),r=text(n),attr(e,"class","text-center")},m(o,i){insert(o,e,i),append(e,r)},p:noop,i:noop,o:noop,d(o){o&&detach(e)}}}function create_then_block$1(t){let e,n,r,o;const i=[create_if_block$2,create_else_block$1],s=[];function a(l,u){return l[0].length===0?0:1}return e=a(t),n=s[e]=i[e](t),{c(){n.c(),r=empty()},m(l,u){s[e].m(l,u),insert(l,r,u),o=!0},p(l,u){let d=e;e=a(l),e===d?s[e].p(l,u):(group_outros(),transition_out(s[d],1,1,()=>{s[d]=null}),check_outros(),n=s[e],n?n.p(l,u):(n=s[e]=i[e](l),n.c()),transition_in(n,1),n.m(r.parentNode,r))},i(l){o||(transition_in(n),o=!0)},o(l){transition_out(n),o=!1},d(l){s[e].d(l),l&&detach(r)}}}function create_else_block$1(t){let e,n,r;return n=new HorizontalScroll({props:{$$slots:{default:[create_default_slot_1$1]},$$scope:{ctx:t}}}),{c(){e=element("div"),create_component(n.$$.fragment),attr(e,"class","w-full"),set_style(e,"height","calc(100% - 6px)")},m(o,i){insert(o,e,i),mount_component(n,e,null),r=!0},p(o,i){const s={};i&8193&&(s.$$scope={dirty:i,ctx:o}),n.$set(s)},i(o){r||(transition_in(n.$$.fragment,o),r=!0)},o(o){transition_out(n.$$.fragment,o),r=!1},d(o){o&&detach(e),destroy_component(n)}}}function create_if_block$2(t){let e,n;return e=new Center({props:{$$slots:{default:[create_default_slot$1]},$$scope:{ctx:t}}}),{c(){create_component(e.$$.fragment)},m(r,o){mount_component(e,r,o),n=!0},p(r,o){const i={};o&8192&&(i.$$scope={dirty:o,ctx:r}),e.$set(i)},i(r){n||(transition_in(e.$$.fragment,r),n=!0)},o(r){transition_out(e.$$.fragment,r),n=!1},d(r){destroy_component(e,r)}}}function create_each_block$1(t){let e,n;return e=new SubscriptionOverview({props:{subscriptionGroup:t[9]}}),{c(){create_component(e.$$.fragment)},m(r,o){mount_component(e,r,o),n=!0},p(r,o){const i={};o&1&&(i.subscriptionGroup=r[9]),e.$set(i)},i(r){n||(transition_in(e.$$.fragment,r),n=!0)},o(r){transition_out(e.$$.fragment,r),n=!1},d(r){destroy_component(e,r)}}}function create_default_slot_1$1(t){let e,n,r=t[0],o=[];for(let s=0;s<r.length;s+=1)o[s]=create_each_block$1(get_each_context$1(t,r,s));const i=s=>transition_out(o[s],1,1,()=>{o[s]=null});return{c(){e=element("div");for(let s=0;s<o.length;s+=1)o[s].c();attr(e,"class","w-max h-full")},m(s,a){insert(s,e,a);for(let l=0;l<o.length;l+=1)o[l].m(e,null);n=!0},p(s,a){if(a&1){r=s[0];let l;for(l=0;l<r.length;l+=1){const u=get_each_context$1(s,r,l);o[l]?(o[l].p(u,a),transition_in(o[l],1)):(o[l]=create_each_block$1(u),o[l].c(),transition_in(o[l],1),o[l].m(e,null))}for(group_outros(),l=r.length;l<o.length;l+=1)i(l);check_outros()}},i(s){if(!n){for(let a=0;a<r.length;a+=1)transition_in(o[a]);n=!0}},o(s){o=o.filter(Boolean);for(let a=0;a<o.length;a+=1)transition_out(o[a]);n=!1},d(s){s&&detach(e),destroy_each(o,s)}}}function create_default_slot$1(t){let e,n,r,o,i;return{c(){e=element("p"),e.textContent="No subscriptions to display",n=space(),r=element("br"),o=space(),i=element("p"),i.textContent='Click the "Edit" button to add subscriptions'},m(s,a){insert(s,e,a),insert(s,n,a),insert(s,r,a),insert(s,o,a),insert(s,i,a)},p:noop,d(s){s&&detach(e),s&&detach(n),s&&detach(r),s&&detach(o),s&&detach(i)}}}function create_pending_block$1(t){let e,n;return e=new Spinner({}),{c(){create_component(e.$$.fragment)},m(r,o){mount_component(e,r,o),n=!0},p:noop,i(r){n||(transition_in(e.$$.fragment,r),n=!0)},o(r){transition_out(e.$$.fragment,r),n=!1},d(r){destroy_component(e,r)}}}function create_fragment$3(t){let e,n,r={ctx:t,current:null,token:null,hasCatch:!0,pending:create_pending_block$1,then:create_then_block$1,catch:create_catch_block$1,value:8,error:12,blocks:[,,,]};return handle_promise(t[1](),r),{c(){e=empty(),r.block.c()},m(o,i){insert(o,e,i),r.block.m(o,r.anchor=i),r.mount=()=>e.parentNode,r.anchor=e,n=!0},p(o,[i]){t=o,update_await_block_branch(r,t,i)},i(o){n||(transition_in(r.block),n=!0)},o(o){for(let i=0;i<3;i+=1){const s=r.blocks[i];transition_out(s)}n=!1},d(o){o&&detach(e),r.block.d(o),r.token=null,r=null}}}function instance$3(t,e,n){let r,o;component_subscribe(t,subscriptionsStore,f=>n(3,r=f)),component_subscribe(t,settingsStore,f=>n(4,o=f));let i=!1,s;async function a(){const[f,c]=await Promise.all([u(),l()]);set_store_value(settingsStore,o=f,o),await d(f,c),i=!0}onDestroy(settingsStore.subscribe(f=>i&&d(f,r)));async function l(){const f=r;try{const c=await listAllSubscriptions(f==null?void 0:f.etag),_=await listAllChannels(c.items);return Subscriptions(c,_)}catch(c){if(f&&c===NOT_MODIFIED)return f;throw c}}async function u(){let f=await readSettings();return f||(f=Settings()),f}async function d(f,c){await listAllPlaylistItems(c,f),set_store_value(subscriptionsStore,r=c,r);const _=new Map(c.items.map(m=>[m.channelId,m]));n(0,s=await Promise.all(f.subscriptionGroups.map(m=>SubscriptionGroup(m.name,m.subscriptionIds.map(h=>_.get(h))))))}return[s,a]}class SubscriptionsDeck extends SvelteComponent{constructor(e){super(),init(this,e,instance$3,create_fragment$3,safe_not_equal,{})}}var Player_svelte_svelte_type_style_lang="";function create_fragment$2(t){let e,n,r,o,i,s,a,l;return r=new Spinner({}),{c(){e=element("div"),n=element("div"),create_component(r.$$.fragment),o=space(),i=element("div"),i.innerHTML='<div id="player"></div>',attr(n,"class","fixed top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 z-20"),toggle_class(n,"invisible",!t[0]||t[2]),attr(i,"class","fixed top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 z-30"),toggle_class(i,"invisible",!t[0]||!t[2]),attr(e,"class","fixed inset-0 z-10 svelte-v5cnxt"),set_style(e,"background-color","rgba(0, 0, 0, 0.8)"),toggle_class(e,"fadeIn",t[0]),toggle_class(e,"fadeOut",!t[0])},m(u,d){insert(u,e,d),append(e,n),mount_component(r,n,null),append(e,o),append(e,i),s=!0,a||(l=[listen(window,"resize",t[5]),listen(e,"click",self(t[6]))],a=!0)},p(u,[d]){d&5&&toggle_class(n,"invisible",!u[0]||u[2]),d&5&&toggle_class(i,"invisible",!u[0]||!u[2]),d&1&&toggle_class(e,"fadeIn",u[0]),d&1&&toggle_class(e,"fadeOut",!u[0])},i(u){s||(transition_in(r.$$.fragment,u),s=!0)},o(u){transition_out(r.$$.fragment,u),s=!1},d(u){u&&detach(e),destroy_component(r),a=!1,run_all(l)}}}function calcPlayerSize(){let t=Math.min(document.body.clientWidth,16*document.body.clientHeight/9),e=Math.min(document.body.clientHeight,9*document.body.clientWidth/16);return t>.9*document.body.clientWidth&&e>.9*document.body.clientHeight&&(t*=.9,e*=.9),[t,e]}function instance$2(t,e,n){var r;(function(f){f[f.UNINITIALISED=0]="UNINITIALISED",f[f.INITIALISING=1]="INITIALISING",f[f.INITIALISED=2]="INITIALISED"})(r||(r={}));let o=!1,i=!1,s,a=r.UNINITIALISED;function l(f){if(a===r.UNINITIALISED){n(4,a=r.INITIALISING);const[c,_]=calcPlayerSize(),m={width:c,height:_,playerVars:{autohide:1,autoplay:1,playsinline:1},events:{onReady:()=>{console.log("playerReady"),n(4,a=r.INITIALISED),n(2,i=!0)},onStateChange:h=>{console.log("playerState",h),(h.data===YT.PlayerState.BUFFERING||h.data===YT.PlayerState.PLAYING)&&n(2,i=!0)},onError:h=>{console.error("playerError",h),s.getPlaylist()!=null&&s.nextVideo()}}};f.videoId?m.videoId=f.videoId:f.playlistId?(m.playerVars.listType="playlist",m.playerVars.list=f.playlistId):f.customPlaylist&&(m.playerVars.playlist=f.customPlaylist.join(",")),n(1,s=new YT.Player("player",m))}else a===r.INITIALISING?setTimeout(()=>l(f),100):a===r.INITIALISED&&(f.videoId?s.loadVideoById(f.videoId):f.playlistId?s.loadPlaylist({listType:"playlist",list:f.playlistId}):f.customPlaylist&&s.loadPlaylist(f.customPlaylist))}onDestroy(playerStore.subscribe(f=>{f&&(playerStore.set(null),n(0,o=!0),f.loading||l(f))}));const u=()=>s&&s.setSize(...calcPlayerSize()),d=()=>n(0,o=!1);return t.$$.update=()=>{t.$$.dirty&1&&(o||n(2,i=!1)),t.$$.dirty&27&&a===r.INITIALISED&&!o&&s.stopVideo()},[o,s,i,r,a,u,d]}class Player extends SvelteComponent{constructor(e){super(),init(this,e,instance$2,create_fragment$2,safe_not_equal,{})}}function flip(t,{from:e,to:n},r={}){const o=getComputedStyle(t),i=o.transform==="none"?"":o.transform,[s,a]=o.transformOrigin.split(" ").map(parseFloat),l=e.left+e.width*s/n.width-(n.left+s),u=e.top+e.height*a/n.height-(n.top+a),{delay:d=0,duration:f=_=>Math.sqrt(_)*120,easing:c=cubicOut}=r;return{delay:d,duration:is_function(f)?f(Math.sqrt(l*l+u*u)):f,easing:c,css:(_,m)=>{const h=m*l,y=m*u,g=_+m*e.width/n.width,I=_+m*e.height/n.height;return`transform: ${i} translate(${h}px, ${y}px) scale(${g}, ${I});`}}}const FINALIZE_EVENT_NAME="finalize",CONSIDER_EVENT_NAME="consider";function dispatchFinalizeEvent(t,e,n){t.dispatchEvent(new CustomEvent(FINALIZE_EVENT_NAME,{detail:{items:e,info:n}}))}function dispatchConsiderEvent(t,e,n){t.dispatchEvent(new CustomEvent(CONSIDER_EVENT_NAME,{detail:{items:e,info:n}}))}const DRAGGED_ENTERED_EVENT_NAME="draggedEntered",DRAGGED_LEFT_EVENT_NAME="draggedLeft",DRAGGED_OVER_INDEX_EVENT_NAME="draggedOverIndex",DRAGGED_LEFT_DOCUMENT_EVENT_NAME="draggedLeftDocument",DRAGGED_LEFT_TYPES={LEFT_FOR_ANOTHER:"leftForAnother",OUTSIDE_OF_ANY:"outsideOfAny"};function dispatchDraggedElementEnteredContainer(t,e,n){t.dispatchEvent(new CustomEvent(DRAGGED_ENTERED_EVENT_NAME,{detail:{indexObj:e,draggedEl:n}}))}function dispatchDraggedElementLeftContainerForAnother(t,e,n){t.dispatchEvent(new CustomEvent(DRAGGED_LEFT_EVENT_NAME,{detail:{draggedEl:e,type:DRAGGED_LEFT_TYPES.LEFT_FOR_ANOTHER,theOtherDz:n}}))}function dispatchDraggedElementLeftContainerForNone(t,e){t.dispatchEvent(new CustomEvent(DRAGGED_LEFT_EVENT_NAME,{detail:{draggedEl:e,type:DRAGGED_LEFT_TYPES.OUTSIDE_OF_ANY}}))}function dispatchDraggedElementIsOverIndex(t,e,n){t.dispatchEvent(new CustomEvent(DRAGGED_OVER_INDEX_EVENT_NAME,{detail:{indexObj:e,draggedEl:n}}))}function dispatchDraggedLeftDocument(t){window.dispatchEvent(new CustomEvent(DRAGGED_LEFT_DOCUMENT_EVENT_NAME,{detail:{draggedEl:t}}))}const TRIGGERS={DRAG_STARTED:"dragStarted",DRAGGED_ENTERED:DRAGGED_ENTERED_EVENT_NAME,DRAGGED_ENTERED_ANOTHER:"dragEnteredAnother",DRAGGED_OVER_INDEX:DRAGGED_OVER_INDEX_EVENT_NAME,DRAGGED_LEFT:DRAGGED_LEFT_EVENT_NAME,DRAGGED_LEFT_ALL:"draggedLeftAll",DROPPED_INTO_ZONE:"droppedIntoZone",DROPPED_INTO_ANOTHER:"droppedIntoAnother",DROPPED_OUTSIDE_OF_ANY:"droppedOutsideOfAny",DRAG_STOPPED:"dragStopped"},SOURCES={POINTER:"pointer",KEYBOARD:"keyboard"},SHADOW_ITEM_MARKER_PROPERTY_NAME="isDndShadowItem",SHADOW_ELEMENT_ATTRIBUTE_NAME="data-is-dnd-shadow-item",SHADOW_PLACEHOLDER_ITEM_ID="id:dnd-shadow-placeholder-0000",DRAGGED_ELEMENT_ID="dnd-action-dragged-el";let ITEM_ID_KEY="id",activeDndZoneCount=0;function incrementActiveDropZoneCount(){activeDndZoneCount++}function decrementActiveDropZoneCount(){if(activeDndZoneCount===0)throw new Error("Bug! trying to decrement when there are no dropzones");activeDndZoneCount--}const isOnServer=typeof window=="undefined";function getBoundingRectNoTransforms(t){let e;const n=t.getBoundingClientRect(),r=getComputedStyle(t),o=r.transform;if(o){let i,s,a,l;if(o.startsWith("matrix3d("))e=o.slice(9,-1).split(/, /),i=+e[0],s=+e[5],a=+e[12],l=+e[13];else if(o.startsWith("matrix("))e=o.slice(7,-1).split(/, /),i=+e[0],s=+e[3],a=+e[4],l=+e[5];else return n;const u=r.transformOrigin,d=n.x-a-(1-i)*parseFloat(u),f=n.y-l-(1-s)*parseFloat(u.slice(u.indexOf(" ")+1)),c=i?n.width/i:t.offsetWidth,_=s?n.height/s:t.offsetHeight;return{x:d,y:f,width:c,height:_,top:f,right:d+c,bottom:f+_,left:d}}else return n}function getAbsoluteRectNoTransforms(t){const e=getBoundingRectNoTransforms(t);return{top:e.top+window.scrollY,bottom:e.bottom+window.scrollY,left:e.left+window.scrollX,right:e.right+window.scrollX}}function getAbsoluteRect(t){const e=t.getBoundingClientRect();return{top:e.top+window.scrollY,bottom:e.bottom+window.scrollY,left:e.left+window.scrollX,right:e.right+window.scrollX}}function findCenter(t){return{x:(t.left+t.right)/2,y:(t.top+t.bottom)/2}}function calcDistance(t,e){return Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))}function isPointInsideRect(t,e){return t.y<=e.bottom&&t.y>=e.top&&t.x>=e.left&&t.x<=e.right}function findCenterOfElement(t){return findCenter(getAbsoluteRect(t))}function isCenterOfAInsideB(t,e){const n=findCenterOfElement(t),r=getAbsoluteRectNoTransforms(e);return isPointInsideRect(n,r)}function calcDistanceBetweenCenters(t,e){const n=findCenterOfElement(t),r=findCenterOfElement(e);return calcDistance(n,r)}function isElementOffDocument(t){const e=getAbsoluteRect(t);return e.right<0||e.left>document.documentElement.scrollWidth||e.bottom<0||e.top>document.documentElement.scrollHeight}function calcInnerDistancesBetweenPointAndSidesOfElement(t,e){const n=getAbsoluteRect(e);return isPointInsideRect(t,n)?{top:t.y-n.top,bottom:n.bottom-t.y,left:t.x-n.left,right:Math.min(n.right,document.documentElement.clientWidth)-t.x}:null}let dzToShadowIndexToRect;function resetIndexesCache(){dzToShadowIndexToRect=new Map}resetIndexesCache();function resetIndexesCacheForDz(t){dzToShadowIndexToRect.delete(t)}function cacheShadowRect(t){const e=Array.from(t.children).findIndex(n=>n.getAttribute(SHADOW_ELEMENT_ATTRIBUTE_NAME));if(e>=0)return dzToShadowIndexToRect.has(t)||dzToShadowIndexToRect.set(t,new Map),dzToShadowIndexToRect.get(t).set(e,getAbsoluteRectNoTransforms(t.children[e])),e}function findWouldBeIndex(t,e){if(!isCenterOfAInsideB(t,e))return null;const n=e.children;if(n.length===0)return{index:0,isProximityBased:!0};const r=cacheShadowRect(e);for(let s=0;s<n.length;s++)if(isCenterOfAInsideB(t,n[s])){const a=dzToShadowIndexToRect.has(e)&&dzToShadowIndexToRect.get(e).get(s);return a&&!isPointInsideRect(findCenterOfElement(t),a)?{index:r,isProximityBased:!1}:{index:s,isProximityBased:!1}}let o=Number.MAX_VALUE,i;for(let s=0;s<n.length;s++){const a=calcDistanceBetweenCenters(t,n[s]);a<o&&(o=a,i=s)}return{index:i,isProximityBased:!0}}const SCROLL_ZONE_PX=25;function makeScroller(){let t;function e(){t={directionObj:void 0,stepPx:0}}e();function n(i){const{directionObj:s,stepPx:a}=t;s&&(i.scrollBy(s.x*a,s.y*a),window.requestAnimationFrame(()=>n(i)))}function r(i){return SCROLL_ZONE_PX-i}function o(i,s){if(!s)return!1;const a=calcInnerDistancesBetweenPointAndSidesOfElement(i,s);if(a===null)return e(),!1;const l=!!t.directionObj;let[u,d]=[!1,!1];return s.scrollHeight>s.clientHeight&&(a.bottom<SCROLL_ZONE_PX?(u=!0,t.directionObj={x:0,y:1},t.stepPx=r(a.bottom)):a.top<SCROLL_ZONE_PX&&(u=!0,t.directionObj={x:0,y:-1},t.stepPx=r(a.top)),!l&&u)||s.scrollWidth>s.clientWidth&&(a.right<SCROLL_ZONE_PX?(d=!0,t.directionObj={x:1,y:0},t.stepPx=r(a.right)):a.left<SCROLL_ZONE_PX&&(d=!0,t.directionObj={x:-1,y:0},t.stepPx=r(a.left)),!l&&d)?(n(s),!0):(e(),!1)}return{scrollIfNeeded:o,resetScrolling:e}}function toString(t){return JSON.stringify(t,null,2)}function getDepth(t){if(!t)throw new Error("cannot get depth of a falsy node");return _getDepth(t,0)}function _getDepth(t,e=0){return t.parentElement?_getDepth(t.parentElement,e+1):e-1}function areObjectsShallowEqual(t,e){if(Object.keys(t).length!==Object.keys(e).length)return!1;for(const n in t)if(!{}.hasOwnProperty.call(e,n)||e[n]!==t[n])return!1;return!0}function areArraysShallowEqualSameOrder(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}const INTERVAL_MS$1=200,TOLERANCE_PX=10,{scrollIfNeeded:scrollIfNeeded$1,resetScrolling:resetScrolling$1}=makeScroller();let next$1;function observe(t,e,n=INTERVAL_MS$1){let r,o,i=!1,s;const a=Array.from(e).sort((u,d)=>getDepth(d)-getDepth(u));function l(){const u=findCenterOfElement(t),d=scrollIfNeeded$1(u,r);if(!d&&s&&Math.abs(s.x-u.x)<TOLERANCE_PX&&Math.abs(s.y-u.y)<TOLERANCE_PX){next$1=window.setTimeout(l,n);return}if(isElementOffDocument(t)){dispatchDraggedLeftDocument(t);return}s=u;let f=!1;for(const c of a){d&&resetIndexesCacheForDz(r);const _=findWouldBeIndex(t,c);if(_===null)continue;const{index:m}=_;f=!0,c!==r?(r&&dispatchDraggedElementLeftContainerForAnother(r,t,c),dispatchDraggedElementEnteredContainer(c,_,t),r=c):m!==o&&(dispatchDraggedElementIsOverIndex(c,_,t),o=m);break}!f&&i&&r?(dispatchDraggedElementLeftContainerForNone(r,t),r=void 0,o=void 0,i=!1):i=!0,next$1=window.setTimeout(l,n)}l()}function unobserve(){clearTimeout(next$1),resetScrolling$1(),resetIndexesCache()}const INTERVAL_MS=300;let mousePosition;function updateMousePosition(t){const e=t.touches?t.touches[0]:t;mousePosition={x:e.clientX,y:e.clientY}}const{scrollIfNeeded,resetScrolling}=makeScroller();let next;function loop(){mousePosition&&scrollIfNeeded(mousePosition,document.documentElement)&&resetIndexesCache(),next=window.setTimeout(loop,INTERVAL_MS)}function armWindowScroller(){window.addEventListener("mousemove",updateMousePosition),window.addEventListener("touchmove",updateMousePosition),loop()}function disarmWindowScroller(){window.removeEventListener("mousemove",updateMousePosition),window.removeEventListener("touchmove",updateMousePosition),mousePosition=void 0,window.clearTimeout(next),resetScrolling()}function svelteNodeClone(t){const e=t.cloneNode(!0),n=[],r=t.tagName==="SELECT",o=r?[t]:[...t.querySelectorAll("select")];for(const s of o)n.push(s.value);if(o.length<=0)return e;const i=r?[e]:[...e.querySelectorAll("select")];for(let s=0;s<i.length;s++){const a=i[s],l=n[s],u=a.querySelector(`option[value="${l}"`);u&&u.setAttribute("selected",!0)}return e}const TRANSITION_DURATION_SECONDS=.2;function trs(t){return`${t} ${TRANSITION_DURATION_SECONDS}s ease`}function createDraggedElementFrom(t,e){const n=t.getBoundingClientRect(),r=svelteNodeClone(t);copyStylesFromTo(t,r),r.id=DRAGGED_ELEMENT_ID,r.style.position="fixed";let o=n.top,i=n.left;if(r.style.top=`${o}px`,r.style.left=`${i}px`,e){const s=findCenter(n);o-=s.y-e.y,i-=s.x-e.x,window.setTimeout(()=>{r.style.top=`${o}px`,r.style.left=`${i}px`},0)}return r.style.margin="0",r.style.boxSizing="border-box",r.style.height=`${n.height}px`,r.style.width=`${n.width}px`,r.style.transition=`${trs("top")}, ${trs("left")}, ${trs("background-color")}, ${trs("opacity")}, ${trs("color")} `,window.setTimeout(()=>r.style.transition+=`, ${trs("width")}, ${trs("height")}`,0),r.style.zIndex="9999",r.style.cursor="grabbing",r}function moveDraggedElementToWasDroppedState(t){t.style.cursor="grab"}function morphDraggedElementToBeLike(t,e,n,r,o){const i=e.getBoundingClientRect(),s=t.getBoundingClientRect(),a=i.width-s.width,l=i.height-s.height;if(a||l){const u={left:(n-s.left)/s.width,top:(r-s.top)/s.height};t.style.height=`${i.height}px`,t.style.width=`${i.width}px`,t.style.left=`${parseFloat(t.style.left)-u.left*a}px`,t.style.top=`${parseFloat(t.style.top)-u.top*l}px`}copyStylesFromTo(e,t),o()}function copyStylesFromTo(t,e){const n=window.getComputedStyle(t);Array.from(n).filter(r=>r.startsWith("background")||r.startsWith("padding")||r.startsWith("font")||r.startsWith("text")||r.startsWith("align")||r.startsWith("justify")||r.startsWith("display")||r.startsWith("flex")||r.startsWith("border")||r==="opacity"||r==="color"||r==="list-style-type").forEach(r=>e.style.setProperty(r,n.getPropertyValue(r),n.getPropertyPriority(r)))}function styleDraggable(t,e){t.draggable=!1,t.ondragstart=()=>!1,e?(t.style.userSelect="",t.style.WebkitUserSelect="",t.style.cursor=""):(t.style.userSelect="none",t.style.WebkitUserSelect="none",t.style.cursor="grab")}function hideElement(t){t.style.display="none",t.style.position="fixed",t.style.zIndex="-5"}function decorateShadowEl(t){t.style.visibility="hidden",t.setAttribute(SHADOW_ELEMENT_ATTRIBUTE_NAME,"true")}function unDecorateShadowElement(t){t.style.visibility="",t.removeAttribute(SHADOW_ELEMENT_ATTRIBUTE_NAME)}function styleActiveDropZones(t,e=()=>{},n=()=>[]){t.forEach(r=>{const o=e(r);Object.keys(o).forEach(i=>{r.style[i]=o[i]}),n(r).forEach(i=>r.classList.add(i))})}function styleInactiveDropZones(t,e=()=>{},n=()=>[]){t.forEach(r=>{const o=e(r);Object.keys(o).forEach(i=>{r.style[i]=""}),n(r).forEach(i=>r.classList.contains(i)&&r.classList.remove(i))})}function preventShrinking(t){const e=t.style.minHeight;t.style.minHeight=window.getComputedStyle(t).getPropertyValue("height");const n=t.style.minWidth;return t.style.minWidth=window.getComputedStyle(t).getPropertyValue("width"),function(){t.style.minHeight=e,t.style.minWidth=n}}const DEFAULT_DROP_ZONE_TYPE$1="--any--",MIN_OBSERVATION_INTERVAL_MS=100,MIN_MOVEMENT_BEFORE_DRAG_START_PX=3,DEFAULT_DROP_TARGET_STYLE$1={outline:"rgba(255, 255, 102, 0.7) solid 2px"};let originalDragTarget,draggedEl,draggedElData,draggedElType,originDropZone,originIndex,shadowElData,shadowElDropZone,dragStartMousePosition,currentMousePosition,isWorkingOnPreviousDrag=!1,finalizingPreviousDrag=!1,unlockOriginDzMinDimensions,isDraggedOutsideOfAnyDz=!1,scheduledForRemovalAfterDrop=[];const typeToDropZones$1=new Map,dzToConfig$1=new Map,elToMouseDownListener=new WeakMap;function registerDropZone$1(t,e){typeToDropZones$1.has(e)||typeToDropZones$1.set(e,new Set),typeToDropZones$1.get(e).has(t)||(typeToDropZones$1.get(e).add(t),incrementActiveDropZoneCount())}function unregisterDropZone$1(t,e){typeToDropZones$1.get(e).delete(t),decrementActiveDropZoneCount(),typeToDropZones$1.get(e).size===0&&typeToDropZones$1.delete(e)}function watchDraggedElement(){armWindowScroller();const t=typeToDropZones$1.get(draggedElType);for(const n of t)n.addEventListener(DRAGGED_ENTERED_EVENT_NAME,handleDraggedEntered),n.addEventListener(DRAGGED_LEFT_EVENT_NAME,handleDraggedLeft),n.addEventListener(DRAGGED_OVER_INDEX_EVENT_NAME,handleDraggedIsOverIndex);window.addEventListener(DRAGGED_LEFT_DOCUMENT_EVENT_NAME,handleDrop$1);const e=Math.max(MIN_OBSERVATION_INTERVAL_MS,...Array.from(t.keys()).map(n=>dzToConfig$1.get(n).dropAnimationDurationMs));observe(draggedEl,t,e*1.07)}function unWatchDraggedElement(){disarmWindowScroller();const t=typeToDropZones$1.get(draggedElType);for(const e of t)e.removeEventListener(DRAGGED_ENTERED_EVENT_NAME,handleDraggedEntered),e.removeEventListener(DRAGGED_LEFT_EVENT_NAME,handleDraggedLeft),e.removeEventListener(DRAGGED_OVER_INDEX_EVENT_NAME,handleDraggedIsOverIndex);window.removeEventListener(DRAGGED_LEFT_DOCUMENT_EVENT_NAME,handleDrop$1),unobserve()}function findShadowPlaceHolderIdx(t){return t.findIndex(e=>e[ITEM_ID_KEY]===SHADOW_PLACEHOLDER_ITEM_ID)}function findShadowElementIdx(t){return t.findIndex(e=>!!e[SHADOW_ITEM_MARKER_PROPERTY_NAME]&&e[ITEM_ID_KEY]!==SHADOW_PLACEHOLDER_ITEM_ID)}function handleDraggedEntered(t){let{items:e,dropFromOthersDisabled:n}=dzToConfig$1.get(t.currentTarget);if(n&&t.currentTarget!==originDropZone)return;if(isDraggedOutsideOfAnyDz=!1,e=e.filter(s=>s[ITEM_ID_KEY]!==shadowElData[ITEM_ID_KEY]),originDropZone!==t.currentTarget){const a=dzToConfig$1.get(originDropZone).items.filter(l=>!l[SHADOW_ITEM_MARKER_PROPERTY_NAME]);dispatchConsiderEvent(originDropZone,a,{trigger:TRIGGERS.DRAGGED_ENTERED_ANOTHER,id:draggedElData[ITEM_ID_KEY],source:SOURCES.POINTER})}else{const s=findShadowPlaceHolderIdx(e);s!==-1&&e.splice(s,1)}const{index:r,isProximityBased:o}=t.detail.indexObj,i=o&&r===t.currentTarget.children.length-1?r+1:r;shadowElDropZone=t.currentTarget,e.splice(i,0,shadowElData),dispatchConsiderEvent(t.currentTarget,e,{trigger:TRIGGERS.DRAGGED_ENTERED,id:draggedElData[ITEM_ID_KEY],source:SOURCES.POINTER})}function handleDraggedLeft(t){if(!isWorkingOnPreviousDrag)return;const{items:e,dropFromOthersDisabled:n}=dzToConfig$1.get(t.currentTarget);if(n&&t.currentTarget!==originDropZone&&t.currentTarget!==shadowElDropZone)return;const r=findShadowElementIdx(e),o=e.splice(r,1)[0];shadowElDropZone=void 0;const{type:i,theOtherDz:s}=t.detail;if(i===DRAGGED_LEFT_TYPES.OUTSIDE_OF_ANY||i===DRAGGED_LEFT_TYPES.LEFT_FOR_ANOTHER&&s!==originDropZone&&dzToConfig$1.get(s).dropFromOthersDisabled){isDraggedOutsideOfAnyDz=!0,shadowElDropZone=originDropZone;const a=dzToConfig$1.get(originDropZone).items;a.splice(originIndex,0,o),dispatchConsiderEvent(originDropZone,a,{trigger:TRIGGERS.DRAGGED_LEFT_ALL,id:draggedElData[ITEM_ID_KEY],source:SOURCES.POINTER})}dispatchConsiderEvent(t.currentTarget,e,{trigger:TRIGGERS.DRAGGED_LEFT,id:draggedElData[ITEM_ID_KEY],source:SOURCES.POINTER})}function handleDraggedIsOverIndex(t){const{items:e,dropFromOthersDisabled:n}=dzToConfig$1.get(t.currentTarget);if(n&&t.currentTarget!==originDropZone)return;isDraggedOutsideOfAnyDz=!1;const{index:r}=t.detail.indexObj,o=findShadowElementIdx(e);e.splice(o,1),e.splice(r,0,shadowElData),dispatchConsiderEvent(t.currentTarget,e,{trigger:TRIGGERS.DRAGGED_OVER_INDEX,id:draggedElData[ITEM_ID_KEY],source:SOURCES.POINTER})}function handleMouseMove(t){t.preventDefault();const e=t.touches?t.touches[0]:t;currentMousePosition={x:e.clientX,y:e.clientY},draggedEl.style.transform=`translate3d(${currentMousePosition.x-dragStartMousePosition.x}px, ${currentMousePosition.y-dragStartMousePosition.y}px, 0)`}function handleDrop$1(){finalizingPreviousDrag=!0,window.removeEventListener("mousemove",handleMouseMove),window.removeEventListener("touchmove",handleMouseMove),window.removeEventListener("mouseup",handleDrop$1),window.removeEventListener("touchend",handleDrop$1),unWatchDraggedElement(),moveDraggedElementToWasDroppedState(draggedEl),shadowElDropZone||(shadowElDropZone=originDropZone);let{items:t,type:e}=dzToConfig$1.get(shadowElDropZone);styleInactiveDropZones(typeToDropZones$1.get(e),o=>dzToConfig$1.get(o).dropTargetStyle,o=>dzToConfig$1.get(o).dropTargetClasses);let n=findShadowElementIdx(t);n===-1&&(n=originIndex),t=t.map(o=>o[SHADOW_ITEM_MARKER_PROPERTY_NAME]?draggedElData:o);function r(){unlockOriginDzMinDimensions(),dispatchFinalizeEvent(shadowElDropZone,t,{trigger:isDraggedOutsideOfAnyDz?TRIGGERS.DROPPED_OUTSIDE_OF_ANY:TRIGGERS.DROPPED_INTO_ZONE,id:draggedElData[ITEM_ID_KEY],source:SOURCES.POINTER}),shadowElDropZone!==originDropZone&&dispatchFinalizeEvent(originDropZone,dzToConfig$1.get(originDropZone).items,{trigger:TRIGGERS.DROPPED_INTO_ANOTHER,id:draggedElData[ITEM_ID_KEY],source:SOURCES.POINTER}),unDecorateShadowElement(shadowElDropZone.children[n]),cleanupPostDrop()}animateDraggedToFinalPosition(n,r)}function animateDraggedToFinalPosition(t,e){const n=getBoundingRectNoTransforms(shadowElDropZone.children[t]),r={x:n.left-parseFloat(draggedEl.style.left),y:n.top-parseFloat(draggedEl.style.top)},{dropAnimationDurationMs:o}=dzToConfig$1.get(shadowElDropZone),i=`transform ${o}ms ease`;draggedEl.style.transition=draggedEl.style.transition?draggedEl.style.transition+","+i:i,draggedEl.style.transform=`translate3d(${r.x}px, ${r.y}px, 0)`,window.setTimeout(e,o)}function scheduleDZForRemovalAfterDrop(t,e){scheduledForRemovalAfterDrop.push({dz:t,destroy:e}),window.requestAnimationFrame(()=>{hideElement(t),document.body.appendChild(t)})}function cleanupPostDrop(){draggedEl.remove(),originalDragTarget.remove(),scheduledForRemovalAfterDrop.length&&(scheduledForRemovalAfterDrop.forEach(({dz:t,destroy:e})=>{e(),t.remove()}),scheduledForRemovalAfterDrop=[]),draggedEl=void 0,originalDragTarget=void 0,draggedElData=void 0,draggedElType=void 0,originDropZone=void 0,originIndex=void 0,shadowElData=void 0,shadowElDropZone=void 0,dragStartMousePosition=void 0,currentMousePosition=void 0,isWorkingOnPreviousDrag=!1,finalizingPreviousDrag=!1,unlockOriginDzMinDimensions=void 0,isDraggedOutsideOfAnyDz=!1}function dndzone$2(t,e){let n=!1;const r={items:void 0,type:void 0,flipDurationMs:0,dragDisabled:!1,morphDisabled:!1,dropFromOthersDisabled:!1,dropTargetStyle:DEFAULT_DROP_TARGET_STYLE$1,dropTargetClasses:[],transformDraggedElement:()=>{},centreDraggedOnCursor:!1};let o=new Map;function i(){window.addEventListener("mousemove",l,{passive:!1}),window.addEventListener("touchmove",l,{passive:!1,capture:!1}),window.addEventListener("mouseup",a,{passive:!1}),window.addEventListener("touchend",a,{passive:!1})}function s(){window.removeEventListener("mousemove",l),window.removeEventListener("touchmove",l),window.removeEventListener("mouseup",a),window.removeEventListener("touchend",a)}function a(){s(),originalDragTarget=void 0,dragStartMousePosition=void 0,currentMousePosition=void 0}function l(c){c.preventDefault();const _=c.touches?c.touches[0]:c;currentMousePosition={x:_.clientX,y:_.clientY},(Math.abs(currentMousePosition.x-dragStartMousePosition.x)>=MIN_MOVEMENT_BEFORE_DRAG_START_PX||Math.abs(currentMousePosition.y-dragStartMousePosition.y)>=MIN_MOVEMENT_BEFORE_DRAG_START_PX)&&(s(),d())}function u(c){if(c.target!==c.currentTarget&&(c.target.value!==void 0||c.target.isContentEditable)||c.button||isWorkingOnPreviousDrag)return;c.stopPropagation();const _=c.touches?c.touches[0]:c;dragStartMousePosition={x:_.clientX,y:_.clientY},currentMousePosition=z({},dragStartMousePosition),originalDragTarget=c.currentTarget,i()}function d(){isWorkingOnPreviousDrag=!0;const c=o.get(originalDragTarget);originIndex=c,originDropZone=originalDragTarget.parentElement;const _=originDropZone.getRootNode(),m=_.body||_,{items:h,type:y,centreDraggedOnCursor:g}=r;draggedElData=z({},h[c]),draggedElType=y,shadowElData=K(z({},draggedElData),{[SHADOW_ITEM_MARKER_PROPERTY_NAME]:!0});const I=K(z({},shadowElData),{[ITEM_ID_KEY]:SHADOW_PLACEHOLDER_ITEM_ID});draggedEl=createDraggedElementFrom(originalDragTarget,g&&currentMousePosition);function T(){draggedEl.parentElement?window.requestAnimationFrame(T):(m.appendChild(draggedEl),draggedEl.focus(),watchDraggedElement(),hideElement(originalDragTarget),m.appendChild(originalDragTarget))}window.requestAnimationFrame(T),styleActiveDropZones(Array.from(typeToDropZones$1.get(r.type)).filter(R=>R===originDropZone||!dzToConfig$1.get(R).dropFromOthersDisabled),R=>dzToConfig$1.get(R).dropTargetStyle,R=>dzToConfig$1.get(R).dropTargetClasses),h.splice(c,1,I),unlockOriginDzMinDimensions=preventShrinking(originDropZone),dispatchConsiderEvent(originDropZone,h,{trigger:TRIGGERS.DRAG_STARTED,id:draggedElData[ITEM_ID_KEY],source:SOURCES.POINTER}),window.addEventListener("mousemove",handleMouseMove,{passive:!1}),window.addEventListener("touchmove",handleMouseMove,{passive:!1,capture:!1}),window.addEventListener("mouseup",handleDrop$1,{passive:!1}),window.addEventListener("touchend",handleDrop$1,{passive:!1})}function f({items:c=void 0,flipDurationMs:_=0,type:m=DEFAULT_DROP_ZONE_TYPE$1,dragDisabled:h=!1,morphDisabled:y=!1,dropFromOthersDisabled:g=!1,dropTargetStyle:I=DEFAULT_DROP_TARGET_STYLE$1,dropTargetClasses:T=[],transformDraggedElement:R=()=>{},centreDraggedOnCursor:L=!1}){r.dropAnimationDurationMs=_,r.type&&m!==r.type&&unregisterDropZone$1(t,r.type),r.type=m,registerDropZone$1(t,m),r.items=[...c],r.dragDisabled=h,r.morphDisabled=y,r.transformDraggedElement=R,r.centreDraggedOnCursor=L,n&&isWorkingOnPreviousDrag&&!finalizingPreviousDrag&&(!areObjectsShallowEqual(I,r.dropTargetStyle)||!areArraysShallowEqualSameOrder(T,r.dropTargetClasses))&&(styleInactiveDropZones([t],()=>r.dropTargetStyle,()=>T),styleActiveDropZones([t],()=>I,()=>T)),r.dropTargetStyle=I,r.dropTargetClasses=[...T];function v(b,A){return dzToConfig$1.get(b)?dzToConfig$1.get(b)[A]:r[A]}n&&isWorkingOnPreviousDrag&&r.dropFromOthersDisabled!==g&&(g?styleInactiveDropZones([t],b=>v(b,"dropTargetStyle"),b=>v(b,"dropTargetClasses")):styleActiveDropZones([t],b=>v(b,"dropTargetStyle"),b=>v(b,"dropTargetClasses"))),r.dropFromOthersDisabled=g,dzToConfig$1.set(t,r);const w=findShadowElementIdx(r.items);for(let b=0;b<t.children.length;b++){const A=t.children[b];if(styleDraggable(A,h),b===w){y||morphDraggedElementToBeLike(draggedEl,A,currentMousePosition.x,currentMousePosition.y,()=>r.transformDraggedElement(draggedEl,draggedElData,b)),decorateShadowEl(A);continue}A.removeEventListener("mousedown",elToMouseDownListener.get(A)),A.removeEventListener("touchstart",elToMouseDownListener.get(A)),h||(A.addEventListener("mousedown",u),A.addEventListener("touchstart",u),elToMouseDownListener.set(A,u)),o.set(A,b),n||(n=!0)}}return f(e),{update:c=>{f(c)},destroy:()=>{function c(){unregisterDropZone$1(t,dzToConfig$1.get(t).type),dzToConfig$1.delete(t)}isWorkingOnPreviousDrag?scheduleDZForRemovalAfterDrop(t,c):c()}}}const INSTRUCTION_IDs$1={DND_ZONE_ACTIVE:"dnd-zone-active",DND_ZONE_DRAG_DISABLED:"dnd-zone-drag-disabled"},ID_TO_INSTRUCTION={[INSTRUCTION_IDs$1.DND_ZONE_ACTIVE]:"Tab to one the items and press space-bar or enter to start dragging it",[INSTRUCTION_IDs$1.DND_ZONE_DRAG_DISABLED]:"This is a disabled drag and drop list"},ALERT_DIV_ID="dnd-action-aria-alert";let alertsDiv;function initAriaOnBrowser(){alertsDiv||(alertsDiv=document.createElement("div"),function(){alertsDiv.id=ALERT_DIV_ID,alertsDiv.style.position="fixed",alertsDiv.style.bottom="0",alertsDiv.style.left="0",alertsDiv.style.zIndex="-5",alertsDiv.style.opacity="0",alertsDiv.style.height="0",alertsDiv.style.width="0",alertsDiv.setAttribute("role","alert")}(),document.body.prepend(alertsDiv),Object.entries(ID_TO_INSTRUCTION).forEach(([t,e])=>document.body.prepend(instructionToHiddenDiv(t,e))))}function initAria(){return isOnServer?null:(document.readyState==="complete"?initAriaOnBrowser():window.addEventListener("DOMContentLoaded",initAriaOnBrowser),z({},INSTRUCTION_IDs$1))}function destroyAria(){isOnServer||!alertsDiv||(Object.keys(ID_TO_INSTRUCTION).forEach(t=>{var e;return(e=document.getElementById(t))==null?void 0:e.remove()}),alertsDiv.remove(),alertsDiv=void 0)}function instructionToHiddenDiv(t,e){const n=document.createElement("div");return n.id=t,n.innerHTML=`<p>${e}</p>`,n.style.display="none",n.style.position="fixed",n.style.zIndex="-5",n}function alertToScreenReader(t){if(isOnServer)return;alertsDiv||initAriaOnBrowser(),alertsDiv.innerHTML="";const e=document.createTextNode(t);alertsDiv.appendChild(e),alertsDiv.style.display="none",alertsDiv.style.display="inline"}const DEFAULT_DROP_ZONE_TYPE="--any--",DEFAULT_DROP_TARGET_STYLE={outline:"rgba(255, 255, 102, 0.7) solid 2px"};let isDragging=!1,draggedItemType,focusedDz,focusedDzLabel="",focusedItem,focusedItemId,focusedItemLabel="";const allDragTargets=new WeakSet,elToKeyDownListeners=new WeakMap,elToFocusListeners=new WeakMap,dzToHandles=new Map,dzToConfig=new Map,typeToDropZones=new Map;let INSTRUCTION_IDs;function registerDropZone(t,e){typeToDropZones.size===0&&(INSTRUCTION_IDs=initAria(),window.addEventListener("keydown",globalKeyDownHandler),window.addEventListener("click",globalClickHandler)),typeToDropZones.has(e)||typeToDropZones.set(e,new Set),typeToDropZones.get(e).has(t)||(typeToDropZones.get(e).add(t),incrementActiveDropZoneCount())}function unregisterDropZone(t,e){focusedDz===t&&handleDrop(),typeToDropZones.get(e).delete(t),decrementActiveDropZoneCount(),typeToDropZones.get(e).size===0&&typeToDropZones.delete(e),typeToDropZones.size===0&&(window.removeEventListener("keydown",globalKeyDownHandler),window.removeEventListener("click",globalClickHandler),INSTRUCTION_IDs=void 0,destroyAria())}function globalKeyDownHandler(t){if(!!isDragging)switch(t.key){case"Escape":{handleDrop();break}}}function globalClickHandler(){!isDragging||allDragTargets.has(document.activeElement)||handleDrop()}function handleZoneFocus(t){if(!isDragging)return;const e=t.currentTarget;if(e===focusedDz)return;focusedDzLabel=e.getAttribute("aria-label")||"";const{items:n}=dzToConfig.get(focusedDz),r=n.find(u=>u[ITEM_ID_KEY]===focusedItemId),o=n.indexOf(r),i=n.splice(o,1)[0],{items:s,autoAriaDisabled:a}=dzToConfig.get(e);e.getBoundingClientRect().top<focusedDz.getBoundingClientRect().top||e.getBoundingClientRect().left<focusedDz.getBoundingClientRect().left?(s.push(i),a||alertToScreenReader(`Moved item ${focusedItemLabel} to the end of the list ${focusedDzLabel}`)):(s.unshift(i),a||alertToScreenReader(`Moved item ${focusedItemLabel} to the beginning of the list ${focusedDzLabel}`)),dispatchFinalizeEvent(focusedDz,n,{trigger:TRIGGERS.DROPPED_INTO_ANOTHER,id:focusedItemId,source:SOURCES.KEYBOARD}),dispatchFinalizeEvent(e,s,{trigger:TRIGGERS.DROPPED_INTO_ZONE,id:focusedItemId,source:SOURCES.KEYBOARD}),focusedDz=e}function triggerAllDzsUpdate(){dzToHandles.forEach(({update:t},e)=>t(dzToConfig.get(e)))}function handleDrop(t=!0){dzToConfig.get(focusedDz).autoAriaDisabled||alertToScreenReader(`Stopped dragging item ${focusedItemLabel}`),allDragTargets.has(document.activeElement)&&document.activeElement.blur(),t&&dispatchConsiderEvent(focusedDz,dzToConfig.get(focusedDz).items,{trigger:TRIGGERS.DRAG_STOPPED,id:focusedItemId,source:SOURCES.KEYBOARD}),styleInactiveDropZones(typeToDropZones.get(draggedItemType),e=>dzToConfig.get(e).dropTargetStyle,e=>dzToConfig.get(e).dropTargetClasses),focusedItem=null,focusedItemId=null,focusedItemLabel="",draggedItemType=null,focusedDz=null,focusedDzLabel="",isDragging=!1,triggerAllDzsUpdate()}function dndzone$1(t,e){const n={items:void 0,type:void 0,dragDisabled:!1,zoneTabIndex:0,dropFromOthersDisabled:!1,dropTargetStyle:DEFAULT_DROP_TARGET_STYLE,dropTargetClasses:[],autoAriaDisabled:!1};function r(d,f,c){d.length<=1||d.splice(c,1,d.splice(f,1,d[c])[0])}function o(d){switch(d.key){case"Enter":case" ":{if((d.target.disabled!==void 0||d.target.href||d.target.isContentEditable)&&!allDragTargets.has(d.target))return;d.preventDefault(),d.stopPropagation(),isDragging?handleDrop():i(d);break}case"ArrowDown":case"ArrowRight":{if(!isDragging)return;d.preventDefault(),d.stopPropagation();const{items:f}=dzToConfig.get(t),c=Array.from(t.children),_=c.indexOf(d.currentTarget);_<c.length-1&&(n.autoAriaDisabled||alertToScreenReader(`Moved item ${focusedItemLabel} to position ${_+2} in the list ${focusedDzLabel}`),r(f,_,_+1),dispatchFinalizeEvent(t,f,{trigger:TRIGGERS.DROPPED_INTO_ZONE,id:focusedItemId,source:SOURCES.KEYBOARD}));break}case"ArrowUp":case"ArrowLeft":{if(!isDragging)return;d.preventDefault(),d.stopPropagation();const{items:f}=dzToConfig.get(t),_=Array.from(t.children).indexOf(d.currentTarget);_>0&&(n.autoAriaDisabled||alertToScreenReader(`Moved item ${focusedItemLabel} to position ${_} in the list ${focusedDzLabel}`),r(f,_,_-1),dispatchFinalizeEvent(t,f,{trigger:TRIGGERS.DROPPED_INTO_ZONE,id:focusedItemId,source:SOURCES.KEYBOARD}));break}}}function i(d){a(d.currentTarget),focusedDz=t,draggedItemType=n.type,isDragging=!0;const f=Array.from(typeToDropZones.get(n.type)).filter(c=>c===focusedDz||!dzToConfig.get(c).dropFromOthersDisabled);if(styleActiveDropZones(f,c=>dzToConfig.get(c).dropTargetStyle,c=>dzToConfig.get(c).dropTargetClasses),!n.autoAriaDisabled){let c=`Started dragging item ${focusedItemLabel}. Use the arrow keys to move it within its list ${focusedDzLabel}`;f.length>1&&(c+=", or tab to another list in order to move the item into it"),alertToScreenReader(c)}dispatchConsiderEvent(t,dzToConfig.get(t).items,{trigger:TRIGGERS.DRAG_STARTED,id:focusedItemId,source:SOURCES.KEYBOARD}),triggerAllDzsUpdate()}function s(d){!isDragging||d.currentTarget!==focusedItem&&(d.stopPropagation(),handleDrop(!1),i(d))}function a(d){const{items:f}=dzToConfig.get(t),c=Array.from(t.children),_=c.indexOf(d);focusedItem=d,focusedItem.tabIndex=0,focusedItemId=f[_][ITEM_ID_KEY],focusedItemLabel=c[_].getAttribute("aria-label")||""}function l({items:d=[],type:f=DEFAULT_DROP_ZONE_TYPE,dragDisabled:c=!1,zoneTabIndex:_=0,dropFromOthersDisabled:m=!1,dropTargetStyle:h=DEFAULT_DROP_TARGET_STYLE,dropTargetClasses:y=[],autoAriaDisabled:g=!1}){n.items=[...d],n.dragDisabled=c,n.dropFromOthersDisabled=m,n.zoneTabIndex=_,n.dropTargetStyle=h,n.dropTargetClasses=y,n.autoAriaDisabled=g,n.type&&f!==n.type&&unregisterDropZone(t,n.type),n.type=f,registerDropZone(t,f),g||(t.setAttribute("aria-disabled",c),t.setAttribute("role","list"),t.setAttribute("aria-describedby",c?INSTRUCTION_IDs.DND_ZONE_DRAG_DISABLED:INSTRUCTION_IDs.DND_ZONE_ACTIVE)),dzToConfig.set(t,n),isDragging?t.tabIndex=t===focusedDz||focusedItem.contains(t)||n.dropFromOthersDisabled||focusedDz&&n.type!==dzToConfig.get(focusedDz).type?-1:0:t.tabIndex=n.zoneTabIndex,t.addEventListener("focus",handleZoneFocus);for(let I=0;I<t.children.length;I++){const T=t.children[I];allDragTargets.add(T),T.tabIndex=isDragging?-1:0,g||T.setAttribute("role","listitem"),T.removeEventListener("keydown",elToKeyDownListeners.get(T)),T.removeEventListener("click",elToFocusListeners.get(T)),c||(T.addEventListener("keydown",o),elToKeyDownListeners.set(T,o),T.addEventListener("click",s),elToFocusListeners.set(T,s)),isDragging&&n.items[I][ITEM_ID_KEY]===focusedItemId&&(focusedItem=T,focusedItem.tabIndex=0,T.focus())}}l(e);const u={update:d=>{l(d)},destroy:()=>{unregisterDropZone(t,n.type),dzToConfig.delete(t),dzToHandles.delete(t)}};return dzToHandles.set(t,u),u}function dndzone(t,e){validateOptions(e);const n=dndzone$2(t,e),r=dndzone$1(t,e);return{update:o=>{validateOptions(o),n.update(o),r.update(o)},destroy:()=>{n.destroy(),r.destroy()}}}function validateOptions(t){const h=t,{items:e,flipDurationMs:n,type:r,dragDisabled:o,morphDisabled:i,dropFromOthersDisabled:s,zoneTabIndex:a,dropTargetStyle:l,dropTargetClasses:u,transformDraggedElement:d,autoAriaDisabled:f,centreDraggedOnCursor:c}=h,_=oe(h,["items","flipDurationMs","type","dragDisabled","morphDisabled","dropFromOthersDisabled","zoneTabIndex","dropTargetStyle","dropTargetClasses","transformDraggedElement","autoAriaDisabled","centreDraggedOnCursor"]);if(Object.keys(_).length>0&&console.warn("dndzone will ignore unknown options",_),!e)throw new Error("no 'items' key provided to dndzone");const m=e.find(y=>!{}.hasOwnProperty.call(y,ITEM_ID_KEY));if(m)throw new Error(`missing '${ITEM_ID_KEY}' property for item ${toString(m)}`);if(u&&!Array.isArray(u))throw new Error(`dropTargetClasses should be an array but instead it is a ${typeof u}, ${toString(u)}`);if(a&&!isInt(a))throw new Error(`zoneTabIndex should be a number but instead it is a ${typeof a}, ${toString(a)}`)}function isInt(t){return!isNaN(t)&&function(e){return(e|0)===e}(parseFloat(t))}function isSubscription(t){return"subscription"in t}function isGroup(t){return"subscriptions"in t}var SubscriptionsEditor_svelte_svelte_type_style_lang="";const{Map:Map_1}=globals;function get_each_context(t,e,n){const r=t.slice();return r[37]=e[n],r}function get_each_context_1(t,e,n){const r=t.slice();return r[40]=e[n],r}function get_each_context_2(t,e,n){const r=t.slice();return r[37]=e[n],r}function create_default_slot_5(t){let e,n,r,o,i,s,a,l;return{c(){e=element("div"),n=element("p"),n.textContent="Deck Editor",r=space(),o=element("label"),i=element("input"),s=text(`
              Hide added subscriptions`),attr(n,"class","font-extrabold"),attr(i,"type","checkbox"),i.value=t[2],attr(e,"class","min-w-[14rem]")},m(u,d){insert(u,e,d),append(e,n),append(e,r),append(e,o),append(o,i),append(o,s),a||(l=listen(i,"change",t[7]),a=!0)},p(u,d){d[0]&4&&(i.value=u[2])},d(u){u&&detach(e),a=!1,l()}}}function create_default_slot_4(t){let e;return{c(){e=text("Subscriptions")},m(n,r){insert(n,e,r)},d(n){n&&detach(e)}}}function create_each_block_2(t,e){let n,r,o,i,s,a=e[37].subscription.title+"",l,u,d,f,c=noop;return{key:t,first:null,c(){n=element("div"),r=element("img"),i=space(),s=element("span"),l=text(a),d=space(),attr(r,"class","inline-block h-8 w-8 rounded-2xl"),src_url_equal(r.src,o=e[37].subscription.thumbnailUrl)||attr(r,"src",o),attr(r,"alt",""),attr(r,"loading","lazy"),attr(r,"width","88"),attr(r,"height","88"),attr(s,"title",u=e[37].subscription.title),attr(n,"class","bg-neutral-700 m-1 p-0.5 rounded-2xl truncate"),set_style(n,"width","calc(100% - 0.5rem)"),this.first=n},m(_,m){insert(_,n,m),append(n,r),append(n,i),append(n,s),append(s,l),append(n,d)},p(_,m){e=_,m[0]&8&&!src_url_equal(r.src,o=e[37].subscription.thumbnailUrl)&&attr(r,"src",o),m[0]&8&&a!==(a=e[37].subscription.title+"")&&set_data(l,a),m[0]&8&&u!==(u=e[37].subscription.title)&&attr(s,"title",u)},r(){f=n.getBoundingClientRect()},f(){fix_position(n),c()},a(){c(),c=create_animation(n,f,flip,{duration:flipDurationMs})},d(_){_&&detach(n)}}}function create_default_slot_3(t){let e;return{c(){e=text("Deck")},m(n,r){insert(n,e,r)},d(n){n&&detach(e)}}}function create_if_block_1(t){let e,n=t[37].name+"",r,o,i,s,a=[],l=new Map_1,u,d,f,c=t[37].subscriptions;const _=y=>y[40].id;for(let y=0;y<c.length;y+=1){let g=get_each_context_1(t,c,y),I=_(g);l.set(I,a[y]=create_each_block_1(I,g))}function m(...y){return t[23](t[37],...y)}function h(...y){return t[24](t[37],...y)}return{c(){e=element("span"),r=text(n),i=space(),s=element("div");for(let y=0;y<a.length;y+=1)a[y].c();attr(e,"class","pl-2"),attr(e,"title",o=t[37].name),attr(s,"class","w-full bg-neutral-500 mt-1 py-0.5 rounded-2xl")},m(y,g){insert(y,e,g),append(e,r),insert(y,i,g),insert(y,s,g);for(let I=0;I<a.length;I+=1)a[I].m(s,null);d||(f=[action_destroyer(u=dndzone.call(null,s,{items:t[37].subscriptions,flipDurationMs,dropFromOthersDisabled:t[6]&&t[18](t[37]),centreDraggedOnCursor:!0})),listen(s,"consider",m),listen(s,"finalize",h)],d=!0)},p(y,g){if(t=y,g[0]&16&&n!==(n=t[37].name+"")&&set_data(r,n),g[0]&16&&o!==(o=t[37].name)&&attr(e,"title",o),g[0]&524304){c=t[37].subscriptions;for(let I=0;I<a.length;I+=1)a[I].r();a=update_keyed_each(a,g,_,1,t,c,l,s,fix_and_destroy_block,create_each_block_1,null,get_each_context_1);for(let I=0;I<a.length;I+=1)a[I].a()}u&&is_function(u.update)&&g[0]&80&&u.update.call(null,{items:t[37].subscriptions,flipDurationMs,dropFromOthersDisabled:t[6]&&t[18](t[37]),centreDraggedOnCursor:!0})},d(y){y&&detach(e),y&&detach(i),y&&detach(s);for(let g=0;g<a.length;g+=1)a[g].d();d=!1,run_all(f)}}}function create_if_block$1(t){let e,n,r,o,i=t[37].subscription.title+"",s,a;return{c(){e=element("img"),r=space(),o=element("span"),s=text(i),attr(e,"class","inline-block h-8 w-8 rounded-2xl"),src_url_equal(e.src,n=t[37].subscription.thumbnailUrl)||attr(e,"src",n),attr(e,"alt",""),attr(e,"loading","lazy"),attr(e,"width","88"),attr(e,"height","88"),attr(o,"title",a=t[37].subscription.title)},m(l,u){insert(l,e,u),insert(l,r,u),insert(l,o,u),append(o,s)},p(l,u){u[0]&16&&!src_url_equal(e.src,n=l[37].subscription.thumbnailUrl)&&attr(e,"src",n),u[0]&16&&i!==(i=l[37].subscription.title+"")&&set_data(s,i),u[0]&16&&a!==(a=l[37].subscription.title)&&attr(o,"title",a)},d(l){l&&detach(e),l&&detach(r),l&&detach(o)}}}function create_each_block_1(t,e){let n,r,o,i,s,a,l,u=e[40].subscription.title+"",d,f,c,_,m=noop,h,y;function g(){return e[22](e[37],e[40])}return{key:t,first:null,c(){n=element("div"),r=element("span"),r.textContent="x",o=space(),i=element("img"),a=space(),l=element("span"),d=text(u),c=space(),attr(r,"class","float-right"),attr(i,"class","inline-block h-8 w-8 rounded-2xl"),src_url_equal(i.src,s=e[40].subscription.thumbnailUrl)||attr(i,"src",s),attr(i,"alt",""),attr(i,"loading","lazy"),attr(i,"width","88"),attr(i,"height","88"),attr(l,"title",f=e[40].subscription.title),attr(n,"class","bg-neutral-700 m-1 p-0.5 rounded-2xl truncate"),set_style(n,"width","calc(100% - 0.5rem)"),this.first=n},m(I,T){insert(I,n,T),append(n,r),append(n,o),append(n,i),append(n,a),append(n,l),append(l,d),append(n,c),h||(y=listen(r,"click",g),h=!0)},p(I,T){e=I,T[0]&16&&!src_url_equal(i.src,s=e[40].subscription.thumbnailUrl)&&attr(i,"src",s),T[0]&16&&u!==(u=e[40].subscription.title+"")&&set_data(d,u),T[0]&16&&f!==(f=e[40].subscription.title)&&attr(l,"title",f)},r(){_=n.getBoundingClientRect()},f(){fix_position(n),m()},a(){m(),m=create_animation(n,_,flip,{duration:flipDurationMs})},d(I){I&&detach(n),h=!1,y()}}}function create_each_block(t,e){let n,r,o,i,s,a,l,u=noop,d,f;function c(){return e[21](e[37])}function _(y,g){if(g[0]&16&&(i=null),g[0]&16&&(s=null),i==null&&(i=!!isSubscription(y[37])),i)return create_if_block$1;if(s==null&&(s=!!isGroup(y[37])),s)return create_if_block_1}let m=_(e,[-1,-1]),h=m&&m(e);return{key:t,first:null,c(){n=element("div"),r=element("span"),r.textContent="x",o=space(),h&&h.c(),a=space(),attr(r,"class","float-right"),attr(n,"class","bg-neutral-700 m-1 p-0.5 rounded-2xl truncate"),set_style(n,"width","calc(100% - 0.5rem)"),this.first=n},m(y,g){insert(y,n,g),append(n,r),append(n,o),h&&h.m(n,null),append(n,a),d||(f=listen(r,"click",c),d=!0)},p(y,g){e=y,m===(m=_(e,g))&&h?h.p(e,g):(h&&h.d(1),h=m&&m(e),h&&(h.c(),h.m(n,a)))},r(){l=n.getBoundingClientRect()},f(){fix_position(n),u()},a(){u(),u=create_animation(n,l,flip,{duration:flipDurationMs})},d(y){y&&detach(n),h&&h.d(),d=!1,f()}}}function create_default_slot_2(t){let e;return{c(){e=text("Close")},m(n,r){insert(n,e,r)},d(n){n&&detach(e)}}}function create_default_slot_1(t){let e;return{c(){e=text("Add group")},m(n,r){insert(n,e,r)},d(n){n&&detach(e)}}}function create_default_slot(t){let e;return{c(){e=text("Save")},m(n,r){insert(n,e,r)},d(n){n&&detach(e)}}}function create_fragment$1(t){let e,n,r,o,i,s,a,l,u,d,f,c,_=[],m=new Map_1,h,y,g,I,T,R,L,v=[],w=new Map_1,b,A,O,N,P,M,F,k,q,B,x,Z,V;i=new Center({props:{$$slots:{default:[create_default_slot_5]},$$scope:{ctx:t}}}),d=new Center({props:{$$slots:{default:[create_default_slot_4]},$$scope:{ctx:t}}});let Y=t[3];const j=E=>E[37].id;for(let E=0;E<Y.length;E+=1){let D=get_each_context_2(t,Y,E),C=j(D);m.set(C,_[E]=create_each_block_2(C,D))}T=new Center({props:{$$slots:{default:[create_default_slot_3]},$$scope:{ctx:t}}});let G=t[4];const S=E=>E[37].id;for(let E=0;E<G.length;E+=1){let D=get_each_context(t,G,E),C=S(D);w.set(C,v[E]=create_each_block(C,D))}return N=new PrimaryButton({props:{class:"w-20 m-1 float-left",$$slots:{default:[create_default_slot_2]},$$scope:{ctx:t}}}),N.$on("click",t[20]),k=new PrimaryButton({props:{class:"w-24 rounded-l-none",$$slots:{default:[create_default_slot_1]},$$scope:{ctx:t}}}),k.$on("click",t[8]),B=new PrimaryButton({props:{class:"w-20 m-1 float-right",$$slots:{default:[create_default_slot]},$$scope:{ctx:t}}}),B.$on("click",t[9]),{c(){e=element("div"),n=element("div"),r=element("div"),o=element("div"),create_component(i.$$.fragment),s=space(),a=element("div"),l=element("div"),u=element("div"),create_component(d.$$.fragment),f=space(),c=element("div");for(let E=0;E<_.length;E+=1)_[E].c();y=space(),g=element("div"),I=element("div"),create_component(T.$$.fragment),R=space(),L=element("div");for(let E=0;E<v.length;E+=1)v[E].c();A=space(),O=element("div"),create_component(N.$$.fragment),P=space(),M=element("div"),F=element("input"),create_component(k.$$.fragment),q=space(),create_component(B.$$.fragment),attr(o,"class","w-full h-16"),attr(u,"class","w-full h-6"),attr(c,"class","w-full overflow-y-auto y-scroll mb-2"),set_style(c,"height","calc(100% - 2rem)"),attr(l,"class","inline-block min-w-[9.5rem] m-1 bg-neutral-800 rounded-xl"),set_style(l,"width","calc(50% - 0.65rem)"),set_style(l,"height","calc(100% - 0.5rem)"),attr(I,"class","w-full h-6"),attr(L,"class","w-full overflow-y-auto y-scroll mb-2"),set_style(L,"height","calc(100% - 2rem)"),attr(g,"class","inline-block min-w-[9.5rem] m-1 bg-neutral-800 rounded-xl"),set_style(g,"width","calc(50% - 0.65rem)"),set_style(g,"height","calc(100% - 0.5rem)"),attr(a,"class","w-full"),set_style(a,"height","calc(100% - 7rem)"),attr(F,"type","text"),attr(F,"class","bg-neutral-800 p-1.5 rounded-l-2xl"),set_style(F,"width","calc(100% - 6rem)"),attr(M,"class","inline-block m-1"),set_style(M,"width","calc(100% - 11.5rem)"),attr(O,"class","w-full h-12"),attr(r,"class","min-w-[20.5rem] w-full h-full"),attr(n,"class","absolute inset-y-0 left-1/2 -translate-x-1/2 w-full max-w-[40rem] bg-neutral-700 rounded-2xl overflow-x-auto x-scroll"),attr(e,"class","fixed inset-0 z-10 svelte-v5cnxt"),set_style(e,"background-color","rgba(0, 0, 0, 0.8)"),toggle_class(e,"fadeIn",t[1]),toggle_class(e,"fadeOut",!t[1])},m(E,D){insert(E,e,D),append(e,n),append(n,r),append(r,o),mount_component(i,o,null),append(r,s),append(r,a),append(a,l),append(l,u),mount_component(d,u,null),append(l,f),append(l,c);for(let C=0;C<_.length;C+=1)_[C].m(c,null);append(a,y),append(a,g),append(g,I),mount_component(T,I,null),append(g,R),append(g,L);for(let C=0;C<v.length;C+=1)v[C].m(L,null);t[25](L),append(r,A),append(r,O),mount_component(N,O,null),append(O,P),append(O,M),append(M,F),set_input_value(F,t[5]),mount_component(k,M,null),append(O,q),mount_component(B,O,null),x=!0,Z||(V=[action_destroyer(h=dndzone.call(null,c,{items:t[3],dropFromOthersDisabled:!0,centreDraggedOnCursor:!0,flipDurationMs})),listen(c,"consider",t[10]),listen(c,"finalize",t[11]),action_destroyer(b=dndzone.call(null,L,{items:t[4],flipDurationMs,dropFromOthersDisabled:t[6]&&t[14](),centreDraggedOnCursor:!0})),listen(L,"consider",t[12]),listen(L,"finalize",t[13]),listen(F,"input",t[26])],Z=!0)},p(E,D){const C={};D[0]&4|D[1]&16384&&(C.$$scope={dirty:D,ctx:E}),i.$set(C);const H={};if(D[1]&16384&&(H.$$scope={dirty:D,ctx:E}),d.$set(H),D[0]&8){Y=E[3];for(let U=0;U<_.length;U+=1)_[U].r();_=update_keyed_each(_,D,j,1,E,Y,m,c,fix_and_destroy_block,create_each_block_2,null,get_each_context_2);for(let U=0;U<_.length;U+=1)_[U].a()}h&&is_function(h.update)&&D[0]&8&&h.update.call(null,{items:E[3],dropFromOthersDisabled:!0,centreDraggedOnCursor:!0,flipDurationMs});const W={};if(D[1]&16384&&(W.$$scope={dirty:D,ctx:E}),T.$set(W),D[0]&1015888){G=E[4];for(let U=0;U<v.length;U+=1)v[U].r();v=update_keyed_each(v,D,S,1,E,G,w,L,fix_and_destroy_block,create_each_block,null,get_each_context);for(let U=0;U<v.length;U+=1)v[U].a()}b&&is_function(b.update)&&D[0]&80&&b.update.call(null,{items:E[4],flipDurationMs,dropFromOthersDisabled:E[6]&&E[14](),centreDraggedOnCursor:!0});const J={};D[1]&16384&&(J.$$scope={dirty:D,ctx:E}),N.$set(J),D[0]&32&&F.value!==E[5]&&set_input_value(F,E[5]);const Q={};D[1]&16384&&(Q.$$scope={dirty:D,ctx:E}),k.$set(Q);const ee={};D[1]&16384&&(ee.$$scope={dirty:D,ctx:E}),B.$set(ee),D[0]&2&&toggle_class(e,"fadeIn",E[1]),D[0]&2&&toggle_class(e,"fadeOut",!E[1])},i(E){x||(transition_in(i.$$.fragment,E),transition_in(d.$$.fragment,E),transition_in(T.$$.fragment,E),transition_in(N.$$.fragment,E),transition_in(k.$$.fragment,E),transition_in(B.$$.fragment,E),x=!0)},o(E){transition_out(i.$$.fragment,E),transition_out(d.$$.fragment,E),transition_out(T.$$.fragment,E),transition_out(N.$$.fragment,E),transition_out(k.$$.fragment,E),transition_out(B.$$.fragment,E),x=!1},d(E){E&&detach(e),destroy_component(i),destroy_component(d);for(let D=0;D<_.length;D+=1)_[D].d();destroy_component(T);for(let D=0;D<v.length;D+=1)v[D].d();t[25](null),destroy_component(N),destroy_component(k),destroy_component(B),Z=!1,run_all(V)}}}const flipDurationMs=300;function instance$1(t,e,n){let r,o,i,s;component_subscribe(t,editorVisible,S=>n(1,o=S)),component_subscribe(t,settingsStore,S=>n(31,i=S)),component_subscribe(t,subscriptionsStore,S=>n(32,s=S));let a=0,l=[],u=!1,d=[],f=[],c,_="";function m(){n(2,u=!u),h()}function h(){if(u){const S=new Set(f.flatMap(E=>isGroup(E)?E.subscriptions.map(D=>D.subscription.channelId):[E.subscription.channelId]));n(3,d=l.filter(E=>!S.has(E.subscription.channelId)))}else n(3,d=l)}function y(){_!==""&&(f.push({id:a++,name:_,subscriptions:[]}),n(5,_=""),n(4,f))}let g;function I(){const S=s.items,E=i.subscriptionGroups;a=0,l=S.map(C=>({id:a++,name:C.title,subscription:C})),h();const D=new Map(S.map(C=>[C.channelId,C]));n(4,f=E.map(C=>{const H=C.subscriptionIds.map(W=>D.get(W));return H.length===1&&C.name===H[0].title?{id:a++,name:C.name,subscription:H[0]}:{id:a++,name:C.name,subscriptions:H.map(W=>({id:a++,name:W.title,subscription:W}))}}))}async function T(){set_store_value(settingsStore,i.subscriptionGroups=f.map(S=>({name:S.name,subscriptionIds:isGroup(S)?S.subscriptions.map(E=>E.subscription.channelId):[S.subscription.channelId]})),i),await writeSettings(i),set_store_value(editorVisible,o=!1,o)}function R(S){if(S.detail.info.trigger===TRIGGERS.DRAG_STARTED){const E=l.findIndex(D=>D.id==S.detail.info.id);n(6,g=l[E]),l[E]=K(z({},g),{id:a++}),h(),q()}else n(3,d)}function L(S){n(3,d)}function v(S){S.detail.info.trigger===TRIGGERS.DRAG_STARTED&&(n(6,g=f.find(E=>E.id==S.detail.info.id)),q()),n(4,f=S.detail.items)}function w(S){n(4,f=S.detail.items),h()}function b(){if(isSubscription(g)){const S=g.subscription.channelId;return f.some(E=>!E[SHADOW_ITEM_MARKER_PROPERTY_NAME]&&isSubscription(E)&&E.subscription.channelId===S)}else return!1}function A(S){n(4,f=f.filter(E=>E.id!==S.id)),h()}function O(S,E){E.detail.info.trigger===TRIGGERS.DRAG_STARTED&&(n(6,g=S.subscriptions.find(D=>D.id==E.detail.info.id)),q()),S.subscriptions=E.detail.items,n(4,f)}function N(S,E){S.subscriptions=E.detail.items,n(4,f),h()}function P(S){if(isSubscription(g)){const E=g.subscription.channelId;return S.subscriptions.some(D=>!D[SHADOW_ITEM_MARKER_PROPERTY_NAME]&&D.subscription.channelId===E)}else return!0}function M(S,E){S.subscriptions=S.subscriptions.filter(D=>D.id!==E.id),n(4,f),h()}function F(){set_store_value(editorVisible,o=!1,o)}let k;function q(){k||(k=setInterval(B,100))}function B(){const S=document.getElementById("dnd-action-dragged-el");if(S){const E=S.getBoundingClientRect();E.bottom+32>=r.bottom?c.scrollBy({top:64,behavior:"smooth"}):E.top-32<=r.top&&c.scrollBy({top:-64,behavior:"smooth"})}else clearInterval(k),k=null}const x=S=>A(S),Z=(S,E)=>M(S,E),V=(S,E)=>O(S,E),Y=(S,E)=>N(S,E);function j(S){binding_callbacks[S?"unshift":"push"](()=>{c=S,n(0,c)})}function G(){_=this.value,n(5,_)}return t.$$.update=()=>{t.$$.dirty[0]&1&&(r=c==null?void 0:c.getBoundingClientRect()),t.$$.dirty[0]&2&&o&&I()},[c,o,u,d,f,_,g,m,y,T,R,L,v,w,b,A,O,N,P,M,F,x,Z,V,Y,j,G]}class SubscriptionsEditor extends SvelteComponent{constructor(e){super(),init(this,e,instance$1,create_fragment$1,safe_not_equal,{},null,[-1,-1])}}function create_catch_block(t){let e,n=JSON.stringify(t[5])+"",r;return{c(){e=element("p"),r=text(n),attr(e,"class","text-center")},m(o,i){insert(o,e,i),append(e,r)},p:noop,i:noop,o:noop,d(o){o&&detach(e)}}}function create_then_block(t){let e,n,r,o;const i=[create_if_block,create_else_block],s=[];function a(l,u){return l[1]?0:1}return e=a(t),n=s[e]=i[e](t),{c(){n.c(),r=empty()},m(l,u){s[e].m(l,u),insert(l,r,u),o=!0},p(l,u){let d=e;e=a(l),e===d?s[e].p(l,u):(group_outros(),transition_out(s[d],1,1,()=>{s[d]=null}),check_outros(),n=s[e],n?n.p(l,u):(n=s[e]=i[e](l),n.c()),transition_in(n,1),n.m(r.parentNode,r))},i(l){o||(transition_in(n),o=!0)},o(l){transition_out(n),o=!1},d(l){s[e].d(l),l&&detach(r)}}}function create_else_block(t){let e,n;return e=new LoginScreen({props:{isSignedIn:t[0]}}),{c(){create_component(e.$$.fragment)},m(r,o){mount_component(e,r,o),n=!0},p(r,o){const i={};o&1&&(i.isSignedIn=r[0]),e.$set(i)},i(r){n||(transition_in(e.$$.fragment,r),n=!0)},o(r){transition_out(e.$$.fragment,r),n=!1},d(r){destroy_component(e,r)}}}function create_if_block(t){let e,n,r,o,i,s;return e=new Player({}),r=new SubscriptionsEditor({}),i=new SubscriptionsDeck({}),{c(){create_component(e.$$.fragment),n=space(),create_component(r.$$.fragment),o=space(),create_component(i.$$.fragment)},m(a,l){mount_component(e,a,l),insert(a,n,l),mount_component(r,a,l),insert(a,o,l),mount_component(i,a,l),s=!0},p:noop,i(a){s||(transition_in(e.$$.fragment,a),transition_in(r.$$.fragment,a),transition_in(i.$$.fragment,a),s=!0)},o(a){transition_out(e.$$.fragment,a),transition_out(r.$$.fragment,a),transition_out(i.$$.fragment,a),s=!1},d(a){destroy_component(e,a),a&&detach(n),destroy_component(r,a),a&&detach(o),destroy_component(i,a)}}}function create_pending_block(t){let e,n;return e=new Spinner({}),{c(){create_component(e.$$.fragment)},m(r,o){mount_component(e,r,o),n=!0},p:noop,i(r){n||(transition_in(e.$$.fragment,r),n=!0)},o(r){transition_out(e.$$.fragment,r),n=!1},d(r){destroy_component(e,r)}}}function create_fragment(t){let e,n,r,o,i;n=new Header({props:{isSignedIn:t[0],isAuthorized:t[1]}});let s={ctx:t,current:null,token:null,hasCatch:!0,pending:create_pending_block,then:create_then_block,catch:create_catch_block,value:4,error:5,blocks:[,,,]};return handle_promise(t[2](),s),{c(){e=element("main"),create_component(n.$$.fragment),r=space(),o=element("section"),s.block.c(),attr(o,"class","w-full"),set_style(o,"height","calc(100% - 3rem)"),attr(e,"class","w-full h-full bg-neutral-700 text-white")},m(a,l){insert(a,e,l),mount_component(n,e,null),append(e,r),append(e,o),s.block.m(o,s.anchor=null),s.mount=()=>o,s.anchor=null,i=!0},p(a,[l]){t=a;const u={};l&1&&(u.isSignedIn=t[0]),l&2&&(u.isAuthorized=t[1]),n.$set(u),update_await_block_branch(s,t,l)},i(a){i||(transition_in(n.$$.fragment,a),transition_in(s.block),i=!0)},o(a){transition_out(n.$$.fragment,a);for(let l=0;l<3;l+=1){const u=s.blocks[l];transition_out(u)}i=!1},d(a){a&&detach(e),destroy_component(n),s.block.d(),s.token=null,s=null}}}const scope="https://www.googleapis.com/auth/youtube.readonly https://www.googleapis.com/auth/drive.appdata";function instance(t,e,n){let r,o;function i(){return new Promise((a,l)=>{gapi.load("client:auth2",()=>s().then(()=>a()).catch(u=>l(u)))})}async function s(){await gapi.client.init({apiKey:"AIzaSyBAHcJ9fPTrCjDExl1NZkF4fZd15fICEFI",clientId:"789354109817-qrqoqtfj1k3gvs01gufrpqlv38g0bi9p.apps.googleusercontent.com",scope});const a=gapi.auth2.getAuthInstance();n(0,r=a.isSignedIn.get()),a.isSignedIn.listen(l=>n(0,r=l)),n(1,o=a.currentUser.get().hasGrantedScopes(scope)),a.currentUser.listen(l=>n(1,o=l.hasGrantedScopes(scope)))}return[r,o,i]}class App extends SvelteComponent{constructor(e){super(),init(this,e,instance,create_fragment,safe_not_equal,{})}}var index="";new App({target:document.getElementById("app")});
