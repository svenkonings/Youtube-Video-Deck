var le=Object.defineProperty,ue=Object.defineProperties;var ce=Object.getOwnPropertyDescriptors;var ne=Object.getOwnPropertySymbols;var ie=Object.prototype.hasOwnProperty,ae=Object.prototype.propertyIsEnumerable;var oe=(t,e,n)=>e in t?le(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Z=(t,e)=>{for(var n in e||(e={}))ie.call(e,n)&&oe(t,n,e[n]);if(ne)for(var n of ne(e))ae.call(e,n)&&oe(t,n,e[n]);return t},re=(t,e)=>ue(t,ce(e));var se=(t,e)=>{var n={};for(var r in t)ie.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&ne)for(var r of ne(t))e.indexOf(r)<0&&ae.call(t,r)&&(n[r]=t[r]);return n};const p=function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))r(o);new MutationObserver(o=>{for(const i of o)if(i.type==="childList")for(const a of i.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function n(o){const i={};return o.integrity&&(i.integrity=o.integrity),o.referrerpolicy&&(i.referrerPolicy=o.referrerpolicy),o.crossorigin==="use-credentials"?i.credentials="include":o.crossorigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(o){if(o.ep)return;o.ep=!0;const i=n(o);fetch(o.href,i)}};p();function noop(){}const identity=t=>t;function assign(t,e){for(const n in e)t[n]=e[n];return t}function is_promise(t){return t&&typeof t=="object"&&typeof t.then=="function"}function run(t){return t()}function blank_object(){return Object.create(null)}function run_all(t){t.forEach(run)}function is_function(t){return typeof t=="function"}function safe_not_equal(t,e){return t!=t?e==e:t!==e||t&&typeof t=="object"||typeof t=="function"}let src_url_equal_anchor;function src_url_equal(t,e){return src_url_equal_anchor||(src_url_equal_anchor=document.createElement("a")),src_url_equal_anchor.href=e,t===src_url_equal_anchor.href}function is_empty(t){return Object.keys(t).length===0}function subscribe(t,...e){if(t==null)return noop;const n=t.subscribe(...e);return n.unsubscribe?()=>n.unsubscribe():n}function component_subscribe(t,e,n){t.$$.on_destroy.push(subscribe(e,n))}function create_slot(t,e,n,r){if(t){const o=get_slot_context(t,e,n,r);return t[0](o)}}function get_slot_context(t,e,n,r){return t[1]&&r?assign(n.ctx.slice(),t[1](r(e))):n.ctx}function get_slot_changes(t,e,n,r){if(t[2]&&r){const o=t[2](r(n));if(e.dirty===void 0)return o;if(typeof o=="object"){const i=[],a=Math.max(e.dirty.length,o.length);for(let s=0;s<a;s+=1)i[s]=e.dirty[s]|o[s];return i}return e.dirty|o}return e.dirty}function update_slot_base(t,e,n,r,o,i){if(o){const a=get_slot_context(e,n,r,i);t.p(a,o)}}function get_all_dirty_from_scope(t){if(t.ctx.length>32){const e=[],n=t.ctx.length/32;for(let r=0;r<n;r++)e[r]=-1;return e}return-1}function set_store_value(t,e,n){return t.set(n),e}function action_destroyer(t){return t&&is_function(t.destroy)?t.destroy:noop}const is_client=typeof window!="undefined";let now$1=is_client?()=>window.performance.now():()=>Date.now(),raf=is_client?t=>requestAnimationFrame(t):noop;const tasks=new Set;function run_tasks(t){tasks.forEach(e=>{e.c(t)||(tasks.delete(e),e.f())}),tasks.size!==0&&raf(run_tasks)}function loop$1(t){let e;return tasks.size===0&&raf(run_tasks),{promise:new Promise(n=>{tasks.add(e={c:t,f:n})}),abort(){tasks.delete(e)}}}function append(t,e){t.appendChild(e)}function get_root_for_style(t){if(!t)return document;const e=t.getRootNode?t.getRootNode():t.ownerDocument;return e&&e.host?e:t.ownerDocument}function append_empty_stylesheet(t){const e=element("style");return append_stylesheet(get_root_for_style(t),e),e.sheet}function append_stylesheet(t,e){append(t.head||t,e)}function insert(t,e,n){t.insertBefore(e,n||null)}function detach(t){t.parentNode.removeChild(t)}function destroy_each(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}function element(t){return document.createElement(t)}function text(t){return document.createTextNode(t)}function space(){return text(" ")}function empty(){return text("")}function listen(t,e,n,r){return t.addEventListener(e,n,r),()=>t.removeEventListener(e,n,r)}function prevent_default(t){return function(e){return e.preventDefault(),t.call(this,e)}}function stop_propagation(t){return function(e){return e.stopPropagation(),t.call(this,e)}}function self(t){return function(e){e.target===this&&t.call(this,e)}}function attr(t,e,n){n==null?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function children(t){return Array.from(t.childNodes)}function set_data(t,e){e=""+e,t.wholeText!==e&&(t.data=e)}function set_input_value(t,e){t.value=e==null?"":e}function set_style(t,e,n,r){n===null?t.style.removeProperty(e):t.style.setProperty(e,n,r?"important":"")}function toggle_class(t,e,n){t.classList[n?"add":"remove"](e)}const managed_styles=new Map;let active=0;function hash(t){let e=5381,n=t.length;for(;n--;)e=(e<<5)-e^t.charCodeAt(n);return e>>>0}function create_style_information(t,e){const n={stylesheet:append_empty_stylesheet(e),rules:{}};return managed_styles.set(t,n),n}function create_rule(t,e,n,r,o,i,a,s=0){const l=16.666/r;let u=`{
`;for(let E=0;E<=1;E+=l){const g=e+(n-e)*i(E);u+=E*100+`%{${a(g,1-g)}}
`}const d=u+`100% {${a(n,1-n)}}
}`,f=`__svelte_${hash(d)}_${s}`,c=get_root_for_style(t),{stylesheet:_,rules:m}=managed_styles.get(c)||create_style_information(c,t);m[f]||(m[f]=!0,_.insertRule(`@keyframes ${f} ${d}`,_.cssRules.length));const h=t.style.animation||"";return t.style.animation=`${h?`${h}, `:""}${f} ${r}ms linear ${o}ms 1 both`,active+=1,f}function delete_rule(t,e){const n=(t.style.animation||"").split(", "),r=n.filter(e?i=>i.indexOf(e)<0:i=>i.indexOf("__svelte")===-1),o=n.length-r.length;o&&(t.style.animation=r.join(", "),active-=o,active||clear_rules())}function clear_rules(){raf(()=>{active||(managed_styles.forEach(t=>{const{stylesheet:e}=t;let n=e.cssRules.length;for(;n--;)e.deleteRule(n);t.rules={}}),managed_styles.clear())})}function create_animation(t,e,n,r){if(!e)return noop;const o=t.getBoundingClientRect();if(e.left===o.left&&e.right===o.right&&e.top===o.top&&e.bottom===o.bottom)return noop;const{delay:i=0,duration:a=300,easing:s=identity,start:l=now$1()+i,end:u=l+a,tick:d=noop,css:f}=n(t,{from:e,to:o},r);let c=!0,_=!1,m;function h(){f&&(m=create_rule(t,0,1,a,i,s,f)),i||(_=!0)}function E(){f&&delete_rule(t,m),c=!1}return loop$1(g=>{if(!_&&g>=l&&(_=!0),_&&g>=u&&(d(1,0),E()),!c)return!1;if(_){const I=g-l,b=0+1*s(I/a);d(b,1-b)}return!0}),h(),d(0,1),E}function fix_position(t){const e=getComputedStyle(t);if(e.position!=="absolute"&&e.position!=="fixed"){const{width:n,height:r}=e,o=t.getBoundingClientRect();t.style.position="absolute",t.style.width=n,t.style.height=r,add_transform(t,o)}}function add_transform(t,e){const n=t.getBoundingClientRect();if(e.left!==n.left||e.top!==n.top){const r=getComputedStyle(t),o=r.transform==="none"?"":r.transform;t.style.transform=`${o} translate(${e.left-n.left}px, ${e.top-n.top}px)`}}let current_component;function set_current_component(t){current_component=t}function get_current_component(){if(!current_component)throw new Error("Function called outside component initialization");return current_component}function onDestroy(t){get_current_component().$$.on_destroy.push(t)}function bubble(t,e){const n=t.$$.callbacks[e.type];n&&n.slice().forEach(r=>r.call(this,e))}const dirty_components=[],binding_callbacks=[],render_callbacks=[],flush_callbacks=[],resolved_promise=Promise.resolve();let update_scheduled=!1;function schedule_update(){update_scheduled||(update_scheduled=!0,resolved_promise.then(flush))}function add_render_callback(t){render_callbacks.push(t)}const seen_callbacks=new Set;let flushidx=0;function flush(){const t=current_component;do{for(;flushidx<dirty_components.length;){const e=dirty_components[flushidx];flushidx++,set_current_component(e),update(e.$$)}for(set_current_component(null),dirty_components.length=0,flushidx=0;binding_callbacks.length;)binding_callbacks.pop()();for(let e=0;e<render_callbacks.length;e+=1){const n=render_callbacks[e];seen_callbacks.has(n)||(seen_callbacks.add(n),n())}render_callbacks.length=0}while(dirty_components.length);for(;flush_callbacks.length;)flush_callbacks.pop()();update_scheduled=!1,seen_callbacks.clear(),set_current_component(t)}function update(t){if(t.fragment!==null){t.update(),run_all(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(add_render_callback)}}const outroing=new Set;let outros;function group_outros(){outros={r:0,c:[],p:outros}}function check_outros(){outros.r||run_all(outros.c),outros=outros.p}function transition_in(t,e){t&&t.i&&(outroing.delete(t),t.i(e))}function transition_out(t,e,n,r){if(t&&t.o){if(outroing.has(t))return;outroing.add(t),outros.c.push(()=>{outroing.delete(t),r&&(n&&t.d(1),r())}),t.o(e)}}function handle_promise(t,e){const n=e.token={};function r(o,i,a,s){if(e.token!==n)return;e.resolved=s;let l=e.ctx;a!==void 0&&(l=l.slice(),l[a]=s);const u=o&&(e.current=o)(l);let d=!1;e.block&&(e.blocks?e.blocks.forEach((f,c)=>{c!==i&&f&&(group_outros(),transition_out(f,1,1,()=>{e.blocks[c]===f&&(e.blocks[c]=null)}),check_outros())}):e.block.d(1),u.c(),transition_in(u,1),u.m(e.mount(),e.anchor),d=!0),e.block=u,e.blocks&&(e.blocks[i]=u),d&&flush()}if(is_promise(t)){const o=get_current_component();if(t.then(i=>{set_current_component(o),r(e.then,1,e.value,i),set_current_component(null)},i=>{if(set_current_component(o),r(e.catch,2,e.error,i),set_current_component(null),!e.hasCatch)throw i}),e.current!==e.pending)return r(e.pending,0),!0}else{if(e.current!==e.then)return r(e.then,1,e.value,t),!0;e.resolved=t}}function update_await_block_branch(t,e,n){const r=e.slice(),{resolved:o}=t;t.current===t.then&&(r[t.value]=o),t.current===t.catch&&(r[t.error]=o),t.block.p(r,n)}const globals=typeof window!="undefined"?window:typeof globalThis!="undefined"?globalThis:global;function destroy_block(t,e){t.d(1),e.delete(t.key)}function outro_and_destroy_block(t,e){transition_out(t,1,1,()=>{e.delete(t.key)})}function fix_and_destroy_block(t,e){t.f(),destroy_block(t,e)}function fix_and_outro_and_destroy_block(t,e){t.f(),outro_and_destroy_block(t,e)}function update_keyed_each(t,e,n,r,o,i,a,s,l,u,d,f){let c=t.length,_=i.length,m=c;const h={};for(;m--;)h[t[m].key]=m;const E=[],g=new Map,I=new Map;for(m=_;m--;){const S=f(o,i,m),T=n(S);let y=a.get(T);y?r&&y.p(S,e):(y=u(T,S),y.c()),g.set(T,E[m]=y),T in h&&I.set(T,Math.abs(m-h[T]))}const b=new Set,A=new Set;function R(S){transition_in(S,1),S.m(s,d),a.set(S.key,S),d=S.first,_--}for(;c&&_;){const S=E[_-1],T=t[c-1],y=S.key,w=T.key;S===T?(d=S.first,c--,_--):g.has(w)?!a.has(y)||b.has(y)?R(S):A.has(w)?c--:I.get(y)>I.get(w)?(A.add(y),R(S)):(b.add(w),c--):(l(T,a),c--)}for(;c--;){const S=t[c];g.has(S.key)||l(S,a)}for(;_;)R(E[_-1]);return E}function create_component(t){t&&t.c()}function mount_component(t,e,n,r){const{fragment:o,on_mount:i,on_destroy:a,after_update:s}=t.$$;o&&o.m(e,n),r||add_render_callback(()=>{const l=i.map(run).filter(is_function);a?a.push(...l):run_all(l),t.$$.on_mount=[]}),s.forEach(add_render_callback)}function destroy_component(t,e){const n=t.$$;n.fragment!==null&&(run_all(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function make_dirty(t,e){t.$$.dirty[0]===-1&&(dirty_components.push(t),schedule_update(),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function init(t,e,n,r,o,i,a,s=[-1]){const l=current_component;set_current_component(t);const u=t.$$={fragment:null,ctx:null,props:i,update:noop,not_equal:o,bound:blank_object(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(l?l.$$.context:[])),callbacks:blank_object(),dirty:s,skip_bound:!1,root:e.target||l.$$.root};a&&a(u.root);let d=!1;if(u.ctx=n?n(t,e.props||{},(f,c,..._)=>{const m=_.length?_[0]:c;return u.ctx&&o(u.ctx[f],u.ctx[f]=m)&&(!u.skip_bound&&u.bound[f]&&u.bound[f](m),d&&make_dirty(t,f)),c}):[],u.update(),d=!0,run_all(u.before_update),u.fragment=r?r(u.ctx):!1,e.target){if(e.hydrate){const f=children(e.target);u.fragment&&u.fragment.l(f),f.forEach(detach)}else u.fragment&&u.fragment.c();e.intro&&transition_in(t.$$.fragment),mount_component(t,e.target,e.anchor,e.customElement),flush()}set_current_component(l)}class SvelteComponent{$destroy(){destroy_component(this,1),this.$destroy=noop}$on(e,n){const r=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return r.push(n),()=>{const o=r.indexOf(n);o!==-1&&r.splice(o,1)}}$set(e){this.$$set&&!is_empty(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}const get_after_slot_changes=t=>({}),get_after_slot_context=t=>({}),get_before_slot_changes=t=>({}),get_before_slot_context=t=>({});function create_fragment$b(t){let e,n,r,o,i;const a=t[1].before,s=create_slot(a,t,t[0],get_before_slot_context),l=t[1].default,u=create_slot(l,t,t[0],null),d=t[1].after,f=create_slot(d,t,t[0],get_after_slot_context);return{c(){e=element("div"),s&&s.c(),n=space(),r=element("div"),u&&u.c(),o=space(),f&&f.c(),attr(r,"class","absolute top-1/2 -translate-y-1/2 left-1/2 -translate-x-1/2 text-center"),attr(e,"class","relative w-full h-full")},m(c,_){insert(c,e,_),s&&s.m(e,null),append(e,n),append(e,r),u&&u.m(r,null),append(e,o),f&&f.m(e,null),i=!0},p(c,[_]){s&&s.p&&(!i||_&1)&&update_slot_base(s,a,c,c[0],i?get_slot_changes(a,c[0],_,get_before_slot_changes):get_all_dirty_from_scope(c[0]),get_before_slot_context),u&&u.p&&(!i||_&1)&&update_slot_base(u,l,c,c[0],i?get_slot_changes(l,c[0],_,null):get_all_dirty_from_scope(c[0]),null),f&&f.p&&(!i||_&1)&&update_slot_base(f,d,c,c[0],i?get_slot_changes(d,c[0],_,get_after_slot_changes):get_all_dirty_from_scope(c[0]),get_after_slot_context)},i(c){i||(transition_in(s,c),transition_in(u,c),transition_in(f,c),i=!0)},o(c){transition_out(s,c),transition_out(u,c),transition_out(f,c),i=!1},d(c){c&&detach(e),s&&s.d(c),u&&u.d(c),f&&f.d(c)}}}function instance$a(t,e,n){let{$$slots:r={},$$scope:o}=e;return t.$$set=i=>{"$$scope"in i&&n(0,o=i.$$scope)},[o,r]}class Center extends SvelteComponent{constructor(e){super(),init(this,e,instance$a,create_fragment$b,safe_not_equal,{})}}var Spinner_svelte_svelte_type_style_lang="";function create_default_slot$4(t){let e,n,r,o,i;return{c(){e=element("span"),n=space(),r=element("br"),o=space(),i=element("span"),i.textContent="Loading\u2026",attr(e,"class","loader svelte-gg29y1"),attr(i,"class","font-extrabold")},m(a,s){insert(a,e,s),insert(a,n,s),insert(a,r,s),insert(a,o,s),insert(a,i,s)},p:noop,d(a){a&&detach(e),a&&detach(n),a&&detach(r),a&&detach(o),a&&detach(i)}}}function create_fragment$a(t){let e,n;return e=new Center({props:{$$slots:{default:[create_default_slot$4]},$$scope:{ctx:t}}}),{c(){create_component(e.$$.fragment)},m(r,o){mount_component(e,r,o),n=!0},p(r,[o]){const i={};o&1&&(i.$$scope={dirty:o,ctx:r}),e.$set(i)},i(r){n||(transition_in(e.$$.fragment,r),n=!0)},o(r){transition_out(e.$$.fragment,r),n=!1},d(r){destroy_component(e,r)}}}class Spinner extends SvelteComponent{constructor(e){super(),init(this,e,null,create_fragment$a,safe_not_equal,{})}}function create_fragment$9(t){let e,n,r,o,i;const a=t[2].default,s=create_slot(a,t,t[1],null);return{c(){e=element("button"),s&&s.c(),attr(e,"class",n="bg-blue-600 text-white p-1.5 rounded-2xl hover:bg-blue-700 "+t[0])},m(l,u){insert(l,e,u),s&&s.m(e,null),r=!0,o||(i=listen(e,"click",t[3]),o=!0)},p(l,[u]){s&&s.p&&(!r||u&2)&&update_slot_base(s,a,l,l[1],r?get_slot_changes(a,l[1],u,null):get_all_dirty_from_scope(l[1]),null),(!r||u&1&&n!==(n="bg-blue-600 text-white p-1.5 rounded-2xl hover:bg-blue-700 "+l[0]))&&attr(e,"class",n)},i(l){r||(transition_in(s,l),r=!0)},o(l){transition_out(s,l),r=!1},d(l){l&&detach(e),s&&s.d(l),o=!1,i()}}}function instance$9(t,e,n){let{$$slots:r={},$$scope:o}=e,{class:i=""}=e;function a(s){bubble.call(this,t,s)}return t.$$set=s=>{"class"in s&&n(0,i=s.class),"$$scope"in s&&n(1,o=s.$$scope)},[i,o,r,a]}class PrimaryButton extends SvelteComponent{constructor(e){super(),init(this,e,instance$9,create_fragment$9,safe_not_equal,{class:0})}}function create_default_slot_1$3(t){let e=t[0]?"Authorize":"Sign in",n;return{c(){n=text(e)},m(r,o){insert(r,n,o)},p(r,o){o&1&&e!==(e=r[0]?"Authorize":"Sign in")&&set_data(n,e)},d(r){r&&detach(n)}}}function create_default_slot$3(t){let e,n,r=t[0]?"authorize this app":"sign in",o,i,a,s,l,u,d;return u=new PrimaryButton({props:{class:"w-full",$$slots:{default:[create_default_slot_1$3]},$$scope:{ctx:t}}}),u.$on("click",signIn),{c(){e=element("p"),n=text("Please "),o=text(r),i=text(" to continue"),a=space(),s=element("br"),l=space(),create_component(u.$$.fragment)},m(f,c){insert(f,e,c),append(e,n),append(e,o),append(e,i),insert(f,a,c),insert(f,s,c),insert(f,l,c),mount_component(u,f,c),d=!0},p(f,c){(!d||c&1)&&r!==(r=f[0]?"authorize this app":"sign in")&&set_data(o,r);const _={};c&3&&(_.$$scope={dirty:c,ctx:f}),u.$set(_)},i(f){d||(transition_in(u.$$.fragment,f),d=!0)},o(f){transition_out(u.$$.fragment,f),d=!1},d(f){f&&detach(e),f&&detach(a),f&&detach(s),f&&detach(l),destroy_component(u,f)}}}function create_fragment$8(t){let e,n;return e=new Center({props:{$$slots:{default:[create_default_slot$3]},$$scope:{ctx:t}}}),{c(){create_component(e.$$.fragment)},m(r,o){mount_component(e,r,o),n=!0},p(r,[o]){const i={};o&3&&(i.$$scope={dirty:o,ctx:r}),e.$set(i)},i(r){n||(transition_in(e.$$.fragment,r),n=!0)},o(r){transition_out(e.$$.fragment,r),n=!1},d(r){destroy_component(e,r)}}}function signIn(){return gapi.auth2.getAuthInstance().signIn()}function instance$8(t,e,n){let{isSignedIn:r}=e;return t.$$set=o=>{"isSignedIn"in o&&n(0,r=o.isSignedIn)},[r]}class LoginScreen extends SvelteComponent{constructor(e){super(),init(this,e,instance$8,create_fragment$8,safe_not_equal,{isSignedIn:0})}}const subscriber_queue=[];function writable(t,e=noop){let n;const r=new Set;function o(s){if(safe_not_equal(t,s)&&(t=s,n)){const l=!subscriber_queue.length;for(const u of r)u[1](),subscriber_queue.push(u,t);if(l){for(let u=0;u<subscriber_queue.length;u+=2)subscriber_queue[u][0](subscriber_queue[u+1]);subscriber_queue.length=0}}}function i(s){o(s(t))}function a(s,l=noop){const u=[s,l];return r.add(u),r.size===1&&(n=e(o)||noop),s(t),()=>{r.delete(u),r.size===0&&(n(),n=null)}}return{set:o,update:i,subscribe:a}}function getDefaultExportFromCjs(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var browserCookies={};(function(t){t.defaults={},t.set=function(e,n,r){var o=r||{},i=t.defaults,a=o.expires||i.expires,s=o.domain||i.domain,l=o.path!==void 0?o.path:i.path!==void 0?i.path:"/",u=o.secure!==void 0?o.secure:i.secure,d=o.httponly!==void 0?o.httponly:i.httponly,f=o.samesite!==void 0?o.samesite:i.samesite,c=a?new Date(typeof a=="number"?new Date().getTime()+a*864e5:a):0;document.cookie=e.replace(/[^+#$&^`|]/g,encodeURIComponent).replace("(","%28").replace(")","%29")+"="+n.replace(/[^+#$&/:<-\[\]-}]/g,encodeURIComponent)+(c&&c.getTime()>=0?";expires="+c.toUTCString():"")+(s?";domain="+s:"")+(l?";path="+l:"")+(u?";secure":"")+(d?";httponly":"")+(f?";samesite="+f:"")},t.get=function(e){for(var n=document.cookie.split(";");n.length;){var r=n.pop(),o=r.indexOf("=");o=o<0?r.length:o;var i=decodeURIComponent(r.slice(0,o).replace(/^\s+/,""));if(i===e)return decodeURIComponent(r.slice(o+1))}return null},t.erase=function(e,n){t.set(e,"",{expires:-1,domain:n&&n.domain,path:n&&n.path,secure:0,httponly:0})},t.all=function(){for(var e={},n=document.cookie.split(";");n.length;){var r=n.pop(),o=r.indexOf("=");o=o<0?r.length:o;var i=decodeURIComponent(r.slice(0,o).replace(/^\s+/,""));e[i]=decodeURIComponent(r.slice(o+1))}return e}})(browserCookies);var bundle={};(function(exports){(function(t,e){for(var n in e)t[n]=e[n];e.__esModule&&Object.defineProperty(t,"__esModule",{value:!0})})(exports,(()=>{var __webpack_modules__={607:(module,exports,__webpack_require__)=>{Object.defineProperty(exports,"__esModule",{value:!0});var serializer_1=__webpack_require__(810),deserializer_1=__webpack_require__(496),Module;typeof process!="undefined"&&process.release.name==="node"&&(Module=eval("require")("module"));var ESSerializer=function(){function t(){}return t.throwErrorIfInNonNodeEnvironment=function(){if(!Module)throw new Error("Cannot intercept require in non-Node environment.")},t.interceptRequire=function(){this.isRequireIntercepted||(this.isRequireIntercepted=!0,this.throwErrorIfInNonNodeEnvironment(),t.originRequire=Module.prototype.require,Module.prototype.require=function(){var e=t.originRequire.apply(this,arguments),n=e.name;return t.requiredClasses[n]||(t.requiredClasses[n]=e),e})},t.stopInterceptRequire=function(){this.throwErrorIfInNonNodeEnvironment(),Module.prototype.require=t.originRequire,this.isRequireIntercepted=!1},t.isInterceptingRequire=function(){return this.isRequireIntercepted},t.getRequiredClasses=function(){return this.requiredClasses},t.clearRequiredClasses=function(){this.requiredClasses={}},t.registerClass=function(e){this.registeredClasses.push(e)},t.registerClasses=function(e){this.registeredClasses=this.registeredClasses.concat(e)},t.clearRegisteredClasses=function(){this.registeredClasses=[]},t.serialize=function(e,n){return n===void 0&&(n={}),JSON.stringify(serializer_1.getSerializeValueWithClassName(e,n))},t.deserialize=function(e,n,r){return n===void 0&&(n=[]),r===void 0&&(r={}),deserializer_1.deserializeFromParsedObj(JSON.parse(e),Object.values(this.requiredClasses).concat(this.registeredClasses).concat(n),r)},t.originRequire=null,t.isRequireIntercepted=!1,t.requiredClasses={},t.registeredClasses=[],t}();module.exports=ESSerializer},917:function(t,e){var n=this&&this.__spreadArrays||function(){for(var B=0,M=0,q=arguments.length;M<q;M++)B+=arguments[M].length;var V=Array(B),j=0;for(M=0;M<q;M++)for(var H=arguments[M],W=0,X=H.length;W<X;W++,j++)V[j]=H[W];return V};Object.defineProperty(e,"__esModule",{value:!0}),e.TO_STRING_FIELD=e.TIMESTAMP_FIELD=e.OPTIONS_FIELD=e.CLASS_NAME_FIELD=e.BOOLEAN_FIELD=e.ARRAY_FIELD=e.BUILTIN_TYPE_UNDEFINED=e.BUILTIN_TYPE_NOT_FINITE=e.BUILTIN_TYPE_BIG_INT=e.BUILTIN_CLASS_AGGREGATE_ERROR=e.BUILTIN_CLASS_URI_ERROR=e.BUILTIN_CLASS_TYPE_ERROR=e.BUILTIN_CLASS_SYNTAX_ERROR=e.BUILTIN_CLASS_REFERENCE_ERROR=e.BUILTIN_CLASS_RANGE_ERROR=e.BUILTIN_CLASS_EVAL_ERROR=e.BUILTIN_CLASS_ERROR=e.BUILTIN_CLASS_STRING=e.BUILTIN_CLASS_SET=e.BUILTIN_CLASS_REGEXP=e.BUILTIN_CLASS_INTL_RELATIVETIMEFORMAT=e.BUILTIN_CLASS_INTL_PLURALRULES=e.BUILTIN_CLASS_INTL_NUMBERFORMAT=e.BUILTIN_CLASS_INTL_LOCALE=e.BUILTIN_CLASS_INTL_LISTFORMAT=e.BUILTIN_CLASS_INTL_DATETIMEFORMAT=e.BUILTIN_CLASS_INTL_COLLATOR=e.BUILTIN_CLASS_DATE=e.BUILTIN_CLASS_DATAVIEW=e.BUILTIN_CLASS_BOOLEAN=e.BUILTIN_CLASS_SHAREDARRAYBUFFER=e.BUILTIN_CLASS_ARRAYBUFFER=e.BUILTIN_CLASS_BIGUINT64ARRAY=e.BUILTIN_CLASS_BIGINT64ARRAY=e.BUILTIN_CLASS_FLOAT64ARRAY=e.BUILTIN_CLASS_FLOAT32ARRAY=e.BUILTIN_CLASS_UINT32ARRAY=e.BUILTIN_CLASS_INT32ARRAY=e.BUILTIN_CLASS_UINT16ARRAY=e.BUILTIN_CLASS_INT16ARRAY=e.BUILTIN_CLASS_UINT8CLAMPEDARRAY=e.BUILTIN_CLASS_UINT8ARRAY=e.BUILTIN_CLASS_INT8ARRAY=e.CLASSNAMES_WHOSE_ENUMERABLE_PROPERTIES_SHOULD_BE_IGNORED=e.ALL_BUILTIN_INTLS=e.ALL_BUILTIN_ERRORS=e.ALL_BUILTIN_ARRAYS=e.ESSERIALIZER_NULL=void 0,e.ESSERIALIZER_NULL="__ESSERIALIZER_NULL__",e.ARRAY_FIELD="ess_arr",e.BOOLEAN_FIELD="ess_bool",e.CLASS_NAME_FIELD="ess_cn",e.OPTIONS_FIELD="ess_opt",e.TIMESTAMP_FIELD="ess_ts",e.TO_STRING_FIELD="ess_str";var r="Int8Array";e.BUILTIN_CLASS_INT8ARRAY=r;var o="Uint8Array";e.BUILTIN_CLASS_UINT8ARRAY=o;var i="Uint8ClampedArray";e.BUILTIN_CLASS_UINT8CLAMPEDARRAY=i;var a="Int16Array";e.BUILTIN_CLASS_INT16ARRAY=a;var s="Uint16Array";e.BUILTIN_CLASS_UINT16ARRAY=s;var l="Int32Array";e.BUILTIN_CLASS_INT32ARRAY=l;var u="Uint32Array";e.BUILTIN_CLASS_UINT32ARRAY=u;var d="Float32Array";e.BUILTIN_CLASS_FLOAT32ARRAY=d;var f="Float64Array";e.BUILTIN_CLASS_FLOAT64ARRAY=f;var c="BigInt64Array";e.BUILTIN_CLASS_BIGINT64ARRAY=c;var _="BigUint64Array";e.BUILTIN_CLASS_BIGUINT64ARRAY=_,e.BUILTIN_CLASS_ARRAYBUFFER="ArrayBuffer",e.BUILTIN_CLASS_SHAREDARRAYBUFFER="SharedArrayBuffer",e.BUILTIN_CLASS_BOOLEAN="Boolean",e.BUILTIN_CLASS_DATAVIEW="DataView",e.BUILTIN_CLASS_DATE="Date";var m="Collator";e.BUILTIN_CLASS_INTL_COLLATOR=m;var h="DateTimeFormat";e.BUILTIN_CLASS_INTL_DATETIMEFORMAT=h;var E="ListFormat";e.BUILTIN_CLASS_INTL_LISTFORMAT=E,e.BUILTIN_CLASS_INTL_LOCALE="Locale";var g="NumberFormat";e.BUILTIN_CLASS_INTL_NUMBERFORMAT=g;var I="PluralRules";e.BUILTIN_CLASS_INTL_PLURALRULES=I;var b="RelativeTimeFormat";e.BUILTIN_CLASS_INTL_RELATIVETIMEFORMAT=b,e.BUILTIN_CLASS_REGEXP="RegExp",e.BUILTIN_CLASS_SET="Set";var A="String";e.BUILTIN_CLASS_STRING=A;var R="Error";e.BUILTIN_CLASS_ERROR=R;var S="EvalError";e.BUILTIN_CLASS_EVAL_ERROR=S;var T="RangeError";e.BUILTIN_CLASS_RANGE_ERROR=T;var y="ReferenceError";e.BUILTIN_CLASS_REFERENCE_ERROR=y;var w="SyntaxError";e.BUILTIN_CLASS_SYNTAX_ERROR=w;var C="TypeError";e.BUILTIN_CLASS_TYPE_ERROR=C;var O="URIError";e.BUILTIN_CLASS_URI_ERROR=O;var P="AggregateError";e.BUILTIN_CLASS_AGGREGATE_ERROR=P,e.BUILTIN_TYPE_BIG_INT="BI",e.BUILTIN_TYPE_NOT_FINITE="NF",e.BUILTIN_TYPE_UNDEFINED="UD";var G=[r,o,i,a,s,l,u,d,f,c,_];e.ALL_BUILTIN_ARRAYS=G;var z=[R,S,T,y,w,C,O,P];e.ALL_BUILTIN_ERRORS=z;var F=[m,h,E,g,I,b];e.ALL_BUILTIN_INTLS=F;var Y=n([A],G);e.CLASSNAMES_WHOSE_ENUMERABLE_PROPERTIES_SHOULD_BE_IGNORED=Y},496:function(t,e,n){var r=this&&this.__spreadArrays||function(){for(var g=0,I=0,b=arguments.length;I<b;I++)g+=arguments[I].length;var A=Array(g),R=0;for(I=0;I<b;I++)for(var S=arguments[I],T=0,y=S.length;T<y;T++,R++)A[R]=S[T];return A};Object.defineProperty(e,"__esModule",{value:!0}),e.getParentClassName=e.getClassMappingFromClassArray=e.deserializeFromParsedObjWithClassMapping=e.deserializeFromParsedObj=void 0;var o=n(821),i=n(917),a=/^\s*class\s+/;function s(g,I,b){if(b===void 0&&(b={}),o.notObject(g))return g;if(Array.isArray(g))return l(g,I);var A=g[i.CLASS_NAME_FIELD],R=function(T,y,w){switch(T){case i.BUILTIN_CLASS_INT8ARRAY:return u(y[i.ARRAY_FIELD],Int8Array);case i.BUILTIN_CLASS_UINT8ARRAY:return u(y[i.ARRAY_FIELD],Uint8Array);case i.BUILTIN_CLASS_UINT8CLAMPEDARRAY:return u(y[i.ARRAY_FIELD],Uint8ClampedArray);case i.BUILTIN_CLASS_INT16ARRAY:return u(y[i.ARRAY_FIELD],Int16Array);case i.BUILTIN_CLASS_UINT16ARRAY:return u(y[i.ARRAY_FIELD],Uint16Array);case i.BUILTIN_CLASS_INT32ARRAY:return u(y[i.ARRAY_FIELD],Int32Array);case i.BUILTIN_CLASS_UINT32ARRAY:return u(y[i.ARRAY_FIELD],Uint32Array);case i.BUILTIN_CLASS_FLOAT32ARRAY:return u(y[i.ARRAY_FIELD],Float32Array);case i.BUILTIN_CLASS_FLOAT64ARRAY:return u(y[i.ARRAY_FIELD],Float64Array);case i.BUILTIN_CLASS_BIGINT64ARRAY:return d(y[i.ARRAY_FIELD],BigInt64Array);case i.BUILTIN_CLASS_BIGUINT64ARRAY:return d(y[i.ARRAY_FIELD],BigUint64Array);case i.BUILTIN_TYPE_BIG_INT:return f(y[i.TO_STRING_FIELD]);case i.BUILTIN_TYPE_UNDEFINED:return;case i.BUILTIN_TYPE_NOT_FINITE:return o.getValueFromToStringResult(y[i.TO_STRING_FIELD]);case i.BUILTIN_CLASS_ARRAYBUFFER:return C=y[i.ARRAY_FIELD],new Uint8Array(C).buffer;case i.BUILTIN_CLASS_SHAREDARRAYBUFFER:return function(O){var P=new SharedArrayBuffer(O.length),G=new Uint8Array(P);return O.forEach(function(z,F){G[F]=z}),P}(y[i.ARRAY_FIELD]);case i.BUILTIN_CLASS_BOOLEAN:return function(O){return new Boolean(O[i.BOOLEAN_FIELD])}(y);case i.BUILTIN_CLASS_DATAVIEW:return function(O){return new DataView(new Uint8Array(O).buffer)}(y[i.ARRAY_FIELD]);case i.BUILTIN_CLASS_DATE:return function(O){return typeof O[i.TIMESTAMP_FIELD]=="number"?new Date(O[i.TIMESTAMP_FIELD]):null}(y);case i.BUILTIN_CLASS_INTL_COLLATOR:return c(y,Intl.Collator);case i.BUILTIN_CLASS_INTL_DATETIMEFORMAT:return c(y,Intl.DateTimeFormat);case i.BUILTIN_CLASS_INTL_LISTFORMAT:return c(y,Intl.ListFormat);case i.BUILTIN_CLASS_INTL_LOCALE:return new Intl.Locale(y[i.TO_STRING_FIELD]);case i.BUILTIN_CLASS_INTL_NUMBERFORMAT:return c(y,Intl.NumberFormat);case i.BUILTIN_CLASS_INTL_PLURALRULES:return c(y,Intl.PluralRules);case i.BUILTIN_CLASS_INTL_RELATIVETIMEFORMAT:return c(y,Intl.RelativeTimeFormat);case i.BUILTIN_CLASS_REGEXP:return function(O){var P=O[i.TO_STRING_FIELD],G=P.lastIndexOf("/");return new RegExp(P.substring(1,G),P.substring(G+1))}(y);case i.BUILTIN_CLASS_SET:return function(O,P){return new Set(l(O[i.ARRAY_FIELD],P))}(y,w);case i.BUILTIN_CLASS_STRING:return function(O){return new String(O[i.TO_STRING_FIELD])}(y);case i.BUILTIN_CLASS_ERROR:return _(y,Error);case i.BUILTIN_CLASS_EVAL_ERROR:return _(y,EvalError);case i.BUILTIN_CLASS_RANGE_ERROR:return _(y,RangeError);case i.BUILTIN_CLASS_REFERENCE_ERROR:return _(y,ReferenceError);case i.BUILTIN_CLASS_SYNTAX_ERROR:return _(y,SyntaxError);case i.BUILTIN_CLASS_TYPE_ERROR:return _(y,TypeError);case i.BUILTIN_CLASS_URI_ERROR:return _(y,URIError);case i.BUILTIN_CLASS_AGGREGATE_ERROR:return _(y,AggregateError);default:return i.ESSERIALIZER_NULL}var C}(A,g,I);if(R!==i.ESSERIALIZER_NULL)return R;if(A&&!I[A])throw new Error("Class "+A+" not found");var S=[];return b.fieldsForConstructorParameters&&(S=b.fieldsForConstructorParameters.map(function(T){return T in g?g[T]:{}})),function(T,y,w,C){for(var O in y){var P=y[O];if(!C.ignoreProperties||!C.ignoreProperties.includes(O))if(C.rawProperties&&C.rawProperties.includes(O))T[O]=JSON.stringify(P);else{var G=Object.getOwnPropertyDescriptor(T,O);z=P,F=G,O===i.CLASS_NAME_FIELD||F&&(typeof F.set=="function"||F.writable===!1&&typeof z!="object")||(G&&G.writable===!1&&typeof P=="object"?h(T[O],P,w):T[O]=s(P,w))}}var z,F;return T}(function(T,y){var w={};if(!T)return w;var C=T.length-y.length;if(C>0&&(y=y.concat(Array.from(Array(C),function(){return{}}))),a.test(T.toString()))try{w=new(T.bind.apply(T,r([void 0],y)))}catch{m(T.name),w={},Object.setPrototypeOf(w,T?T.prototype:Object.prototype)}else{w=Object.create(T.prototype.constructor.prototype);try{T.prototype.constructor.call(w,y)}catch{m(T.name)}}return w}(I[A],S),g,I,b)}function l(g,I){return g.map(function(b){return s(b,I)})}function u(g,I){return new I(g)}function d(g,I){return new I(g.map(function(b){return f(b[i.TO_STRING_FIELD])}))}function f(g){return BigInt(g)}function c(g,I){var b=g[i.OPTIONS_FIELD],A=b.locale;return delete b.locale,new I(A,b)}function _(g,I){var b;return delete(b=g.message?new I(g.message):new I).stack,g.name&&(b.name=g.name),g.stack&&(b.stack=g.stack),I===AggregateError&&(b.errors=s(g.errors,{})),b}function m(g){console.warn("Incorrect parameter type passed to constructor: "+g)}function h(g,I,b){for(var A in I){var R=Object.getOwnPropertyDescriptor(g,A);R&&R.writable!==!0&&typeof R.set!="function"||(g[A]=s(I[A],b))}}function E(g){g===void 0&&(g=[]);var I={};return g.forEach(function(b){if(o.isClass(b)){var A=b.name,R=I[A];R&&R!==b&&console.warn("WARNING: Found class definition with the same name: "+A),I[A]=b}}),I}e.deserializeFromParsedObj=function(g,I,b){return s(g,E(I),b)},e.deserializeFromParsedObjWithClassMapping=s,e.getClassMappingFromClassArray=E,e.getParentClassName=function(g){return g.prototype.__proto__.constructor.name}},821:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.isClass=e.notObject=e.getValueFromToStringResult=void 0,e.notObject=function(n){return n===null||typeof n!="object"},e.getValueFromToStringResult=function(n){switch(n){case"Infinity":return 1/0;case"-Infinity":return-1/0;case"NaN":return NaN;default:return null}},e.isClass=function(n){if(function(r){return[Date].indexOf(r)>=0}(n))return!0;try{Reflect.construct(String,[],n)}catch{return!1}return!0}},810:(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.getSerializeValueWithClassName=void 0;var r=n(917),o=n(821);function i(s,l){l===void 0&&(l={});var u=function(_){var m,h,E;return _===void 0?((m={})[r.CLASS_NAME_FIELD]=r.BUILTIN_TYPE_UNDEFINED,m):typeof _!="number"||isFinite(_)?typeof _=="bigint"?((E={})[r.CLASS_NAME_FIELD]=r.BUILTIN_TYPE_BIG_INT,E[r.TO_STRING_FIELD]=_.toString(),E):o.notObject(_)?_:r.ESSERIALIZER_NULL:((h={})[r.CLASS_NAME_FIELD]=r.BUILTIN_TYPE_NOT_FINITE,h[r.TO_STRING_FIELD]=_.toString(),h)}(s);if(u!==r.ESSERIALIZER_NULL)return u;if(Array.isArray(s))return a(s);var d={};if(!function(_){var m=_.__proto__.constructor.name;return r.CLASSNAMES_WHOSE_ENUMERABLE_PROPERTIES_SHOULD_BE_IGNORED.includes(m)}(s)){if(l.ignoreProperties&&l.ignoreProperties.forEach(function(_){delete s[_]}),l.interceptProperties)for(var f in l.interceptProperties)s[f]=l.interceptProperties[f].call(s,s[f]);for(var c in s)d[c]=i(s[c])}return function(_,m){var h=_.__proto__.constructor.name;return h!=="Object"&&(m[r.CLASS_NAME_FIELD]=h,h===r.BUILTIN_CLASS_ARRAYBUFFER||h===r.BUILTIN_CLASS_SHAREDARRAYBUFFER?m[r.ARRAY_FIELD]=a(Array.from(new Uint8Array(_))):h===r.BUILTIN_CLASS_BOOLEAN?m[r.BOOLEAN_FIELD]=_.valueOf():h===r.BUILTIN_CLASS_DATAVIEW?m[r.ARRAY_FIELD]=a(Array.from(new Uint8Array(_.buffer))):h===r.BUILTIN_CLASS_DATE?m[r.TIMESTAMP_FIELD]=_.getTime():h===r.BUILTIN_CLASS_INTL_LOCALE||h===r.BUILTIN_CLASS_REGEXP?m[r.TO_STRING_FIELD]=_.toString():h===r.BUILTIN_CLASS_SET?m[r.ARRAY_FIELD]=a(Array.from(_)):h===r.BUILTIN_CLASS_STRING?m[r.TO_STRING_FIELD]=_.toString():r.ALL_BUILTIN_ARRAYS.includes(h)?m[r.ARRAY_FIELD]=a(Array.from(_)):r.ALL_BUILTIN_ERRORS.includes(h)?function(E,g,I){E.name!=="Error"&&(g.name=E.name),E.message&&(g.message=E.message),E.stack&&(g.stack=E.stack),I===r.BUILTIN_CLASS_AGGREGATE_ERROR&&(g.errors=i(E.errors))}(_,m,h):r.ALL_BUILTIN_INTLS.includes(h)&&(m[r.OPTIONS_FIELD]=_.resolvedOptions())),m}(s,d)}function a(s){return s.map(function(l){return i(l)})}e.getSerializeValueWithClassName=i}},__webpack_module_cache__={};function __webpack_require__(t){if(__webpack_module_cache__[t])return __webpack_module_cache__[t].exports;var e=__webpack_module_cache__[t]={exports:{}};return __webpack_modules__[t].call(e.exports,e,e.exports,__webpack_require__),e.exports}return __webpack_require__(607)})())})(bundle);var ESSerializer=getDefaultExportFromCjs(bundle);function idbReady(){if(!(!navigator.userAgentData&&/Safari\//.test(navigator.userAgent)&&!/Chrom(e|ium)\//.test(navigator.userAgent))||!indexedDB.databases)return Promise.resolve();let e;return new Promise(n=>{const r=()=>indexedDB.databases().finally(n);e=setInterval(r,100),r()}).finally(()=>clearInterval(e))}function promisifyRequest(t){return new Promise((e,n)=>{t.oncomplete=t.onsuccess=()=>e(t.result),t.onabort=t.onerror=()=>n(t.error)})}function createStore(t,e){const n=idbReady().then(()=>{const r=indexedDB.open(t);return r.onupgradeneeded=()=>r.result.createObjectStore(e),promisifyRequest(r)});return(r,o)=>n.then(i=>o(i.transaction(e,r).objectStore(e)))}let defaultGetStoreFunc;function defaultGetStore(){return defaultGetStoreFunc||(defaultGetStoreFunc=createStore("keyval-store","keyval")),defaultGetStoreFunc}function get(t,e=defaultGetStore()){return e("readonly",n=>promisifyRequest(n.get(t)))}function set(t,e,n=defaultGetStore()){return n("readwrite",r=>(r.put(e,t),promisifyRequest(r.transaction)))}function del(t,e=defaultGetStore()){return e("readwrite",n=>(n.delete(t),promisifyRequest(n.transaction)))}const alreadyWarnFor=[],warnStorageNotFound=t=>{var e;const n=typeof process!="undefined"&&((e=process.env)===null||e===void 0?void 0:e.NODE_ENV)==="production";if(alreadyWarnFor.indexOf(t)===-1&&!n){let r=`Unable to find the ${t}. No data will be persisted.`;typeof window=="undefined"&&(r+=`
Are you running on a server? Most of storages are not available while running on a server.`),console.warn(r),alreadyWarnFor.push(t)}},allowedClasses=[],serialize=t=>ESSerializer.serialize(t),deserialize=t=>{if(t!=="undefined"){if(t!=null){try{return ESSerializer.deserialize(t,allowedClasses)}catch{}try{return JSON.parse(t)}catch{}}return t}};function persist(t,e,n){const r=e.getValue(n);return r!==null&&t.set(r),e.addListener&&e.addListener(n,o=>{t.set(o)}),t.subscribe(o=>{e.setValue(n,o)}),Object.assign(Object.assign({},t),{delete(){e.deleteValue(n)}})}function indexedDBStorage(){if(typeof indexedDB!="object"||typeof window=="undefined"||typeof(window==null?void 0:window.indexedDB)!="object")return warnStorageNotFound("IndexedDB"),noopSelfUpdateStorage();const t=createStore("svelte-persist","persist"),e=[],n=(r,o)=>{o!==void 0&&e.filter(({key:i})=>i===r).forEach(({listener:i})=>i(o))};return{addListener(r,o){e.push({key:r,listener:o})},removeListener(r,o){const i=e.indexOf({key:r,listener:o});i!==-1&&e.splice(i,1)},getValue(r){return get(r,t).then(o=>n(r,deserialize(o))),null},setValue(r,o){set(r,serialize(o),t)},deleteValue(r){del(r,t)}}}function noopSelfUpdateStorage(){return{addListener(){},removeListener(){},getValue(){return null},deleteValue(){},setValue(){}}}const subscriptionsStore=persist(writable(),indexedDBStorage(),"subscriptions"),settingsStore=writable(),editorVisible=writable(!1),playerStore=writable();function create_default_slot_2$1(t){let e;return{c(){e=element("a"),e.textContent="Youtube Video Deck",attr(e,"class","font-extrabold"),attr(e,"href","#")},m(n,r){insert(n,e,r)},p:noop,d(n){n&&detach(e)}}}function create_if_block_1$2(t){let e,n;return e=new PrimaryButton({props:{class:"w-20 m-1",$$slots:{default:[create_default_slot_1$2]},$$scope:{ctx:t}}}),e.$on("click",t[2]),{c(){create_component(e.$$.fragment)},m(r,o){mount_component(e,r,o),n=!0},p(r,o){const i={};o&16&&(i.$$scope={dirty:o,ctx:r}),e.$set(i)},i(r){n||(transition_in(e.$$.fragment,r),n=!0)},o(r){transition_out(e.$$.fragment,r),n=!1},d(r){destroy_component(e,r)}}}function create_default_slot_1$2(t){let e;return{c(){e=text("Edit")},m(n,r){insert(n,e,r)},d(n){n&&detach(e)}}}function create_before_slot(t){let e,n,r=t[1]&&create_if_block_1$2(t);return{c(){e=element("div"),r&&r.c(),attr(e,"slot","before"),attr(e,"class","float-left p-1")},m(o,i){insert(o,e,i),r&&r.m(e,null),n=!0},p(o,i){o[1]?r?(r.p(o,i),i&2&&transition_in(r,1)):(r=create_if_block_1$2(o),r.c(),transition_in(r,1),r.m(e,null)):r&&(group_outros(),transition_out(r,1,1,()=>{r=null}),check_outros())},i(o){n||(transition_in(r),n=!0)},o(o){transition_out(r),n=!1},d(o){o&&detach(e),r&&r.d()}}}function create_if_block$4(t){let e,n;return e=new PrimaryButton({props:{class:"w-20 m-1",$$slots:{default:[create_default_slot$2]},$$scope:{ctx:t}}}),e.$on("click",signOut),{c(){create_component(e.$$.fragment)},m(r,o){mount_component(e,r,o),n=!0},p(r,o){const i={};o&16&&(i.$$scope={dirty:o,ctx:r}),e.$set(i)},i(r){n||(transition_in(e.$$.fragment,r),n=!0)},o(r){transition_out(e.$$.fragment,r),n=!1},d(r){destroy_component(e,r)}}}function create_default_slot$2(t){let e;return{c(){e=text("Sign out")},m(n,r){insert(n,e,r)},d(n){n&&detach(e)}}}function create_after_slot(t){let e,n,r=t[0]&&create_if_block$4(t);return{c(){e=element("div"),r&&r.c(),attr(e,"slot","after"),attr(e,"class","float-right p-1")},m(o,i){insert(o,e,i),r&&r.m(e,null),n=!0},p(o,i){o[0]?r?(r.p(o,i),i&1&&transition_in(r,1)):(r=create_if_block$4(o),r.c(),transition_in(r,1),r.m(e,null)):r&&(group_outros(),transition_out(r,1,1,()=>{r=null}),check_outros())},i(o){n||(transition_in(r),n=!0)},o(o){transition_out(r),n=!1},d(o){o&&detach(e),r&&r.d()}}}function create_fragment$7(t){let e,n,r;return n=new Center({props:{$$slots:{after:[create_after_slot],before:[create_before_slot],default:[create_default_slot_2$1]},$$scope:{ctx:t}}}),{c(){e=element("header"),create_component(n.$$.fragment),attr(e,"class","w-full h-12")},m(o,i){insert(o,e,i),mount_component(n,e,null),r=!0},p(o,[i]){const a={};i&19&&(a.$$scope={dirty:i,ctx:o}),n.$set(a)},i(o){r||(transition_in(n.$$.fragment,o),r=!0)},o(o){transition_out(n.$$.fragment,o),r=!1},d(o){o&&detach(e),destroy_component(n)}}}function signOut(){gapi.auth2.getAuthInstance().signOut()}function instance$7(t,e,n){let r;component_subscribe(t,editorVisible,s=>n(3,r=s));let{isSignedIn:o}=e,{isAuthorized:i}=e;function a(){set_store_value(editorVisible,r=!0,r)}return t.$$set=s=>{"isSignedIn"in s&&n(0,o=s.isSignedIn),"isAuthorized"in s&&n(1,i=s.isAuthorized)},[o,i,a]}class Header extends SvelteComponent{constructor(e){super(),init(this,e,instance$7,create_fragment$7,safe_not_equal,{isSignedIn:0,isAuthorized:1})}}function Video(t){return{title:t.snippet.title,description:t.snippet.description.substring(0,313),publishedAt:t.snippet.publishedAt,thumbnailUrl:t.snippet.thumbnails.medium.url,videoId:t.snippet.resourceId.videoId}}function Subscription(t,e){return{channelId:t.snippet.resourceId.channelId,title:t.snippet.title,thumbnailUrl:t.snippet.thumbnails.default.url,uploadsPlaylistId:e.contentDetails.relatedPlaylists.uploads,uploads:[]}}function addUploads(t,e){t.uploadsEtag==null&&(t.uploadsEtag=e.etag),t.nextUploadPageToken=e.nextPageToken,e.items.forEach(n=>t.uploads.push(Video(n)))}function clearUploads(t){t.uploadsEtag=null,t.nextUploadPageToken=null,t.uploads=[]}function Subscriptions(t,e){return{etag:t.etag,items:t.items.flatMap(n=>n.map(r=>{const o=e.get(r.snippet.resourceId.channelId);return Subscription(r,o)}))}}var defaultLocale$1="en",localesData$1={},lowercaseLocaleLookup={};function getDefaultLocale(){return defaultLocale$1}function setDefaultLocale(t){defaultLocale$1=t}function getLocaleData$1(t){return localesData$1[t]}function addLocaleData$1(t){if(!t)throw new Error("No locale data passed");localesData$1[t.locale]=t,lowercaseLocaleLookup[t.locale.toLowerCase()]=t.locale}function resolveLocale$1(t){if(localesData$1[t])return t;if(lowercaseLocaleLookup[t.toLowerCase()])return lowercaseLocaleLookup[t.toLowerCase()]}function resolveLocale(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=e.localeMatcher||"lookup";switch(n){case"lookup":return resolveLocaleLookup(t);case"best fit":return resolveLocaleLookup(t);default:throw new RangeError('Invalid "localeMatcher" option: '.concat(n))}}function resolveLocaleLookup(t){var e=resolveLocale$1(t);if(e)return e;for(var n=t.split("-");t.length>1;){n.pop(),t=n.join("-");var r=resolveLocale$1(t);if(r)return r}}var $={af:function t(e){return e==1?"one":"other"},am:function t(e){return e>=0&&e<=1?"one":"other"},ar:function t(e){var n=String(e).split("."),r=Number(n[0])==e,o=r&&n[0].slice(-2);return e==0?"zero":e==1?"one":e==2?"two":o>=3&&o<=10?"few":o>=11&&o<=99?"many":"other"},ast:function t(e){var n=String(e).split("."),r=!n[1];return e==1&&r?"one":"other"},be:function t(e){var n=String(e).split("."),r=Number(n[0])==e,o=r&&n[0].slice(-1),i=r&&n[0].slice(-2);return o==1&&i!=11?"one":o>=2&&o<=4&&(i<12||i>14)?"few":r&&o==0||o>=5&&o<=9||i>=11&&i<=14?"many":"other"},br:function t(e){var n=String(e).split("."),r=Number(n[0])==e,o=r&&n[0].slice(-1),i=r&&n[0].slice(-2),a=r&&n[0].slice(-6);return o==1&&i!=11&&i!=71&&i!=91?"one":o==2&&i!=12&&i!=72&&i!=92?"two":(o==3||o==4||o==9)&&(i<10||i>19)&&(i<70||i>79)&&(i<90||i>99)?"few":e!=0&&r&&a==0?"many":"other"},bs:function t(e){var n=String(e).split("."),r=n[0],o=n[1]||"",i=!n[1],a=r.slice(-1),s=r.slice(-2),l=o.slice(-1),u=o.slice(-2);return i&&a==1&&s!=11||l==1&&u!=11?"one":i&&a>=2&&a<=4&&(s<12||s>14)||l>=2&&l<=4&&(u<12||u>14)?"few":"other"},ceb:function t(e){var n=String(e).split("."),r=n[0],o=n[1]||"",i=!n[1],a=r.slice(-1),s=o.slice(-1);return i&&(r==1||r==2||r==3)||i&&a!=4&&a!=6&&a!=9||!i&&s!=4&&s!=6&&s!=9?"one":"other"},cs:function t(e){var n=String(e).split("."),r=n[0],o=!n[1];return e==1&&o?"one":r>=2&&r<=4&&o?"few":o?"other":"many"},cy:function t(e){return e==0?"zero":e==1?"one":e==2?"two":e==3?"few":e==6?"many":"other"},da:function t(e){var n=String(e).split("."),r=n[0],o=Number(n[0])==e;return e==1||!o&&(r==0||r==1)?"one":"other"},dsb:function t(e){var n=String(e).split("."),r=n[0],o=n[1]||"",i=!n[1],a=r.slice(-2),s=o.slice(-2);return i&&a==1||s==1?"one":i&&a==2||s==2?"two":i&&(a==3||a==4)||s==3||s==4?"few":"other"},dz:function t(e){return"other"},es:function t(e){var n=String(e).split("."),r=n[0],o=!n[1],i=r.slice(-6);return e==1?"one":r!=0&&i==0&&o?"many":"other"},ff:function t(e){return e>=0&&e<2?"one":"other"},fr:function t(e){var n=String(e).split("."),r=n[0],o=!n[1],i=r.slice(-6);return e>=0&&e<2?"one":r!=0&&i==0&&o?"many":"other"},ga:function t(e){var n=String(e).split("."),r=Number(n[0])==e;return e==1?"one":e==2?"two":r&&e>=3&&e<=6?"few":r&&e>=7&&e<=10?"many":"other"},gd:function t(e){var n=String(e).split("."),r=Number(n[0])==e;return e==1||e==11?"one":e==2||e==12?"two":r&&e>=3&&e<=10||r&&e>=13&&e<=19?"few":"other"},he:function t(e){var n=String(e).split("."),r=n[0],o=!n[1],i=Number(n[0])==e,a=i&&n[0].slice(-1);return e==1&&o?"one":r==2&&o?"two":o&&(e<0||e>10)&&i&&a==0?"many":"other"},is:function t(e){var n=String(e).split("."),r=n[0],o=Number(n[0])==e,i=r.slice(-1),a=r.slice(-2);return o&&i==1&&a!=11||!o?"one":"other"},it:function t(e){var n=String(e).split("."),r=n[0],o=!n[1],i=r.slice(-6);return e==1&&o?"one":r!=0&&i==0&&o?"many":"other"},ksh:function t(e){return e==0?"zero":e==1?"one":"other"},lt:function t(e){var n=String(e).split("."),r=n[1]||"",o=Number(n[0])==e,i=o&&n[0].slice(-1),a=o&&n[0].slice(-2);return i==1&&(a<11||a>19)?"one":i>=2&&i<=9&&(a<11||a>19)?"few":r!=0?"many":"other"},lv:function t(e){var n=String(e).split("."),r=n[1]||"",o=r.length,i=Number(n[0])==e,a=i&&n[0].slice(-1),s=i&&n[0].slice(-2),l=r.slice(-2),u=r.slice(-1);return i&&a==0||s>=11&&s<=19||o==2&&l>=11&&l<=19?"zero":a==1&&s!=11||o==2&&u==1&&l!=11||o!=2&&u==1?"one":"other"},mk:function t(e){var n=String(e).split("."),r=n[0],o=n[1]||"",i=!n[1],a=r.slice(-1),s=r.slice(-2),l=o.slice(-1),u=o.slice(-2);return i&&a==1&&s!=11||l==1&&u!=11?"one":"other"},mt:function t(e){var n=String(e).split("."),r=Number(n[0])==e,o=r&&n[0].slice(-2);return e==1?"one":e==0||o>=2&&o<=10?"few":o>=11&&o<=19?"many":"other"},pa:function t(e){return e==0||e==1?"one":"other"},pl:function t(e){var n=String(e).split("."),r=n[0],o=!n[1],i=r.slice(-1),a=r.slice(-2);return e==1&&o?"one":o&&i>=2&&i<=4&&(a<12||a>14)?"few":o&&r!=1&&(i==0||i==1)||o&&i>=5&&i<=9||o&&a>=12&&a<=14?"many":"other"},pt:function t(e){var n=String(e).split("."),r=n[0],o=!n[1],i=r.slice(-6);return r==0||r==1?"one":r!=0&&i==0&&o?"many":"other"},ro:function t(e){var n=String(e).split("."),r=!n[1],o=Number(n[0])==e,i=o&&n[0].slice(-2);return e==1&&r?"one":!r||e==0||i>=2&&i<=19?"few":"other"},ru:function t(e){var n=String(e).split("."),r=n[0],o=!n[1],i=r.slice(-1),a=r.slice(-2);return o&&i==1&&a!=11?"one":o&&i>=2&&i<=4&&(a<12||a>14)?"few":o&&i==0||o&&i>=5&&i<=9||o&&a>=11&&a<=14?"many":"other"},se:function t(e){return e==1?"one":e==2?"two":"other"},si:function t(e){var n=String(e).split("."),r=n[0],o=n[1]||"";return e==0||e==1||r==0&&o==1?"one":"other"},sl:function t(e){var n=String(e).split("."),r=n[0],o=!n[1],i=r.slice(-2);return o&&i==1?"one":o&&i==2?"two":o&&(i==3||i==4)||!o?"few":"other"}};$.as=$.am;$.az=$.af;$.bg=$.af;$.bn=$.am;$.brx=$.af;$.ca=$.ast;$.ce=$.af;$.chr=$.af;$.de=$.ast;$.ee=$.af;$.el=$.af;$.en=$.ast;$.et=$.ast;$.eu=$.af;$.fa=$.am;$.fi=$.ast;$.fil=$.ceb;$.fo=$.af;$.fur=$.af;$.fy=$.ast;$.gl=$.ast;$.gu=$.am;$.ha=$.af;$.hi=$.am;$.hr=$.bs;$.hsb=$.dsb;$.hu=$.af;$.hy=$.ff;$.ia=$.ast;$.id=$.dz;$.ig=$.dz;$.ja=$.dz;$.jgo=$.af;$.jv=$.dz;$.ka=$.af;$.kea=$.dz;$.kk=$.af;$.kl=$.af;$.km=$.dz;$.kn=$.am;$.ko=$.dz;$.ku=$.af;$.ky=$.af;$.lb=$.af;$.lkt=$.dz;$.lo=$.dz;$.ml=$.af;$.mn=$.af;$.mr=$.af;$.ms=$.dz;$.my=$.dz;$.nb=$.af;$.ne=$.af;$.nl=$.ast;$.nn=$.af;$.no=$.af;$.or=$.af;$.pcm=$.am;$.ps=$.af;$.rm=$.af;$.sah=$.dz;$.sc=$.ast;$.sd=$.af;$.sk=$.cs;$.so=$.af;$.sq=$.af;$.sr=$.bs;$.su=$.dz;$.sv=$.ast;$.sw=$.ast;$.ta=$.af;$.te=$.af;$.th=$.dz;$.ti=$.pa;$.tk=$.af;$.to=$.dz;$.tr=$.af;$.ug=$.af;$.uk=$.ru;$.ur=$.ast;$.uz=$.af;$.vi=$.dz;$.wae=$.af;$.wo=$.dz;$.yi=$.ast;$.yo=$.dz;$.yue=$.dz;$.zh=$.dz;$.zu=$.am;var PluralRuleFunctions=$;function getPluralRulesLocale(t){return t==="pt-PT"?t:getLanguageFromLanguageTag(t)}var LANGUAGE_REG_EXP=/^([a-z0-9]+)/i;function getLanguageFromLanguageTag(t){var e=t.match(LANGUAGE_REG_EXP);if(!e)throw new TypeError("Invalid locale: ".concat(t));return e[1]}function _classCallCheck$3(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _defineProperties$3(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function _createClass$3(t,e,n){return e&&_defineProperties$3(t.prototype,e),n&&_defineProperties$3(t,n),t}var PluralRules=function(){function t(e,n){_classCallCheck$3(this,t);var r=t.supportedLocalesOf(e);if(r.length===0)throw new RangeError("Unsupported locale: "+e);if(n&&n.type!=="cardinal")throw new RangeError('Only "cardinal" "type" is supported');this.$=PluralRuleFunctions[getPluralRulesLocale(r[0])]}return _createClass$3(t,[{key:"select",value:function(n){return this.$(n)}}],[{key:"supportedLocalesOf",value:function(n){return typeof n=="string"&&(n=[n]),n.filter(function(r){return PluralRuleFunctions[getPluralRulesLocale(r)]})}}]),t}();function _typeof$5(t){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?_typeof$5=function(n){return typeof n}:_typeof$5=function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},_typeof$5(t)}function _objectSpread$9(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{},r=Object.keys(n);typeof Object.getOwnPropertySymbols=="function"&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(o){return Object.getOwnPropertyDescriptor(n,o).enumerable}))),r.forEach(function(o){_defineProperty$a(t,o,n[o])})}return t}function _slicedToArray$1(t,e){return _arrayWithHoles$1(t)||_iterableToArrayLimit$1(t,e)||_nonIterableRest$1()}function _nonIterableRest$1(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function _iterableToArrayLimit$1(t,e){var n=[],r=!0,o=!1,i=void 0;try{for(var a=t[Symbol.iterator](),s;!(r=(s=a.next()).done)&&(n.push(s.value),!(e&&n.length===e));r=!0);}catch(l){o=!0,i=l}finally{try{!r&&a.return!=null&&a.return()}finally{if(o)throw i}}return n}function _arrayWithHoles$1(t){if(Array.isArray(t))return t}function _classCallCheck$2(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _defineProperties$2(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function _createClass$2(t,e,n){return e&&_defineProperties$2(t.prototype,e),n&&_defineProperties$2(t,n),t}function _defineProperty$a(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var UNITS=["second","minute","hour","day","week","month","quarter","year"],NUMERIC_VALUES=["auto","always"],STYLE_VALUES=["long","short","narrow"],LOCALE_MATCHER_VALUES=["lookup","best fit"],RelativeTimeFormat=function(){function t(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};_classCallCheck$2(this,t),_defineProperty$a(this,"numeric","always"),_defineProperty$a(this,"style","long"),_defineProperty$a(this,"localeMatcher","lookup");var r=n.numeric,o=n.style,i=n.styleFallback,a=n.localeMatcher;if(r!==void 0){if(NUMERIC_VALUES.indexOf(r)<0)throw new RangeError('Invalid "numeric" option: '.concat(r));this.numeric=r}if(o!==void 0){if(STYLE_VALUES.indexOf(o)<0&&!i)throw new RangeError('Invalid "style" option: '.concat(o));this.style=o}if(a!==void 0){if(LOCALE_MATCHER_VALUES.indexOf(a)<0)throw new RangeError('Invalid "localeMatcher" option: '.concat(a));this.localeMatcher=a}if(typeof e=="string"&&(e=[e]),e.push(getDefaultLocale()),this.locale=t.supportedLocalesOf(e,{localeMatcher:this.localeMatcher})[0],!this.locale)throw new Error("No supported locale was found");if(PluralRules.supportedLocalesOf(this.locale).length>0?this.pluralRules=new PluralRules(this.locale):console.warn('"'.concat(this.locale,'" locale is not supported')),typeof Intl!="undefined"&&Intl.NumberFormat?(this.numberFormat=new Intl.NumberFormat(this.locale),this.numberingSystem=this.numberFormat.resolvedOptions().numberingSystem):this.numberingSystem="latn",this.locale=resolveLocale(this.locale,{localeMatcher:this.localeMatcher}),i)for(var s=Object.keys(getLocaleData$1(this.locale)),l=[this.style].concat(STYLE_VALUES,[s[0]]),u=0;u<l.length;u++){var d=l[u];if(s.indexOf(d)>=0){this.style=d;break}}}return _createClass$2(t,[{key:"format",value:function(){var n=parseFormatArgs(arguments),r=_slicedToArray$1(n,2),o=r[0],i=r[1];return this.getRule(o,i).replace("{0}",this.formatNumber(Math.abs(o)))}},{key:"formatToParts",value:function(){var n=parseFormatArgs(arguments),r=_slicedToArray$1(n,2),o=r[0],i=r[1],a=this.getRule(o,i),s=a.indexOf("{0}");if(s<0)return[{type:"literal",value:a}];var l=[];return s>0&&l.push({type:"literal",value:a.slice(0,s)}),l=l.concat(this.formatNumberToParts(Math.abs(o)).map(function(u){return _objectSpread$9({},u,{unit:i})})),s+3<a.length-1&&l.push({type:"literal",value:a.slice(s+3)}),l}},{key:"getRule",value:function(n,r){var o=getLocaleData$1(this.locale)[this.style][r];if(typeof o=="string")return o;if(this.numeric==="auto"){if(n===-2||n===-1){var i=o["previous".concat(n===-1?"":"-"+Math.abs(n))];if(i)return i}else if(n===1||n===2){var a=o["next".concat(n===1?"":"-"+Math.abs(n))];if(a)return a}else if(n===0&&o.current)return o.current}var s=o[isNegative(n)?"past":"future"];if(typeof s=="string")return s;var l=this.pluralRules&&this.pluralRules.select(Math.abs(n))||"other";return s[l]||s.other}},{key:"formatNumber",value:function(n){return this.numberFormat?this.numberFormat.format(n):String(n)}},{key:"formatNumberToParts",value:function(n){return this.numberFormat&&this.numberFormat.formatToParts?this.numberFormat.formatToParts(n):[{type:"integer",value:this.formatNumber(n)}]}},{key:"resolvedOptions",value:function(){return{locale:this.locale,style:this.style,numeric:this.numeric,numberingSystem:this.numberingSystem}}}]),t}();RelativeTimeFormat.supportedLocalesOf=function(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(typeof t=="string")t=[t];else if(!Array.isArray(t))throw new TypeError('Invalid "locales" argument');return t.filter(function(n){return resolveLocale(n,e)})};RelativeTimeFormat.addLocale=addLocaleData$1;RelativeTimeFormat.setDefaultLocale=setDefaultLocale;RelativeTimeFormat.getDefaultLocale=getDefaultLocale;RelativeTimeFormat.PluralRules=PluralRules;var UNIT_ERROR='Invalid "unit" argument';function parseUnit(t){if(_typeof$5(t)==="symbol")throw new TypeError(UNIT_ERROR);if(typeof t!="string")throw new RangeError("".concat(UNIT_ERROR,": ").concat(t));if(t[t.length-1]==="s"&&(t=t.slice(0,t.length-1)),UNITS.indexOf(t)<0)throw new RangeError("".concat(UNIT_ERROR,": ").concat(t));return t}var NUMBER_ERROR='Invalid "number" argument';function parseNumber(t){if(t=Number(t),Number.isFinite&&!Number.isFinite(t))throw new RangeError("".concat(NUMBER_ERROR,": ").concat(t));return t}function isNegativeZero(t){return 1/t===-1/0}function isNegative(t){return t<0||t===0&&isNegativeZero(t)}function parseFormatArgs(t){if(t.length<2)throw new TypeError('"unit" argument is required');return[parseNumber(t[0]),parseUnit(t[1])]}function _typeof$4(t){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?_typeof$4=function(n){return typeof n}:_typeof$4=function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},_typeof$4(t)}function _classCallCheck$1(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _defineProperties$1(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function _createClass$1(t,e,n){return e&&_defineProperties$1(t.prototype,e),n&&_defineProperties$1(t,n),t}function _defineProperty$9(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var Cache=function(){function t(){_classCallCheck$1(this,t),_defineProperty$9(this,"cache",{})}return _createClass$1(t,[{key:"get",value:function(){for(var n=this.cache,r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];for(var a=0;a<o.length;a++){var s=o[a];if(_typeof$4(n)!=="object")return;n=n[s]}return n}},{key:"put",value:function(){for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];for(var i=r.pop(),a=r.pop(),s=this.cache,l=0;l<r.length;l++){var u=r[l];_typeof$4(s[u])!=="object"&&(s[u]={}),s=s[u]}return s[a]=i}}]),t}();function _typeof$3(t){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?_typeof$3=function(n){return typeof n}:_typeof$3=function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},_typeof$3(t)}function chooseLocale(t,e){for(var o=t,n=Array.isArray(o),r=0,o=n?o:o[Symbol.iterator]();;){var i;if(n){if(r>=o.length)break;i=o[r++]}else{if(r=o.next(),r.done)break;i=r.value}var a=i;if(e(a))return a;for(var s=a.split("-");s.length>1;)if(s.pop(),a=s.join("-"),e(a))return a}throw new Error("No locale data has been registered for any of the locales: ".concat(t.join(", ")))}function intlDateTimeFormatSupported(){var t=(typeof Intl=="undefined"?"undefined":_typeof$3(Intl))==="object";return t&&typeof Intl.DateTimeFormat=="function"}function _typeof$2(t){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?_typeof$2=function(n){return typeof n}:_typeof$2=function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},_typeof$2(t)}function isStyleObject(t){return isObject(t)&&(Array.isArray(t.steps)||Array.isArray(t.gradation)||Array.isArray(t.flavour)||typeof t.flavour=="string"||Array.isArray(t.labels)||typeof t.labels=="string"||Array.isArray(t.units)||typeof t.custom=="function")}var OBJECT_CONSTRUCTOR={}.constructor;function isObject(t){return _typeof$2(t)!==void 0&&t!==null&&t.constructor===OBJECT_CONSTRUCTOR}var minute=60,hour=60*minute,day=24*hour,week=7*day,month=30.44*day,year=146097/400*day;function getSecondsInUnit(t){switch(t){case"second":return 1;case"minute":return minute;case"hour":return hour;case"day":return day;case"week":return week;case"month":return month;case"year":return year}}function getStepDenominator(t){return t.factor!==void 0?t.factor:getSecondsInUnit(t.unit||t.formatAs)||1}function getRoundFunction(t){switch(t){case"floor":return Math.floor;default:return Math.round}}function getDiffRatioToNextRoundedNumber(t){switch(t){case"floor":return 1;default:return .5}}function _typeof$1(t){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?_typeof$1=function(n){return typeof n}:_typeof$1=function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},_typeof$1(t)}function getStepMinTime(t,e){var n=e.prevStep,r=e.timestamp,o=e.now,i=e.future,a=e.round,s;return n&&(n.id||n.unit)&&(s=t["threshold_for_".concat(n.id||n.unit)]),s===void 0&&t.threshold!==void 0&&(s=t.threshold,typeof s=="function"&&(s=s(o,i))),s===void 0&&(s=t.minTime),_typeof$1(s)==="object"&&(n&&n.id&&s[n.id]!==void 0?s=s[n.id]:s=s.default),typeof s=="function"&&(s=s(r,{future:i,getMinTimeForUnit:function(u,d){return _getMinTimeForUnit(u,d||n&&n.formatAs,{round:a})}})),s===void 0&&t.test&&(t.test(r,{now:o,future:i})?s=0:s=9007199254740991),s===void 0&&(n?t.formatAs&&n.formatAs&&(s=_getMinTimeForUnit(t.formatAs,n.formatAs,{round:a})):s=0),s===void 0&&console.warn("[javascript-time-ago] A step should specify `minTime`:\n"+JSON.stringify(t,null,2)),s}function _getMinTimeForUnit(t,e,n){var r=n.round,o=getSecondsInUnit(t),i;if(e==="now"?i=getSecondsInUnit(t):i=getSecondsInUnit(e),o!==void 0&&i!==void 0)return o-i*(1-getDiffRatioToNextRoundedNumber(r))}function _objectSpread$8(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{},r=Object.keys(n);typeof Object.getOwnPropertySymbols=="function"&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(o){return Object.getOwnPropertyDescriptor(n,o).enumerable}))),r.forEach(function(o){_defineProperty$8(t,o,n[o])})}return t}function _defineProperty$8(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function getStep(t,e,n){var r=n.now,o=n.future,i=n.round,a=n.units,s=n.getNextStep;t=filterStepsByUnits(t,a);var l=_getStep(t,e,{now:r,future:o,round:i});if(s){if(l){var u=t[t.indexOf(l)-1],d=t[t.indexOf(l)+1];return[u,l,d]}return[void 0,void 0,t[0]]}return l}function _getStep(t,e,n){var r=n.now,o=n.future,i=n.round;if(t.length!==0){var a=getStepIndex(t,e,{now:r,future:o||e<0,round:i});if(a!==-1){var s=t[a];if(s.granularity){var l=getRoundFunction(i)(Math.abs(e)/getStepDenominator(s)/s.granularity)*s.granularity;if(l===0&&a>0)return t[a-1]}return s}}}function getStepIndex(t,e,n){var r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0,o=getStepMinTime(t[r],_objectSpread$8({prevStep:t[r-1],timestamp:n.now-e*1e3},n));return o===void 0||Math.abs(e)<o?r-1:r===t.length-1?r:getStepIndex(t,e,n,r+1)}function filterStepsByUnits(t,e){return t.filter(function(n){var r=n.unit,o=n.formatAs;return r=r||o,r?e.indexOf(r)>=0:!0})}function getTimeToNextUpdateForUnit(t,e,n){var r=n.now,o=n.round;if(!!getSecondsInUnit(t)){var i=getSecondsInUnit(t)*1e3,a=e>r,s=Math.abs(e-r),l=getRoundFunction(o)(s/i)*i;return a?l>0?s-l+getDiffToPreviousRoundedNumber(o,i):s-l+1:-(s-l)+getDiffToNextRoundedNumber(o,i)}}function getDiffToNextRoundedNumber(t,e){return getDiffRatioToNextRoundedNumber(t)*e}function getDiffToPreviousRoundedNumber(t,e){return(1-getDiffRatioToNextRoundedNumber(t))*e+1}var YEAR=365*24*60*60*1e3,INFINITY=1e3*YEAR;function getTimeToNextUpdate(t,e,n){var r=n.prevStep,o=n.nextStep,i=n.now,a=n.future,s=n.round,l=t.getTime?t.getTime():t,u=function(m){return getTimeToNextUpdateForUnit(m,l,{now:i,round:s})},d=getTimeToStepChange(a?e:o,l,{future:a,now:i,round:s,prevStep:a?r:e});if(d!==void 0){var f;if(e&&(e.getTimeToNextUpdate&&(f=e.getTimeToNextUpdate(l,{getTimeToNextUpdateForUnit:u,getRoundFunction,now:i,future:a,round:s})),f===void 0)){var c=e.unit||e.formatAs;c&&(f=u(c))}return f===void 0?d:Math.min(f,d)}}function getStepChangesAt(t,e,n){var r=n.now,o=n.future,i=n.round,a=n.prevStep,s=getStepMinTime(t,{timestamp:e,now:r,future:o,round:i,prevStep:a});if(s!==void 0)return o?e-s*1e3+1:s===0&&e===r?INFINITY:e+s*1e3}function getTimeToStepChange(t,e,n){var r=n.now,o=n.future,i=n.round,a=n.prevStep;if(t){var s=getStepChangesAt(t,e,{now:r,future:o,round:i,prevStep:a});return s===void 0?void 0:s-r}else return o?e-r+1:INFINITY}var localesData={};function getLocaleData(t){return localesData[t]}function addLocaleData(t){if(!t)throw new Error("[javascript-time-ago] No locale data passed.");localesData[t.locale]=t}var round$1=[{formatAs:"now"},{formatAs:"second"},{formatAs:"minute"},{formatAs:"hour"},{formatAs:"day"},{formatAs:"week"},{formatAs:"month"},{formatAs:"year"}],round={steps:round$1,labels:"long"};function _objectSpread$7(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{},r=Object.keys(n);typeof Object.getOwnPropertySymbols=="function"&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(o){return Object.getOwnPropertyDescriptor(n,o).enumerable}))),r.forEach(function(o){_defineProperty$7(t,o,n[o])})}return t}function _defineProperty$7(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var defaultStyle=_objectSpread$7({},round,{steps:round.steps.filter(function(t){return t.formatAs!=="second"})}),approximate$1=[{factor:1,unit:"now"},{threshold:1,threshold_for_now:45.5,factor:1,unit:"second"},{threshold:45.5,factor:minute,unit:"minute"},{threshold:2.5*minute,granularity:5,factor:minute,unit:"minute"},{threshold:22.5*minute,factor:.5*hour,unit:"half-hour"},{threshold:42.5*minute,threshold_for_minute:52.5*minute,factor:hour,unit:"hour"},{threshold:20.5/24*day,factor:day,unit:"day"},{threshold:5.5*day,factor:week,unit:"week"},{threshold:3.5*week,factor:month,unit:"month"},{threshold:10.5*month,factor:year,unit:"year"}],approximate={gradation:approximate$1,flavour:"long",units:["now","minute","hour","day","week","month","year"]},approximateTime={gradation:approximate$1,flavour:"long-time",units:["now","minute","hour","day","week","month","year"]};function getDate(t){return t instanceof Date?t:new Date(t)}var steps=[{formatAs:"second"},{formatAs:"minute"},{formatAs:"hour"}],formatters={},monthAndDay={minTime:function t(e,n){n.future;var r=n.getMinTimeForUnit;return r("day")},format:function t(e,n){return formatters[n]||(formatters[n]={}),formatters[n].dayMonth||(formatters[n].dayMonth=new Intl.DateTimeFormat(n,{month:"short",day:"numeric"})),formatters[n].dayMonth.format(getDate(e))}},yearMonthAndDay={minTime:function t(e,n){var r=n.future;if(r){var o=new Date(new Date(e).getFullYear(),0).getTime()-1;return(e-o)/1e3}else{var i=new Date(new Date(e).getFullYear()+1,0).getTime();return(i-e)/1e3}},format:function t(e,n){return formatters[n]||(formatters[n]={}),formatters[n].dayMonthYear||(formatters[n].dayMonthYear=new Intl.DateTimeFormat(n,{year:"numeric",month:"short",day:"numeric"})),formatters[n].dayMonthYear.format(getDate(e))}};intlDateTimeFormatSupported()?steps.push(monthAndDay,yearMonthAndDay):steps.push({formatAs:"day"},{formatAs:"week"},{formatAs:"month"},{formatAs:"year"});var twitter={steps,labels:["mini","short-time","narrow","short"]};function _objectSpread$6(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{},r=Object.keys(n);typeof Object.getOwnPropertySymbols=="function"&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(o){return Object.getOwnPropertyDescriptor(n,o).enumerable}))),r.forEach(function(o){_defineProperty$6(t,o,n[o])})}return t}function _defineProperty$6(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var twitterNow=_objectSpread$6({},twitter,{steps:[{formatAs:"now"}].concat(twitter.steps)});function _objectSpread$5(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{},r=Object.keys(n);typeof Object.getOwnPropertySymbols=="function"&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(o){return Object.getOwnPropertyDescriptor(n,o).enumerable}))),r.forEach(function(o){_defineProperty$5(t,o,n[o])})}return t}function _defineProperty$5(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var twitterMinute=_objectSpread$5({},twitter,{steps:twitter.steps.filter(function(t){return t.formatAs!=="second"})});function _objectSpread$4(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{},r=Object.keys(n);typeof Object.getOwnPropertySymbols=="function"&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(o){return Object.getOwnPropertyDescriptor(n,o).enumerable}))),r.forEach(function(o){_defineProperty$4(t,o,n[o])})}return t}function _defineProperty$4(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var twitterMinuteNow=_objectSpread$4({},twitterMinute,{steps:[{formatAs:"now"}].concat(twitterMinute.steps)});function _objectSpread$3(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{},r=Object.keys(n);typeof Object.getOwnPropertySymbols=="function"&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(o){return Object.getOwnPropertyDescriptor(n,o).enumerable}))),r.forEach(function(o){_defineProperty$3(t,o,n[o])})}return t}function _defineProperty$3(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var twitterFirstMinute=_objectSpread$3({},twitter,{steps:twitter.steps.filter(function(t){return t.formatAs!=="second"}).map(function(t){return t.formatAs==="minute"?_objectSpread$3({},t,{minTime:minute}):t})}),mini$1={steps:[{formatAs:"second"},{formatAs:"minute"},{formatAs:"hour"},{formatAs:"day"},{formatAs:"month"},{formatAs:"year"}],labels:["mini","short-time","narrow","short"]};function _objectSpread$2(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{},r=Object.keys(n);typeof Object.getOwnPropertySymbols=="function"&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(o){return Object.getOwnPropertyDescriptor(n,o).enumerable}))),r.forEach(function(o){_defineProperty$2(t,o,n[o])})}return t}function _defineProperty$2(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var miniNow=_objectSpread$2({},mini$1,{steps:[{formatAs:"now"}].concat(mini$1.steps)});function _objectSpread$1(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{},r=Object.keys(n);typeof Object.getOwnPropertySymbols=="function"&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(o){return Object.getOwnPropertyDescriptor(n,o).enumerable}))),r.forEach(function(o){_defineProperty$1(t,o,n[o])})}return t}function _defineProperty$1(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var miniMinute=_objectSpread$1({},mini$1,{steps:mini$1.steps.filter(function(t){return t.formatAs!=="second"})});function _objectSpread(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{},r=Object.keys(n);typeof Object.getOwnPropertySymbols=="function"&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(o){return Object.getOwnPropertyDescriptor(n,o).enumerable}))),r.forEach(function(o){_defineProperty(t,o,n[o])})}return t}function _defineProperty(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var miniMinuteNow=_objectSpread({},miniMinute,{steps:[{formatAs:"now"}].concat(miniMinute.steps)});function getStyleByName(t){switch(t){case"default":case"round":return round;case"round-minute":return defaultStyle;case"approximate":return approximate;case"time":case"approximate-time":return approximateTime;case"mini":return mini$1;case"mini-now":return miniNow;case"mini-minute":return miniMinute;case"mini-minute-now":return miniMinuteNow;case"twitter":return twitter;case"twitter-now":return twitterNow;case"twitter-minute":return twitterMinute;case"twitter-minute-now":return twitterMinuteNow;case"twitter-first-minute":return twitterFirstMinute;default:return approximate}}function _typeof(t){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?_typeof=function(n){return typeof n}:_typeof=function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},_typeof(t)}function _slicedToArray(t,e){return _arrayWithHoles(t)||_iterableToArrayLimit(t,e)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function _iterableToArrayLimit(t,e){var n=[],r=!0,o=!1,i=void 0;try{for(var a=t[Symbol.iterator](),s;!(r=(s=a.next()).done)&&(n.push(s.value),!(e&&n.length===e));r=!0);}catch(l){o=!0,i=l}finally{try{!r&&a.return!=null&&a.return()}finally{if(o)throw i}}return n}function _arrayWithHoles(t){if(Array.isArray(t))return t}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _defineProperties(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function _createClass(t,e,n){return e&&_defineProperties(t.prototype,e),n&&_defineProperties(t,n),t}var TimeAgo=function(){function t(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=n.polyfill;_classCallCheck(this,t),typeof e=="string"&&(e=[e]),this.locale=chooseLocale(e.concat(t.getDefaultLocale()),getLocaleData),typeof Intl!="undefined"&&Intl.NumberFormat&&(this.numberFormat=new Intl.NumberFormat(this.locale)),r===!1?(this.IntlRelativeTimeFormat=Intl.RelativeTimeFormat,this.IntlPluralRules=Intl.PluralRules):(this.IntlRelativeTimeFormat=RelativeTimeFormat,this.IntlPluralRules=RelativeTimeFormat.PluralRules),this.relativeTimeFormatCache=new Cache,this.pluralRulesCache=new Cache}return _createClass(t,[{key:"format",value:function(n,r,o){o||(r&&!isStyle(r)?(o=r,r=void 0):o={}),r||(r=defaultStyle),typeof r=="string"&&(r=getStyleByName(r));var i=getTimestamp(n),a=this.getLabels(r.flavour||r.labels),s=a.labels,l=a.labelsType,u;r.now!==void 0&&(u=r.now),u===void 0&&o.now!==void 0&&(u=o.now),u===void 0&&(u=Date.now());var d=(u-i)/1e3,f=o.future||d<0,c=getNowLabel(s,getLocaleData(this.locale).now,getLocaleData(this.locale).long,f);if(r.custom){var _=r.custom({now:u,date:new Date(i),time:i,elapsed:d,locale:this.locale});if(_!==void 0)return _}var m=getTimeIntervalMeasurementUnits(r.units,s,c),h=o.round||r.round,E=getStep(r.gradation||r.steps||defaultStyle.steps,d,{now:u,units:m,round:h,future:f,getNextStep:!0}),g=_slicedToArray(E,3),I=g[0],b=g[1],A=g[2],R=this.formatDateForStep(i,b,d,{labels:s,labelsType:l,nowLabel:c,now:u,future:f,round:h})||"";if(o.getTimeToNextUpdate){var S=getTimeToNextUpdate(i,b,{nextStep:A,prevStep:I,now:u,future:f,round:h});return[R,S]}return R}},{key:"formatDateForStep",value:function(n,r,o,i){var a=this,s=i.labels,l=i.labelsType,u=i.nowLabel,d=i.now,f=i.future,c=i.round;if(!!r){if(r.format)return r.format(n,this.locale,{formatAs:function(g,I){return a.formatValue(I,g,{labels:s,future:f})},now:d,future:f});var _=r.unit||r.formatAs;if(!_)throw new Error("[javascript-time-ago] Each step must define either `formatAs` or `format()`. Step: ".concat(JSON.stringify(r)));if(_==="now")return u;var m=Math.abs(o)/getStepDenominator(r);r.granularity&&(m=getRoundFunction(c)(m/r.granularity)*r.granularity);var h=-1*Math.sign(o)*getRoundFunction(c)(m);switch(h===0&&(f?h=0:h=-0),l){case"long":case"short":case"narrow":return this.getFormatter(l).format(h,_);default:return this.formatValue(h,_,{labels:s,future:f})}}}},{key:"formatValue",value:function(n,r,o){var i=o.labels,a=o.future;return this.getFormattingRule(i,r,n,{future:a}).replace("{0}",this.formatNumber(Math.abs(n)))}},{key:"getFormattingRule",value:function(n,r,o,i){var a=i.future;if(this.locale,n=n[r],typeof n=="string")return n;var s=o===0?a?"future":"past":o<0?"past":"future",l=n[s]||n;if(typeof l=="string")return l;var u=this.getPluralRules().select(Math.abs(o));return l[u]||l.other}},{key:"formatNumber",value:function(n){return this.numberFormat?this.numberFormat.format(n):String(n)}},{key:"getFormatter",value:function(n){return this.relativeTimeFormatCache.get(this.locale,n)||this.relativeTimeFormatCache.put(this.locale,n,new this.IntlRelativeTimeFormat(this.locale,{style:n}))}},{key:"getPluralRules",value:function(){return this.pluralRulesCache.get(this.locale)||this.pluralRulesCache.put(this.locale,new this.IntlPluralRules(this.locale))}},{key:"getLabels",value:function(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];typeof n=="string"&&(n=[n]),n=n.map(function(u){switch(u){case"tiny":case"mini-time":return"mini";default:return u}}),n=n.concat("long");for(var r=getLocaleData(this.locale),a=n,o=Array.isArray(a),i=0,a=o?a:a[Symbol.iterator]();;){var s;if(o){if(i>=a.length)break;s=a[i++]}else{if(i=a.next(),i.done)break;s=i.value}var l=s;if(r[l])return{labelsType:l,labels:r[l]}}}}]),t}(),defaultLocale="en";TimeAgo.getDefaultLocale=function(){return defaultLocale};TimeAgo.setDefaultLocale=function(t){return defaultLocale=t};TimeAgo.addDefaultLocale=function(t){if(defaultLocaleHasBeenSpecified)return console.error("[javascript-time-ago] `TimeAgo.addDefaultLocale()` can only be called once. To add other locales, use `TimeAgo.addLocale()`.");defaultLocaleHasBeenSpecified=!0,TimeAgo.setDefaultLocale(t.locale),TimeAgo.addLocale(t)};var defaultLocaleHasBeenSpecified;TimeAgo.addLocale=function(t){addLocaleData(t),RelativeTimeFormat.addLocale(t)};TimeAgo.locale=TimeAgo.addLocale;TimeAgo.addLabels=function(t,e,n){var r=getLocaleData(t);r||(addLocaleData({locale:t}),r=getLocaleData(t)),r[e]=n};function getTimestamp(t){if(t.constructor===Date||isMockedDate(t))return t.getTime();if(typeof t=="number")return t;throw new Error("Unsupported relative time formatter input: ".concat(_typeof(t),", ").concat(t))}function isMockedDate(t){return _typeof(t)==="object"&&typeof t.getTime=="function"}function getTimeIntervalMeasurementUnits(t,e,n){var r=Object.keys(e);return n&&r.push("now"),t&&(r=t.filter(function(o){return o==="now"||r.indexOf(o)>=0})),r}function getNowLabel(t,e,n,r){var o=t.now||e&&e.now;if(o)return typeof o=="string"?o:r?o.future:o.past;if(n&&n.second&&n.second.current)return n.second.current}function isStyle(t){return typeof t=="string"||isStyleObject(t)}const locale="en",long={year:{previous:"last year",current:"this year",next:"next year",past:{one:"{0} year ago",other:"{0} years ago"},future:{one:"in {0} year",other:"in {0} years"}},quarter:{previous:"last quarter",current:"this quarter",next:"next quarter",past:{one:"{0} quarter ago",other:"{0} quarters ago"},future:{one:"in {0} quarter",other:"in {0} quarters"}},month:{previous:"last month",current:"this month",next:"next month",past:{one:"{0} month ago",other:"{0} months ago"},future:{one:"in {0} month",other:"in {0} months"}},week:{previous:"last week",current:"this week",next:"next week",past:{one:"{0} week ago",other:"{0} weeks ago"},future:{one:"in {0} week",other:"in {0} weeks"}},day:{previous:"yesterday",current:"today",next:"tomorrow",past:{one:"{0} day ago",other:"{0} days ago"},future:{one:"in {0} day",other:"in {0} days"}},hour:{current:"this hour",past:{one:"{0} hour ago",other:"{0} hours ago"},future:{one:"in {0} hour",other:"in {0} hours"}},minute:{current:"this minute",past:{one:"{0} minute ago",other:"{0} minutes ago"},future:{one:"in {0} minute",other:"in {0} minutes"}},second:{current:"now",past:{one:"{0} second ago",other:"{0} seconds ago"},future:{one:"in {0} second",other:"in {0} seconds"}}},short={year:{previous:"last yr.",current:"this yr.",next:"next yr.",past:"{0} yr. ago",future:"in {0} yr."},quarter:{previous:"last qtr.",current:"this qtr.",next:"next qtr.",past:{one:"{0} qtr. ago",other:"{0} qtrs. ago"},future:{one:"in {0} qtr.",other:"in {0} qtrs."}},month:{previous:"last mo.",current:"this mo.",next:"next mo.",past:"{0} mo. ago",future:"in {0} mo."},week:{previous:"last wk.",current:"this wk.",next:"next wk.",past:"{0} wk. ago",future:"in {0} wk."},day:{previous:"yesterday",current:"today",next:"tomorrow",past:{one:"{0} day ago",other:"{0} days ago"},future:{one:"in {0} day",other:"in {0} days"}},hour:{current:"this hour",past:"{0} hr. ago",future:"in {0} hr."},minute:{current:"this minute",past:"{0} min. ago",future:"in {0} min."},second:{current:"now",past:"{0} sec. ago",future:"in {0} sec."}},narrow={year:{previous:"last yr.",current:"this yr.",next:"next yr.",past:"{0} yr. ago",future:"in {0} yr."},quarter:{previous:"last qtr.",current:"this qtr.",next:"next qtr.",past:{one:"{0} qtr. ago",other:"{0} qtrs. ago"},future:{one:"in {0} qtr.",other:"in {0} qtrs."}},month:{previous:"last mo.",current:"this mo.",next:"next mo.",past:"{0} mo. ago",future:"in {0} mo."},week:{previous:"last wk.",current:"this wk.",next:"next wk.",past:"{0} wk. ago",future:"in {0} wk."},day:{previous:"yesterday",current:"today",next:"tomorrow",past:{one:"{0} day ago",other:"{0} days ago"},future:{one:"in {0} day",other:"in {0} days"}},hour:{current:"this hour",past:"{0} hr. ago",future:"in {0} hr."},minute:{current:"this minute",past:"{0} min. ago",future:"in {0} min."},second:{current:"now",past:"{0} sec. ago",future:"in {0} sec."}},now={now:{current:"now",future:"in a moment",past:"just now"}},tiny={year:"{0}yr",month:"{0}mo",week:"{0}wk",day:"{0}d",hour:"{0}h",minute:"{0}m",second:"{0}s",now:"now"},mini={year:"{0}yr",month:"{0}mo",week:"{0}wk",day:"{0}d",hour:"{0}h",minute:"{0}m",second:"{0}s",now:"now"};var en={locale,long,short,narrow,"short-time":{year:"{0} yr.",month:"{0} mo.",week:"{0} wk.",day:{one:"{0} day",other:"{0} days"},hour:"{0} hr.",minute:"{0} min.",second:"{0} sec."},"long-time":{year:{one:"{0} year",other:"{0} years"},month:{one:"{0} month",other:"{0} months"},week:{one:"{0} week",other:"{0} weeks"},day:{one:"{0} day",other:"{0} days"},hour:{one:"{0} hour",other:"{0} hours"},minute:{one:"{0} minute",other:"{0} minutes"},second:{one:"{0} second",other:"{0} seconds"}},now,tiny,mini};TimeAgo.addDefaultLocale(en);const timeAgo=new TimeAgo("en-US");function create_fragment$6(t){let e,n,r,o,i,a,s,l=t[0].title+"",u,d,f,c,_=timeAgo.format(new Date(t[0].publishedAt))+"",m,h,E=t[0].channelTitle+"",g,I,b,A=t[0].description+"",R,S,T,y;return{c(){e=element("a"),n=element("div"),r=element("img"),i=space(),a=element("div"),s=element("p"),u=text(l),f=space(),c=element("p"),m=text(_),h=text(" - "),g=text(E),I=space(),b=element("p"),R=text(A),src_url_equal(r.src,o=t[0].thumbnailUrl)||attr(r,"src",o),attr(r,"alt",""),attr(r,"loading","lazy"),attr(r,"width","320"),attr(r,"height","180"),attr(n,"class","inline-block w-[11rem] align-text-bottom p-1"),attr(s,"class","font-bold truncate"),attr(s,"title",d=t[0].title),attr(c,"class","text-neutral-400 truncate"),attr(b,"class","text-ellipsis line-clamp-3"),attr(a,"class","inline-block w-[17rem] align-top text-sm"),attr(e,"class","block w-[30rem] bg-neutral-600 p-2 m-2 first:mt-0 last:mb-0 rounded-2xl"),attr(e,"href",S="https://www.youtube.com/watch?v="+t[0].videoId)},m(w,C){insert(w,e,C),append(e,n),append(n,r),append(e,i),append(e,a),append(a,s),append(s,u),append(a,f),append(a,c),append(c,m),append(c,h),append(c,g),append(a,I),append(a,b),append(b,R),T||(y=listen(e,"click",prevent_default(t[1])),T=!0)},p(w,[C]){C&1&&!src_url_equal(r.src,o=w[0].thumbnailUrl)&&attr(r,"src",o),C&1&&l!==(l=w[0].title+"")&&set_data(u,l),C&1&&d!==(d=w[0].title)&&attr(s,"title",d),C&1&&_!==(_=timeAgo.format(new Date(w[0].publishedAt))+"")&&set_data(m,_),C&1&&E!==(E=w[0].channelTitle+"")&&set_data(g,E),C&1&&A!==(A=w[0].description+"")&&set_data(R,A),C&1&&S!==(S="https://www.youtube.com/watch?v="+w[0].videoId)&&attr(e,"href",S)},i:noop,o:noop,d(w){w&&detach(e),T=!1,y()}}}function instance$6(t,e,n){let{video:r}=e;function o(){playerStore.set({videoId:r.videoId})}return t.$$set=i=>{"video"in i&&n(0,r=i.video)},[r,o]}class VideoCard extends SvelteComponent{constructor(e){super(),init(this,e,instance$6,create_fragment$6,safe_not_equal,{video:0})}}const NOT_MODIFIED="Not Modified";function appendQuery(t,e){if(e){const n=new URLSearchParams(e);return`${t}?${n}`}else return t}function toRequest(t,e={}){const n=appendQuery("https://www.googleapis.com"+t,e.query);return e.headers=new Headers(e.headers),e.headers.append("Authorization","Bearer "+gapi.auth.getToken().access_token),e.etag&&e.headers.append("If-None-Match",e.etag),new Request(n,e)}async function request(t,e={}){typeof t=="string"&&(t=toRequest(t,e));const n=await fetch(t);if(n.status===304)throw NOT_MODIFIED;if(!n.ok)throw n;return n}async function batchRequest(t,e){const n=`boundary${Date.now()}`,r="/batch"+t,o=await request(r,{method:"POST",headers:{"Content-Type":`multipart/mixed; boundary=${n}`},body:await batchRequestsToBody(e,n)});return batchResponseToMap(o)}async function batchRequestsToBody(t,e){let n=[];for(const[r,o]of t){if(n.push(`--${e}`),n.push("Content-Type: application/http"),n.push(`Content-ID: ${r}`),o.bodyUsed&&n.push(`Content-Length: ${(await o.blob()).size}`),n.push(""),n.push(`${o.method} ${o.url}`),o.headers)for(const[i,a]of o.headers.entries())n.push(`${i}: ${a}`);o.bodyUsed&&(n.push(""),n.push(await o.text()))}return n.push(`--${e}--`),n.join(`\r
`)}async function batchResponseToMap(t){const e=t.headers.get("Content-Type").match(/^multipart\/mixed; boundary=(.+)$/)[1],r=(await t.text()).split(new RegExp(`\r
--${e}(?:--)?\r
`,"g")).slice(1,-1),o=new Map;for(const i of r){const[a,s,l]=i.split(`\r
\r
`,3),d=headerStringToHeaders(a).get("Content-ID").match(/^response-(.+)$/)[1],[f,c]=s.split(`\r
`,2),[_,m,h]=f.split(" ",3),E=headerStringToHeaders(c),g=l.length===0?null:l,I=new Response(g,{status:parseInt(m,10),statusText:h,headers:E});o.set(d,I)}return o}function headerStringToHeaders(t){const e=new Headers;for(const n of t.split(`\r
`)){const[r,o]=n.split(": ");e.append(r,o)}return e}function jsonBlob(t){return new Blob([JSON.stringify(t)],{type:"application/json"})}async function listAllSubscriptions(t){let e=await listSubscriptions({etag:t});const n=e.etag,r=[e.items];for(;e.nextPageToken;)e=await listSubscriptions({pageToken:e.nextPageToken}),r.push(e.items);return{etag:n,items:r}}async function listSubscriptions(t={}){return(await request(listSubscriptionsRequest(t))).json()}function listSubscriptionsRequest(t={}){return toRequest("/youtube/v3/subscriptions",Z({method:"GET",query:Z({part:"snippet",fields:"etag,items(snippet(title,resourceId/channelId,thumbnails/default/url)),nextPageToken",mine:"true",order:"alphabetical",maxResults:"50"},t.pageToken&&{pageToken:t.pageToken})},t.etag&&{etag:t.etag}))}async function listAllChannels(t){const e=new Map(t.map((o,i)=>[`${i}`,listChannelsRequest(o)])),n=await batchRequest("/youtube/v3",e),r=await Promise.all(Array.from(n.values()).map(o=>o.json()));return new Map(r.flatMap(o=>o.items.map(i=>[i.id,i])))}function listChannelsRequest(t){return toRequest("/youtube/v3/channels",{method:"GET",query:{part:"contentDetails",fields:"items(id,contentDetails/relatedPlaylists/uploads)",id:t.map(e=>e.snippet.resourceId.channelId).join(","),maxResults:"50"}})}async function listAllPlaylistItems(t,e){const n=new Set(e.subscriptionGroups.flatMap(r=>r.subscriptionIds));if(n.size>0){const r=t.items.filter(a=>n.has(a.channelId)),o=new Map(r.map(a=>[a.uploadsPlaylistId,listPlaylistItemsRequest(a,!0)])),i=await batchRequest("/youtube/v3",o);await Promise.all(r.map(a=>listPlaylistItemsResponse(a,i.get(a.uploadsPlaylistId),!0)))}}async function listPlaylistItems(t){const e=await request(listPlaylistItemsRequest(t,!1));await listPlaylistItemsResponse(t,e,!1)}function listPlaylistItemsRequest(t,e){return toRequest("/youtube/v3/playlistItems",Z({method:"GET",query:Z({part:"snippet",fields:"etag,items(snippet(title,description,publishedAt,thumbnails/medium/url,resourceId/videoId)),nextPageToken",playlistId:t.uploadsPlaylistId,maxResults:"50"},!e&&t.nextUploadPageToken&&{pageToken:t.nextUploadPageToken})},e&&t.uploadsEtag&&{etag:t.uploadsEtag}))}async function listPlaylistItemsResponse(t,e,n){if(n){if(t.uploadsEtag&&e.status===304)return;clearUploads(t)}if(!e.ok)throw e;addUploads(t,await e.json())}async function SubscriptionGroup(t,e){const n={name:t,subscriptions:e.map(r=>({subscription:r,uploadIndex:0})),videos:[]};return await loadMoreVideos(n),n}async function getPlaylist(t){return t.subscriptions.length===1?{playlistId:t.subscriptions[0].subscription.uploadsPlaylistId}:(t.videos.length<200&&await loadMoreVideos(t,200-t.videos.length),{customPlaylist:t.videos.slice(0,200).map(e=>e.videoId)})}async function loadMoreVideos(t,e=10){for(let n=0;n<e;n++){let r,o;for(const i of t.subscriptions){if(i.uploadIndex===i.subscription.uploads.length){if(!i.subscription.nextUploadPageToken)continue;await listPlaylistItems(i.subscription)}const a=i.subscription.uploads[i.uploadIndex];(!r||a.publishedAt>r.publishedAt)&&(r=a,o=i)}if(!r||!o)break;r.channelTitle=o.subscription.title,t.videos.push(r),o.uploadIndex++}}function get_each_context$2(t,e,n){const r=t.slice();return r[6]=e[n],r}function create_else_block$2(t){let e,n=t[0].name+"",r,o,i,a=t[0].videos.length>0&&create_if_block_2(t);return{c(){e=element("span"),r=text(n),o=space(),a&&a.c(),i=empty(),attr(e,"class","cursor-default")},m(s,l){insert(s,e,l),append(e,r),insert(s,o,l),a&&a.m(s,l),insert(s,i,l)},p(s,l){l&1&&n!==(n=s[0].name+"")&&set_data(r,n),s[0].videos.length>0?a?a.p(s,l):(a=create_if_block_2(s),a.c(),a.m(i.parentNode,i)):a&&(a.d(1),a=null)},d(s){s&&detach(e),s&&detach(o),a&&a.d(s),s&&detach(i)}}}function create_if_block$3(t){let e,n,r,o,i=t[0].name+"",a,s,l,u,d=t[0].videos.length>0&&create_if_block_1$1(t);return{c(){e=element("a"),n=element("img"),o=space(),a=text(i),l=space(),d&&d.c(),u=empty(),attr(n,"class","inline-block h-8 w-8 rounded-2xl"),src_url_equal(n.src,r=t[0].subscriptions[0].subscription.thumbnailUrl)||attr(n,"src",r),attr(n,"alt",""),attr(n,"loading","lazy"),attr(n,"width","88"),attr(n,"height","88"),attr(e,"href",s="https://www.youtube.com/channel/"+t[0].subscriptions[0].subscription.channelId)},m(f,c){insert(f,e,c),append(e,n),append(e,o),append(e,a),insert(f,l,c),d&&d.m(f,c),insert(f,u,c)},p(f,c){c&1&&!src_url_equal(n.src,r=f[0].subscriptions[0].subscription.thumbnailUrl)&&attr(n,"src",r),c&1&&i!==(i=f[0].name+"")&&set_data(a,i),c&1&&s!==(s="https://www.youtube.com/channel/"+f[0].subscriptions[0].subscription.channelId)&&attr(e,"href",s),f[0].videos.length>0?d?d.p(f,c):(d=create_if_block_1$1(f),d.c(),d.m(u.parentNode,u)):d&&(d.d(1),d=null)},d(f){f&&detach(e),f&&detach(l),d&&d.d(f),f&&detach(u)}}}function create_if_block_2(t){let e,n,r;return{c(){e=element("span"),e.textContent="\u25B8",attr(e,"class","float-right pl-2 pr-2 -ml-8 text-[2rem] leading-[0.75] cursor-pointer")},m(o,i){insert(o,e,i),n||(r=listen(e,"click",t[1]),n=!0)},p:noop,d(o){o&&detach(e),n=!1,r()}}}function create_if_block_1$1(t){let e,n,r,o,i;return{c(){e=element("a"),n=text("\u25B8"),attr(e,"class","float-right pl-2 pr-2 -ml-8 text-[2rem] leading-[0.75]"),attr(e,"href",r="https://www.youtube.com/watch?v="+t[0].videos[0].videoId+"&list="+t[0].subscriptions[0].subscription.uploadsPlaylistId)},m(a,s){insert(a,e,s),append(e,n),o||(i=listen(e,"click",prevent_default(t[1])),o=!0)},p(a,s){s&1&&r!==(r="https://www.youtube.com/watch?v="+a[0].videos[0].videoId+"&list="+a[0].subscriptions[0].subscription.uploadsPlaylistId)&&attr(e,"href",r)},d(a){a&&detach(e),o=!1,i()}}}function create_each_block$2(t){let e,n;return e=new VideoCard({props:{video:t[6]}}),{c(){create_component(e.$$.fragment)},m(r,o){mount_component(e,r,o),n=!0},p(r,o){const i={};o&1&&(i.video=r[6]),e.$set(i)},i(r){n||(transition_in(e.$$.fragment,r),n=!0)},o(r){transition_out(e.$$.fragment,r),n=!1},d(r){destroy_component(e,r)}}}function create_fragment$5(t){let e,n,r,o,i,a,s;function l(m,h){return m[0].subscriptions.length===1?create_if_block$3:create_else_block$2}let u=l(t),d=u(t),f=t[0].videos,c=[];for(let m=0;m<f.length;m+=1)c[m]=create_each_block$2(get_each_context$2(t,f,m));const _=m=>transition_out(c[m],1,1,()=>{c[m]=null});return{c(){e=element("div"),n=element("p"),d.c(),r=space(),o=element("div");for(let m=0;m<c.length;m+=1)c[m].c();attr(n,"class","text-center font-bold h-9"),attr(o,"class","overflow-y-scroll y-scroll-hover overflow-x-hidden"),set_style(o,"height","calc(100% - 2.25rem)"),attr(e,"class","inline-block h-full w-[32rem] bg-neutral-800 p-1 pb-4 ml-1 mr-1 rounded-2xl")},m(m,h){insert(m,e,h),append(e,n),d.m(n,null),append(e,r),append(e,o);for(let E=0;E<c.length;E+=1)c[E].m(o,null);i=!0,a||(s=[listen(o,"wheel",stop_propagation(t[3]),{passive:!0}),listen(o,"scroll",t[2])],a=!0)},p(m,[h]){if(u===(u=l(m))&&d?d.p(m,h):(d.d(1),d=u(m),d&&(d.c(),d.m(n,null))),h&1){f=m[0].videos;let E;for(E=0;E<f.length;E+=1){const g=get_each_context$2(m,f,E);c[E]?(c[E].p(g,h),transition_in(c[E],1)):(c[E]=create_each_block$2(g),c[E].c(),transition_in(c[E],1),c[E].m(o,null))}for(group_outros(),E=f.length;E<c.length;E+=1)_(E);check_outros()}},i(m){if(!i){for(let h=0;h<f.length;h+=1)transition_in(c[h]);i=!0}},o(m){c=c.filter(Boolean);for(let h=0;h<c.length;h+=1)transition_out(c[h]);i=!1},d(m){m&&detach(e),d.d(),destroy_each(c,m),a=!1,run_all(s)}}}function instance$5(t,e,n){let r;component_subscribe(t,playerStore,u=>n(5,r=u));let{subscriptionGroup:o}=e,i=!1;async function a(){set_store_value(playerStore,r={loading:!0},r);const u=await getPlaylist(o);n(0,o),set_store_value(playerStore,r=u,r)}async function s(u){const d=u.target;!i&&d.scrollHeight-d.scrollTop-122<=d.clientHeight&&(i=!0,await loadMoreVideos(o),n(0,o),i=!1)}function l(u){bubble.call(this,t,u)}return t.$$set=u=>{"subscriptionGroup"in u&&n(0,o=u.subscriptionGroup)},[o,a,s,l]}class SubscriptionOverview extends SvelteComponent{constructor(e){super(),init(this,e,instance$5,create_fragment$5,safe_not_equal,{subscriptionGroup:0})}}function cubicOut(t){const e=t-1;return e*e*e+1}function is_date(t){return Object.prototype.toString.call(t)==="[object Date]"}function get_interpolator(t,e){if(t===e||t!==t)return()=>t;const n=typeof t;if(n!==typeof e||Array.isArray(t)!==Array.isArray(e))throw new Error("Cannot interpolate values of different type");if(Array.isArray(t)){const r=e.map((o,i)=>get_interpolator(t[i],o));return o=>r.map(i=>i(o))}if(n==="object"){if(!t||!e)throw new Error("Object cannot be null");if(is_date(t)&&is_date(e)){t=t.getTime(),e=e.getTime();const i=e-t;return a=>new Date(t+a*i)}const r=Object.keys(e),o={};return r.forEach(i=>{o[i]=get_interpolator(t[i],e[i])}),i=>{const a={};return r.forEach(s=>{a[s]=o[s](i)}),a}}if(n==="number"){const r=e-t;return o=>t+o*r}throw new Error(`Cannot interpolate ${n} values`)}function tweened(t,e={}){const n=writable(t);let r,o=t;function i(a,s){if(t==null)return n.set(t=a),Promise.resolve();o=a;let l=r,u=!1,{delay:d=0,duration:f=400,easing:c=identity,interpolate:_=get_interpolator}=assign(assign({},e),s);if(f===0)return l&&(l.abort(),l=null),n.set(t=o),Promise.resolve();const m=now$1()+d;let h;return r=loop$1(E=>{if(E<m)return!0;u||(h=_(t,a),typeof f=="function"&&(f=f(t,a)),u=!0),l&&(l.abort(),l=null);const g=E-m;return g>f?(n.set(t=a),!1):(n.set(t=h(c(g/f))),!0)}),r.promise}return{set:i,update:(a,s)=>i(a(o,t),s),subscribe:n.subscribe}}function create_fragment$4(t){let e,n,r,o;const i=t[4].default,a=create_slot(i,t,t[3],null);return{c(){e=element("div"),a&&a.c(),attr(e,"class","w-full h-full pb-[2px] overflow-x-scroll x-scroll")},m(s,l){insert(s,e,l),a&&a.m(e,null),t[5](e),n=!0,r||(o=[listen(e,"wheel",t[1],{passive:!0}),listen(e,"scroll",t[2])],r=!0)},p(s,[l]){a&&a.p&&(!n||l&8)&&update_slot_base(a,i,s,s[3],n?get_slot_changes(i,s[3],l,null):get_all_dirty_from_scope(s[3]),null)},i(s){n||(transition_in(a,s),n=!0)},o(s){transition_out(a,s),n=!1},d(s){s&&detach(e),a&&a.d(s),t[5](null),r=!1,run_all(o)}}}const duration$1=100;function instance$4(t,e,n){let{$$slots:r={},$$scope:o}=e,i;const a=tweened(0,{duration:duration$1});let s=!1,l;onDestroy(a.subscribe(_=>{s&&n(0,i.scrollLeft=_,i)}));function u(_){_.deltaX?(s=!1,a.update(m=>d(m+_.deltaX),{duration:0})):_.deltaY&&(s=!0,a.update(m=>d(m+_.deltaY)))}function d(_){return Math.max(0,Math.min(_,i.scrollWidth-i.clientWidth))}function f(){clearTimeout(l),l=setTimeout(()=>{s=!1,a.set(i.scrollLeft,{duration:0})},duration$1)}function c(_){binding_callbacks[_?"unshift":"push"](()=>{i=_,n(0,i)})}return t.$$set=_=>{"$$scope"in _&&n(3,o=_.$$scope)},[i,u,f,o,r,c]}class HorizontalScroll extends SvelteComponent{constructor(e){super(),init(this,e,instance$4,create_fragment$4,safe_not_equal,{})}}const settingsFileName="settings.json";let settingsFileId;async function getSettingsFileId(){const e=await(await request("/drive/v3/files",{method:"GET",query:{spaces:"appDataFolder",fields:"files(id)",q:`name = '${settingsFileName}'`,pageSize:"1"}})).json();settingsFileId=e.files.length>0?e.files[0].id:null}async function readSettings(){return settingsFileId===void 0&&await getSettingsFileId(),settingsFileId==null?null:(await request(`/drive/v3/files/${settingsFileId}`,{method:"GET",query:{alt:"media"}})).json()}async function writeSettings(t){settingsFileId===void 0&&await getSettingsFileId(),settingsFileId==null?await createSettings(t):await updateSettings(t)}async function createSettings(t){const e={name:settingsFileName,mimeType:"application/json",parents:["appDataFolder"]},n=new FormData;n.append("metadata",jsonBlob(e)),n.append("file",jsonBlob(t),settingsFileName),settingsFileId=(await(await request("/upload/drive/v3/files",{method:"POST",query:{uploadType:"multipart"},body:n})).json()).id}async function updateSettings(t){await request(`/upload/drive/v3/files/${settingsFileId}`,{method:"PATCH",query:{uploadType:"media"},body:jsonBlob(t)})}function Settings(t=[]){return{subscriptionGroups:t.map(e=>({name:e.name,subscriptionIds:e.subscriptions.map(n=>n.subscription.channelId)}))}}function get_each_context$1(t,e,n){const r=t.slice();return r[9]=e[n],r}function create_catch_block$1(t){let e,n=JSON.stringify(t[12])+"",r;return{c(){e=element("p"),r=text(n),attr(e,"class","text-center")},m(o,i){insert(o,e,i),append(e,r)},p:noop,i:noop,o:noop,d(o){o&&detach(e)}}}function create_then_block$1(t){let e,n,r,o;const i=[create_if_block$2,create_else_block$1],a=[];function s(l,u){return l[0].length===0?0:1}return e=s(t),n=a[e]=i[e](t),{c(){n.c(),r=empty()},m(l,u){a[e].m(l,u),insert(l,r,u),o=!0},p(l,u){let d=e;e=s(l),e===d?a[e].p(l,u):(group_outros(),transition_out(a[d],1,1,()=>{a[d]=null}),check_outros(),n=a[e],n?n.p(l,u):(n=a[e]=i[e](l),n.c()),transition_in(n,1),n.m(r.parentNode,r))},i(l){o||(transition_in(n),o=!0)},o(l){transition_out(n),o=!1},d(l){a[e].d(l),l&&detach(r)}}}function create_else_block$1(t){let e,n,r;return n=new HorizontalScroll({props:{$$slots:{default:[create_default_slot_1$1]},$$scope:{ctx:t}}}),{c(){e=element("div"),create_component(n.$$.fragment),attr(e,"class","w-full"),set_style(e,"height","calc(100% - 6px)")},m(o,i){insert(o,e,i),mount_component(n,e,null),r=!0},p(o,i){const a={};i&8193&&(a.$$scope={dirty:i,ctx:o}),n.$set(a)},i(o){r||(transition_in(n.$$.fragment,o),r=!0)},o(o){transition_out(n.$$.fragment,o),r=!1},d(o){o&&detach(e),destroy_component(n)}}}function create_if_block$2(t){let e,n;return e=new Center({props:{$$slots:{default:[create_default_slot$1]},$$scope:{ctx:t}}}),{c(){create_component(e.$$.fragment)},m(r,o){mount_component(e,r,o),n=!0},p(r,o){const i={};o&8192&&(i.$$scope={dirty:o,ctx:r}),e.$set(i)},i(r){n||(transition_in(e.$$.fragment,r),n=!0)},o(r){transition_out(e.$$.fragment,r),n=!1},d(r){destroy_component(e,r)}}}function create_each_block$1(t){let e,n;return e=new SubscriptionOverview({props:{subscriptionGroup:t[9]}}),{c(){create_component(e.$$.fragment)},m(r,o){mount_component(e,r,o),n=!0},p(r,o){const i={};o&1&&(i.subscriptionGroup=r[9]),e.$set(i)},i(r){n||(transition_in(e.$$.fragment,r),n=!0)},o(r){transition_out(e.$$.fragment,r),n=!1},d(r){destroy_component(e,r)}}}function create_default_slot_1$1(t){let e,n,r=t[0],o=[];for(let a=0;a<r.length;a+=1)o[a]=create_each_block$1(get_each_context$1(t,r,a));const i=a=>transition_out(o[a],1,1,()=>{o[a]=null});return{c(){e=element("div");for(let a=0;a<o.length;a+=1)o[a].c();attr(e,"class","w-max h-full")},m(a,s){insert(a,e,s);for(let l=0;l<o.length;l+=1)o[l].m(e,null);n=!0},p(a,s){if(s&1){r=a[0];let l;for(l=0;l<r.length;l+=1){const u=get_each_context$1(a,r,l);o[l]?(o[l].p(u,s),transition_in(o[l],1)):(o[l]=create_each_block$1(u),o[l].c(),transition_in(o[l],1),o[l].m(e,null))}for(group_outros(),l=r.length;l<o.length;l+=1)i(l);check_outros()}},i(a){if(!n){for(let s=0;s<r.length;s+=1)transition_in(o[s]);n=!0}},o(a){o=o.filter(Boolean);for(let s=0;s<o.length;s+=1)transition_out(o[s]);n=!1},d(a){a&&detach(e),destroy_each(o,a)}}}function create_default_slot$1(t){let e,n,r,o,i;return{c(){e=element("p"),e.textContent="No subscriptions to display",n=space(),r=element("br"),o=space(),i=element("p"),i.textContent='Click the "Edit" button to add subscriptions'},m(a,s){insert(a,e,s),insert(a,n,s),insert(a,r,s),insert(a,o,s),insert(a,i,s)},p:noop,d(a){a&&detach(e),a&&detach(n),a&&detach(r),a&&detach(o),a&&detach(i)}}}function create_pending_block$1(t){let e,n;return e=new Spinner({}),{c(){create_component(e.$$.fragment)},m(r,o){mount_component(e,r,o),n=!0},p:noop,i(r){n||(transition_in(e.$$.fragment,r),n=!0)},o(r){transition_out(e.$$.fragment,r),n=!1},d(r){destroy_component(e,r)}}}function create_fragment$3(t){let e,n,r={ctx:t,current:null,token:null,hasCatch:!0,pending:create_pending_block$1,then:create_then_block$1,catch:create_catch_block$1,value:8,error:12,blocks:[,,,]};return handle_promise(t[1](),r),{c(){e=empty(),r.block.c()},m(o,i){insert(o,e,i),r.block.m(o,r.anchor=i),r.mount=()=>e.parentNode,r.anchor=e,n=!0},p(o,[i]){t=o,update_await_block_branch(r,t,i)},i(o){n||(transition_in(r.block),n=!0)},o(o){for(let i=0;i<3;i+=1){const a=r.blocks[i];transition_out(a)}n=!1},d(o){o&&detach(e),r.block.d(o),r.token=null,r=null}}}function instance$3(t,e,n){let r,o;component_subscribe(t,subscriptionsStore,f=>n(3,r=f)),component_subscribe(t,settingsStore,f=>n(4,o=f));let i=!1,a;async function s(){const[f,c]=await Promise.all([u(),l()]);set_store_value(settingsStore,o=f,o),await d(f,c),i=!0}onDestroy(settingsStore.subscribe(f=>i&&d(f,r)));async function l(){const f=r;try{const c=await listAllSubscriptions(f==null?void 0:f.etag),_=await listAllChannels(c.items);return Subscriptions(c,_)}catch(c){if(f&&c===NOT_MODIFIED)return f;throw c}}async function u(){let f=await readSettings();return f||(f=Settings()),f}async function d(f,c){await listAllPlaylistItems(c,f),set_store_value(subscriptionsStore,r=c,r);const _=new Map(c.items.map(m=>[m.channelId,m]));n(0,a=await Promise.all(f.subscriptionGroups.map(m=>SubscriptionGroup(m.name,m.subscriptionIds.map(h=>_.get(h))))))}return[a,s]}class SubscriptionsDeck extends SvelteComponent{constructor(e){super(),init(this,e,instance$3,create_fragment$3,safe_not_equal,{})}}var Player_svelte_svelte_type_style_lang="";function create_fragment$2(t){let e,n,r,o,i,a,s,l;return r=new Spinner({}),{c(){e=element("div"),n=element("div"),create_component(r.$$.fragment),o=space(),i=element("div"),i.innerHTML='<div id="player"></div>',attr(n,"class","fixed top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 z-20"),toggle_class(n,"invisible",!t[0]||t[2]),attr(i,"class","fixed top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 z-30"),toggle_class(i,"invisible",!t[0]||!t[2]),attr(e,"class","fixed inset-0 z-10 svelte-v5cnxt"),set_style(e,"background-color","rgba(0, 0, 0, 0.8)"),toggle_class(e,"fadeIn",t[0]),toggle_class(e,"fadeOut",!t[0])},m(u,d){insert(u,e,d),append(e,n),mount_component(r,n,null),append(e,o),append(e,i),a=!0,s||(l=[listen(window,"resize",t[5]),listen(e,"click",self(t[6]))],s=!0)},p(u,[d]){d&5&&toggle_class(n,"invisible",!u[0]||u[2]),d&5&&toggle_class(i,"invisible",!u[0]||!u[2]),d&1&&toggle_class(e,"fadeIn",u[0]),d&1&&toggle_class(e,"fadeOut",!u[0])},i(u){a||(transition_in(r.$$.fragment,u),a=!0)},o(u){transition_out(r.$$.fragment,u),a=!1},d(u){u&&detach(e),destroy_component(r),s=!1,run_all(l)}}}function calcPlayerSize(){let t=Math.min(document.body.clientWidth,16*document.body.clientHeight/9),e=Math.min(document.body.clientHeight,9*document.body.clientWidth/16);return t>.9*document.body.clientWidth&&e>.9*document.body.clientHeight&&(t*=.9,e*=.9),[t,e]}function instance$2(t,e,n){var r;(function(f){f[f.UNINITIALISED=0]="UNINITIALISED",f[f.INITIALISING=1]="INITIALISING",f[f.INITIALISED=2]="INITIALISED"})(r||(r={}));let o=!1,i=!1,a,s=r.UNINITIALISED;function l(f){if(s===r.UNINITIALISED){n(4,s=r.INITIALISING);const[c,_]=calcPlayerSize(),m={width:c,height:_,playerVars:{autohide:1,autoplay:1,playsinline:1},events:{onReady:()=>{console.log("playerReady"),n(4,s=r.INITIALISED),n(2,i=!0)},onStateChange:h=>{console.log("playerState",h),(h.data===YT.PlayerState.BUFFERING||h.data===YT.PlayerState.PLAYING)&&n(2,i=!0)},onError:h=>{console.error("playerError",h),a.getPlaylist()!=null&&a.nextVideo()}}};f.videoId?m.videoId=f.videoId:f.playlistId?(m.playerVars.listType="playlist",m.playerVars.list=f.playlistId):f.customPlaylist&&(m.playerVars.playlist=f.customPlaylist.join(",")),n(1,a=new YT.Player("player",m))}else s===r.INITIALISING?setTimeout(()=>l(f),100):s===r.INITIALISED&&(f.videoId?a.loadVideoById(f.videoId):f.playlistId?a.loadPlaylist({listType:"playlist",list:f.playlistId}):f.customPlaylist&&a.loadPlaylist(f.customPlaylist))}onDestroy(playerStore.subscribe(f=>{f&&(playerStore.set(null),n(0,o=!0),f.loading||l(f))}));const u=()=>a&&a.setSize(...calcPlayerSize()),d=()=>n(0,o=!1);return t.$$.update=()=>{t.$$.dirty&1&&(o||n(2,i=!1)),t.$$.dirty&27&&s===r.INITIALISED&&!o&&a.stopVideo()},[o,a,i,r,s,u,d]}class Player extends SvelteComponent{constructor(e){super(),init(this,e,instance$2,create_fragment$2,safe_not_equal,{})}}function flip(t,{from:e,to:n},r={}){const o=getComputedStyle(t),i=o.transform==="none"?"":o.transform,[a,s]=o.transformOrigin.split(" ").map(parseFloat),l=e.left+e.width*a/n.width-(n.left+a),u=e.top+e.height*s/n.height-(n.top+s),{delay:d=0,duration:f=_=>Math.sqrt(_)*120,easing:c=cubicOut}=r;return{delay:d,duration:is_function(f)?f(Math.sqrt(l*l+u*u)):f,easing:c,css:(_,m)=>{const h=m*l,E=m*u,g=_+m*e.width/n.width,I=_+m*e.height/n.height;return`transform: ${i} translate(${h}px, ${E}px) scale(${g}, ${I});`}}}const FINALIZE_EVENT_NAME="finalize",CONSIDER_EVENT_NAME="consider";function dispatchFinalizeEvent(t,e,n){t.dispatchEvent(new CustomEvent(FINALIZE_EVENT_NAME,{detail:{items:e,info:n}}))}function dispatchConsiderEvent(t,e,n){t.dispatchEvent(new CustomEvent(CONSIDER_EVENT_NAME,{detail:{items:e,info:n}}))}const DRAGGED_ENTERED_EVENT_NAME="draggedEntered",DRAGGED_LEFT_EVENT_NAME="draggedLeft",DRAGGED_OVER_INDEX_EVENT_NAME="draggedOverIndex",DRAGGED_LEFT_DOCUMENT_EVENT_NAME="draggedLeftDocument",DRAGGED_LEFT_TYPES={LEFT_FOR_ANOTHER:"leftForAnother",OUTSIDE_OF_ANY:"outsideOfAny"};function dispatchDraggedElementEnteredContainer(t,e,n){t.dispatchEvent(new CustomEvent(DRAGGED_ENTERED_EVENT_NAME,{detail:{indexObj:e,draggedEl:n}}))}function dispatchDraggedElementLeftContainerForAnother(t,e,n){t.dispatchEvent(new CustomEvent(DRAGGED_LEFT_EVENT_NAME,{detail:{draggedEl:e,type:DRAGGED_LEFT_TYPES.LEFT_FOR_ANOTHER,theOtherDz:n}}))}function dispatchDraggedElementLeftContainerForNone(t,e){t.dispatchEvent(new CustomEvent(DRAGGED_LEFT_EVENT_NAME,{detail:{draggedEl:e,type:DRAGGED_LEFT_TYPES.OUTSIDE_OF_ANY}}))}function dispatchDraggedElementIsOverIndex(t,e,n){t.dispatchEvent(new CustomEvent(DRAGGED_OVER_INDEX_EVENT_NAME,{detail:{indexObj:e,draggedEl:n}}))}function dispatchDraggedLeftDocument(t){window.dispatchEvent(new CustomEvent(DRAGGED_LEFT_DOCUMENT_EVENT_NAME,{detail:{draggedEl:t}}))}const TRIGGERS={DRAG_STARTED:"dragStarted",DRAGGED_ENTERED:DRAGGED_ENTERED_EVENT_NAME,DRAGGED_ENTERED_ANOTHER:"dragEnteredAnother",DRAGGED_OVER_INDEX:DRAGGED_OVER_INDEX_EVENT_NAME,DRAGGED_LEFT:DRAGGED_LEFT_EVENT_NAME,DRAGGED_LEFT_ALL:"draggedLeftAll",DROPPED_INTO_ZONE:"droppedIntoZone",DROPPED_INTO_ANOTHER:"droppedIntoAnother",DROPPED_OUTSIDE_OF_ANY:"droppedOutsideOfAny",DRAG_STOPPED:"dragStopped"},SOURCES={POINTER:"pointer",KEYBOARD:"keyboard"},SHADOW_ITEM_MARKER_PROPERTY_NAME="isDndShadowItem",SHADOW_ELEMENT_ATTRIBUTE_NAME="data-is-dnd-shadow-item",SHADOW_PLACEHOLDER_ITEM_ID="id:dnd-shadow-placeholder-0000",DRAGGED_ELEMENT_ID="dnd-action-dragged-el";let ITEM_ID_KEY="id",activeDndZoneCount=0;function incrementActiveDropZoneCount(){activeDndZoneCount++}function decrementActiveDropZoneCount(){if(activeDndZoneCount===0)throw new Error("Bug! trying to decrement when there are no dropzones");activeDndZoneCount--}const isOnServer=typeof window=="undefined";function getBoundingRectNoTransforms(t){let e;const n=t.getBoundingClientRect(),r=getComputedStyle(t),o=r.transform;if(o){let i,a,s,l;if(o.startsWith("matrix3d("))e=o.slice(9,-1).split(/, /),i=+e[0],a=+e[5],s=+e[12],l=+e[13];else if(o.startsWith("matrix("))e=o.slice(7,-1).split(/, /),i=+e[0],a=+e[3],s=+e[4],l=+e[5];else return n;const u=r.transformOrigin,d=n.x-s-(1-i)*parseFloat(u),f=n.y-l-(1-a)*parseFloat(u.slice(u.indexOf(" ")+1)),c=i?n.width/i:t.offsetWidth,_=a?n.height/a:t.offsetHeight;return{x:d,y:f,width:c,height:_,top:f,right:d+c,bottom:f+_,left:d}}else return n}function getAbsoluteRectNoTransforms(t){const e=getBoundingRectNoTransforms(t);return{top:e.top+window.scrollY,bottom:e.bottom+window.scrollY,left:e.left+window.scrollX,right:e.right+window.scrollX}}function getAbsoluteRect(t){const e=t.getBoundingClientRect();return{top:e.top+window.scrollY,bottom:e.bottom+window.scrollY,left:e.left+window.scrollX,right:e.right+window.scrollX}}function findCenter(t){return{x:(t.left+t.right)/2,y:(t.top+t.bottom)/2}}function calcDistance(t,e){return Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))}function isPointInsideRect(t,e){return t.y<=e.bottom&&t.y>=e.top&&t.x>=e.left&&t.x<=e.right}function findCenterOfElement(t){return findCenter(getAbsoluteRect(t))}function isCenterOfAInsideB(t,e){const n=findCenterOfElement(t),r=getAbsoluteRectNoTransforms(e);return isPointInsideRect(n,r)}function calcDistanceBetweenCenters(t,e){const n=findCenterOfElement(t),r=findCenterOfElement(e);return calcDistance(n,r)}function isElementOffDocument(t){const e=getAbsoluteRect(t);return e.right<0||e.left>document.documentElement.scrollWidth||e.bottom<0||e.top>document.documentElement.scrollHeight}function calcInnerDistancesBetweenPointAndSidesOfElement(t,e){const n=getAbsoluteRect(e);return isPointInsideRect(t,n)?{top:t.y-n.top,bottom:n.bottom-t.y,left:t.x-n.left,right:Math.min(n.right,document.documentElement.clientWidth)-t.x}:null}let dzToShadowIndexToRect;function resetIndexesCache(){dzToShadowIndexToRect=new Map}resetIndexesCache();function resetIndexesCacheForDz(t){dzToShadowIndexToRect.delete(t)}function cacheShadowRect(t){const e=Array.from(t.children).findIndex(n=>n.getAttribute(SHADOW_ELEMENT_ATTRIBUTE_NAME));if(e>=0)return dzToShadowIndexToRect.has(t)||dzToShadowIndexToRect.set(t,new Map),dzToShadowIndexToRect.get(t).set(e,getAbsoluteRectNoTransforms(t.children[e])),e}function findWouldBeIndex(t,e){if(!isCenterOfAInsideB(t,e))return null;const n=e.children;if(n.length===0)return{index:0,isProximityBased:!0};const r=cacheShadowRect(e);for(let a=0;a<n.length;a++)if(isCenterOfAInsideB(t,n[a])){const s=dzToShadowIndexToRect.has(e)&&dzToShadowIndexToRect.get(e).get(a);return s&&!isPointInsideRect(findCenterOfElement(t),s)?{index:r,isProximityBased:!1}:{index:a,isProximityBased:!1}}let o=Number.MAX_VALUE,i;for(let a=0;a<n.length;a++){const s=calcDistanceBetweenCenters(t,n[a]);s<o&&(o=s,i=a)}return{index:i,isProximityBased:!0}}const SCROLL_ZONE_PX=25;function makeScroller(){let t;function e(){t={directionObj:void 0,stepPx:0}}e();function n(i){const{directionObj:a,stepPx:s}=t;a&&(i.scrollBy(a.x*s,a.y*s),window.requestAnimationFrame(()=>n(i)))}function r(i){return SCROLL_ZONE_PX-i}function o(i,a){if(!a)return!1;const s=calcInnerDistancesBetweenPointAndSidesOfElement(i,a);if(s===null)return e(),!1;const l=!!t.directionObj;let[u,d]=[!1,!1];return a.scrollHeight>a.clientHeight&&(s.bottom<SCROLL_ZONE_PX?(u=!0,t.directionObj={x:0,y:1},t.stepPx=r(s.bottom)):s.top<SCROLL_ZONE_PX&&(u=!0,t.directionObj={x:0,y:-1},t.stepPx=r(s.top)),!l&&u)||a.scrollWidth>a.clientWidth&&(s.right<SCROLL_ZONE_PX?(d=!0,t.directionObj={x:1,y:0},t.stepPx=r(s.right)):s.left<SCROLL_ZONE_PX&&(d=!0,t.directionObj={x:-1,y:0},t.stepPx=r(s.left)),!l&&d)?(n(a),!0):(e(),!1)}return{scrollIfNeeded:o,resetScrolling:e}}function toString(t){return JSON.stringify(t,null,2)}function getDepth(t){if(!t)throw new Error("cannot get depth of a falsy node");return _getDepth(t,0)}function _getDepth(t,e=0){return t.parentElement?_getDepth(t.parentElement,e+1):e-1}function areObjectsShallowEqual(t,e){if(Object.keys(t).length!==Object.keys(e).length)return!1;for(const n in t)if(!{}.hasOwnProperty.call(e,n)||e[n]!==t[n])return!1;return!0}function areArraysShallowEqualSameOrder(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}const INTERVAL_MS$1=200,TOLERANCE_PX=10,{scrollIfNeeded:scrollIfNeeded$1,resetScrolling:resetScrolling$1}=makeScroller();let next$1;function observe(t,e,n=INTERVAL_MS$1){let r,o,i=!1,a;const s=Array.from(e).sort((u,d)=>getDepth(d)-getDepth(u));function l(){const u=findCenterOfElement(t),d=scrollIfNeeded$1(u,r);if(!d&&a&&Math.abs(a.x-u.x)<TOLERANCE_PX&&Math.abs(a.y-u.y)<TOLERANCE_PX){next$1=window.setTimeout(l,n);return}if(isElementOffDocument(t)){dispatchDraggedLeftDocument(t);return}a=u;let f=!1;for(const c of s){d&&resetIndexesCacheForDz(r);const _=findWouldBeIndex(t,c);if(_===null)continue;const{index:m}=_;f=!0,c!==r?(r&&dispatchDraggedElementLeftContainerForAnother(r,t,c),dispatchDraggedElementEnteredContainer(c,_,t),r=c):m!==o&&(dispatchDraggedElementIsOverIndex(c,_,t),o=m);break}!f&&i&&r?(dispatchDraggedElementLeftContainerForNone(r,t),r=void 0,o=void 0,i=!1):i=!0,next$1=window.setTimeout(l,n)}l()}function unobserve(){clearTimeout(next$1),resetScrolling$1(),resetIndexesCache()}const INTERVAL_MS=300;let mousePosition;function updateMousePosition(t){const e=t.touches?t.touches[0]:t;mousePosition={x:e.clientX,y:e.clientY}}const{scrollIfNeeded,resetScrolling}=makeScroller();let next;function loop(){mousePosition&&scrollIfNeeded(mousePosition,document.documentElement)&&resetIndexesCache(),next=window.setTimeout(loop,INTERVAL_MS)}function armWindowScroller(){window.addEventListener("mousemove",updateMousePosition),window.addEventListener("touchmove",updateMousePosition),loop()}function disarmWindowScroller(){window.removeEventListener("mousemove",updateMousePosition),window.removeEventListener("touchmove",updateMousePosition),mousePosition=void 0,window.clearTimeout(next),resetScrolling()}function svelteNodeClone(t){const e=t.cloneNode(!0),n=[],r=t.tagName==="SELECT",o=r?[t]:[...t.querySelectorAll("select")];for(const a of o)n.push(a.value);if(o.length<=0)return e;const i=r?[e]:[...e.querySelectorAll("select")];for(let a=0;a<i.length;a++){const s=i[a],l=n[a],u=s.querySelector(`option[value="${l}"`);u&&u.setAttribute("selected",!0)}return e}const TRANSITION_DURATION_SECONDS=.2;function trs(t){return`${t} ${TRANSITION_DURATION_SECONDS}s ease`}function createDraggedElementFrom(t,e){const n=t.getBoundingClientRect(),r=svelteNodeClone(t);copyStylesFromTo(t,r),r.id=DRAGGED_ELEMENT_ID,r.style.position="fixed";let o=n.top,i=n.left;if(r.style.top=`${o}px`,r.style.left=`${i}px`,e){const a=findCenter(n);o-=a.y-e.y,i-=a.x-e.x,window.setTimeout(()=>{r.style.top=`${o}px`,r.style.left=`${i}px`},0)}return r.style.margin="0",r.style.boxSizing="border-box",r.style.height=`${n.height}px`,r.style.width=`${n.width}px`,r.style.transition=`${trs("top")}, ${trs("left")}, ${trs("background-color")}, ${trs("opacity")}, ${trs("color")} `,window.setTimeout(()=>r.style.transition+=`, ${trs("width")}, ${trs("height")}`,0),r.style.zIndex="9999",r.style.cursor="grabbing",r}function moveDraggedElementToWasDroppedState(t){t.style.cursor="grab"}function morphDraggedElementToBeLike(t,e,n,r,o){const i=e.getBoundingClientRect(),a=t.getBoundingClientRect(),s=i.width-a.width,l=i.height-a.height;if(s||l){const u={left:(n-a.left)/a.width,top:(r-a.top)/a.height};t.style.height=`${i.height}px`,t.style.width=`${i.width}px`,t.style.left=`${parseFloat(t.style.left)-u.left*s}px`,t.style.top=`${parseFloat(t.style.top)-u.top*l}px`}copyStylesFromTo(e,t),o()}function copyStylesFromTo(t,e){const n=window.getComputedStyle(t);Array.from(n).filter(r=>r.startsWith("background")||r.startsWith("padding")||r.startsWith("font")||r.startsWith("text")||r.startsWith("align")||r.startsWith("justify")||r.startsWith("display")||r.startsWith("flex")||r.startsWith("border")||r==="opacity"||r==="color"||r==="list-style-type").forEach(r=>e.style.setProperty(r,n.getPropertyValue(r),n.getPropertyPriority(r)))}function styleDraggable(t,e){t.draggable=!1,t.ondragstart=()=>!1,e?(t.style.userSelect="",t.style.WebkitUserSelect="",t.style.cursor=""):(t.style.userSelect="none",t.style.WebkitUserSelect="none",t.style.cursor="grab")}function hideElement(t){t.style.display="none",t.style.position="fixed",t.style.zIndex="-5"}function decorateShadowEl(t){t.style.visibility="hidden",t.setAttribute(SHADOW_ELEMENT_ATTRIBUTE_NAME,"true")}function unDecorateShadowElement(t){t.style.visibility="",t.removeAttribute(SHADOW_ELEMENT_ATTRIBUTE_NAME)}function styleActiveDropZones(t,e=()=>{},n=()=>[]){t.forEach(r=>{const o=e(r);Object.keys(o).forEach(i=>{r.style[i]=o[i]}),n(r).forEach(i=>r.classList.add(i))})}function styleInactiveDropZones(t,e=()=>{},n=()=>[]){t.forEach(r=>{const o=e(r);Object.keys(o).forEach(i=>{r.style[i]=""}),n(r).forEach(i=>r.classList.contains(i)&&r.classList.remove(i))})}function preventShrinking(t){const e=t.style.minHeight;t.style.minHeight=window.getComputedStyle(t).getPropertyValue("height");const n=t.style.minWidth;return t.style.minWidth=window.getComputedStyle(t).getPropertyValue("width"),function(){t.style.minHeight=e,t.style.minWidth=n}}const DEFAULT_DROP_ZONE_TYPE$1="--any--",MIN_OBSERVATION_INTERVAL_MS=100,MIN_MOVEMENT_BEFORE_DRAG_START_PX=3,DEFAULT_DROP_TARGET_STYLE$1={outline:"rgba(255, 255, 102, 0.7) solid 2px"};let originalDragTarget,draggedEl,draggedElData,draggedElType,originDropZone,originIndex,shadowElData,shadowElDropZone,dragStartMousePosition,currentMousePosition,isWorkingOnPreviousDrag=!1,finalizingPreviousDrag=!1,unlockOriginDzMinDimensions,isDraggedOutsideOfAnyDz=!1,scheduledForRemovalAfterDrop=[];const typeToDropZones$1=new Map,dzToConfig$1=new Map,elToMouseDownListener=new WeakMap;function registerDropZone$1(t,e){typeToDropZones$1.has(e)||typeToDropZones$1.set(e,new Set),typeToDropZones$1.get(e).has(t)||(typeToDropZones$1.get(e).add(t),incrementActiveDropZoneCount())}function unregisterDropZone$1(t,e){typeToDropZones$1.get(e).delete(t),decrementActiveDropZoneCount(),typeToDropZones$1.get(e).size===0&&typeToDropZones$1.delete(e)}function watchDraggedElement(){armWindowScroller();const t=typeToDropZones$1.get(draggedElType);for(const n of t)n.addEventListener(DRAGGED_ENTERED_EVENT_NAME,handleDraggedEntered),n.addEventListener(DRAGGED_LEFT_EVENT_NAME,handleDraggedLeft),n.addEventListener(DRAGGED_OVER_INDEX_EVENT_NAME,handleDraggedIsOverIndex);window.addEventListener(DRAGGED_LEFT_DOCUMENT_EVENT_NAME,handleDrop$1);const e=Math.max(MIN_OBSERVATION_INTERVAL_MS,...Array.from(t.keys()).map(n=>dzToConfig$1.get(n).dropAnimationDurationMs));observe(draggedEl,t,e*1.07)}function unWatchDraggedElement(){disarmWindowScroller();const t=typeToDropZones$1.get(draggedElType);for(const e of t)e.removeEventListener(DRAGGED_ENTERED_EVENT_NAME,handleDraggedEntered),e.removeEventListener(DRAGGED_LEFT_EVENT_NAME,handleDraggedLeft),e.removeEventListener(DRAGGED_OVER_INDEX_EVENT_NAME,handleDraggedIsOverIndex);window.removeEventListener(DRAGGED_LEFT_DOCUMENT_EVENT_NAME,handleDrop$1),unobserve()}function findShadowPlaceHolderIdx(t){return t.findIndex(e=>e[ITEM_ID_KEY]===SHADOW_PLACEHOLDER_ITEM_ID)}function findShadowElementIdx(t){return t.findIndex(e=>!!e[SHADOW_ITEM_MARKER_PROPERTY_NAME]&&e[ITEM_ID_KEY]!==SHADOW_PLACEHOLDER_ITEM_ID)}function handleDraggedEntered(t){let{items:e,dropFromOthersDisabled:n}=dzToConfig$1.get(t.currentTarget);if(n&&t.currentTarget!==originDropZone)return;if(isDraggedOutsideOfAnyDz=!1,e=e.filter(a=>a[ITEM_ID_KEY]!==shadowElData[ITEM_ID_KEY]),originDropZone!==t.currentTarget){const s=dzToConfig$1.get(originDropZone).items.filter(l=>!l[SHADOW_ITEM_MARKER_PROPERTY_NAME]);dispatchConsiderEvent(originDropZone,s,{trigger:TRIGGERS.DRAGGED_ENTERED_ANOTHER,id:draggedElData[ITEM_ID_KEY],source:SOURCES.POINTER})}else{const a=findShadowPlaceHolderIdx(e);a!==-1&&e.splice(a,1)}const{index:r,isProximityBased:o}=t.detail.indexObj,i=o&&r===t.currentTarget.children.length-1?r+1:r;shadowElDropZone=t.currentTarget,e.splice(i,0,shadowElData),dispatchConsiderEvent(t.currentTarget,e,{trigger:TRIGGERS.DRAGGED_ENTERED,id:draggedElData[ITEM_ID_KEY],source:SOURCES.POINTER})}function handleDraggedLeft(t){if(!isWorkingOnPreviousDrag)return;const{items:e,dropFromOthersDisabled:n}=dzToConfig$1.get(t.currentTarget);if(n&&t.currentTarget!==originDropZone&&t.currentTarget!==shadowElDropZone)return;const r=findShadowElementIdx(e),o=e.splice(r,1)[0];shadowElDropZone=void 0;const{type:i,theOtherDz:a}=t.detail;if(i===DRAGGED_LEFT_TYPES.OUTSIDE_OF_ANY||i===DRAGGED_LEFT_TYPES.LEFT_FOR_ANOTHER&&a!==originDropZone&&dzToConfig$1.get(a).dropFromOthersDisabled){isDraggedOutsideOfAnyDz=!0,shadowElDropZone=originDropZone;const s=dzToConfig$1.get(originDropZone).items;s.splice(originIndex,0,o),dispatchConsiderEvent(originDropZone,s,{trigger:TRIGGERS.DRAGGED_LEFT_ALL,id:draggedElData[ITEM_ID_KEY],source:SOURCES.POINTER})}dispatchConsiderEvent(t.currentTarget,e,{trigger:TRIGGERS.DRAGGED_LEFT,id:draggedElData[ITEM_ID_KEY],source:SOURCES.POINTER})}function handleDraggedIsOverIndex(t){const{items:e,dropFromOthersDisabled:n}=dzToConfig$1.get(t.currentTarget);if(n&&t.currentTarget!==originDropZone)return;isDraggedOutsideOfAnyDz=!1;const{index:r}=t.detail.indexObj,o=findShadowElementIdx(e);e.splice(o,1),e.splice(r,0,shadowElData),dispatchConsiderEvent(t.currentTarget,e,{trigger:TRIGGERS.DRAGGED_OVER_INDEX,id:draggedElData[ITEM_ID_KEY],source:SOURCES.POINTER})}function handleMouseMove(t){t.preventDefault();const e=t.touches?t.touches[0]:t;currentMousePosition={x:e.clientX,y:e.clientY},draggedEl.style.transform=`translate3d(${currentMousePosition.x-dragStartMousePosition.x}px, ${currentMousePosition.y-dragStartMousePosition.y}px, 0)`}function handleDrop$1(){finalizingPreviousDrag=!0,window.removeEventListener("mousemove",handleMouseMove),window.removeEventListener("touchmove",handleMouseMove),window.removeEventListener("mouseup",handleDrop$1),window.removeEventListener("touchend",handleDrop$1),unWatchDraggedElement(),moveDraggedElementToWasDroppedState(draggedEl),shadowElDropZone||(shadowElDropZone=originDropZone);let{items:t,type:e}=dzToConfig$1.get(shadowElDropZone);styleInactiveDropZones(typeToDropZones$1.get(e),o=>dzToConfig$1.get(o).dropTargetStyle,o=>dzToConfig$1.get(o).dropTargetClasses);let n=findShadowElementIdx(t);n===-1&&(n=originIndex),t=t.map(o=>o[SHADOW_ITEM_MARKER_PROPERTY_NAME]?draggedElData:o);function r(){unlockOriginDzMinDimensions(),dispatchFinalizeEvent(shadowElDropZone,t,{trigger:isDraggedOutsideOfAnyDz?TRIGGERS.DROPPED_OUTSIDE_OF_ANY:TRIGGERS.DROPPED_INTO_ZONE,id:draggedElData[ITEM_ID_KEY],source:SOURCES.POINTER}),shadowElDropZone!==originDropZone&&dispatchFinalizeEvent(originDropZone,dzToConfig$1.get(originDropZone).items,{trigger:TRIGGERS.DROPPED_INTO_ANOTHER,id:draggedElData[ITEM_ID_KEY],source:SOURCES.POINTER}),unDecorateShadowElement(shadowElDropZone.children[n]),cleanupPostDrop()}animateDraggedToFinalPosition(n,r)}function animateDraggedToFinalPosition(t,e){const n=getBoundingRectNoTransforms(shadowElDropZone.children[t]),r={x:n.left-parseFloat(draggedEl.style.left),y:n.top-parseFloat(draggedEl.style.top)},{dropAnimationDurationMs:o}=dzToConfig$1.get(shadowElDropZone),i=`transform ${o}ms ease`;draggedEl.style.transition=draggedEl.style.transition?draggedEl.style.transition+","+i:i,draggedEl.style.transform=`translate3d(${r.x}px, ${r.y}px, 0)`,window.setTimeout(e,o)}function scheduleDZForRemovalAfterDrop(t,e){scheduledForRemovalAfterDrop.push({dz:t,destroy:e}),window.requestAnimationFrame(()=>{hideElement(t),document.body.appendChild(t)})}function cleanupPostDrop(){draggedEl.remove(),originalDragTarget.remove(),scheduledForRemovalAfterDrop.length&&(scheduledForRemovalAfterDrop.forEach(({dz:t,destroy:e})=>{e(),t.remove()}),scheduledForRemovalAfterDrop=[]),draggedEl=void 0,originalDragTarget=void 0,draggedElData=void 0,draggedElType=void 0,originDropZone=void 0,originIndex=void 0,shadowElData=void 0,shadowElDropZone=void 0,dragStartMousePosition=void 0,currentMousePosition=void 0,isWorkingOnPreviousDrag=!1,finalizingPreviousDrag=!1,unlockOriginDzMinDimensions=void 0,isDraggedOutsideOfAnyDz=!1}function dndzone$2(t,e){let n=!1;const r={items:void 0,type:void 0,flipDurationMs:0,dragDisabled:!1,morphDisabled:!1,dropFromOthersDisabled:!1,dropTargetStyle:DEFAULT_DROP_TARGET_STYLE$1,dropTargetClasses:[],transformDraggedElement:()=>{},centreDraggedOnCursor:!1};let o=new Map;function i(){window.addEventListener("mousemove",l,{passive:!1}),window.addEventListener("touchmove",l,{passive:!1,capture:!1}),window.addEventListener("mouseup",s,{passive:!1}),window.addEventListener("touchend",s,{passive:!1})}function a(){window.removeEventListener("mousemove",l),window.removeEventListener("touchmove",l),window.removeEventListener("mouseup",s),window.removeEventListener("touchend",s)}function s(){a(),originalDragTarget=void 0,dragStartMousePosition=void 0,currentMousePosition=void 0}function l(c){c.preventDefault();const _=c.touches?c.touches[0]:c;currentMousePosition={x:_.clientX,y:_.clientY},(Math.abs(currentMousePosition.x-dragStartMousePosition.x)>=MIN_MOVEMENT_BEFORE_DRAG_START_PX||Math.abs(currentMousePosition.y-dragStartMousePosition.y)>=MIN_MOVEMENT_BEFORE_DRAG_START_PX)&&(a(),d())}function u(c){if(c.target!==c.currentTarget&&(c.target.value!==void 0||c.target.isContentEditable)||c.button||isWorkingOnPreviousDrag)return;c.stopPropagation();const _=c.touches?c.touches[0]:c;dragStartMousePosition={x:_.clientX,y:_.clientY},currentMousePosition=Z({},dragStartMousePosition),originalDragTarget=c.currentTarget,i()}function d(){isWorkingOnPreviousDrag=!0;const c=o.get(originalDragTarget);originIndex=c,originDropZone=originalDragTarget.parentElement;const _=originDropZone.getRootNode(),m=_.body||_,{items:h,type:E,centreDraggedOnCursor:g}=r;draggedElData=Z({},h[c]),draggedElType=E,shadowElData=re(Z({},draggedElData),{[SHADOW_ITEM_MARKER_PROPERTY_NAME]:!0});const I=re(Z({},shadowElData),{[ITEM_ID_KEY]:SHADOW_PLACEHOLDER_ITEM_ID});draggedEl=createDraggedElementFrom(originalDragTarget,g&&currentMousePosition);function b(){draggedEl.parentElement?window.requestAnimationFrame(b):(m.appendChild(draggedEl),draggedEl.focus(),watchDraggedElement(),hideElement(originalDragTarget),m.appendChild(originalDragTarget))}window.requestAnimationFrame(b),styleActiveDropZones(Array.from(typeToDropZones$1.get(r.type)).filter(A=>A===originDropZone||!dzToConfig$1.get(A).dropFromOthersDisabled),A=>dzToConfig$1.get(A).dropTargetStyle,A=>dzToConfig$1.get(A).dropTargetClasses),h.splice(c,1,I),unlockOriginDzMinDimensions=preventShrinking(originDropZone),dispatchConsiderEvent(originDropZone,h,{trigger:TRIGGERS.DRAG_STARTED,id:draggedElData[ITEM_ID_KEY],source:SOURCES.POINTER}),window.addEventListener("mousemove",handleMouseMove,{passive:!1}),window.addEventListener("touchmove",handleMouseMove,{passive:!1,capture:!1}),window.addEventListener("mouseup",handleDrop$1,{passive:!1}),window.addEventListener("touchend",handleDrop$1,{passive:!1})}function f({items:c=void 0,flipDurationMs:_=0,type:m=DEFAULT_DROP_ZONE_TYPE$1,dragDisabled:h=!1,morphDisabled:E=!1,dropFromOthersDisabled:g=!1,dropTargetStyle:I=DEFAULT_DROP_TARGET_STYLE$1,dropTargetClasses:b=[],transformDraggedElement:A=()=>{},centreDraggedOnCursor:R=!1}){r.dropAnimationDurationMs=_,r.type&&m!==r.type&&unregisterDropZone$1(t,r.type),r.type=m,registerDropZone$1(t,m),r.items=[...c],r.dragDisabled=h,r.morphDisabled=E,r.transformDraggedElement=A,r.centreDraggedOnCursor=R,n&&isWorkingOnPreviousDrag&&!finalizingPreviousDrag&&(!areObjectsShallowEqual(I,r.dropTargetStyle)||!areArraysShallowEqualSameOrder(b,r.dropTargetClasses))&&(styleInactiveDropZones([t],()=>r.dropTargetStyle,()=>b),styleActiveDropZones([t],()=>I,()=>b)),r.dropTargetStyle=I,r.dropTargetClasses=[...b];function S(y,w){return dzToConfig$1.get(y)?dzToConfig$1.get(y)[w]:r[w]}n&&isWorkingOnPreviousDrag&&r.dropFromOthersDisabled!==g&&(g?styleInactiveDropZones([t],y=>S(y,"dropTargetStyle"),y=>S(y,"dropTargetClasses")):styleActiveDropZones([t],y=>S(y,"dropTargetStyle"),y=>S(y,"dropTargetClasses"))),r.dropFromOthersDisabled=g,dzToConfig$1.set(t,r);const T=findShadowElementIdx(r.items);for(let y=0;y<t.children.length;y++){const w=t.children[y];if(styleDraggable(w,h),y===T){E||morphDraggedElementToBeLike(draggedEl,w,currentMousePosition.x,currentMousePosition.y,()=>r.transformDraggedElement(draggedEl,draggedElData,y)),decorateShadowEl(w);continue}w.removeEventListener("mousedown",elToMouseDownListener.get(w)),w.removeEventListener("touchstart",elToMouseDownListener.get(w)),h||(w.addEventListener("mousedown",u),w.addEventListener("touchstart",u),elToMouseDownListener.set(w,u)),o.set(w,y),n||(n=!0)}}return f(e),{update:c=>{f(c)},destroy:()=>{function c(){unregisterDropZone$1(t,dzToConfig$1.get(t).type),dzToConfig$1.delete(t)}isWorkingOnPreviousDrag?scheduleDZForRemovalAfterDrop(t,c):c()}}}const INSTRUCTION_IDs$1={DND_ZONE_ACTIVE:"dnd-zone-active",DND_ZONE_DRAG_DISABLED:"dnd-zone-drag-disabled"},ID_TO_INSTRUCTION={[INSTRUCTION_IDs$1.DND_ZONE_ACTIVE]:"Tab to one the items and press space-bar or enter to start dragging it",[INSTRUCTION_IDs$1.DND_ZONE_DRAG_DISABLED]:"This is a disabled drag and drop list"},ALERT_DIV_ID="dnd-action-aria-alert";let alertsDiv;function initAriaOnBrowser(){alertsDiv||(alertsDiv=document.createElement("div"),function(){alertsDiv.id=ALERT_DIV_ID,alertsDiv.style.position="fixed",alertsDiv.style.bottom="0",alertsDiv.style.left="0",alertsDiv.style.zIndex="-5",alertsDiv.style.opacity="0",alertsDiv.style.height="0",alertsDiv.style.width="0",alertsDiv.setAttribute("role","alert")}(),document.body.prepend(alertsDiv),Object.entries(ID_TO_INSTRUCTION).forEach(([t,e])=>document.body.prepend(instructionToHiddenDiv(t,e))))}function initAria(){return isOnServer?null:(document.readyState==="complete"?initAriaOnBrowser():window.addEventListener("DOMContentLoaded",initAriaOnBrowser),Z({},INSTRUCTION_IDs$1))}function destroyAria(){isOnServer||!alertsDiv||(Object.keys(ID_TO_INSTRUCTION).forEach(t=>{var e;return(e=document.getElementById(t))==null?void 0:e.remove()}),alertsDiv.remove(),alertsDiv=void 0)}function instructionToHiddenDiv(t,e){const n=document.createElement("div");return n.id=t,n.innerHTML=`<p>${e}</p>`,n.style.display="none",n.style.position="fixed",n.style.zIndex="-5",n}function alertToScreenReader(t){if(isOnServer)return;alertsDiv||initAriaOnBrowser(),alertsDiv.innerHTML="";const e=document.createTextNode(t);alertsDiv.appendChild(e),alertsDiv.style.display="none",alertsDiv.style.display="inline"}const DEFAULT_DROP_ZONE_TYPE="--any--",DEFAULT_DROP_TARGET_STYLE={outline:"rgba(255, 255, 102, 0.7) solid 2px"};let isDragging=!1,draggedItemType,focusedDz,focusedDzLabel="",focusedItem,focusedItemId,focusedItemLabel="";const allDragTargets=new WeakSet,elToKeyDownListeners=new WeakMap,elToFocusListeners=new WeakMap,dzToHandles=new Map,dzToConfig=new Map,typeToDropZones=new Map;let INSTRUCTION_IDs;function registerDropZone(t,e){typeToDropZones.size===0&&(INSTRUCTION_IDs=initAria(),window.addEventListener("keydown",globalKeyDownHandler),window.addEventListener("click",globalClickHandler)),typeToDropZones.has(e)||typeToDropZones.set(e,new Set),typeToDropZones.get(e).has(t)||(typeToDropZones.get(e).add(t),incrementActiveDropZoneCount())}function unregisterDropZone(t,e){focusedDz===t&&handleDrop(),typeToDropZones.get(e).delete(t),decrementActiveDropZoneCount(),typeToDropZones.get(e).size===0&&typeToDropZones.delete(e),typeToDropZones.size===0&&(window.removeEventListener("keydown",globalKeyDownHandler),window.removeEventListener("click",globalClickHandler),INSTRUCTION_IDs=void 0,destroyAria())}function globalKeyDownHandler(t){if(!!isDragging)switch(t.key){case"Escape":{handleDrop();break}}}function globalClickHandler(){!isDragging||allDragTargets.has(document.activeElement)||handleDrop()}function handleZoneFocus(t){if(!isDragging)return;const e=t.currentTarget;if(e===focusedDz)return;focusedDzLabel=e.getAttribute("aria-label")||"";const{items:n}=dzToConfig.get(focusedDz),r=n.find(u=>u[ITEM_ID_KEY]===focusedItemId),o=n.indexOf(r),i=n.splice(o,1)[0],{items:a,autoAriaDisabled:s}=dzToConfig.get(e);e.getBoundingClientRect().top<focusedDz.getBoundingClientRect().top||e.getBoundingClientRect().left<focusedDz.getBoundingClientRect().left?(a.push(i),s||alertToScreenReader(`Moved item ${focusedItemLabel} to the end of the list ${focusedDzLabel}`)):(a.unshift(i),s||alertToScreenReader(`Moved item ${focusedItemLabel} to the beginning of the list ${focusedDzLabel}`)),dispatchFinalizeEvent(focusedDz,n,{trigger:TRIGGERS.DROPPED_INTO_ANOTHER,id:focusedItemId,source:SOURCES.KEYBOARD}),dispatchFinalizeEvent(e,a,{trigger:TRIGGERS.DROPPED_INTO_ZONE,id:focusedItemId,source:SOURCES.KEYBOARD}),focusedDz=e}function triggerAllDzsUpdate(){dzToHandles.forEach(({update:t},e)=>t(dzToConfig.get(e)))}function handleDrop(t=!0){dzToConfig.get(focusedDz).autoAriaDisabled||alertToScreenReader(`Stopped dragging item ${focusedItemLabel}`),allDragTargets.has(document.activeElement)&&document.activeElement.blur(),t&&dispatchConsiderEvent(focusedDz,dzToConfig.get(focusedDz).items,{trigger:TRIGGERS.DRAG_STOPPED,id:focusedItemId,source:SOURCES.KEYBOARD}),styleInactiveDropZones(typeToDropZones.get(draggedItemType),e=>dzToConfig.get(e).dropTargetStyle,e=>dzToConfig.get(e).dropTargetClasses),focusedItem=null,focusedItemId=null,focusedItemLabel="",draggedItemType=null,focusedDz=null,focusedDzLabel="",isDragging=!1,triggerAllDzsUpdate()}function dndzone$1(t,e){const n={items:void 0,type:void 0,dragDisabled:!1,zoneTabIndex:0,dropFromOthersDisabled:!1,dropTargetStyle:DEFAULT_DROP_TARGET_STYLE,dropTargetClasses:[],autoAriaDisabled:!1};function r(d,f,c){d.length<=1||d.splice(c,1,d.splice(f,1,d[c])[0])}function o(d){switch(d.key){case"Enter":case" ":{if((d.target.disabled!==void 0||d.target.href||d.target.isContentEditable)&&!allDragTargets.has(d.target))return;d.preventDefault(),d.stopPropagation(),isDragging?handleDrop():i(d);break}case"ArrowDown":case"ArrowRight":{if(!isDragging)return;d.preventDefault(),d.stopPropagation();const{items:f}=dzToConfig.get(t),c=Array.from(t.children),_=c.indexOf(d.currentTarget);_<c.length-1&&(n.autoAriaDisabled||alertToScreenReader(`Moved item ${focusedItemLabel} to position ${_+2} in the list ${focusedDzLabel}`),r(f,_,_+1),dispatchFinalizeEvent(t,f,{trigger:TRIGGERS.DROPPED_INTO_ZONE,id:focusedItemId,source:SOURCES.KEYBOARD}));break}case"ArrowUp":case"ArrowLeft":{if(!isDragging)return;d.preventDefault(),d.stopPropagation();const{items:f}=dzToConfig.get(t),_=Array.from(t.children).indexOf(d.currentTarget);_>0&&(n.autoAriaDisabled||alertToScreenReader(`Moved item ${focusedItemLabel} to position ${_} in the list ${focusedDzLabel}`),r(f,_,_-1),dispatchFinalizeEvent(t,f,{trigger:TRIGGERS.DROPPED_INTO_ZONE,id:focusedItemId,source:SOURCES.KEYBOARD}));break}}}function i(d){s(d.currentTarget),focusedDz=t,draggedItemType=n.type,isDragging=!0;const f=Array.from(typeToDropZones.get(n.type)).filter(c=>c===focusedDz||!dzToConfig.get(c).dropFromOthersDisabled);if(styleActiveDropZones(f,c=>dzToConfig.get(c).dropTargetStyle,c=>dzToConfig.get(c).dropTargetClasses),!n.autoAriaDisabled){let c=`Started dragging item ${focusedItemLabel}. Use the arrow keys to move it within its list ${focusedDzLabel}`;f.length>1&&(c+=", or tab to another list in order to move the item into it"),alertToScreenReader(c)}dispatchConsiderEvent(t,dzToConfig.get(t).items,{trigger:TRIGGERS.DRAG_STARTED,id:focusedItemId,source:SOURCES.KEYBOARD}),triggerAllDzsUpdate()}function a(d){!isDragging||d.currentTarget!==focusedItem&&(d.stopPropagation(),handleDrop(!1),i(d))}function s(d){const{items:f}=dzToConfig.get(t),c=Array.from(t.children),_=c.indexOf(d);focusedItem=d,focusedItem.tabIndex=0,focusedItemId=f[_][ITEM_ID_KEY],focusedItemLabel=c[_].getAttribute("aria-label")||""}function l({items:d=[],type:f=DEFAULT_DROP_ZONE_TYPE,dragDisabled:c=!1,zoneTabIndex:_=0,dropFromOthersDisabled:m=!1,dropTargetStyle:h=DEFAULT_DROP_TARGET_STYLE,dropTargetClasses:E=[],autoAriaDisabled:g=!1}){n.items=[...d],n.dragDisabled=c,n.dropFromOthersDisabled=m,n.zoneTabIndex=_,n.dropTargetStyle=h,n.dropTargetClasses=E,n.autoAriaDisabled=g,n.type&&f!==n.type&&unregisterDropZone(t,n.type),n.type=f,registerDropZone(t,f),g||(t.setAttribute("aria-disabled",c),t.setAttribute("role","list"),t.setAttribute("aria-describedby",c?INSTRUCTION_IDs.DND_ZONE_DRAG_DISABLED:INSTRUCTION_IDs.DND_ZONE_ACTIVE)),dzToConfig.set(t,n),isDragging?t.tabIndex=t===focusedDz||focusedItem.contains(t)||n.dropFromOthersDisabled||focusedDz&&n.type!==dzToConfig.get(focusedDz).type?-1:0:t.tabIndex=n.zoneTabIndex,t.addEventListener("focus",handleZoneFocus);for(let I=0;I<t.children.length;I++){const b=t.children[I];allDragTargets.add(b),b.tabIndex=isDragging?-1:0,g||b.setAttribute("role","listitem"),b.removeEventListener("keydown",elToKeyDownListeners.get(b)),b.removeEventListener("click",elToFocusListeners.get(b)),c||(b.addEventListener("keydown",o),elToKeyDownListeners.set(b,o),b.addEventListener("click",a),elToFocusListeners.set(b,a)),isDragging&&n.items[I][ITEM_ID_KEY]===focusedItemId&&(focusedItem=b,focusedItem.tabIndex=0,b.focus())}}l(e);const u={update:d=>{l(d)},destroy:()=>{unregisterDropZone(t,n.type),dzToConfig.delete(t),dzToHandles.delete(t)}};return dzToHandles.set(t,u),u}function dndzone(t,e){validateOptions(e);const n=dndzone$2(t,e),r=dndzone$1(t,e);return{update:o=>{validateOptions(o),n.update(o),r.update(o)},destroy:()=>{n.destroy(),r.destroy()}}}function validateOptions(t){const h=t,{items:e,flipDurationMs:n,type:r,dragDisabled:o,morphDisabled:i,dropFromOthersDisabled:a,zoneTabIndex:s,dropTargetStyle:l,dropTargetClasses:u,transformDraggedElement:d,autoAriaDisabled:f,centreDraggedOnCursor:c}=h,_=se(h,["items","flipDurationMs","type","dragDisabled","morphDisabled","dropFromOthersDisabled","zoneTabIndex","dropTargetStyle","dropTargetClasses","transformDraggedElement","autoAriaDisabled","centreDraggedOnCursor"]);if(Object.keys(_).length>0&&console.warn("dndzone will ignore unknown options",_),!e)throw new Error("no 'items' key provided to dndzone");const m=e.find(E=>!{}.hasOwnProperty.call(E,ITEM_ID_KEY));if(m)throw new Error(`missing '${ITEM_ID_KEY}' property for item ${toString(m)}`);if(u&&!Array.isArray(u))throw new Error(`dropTargetClasses should be an array but instead it is a ${typeof u}, ${toString(u)}`);if(s&&!isInt(s))throw new Error(`zoneTabIndex should be a number but instead it is a ${typeof s}, ${toString(s)}`)}function isInt(t){return!isNaN(t)&&function(e){return(e|0)===e}(parseFloat(t))}function isSubscription(t){return"subscription"in t}function isGroup(t){return"subscriptions"in t}var SubscriptionsEditor_svelte_svelte_type_style_lang="";const{Map:Map_1}=globals;function get_each_context(t,e,n){const r=t.slice();return r[44]=e[n],r}function get_each_context_1(t,e,n){const r=t.slice();return r[47]=e[n],r}function get_each_context_2(t,e,n){const r=t.slice();return r[44]=e[n],r}function create_default_slot_6(t){let e,n,r,o,i,a,s,l;return{c(){e=element("div"),n=element("p"),n.textContent="Deck Editor",r=space(),o=element("label"),i=element("input"),a=text(`
              Hide added subscriptions`),attr(n,"class","font-extrabold"),attr(i,"type","checkbox"),i.value=t[3],attr(e,"class","min-w-[14rem]")},m(u,d){insert(u,e,d),append(e,n),append(e,r),append(e,o),append(o,i),append(o,a),s||(l=listen(i,"change",t[8]),s=!0)},p(u,d){d[0]&8&&(i.value=u[3])},d(u){u&&detach(e),s=!1,l()}}}function create_default_slot_5(t){let e;return{c(){e=text("Subscriptions")},m(n,r){insert(n,e,r)},d(n){n&&detach(e)}}}function create_each_block_2(t,e){let n,r,o,i,a,s,l,u=e[44].subscription.title+"",d,f,c,_,m=noop,h,E;return{key:t,first:null,c(){n=element("div"),r=element("img"),s=space(),l=element("span"),d=text(u),c=space(),attr(r,"class","inline-block h-8 w-8 rounded-2xl"),src_url_equal(r.src,o=e[44].subscription.thumbnailUrl)||attr(r,"src",o),attr(r,"alt",""),attr(r,"loading","lazy"),attr(r,"width","88"),attr(r,"height","88"),attr(r,"tabindex",i=e[2]?0:-1),attr(r,"aria-label","drag-handle"),attr(r,"style",a=e[2]?"cursor: grab":"cursor: grabbing"),attr(l,"title",f=e[44].subscription.title),attr(n,"class","bg-neutral-700 m-1 p-0.5 rounded-2xl truncate"),set_style(n,"width","calc(100% - 0.5rem)"),this.first=n},m(g,I){insert(g,n,I),append(n,r),append(n,s),append(n,l),append(l,d),append(n,c),h||(E=[listen(r,"mousedown",e[21]),listen(r,"touchstart",e[21]),listen(r,"keydown",e[22])],h=!0)},p(g,I){e=g,I[0]&16&&!src_url_equal(r.src,o=e[44].subscription.thumbnailUrl)&&attr(r,"src",o),I[0]&4&&i!==(i=e[2]?0:-1)&&attr(r,"tabindex",i),I[0]&4&&a!==(a=e[2]?"cursor: grab":"cursor: grabbing")&&attr(r,"style",a),I[0]&16&&u!==(u=e[44].subscription.title+"")&&set_data(d,u),I[0]&16&&f!==(f=e[44].subscription.title)&&attr(l,"title",f)},r(){_=n.getBoundingClientRect()},f(){fix_position(n),m()},a(){m(),m=create_animation(n,_,flip,{duration:flipDurationMs})},d(g){g&&detach(n),h=!1,run_all(E)}}}function create_default_slot_4(t){let e;return{c(){e=text("Deck")},m(n,r){insert(n,e,r)},d(n){n&&detach(e)}}}function create_if_block_1(t){let e,n,r,o,i,a,s=t[44].name+"",l,u,d,f,c=[],_=new Map_1,m,h,E,g;n=new Center({props:{$$slots:{default:[create_default_slot_3]},$$scope:{ctx:t}}});let I=t[44].subscriptions;const b=S=>S[47].id;for(let S=0;S<I.length;S+=1){let T=get_each_context_1(t,I,S),y=b(T);_.set(y,c[S]=create_each_block_1(y,T))}function A(...S){return t[27](t[44],...S)}function R(...S){return t[28](t[44],...S)}return{c(){e=element("span"),create_component(n.$$.fragment),i=space(),a=element("span"),l=text(s),d=space(),f=element("div");for(let S=0;S<c.length;S+=1)c[S].c();attr(e,"class","inline-block h-8 w-8 rounded-2xl bg-neutral-600"),attr(e,"tabindex",r=t[2]?0:-1),attr(e,"aria-label","drag-handle"),attr(e,"style",o=t[2]?"cursor: grab":"cursor: grabbing"),attr(a,"class","inline-block h-8 align-text-bottom"),attr(a,"title",u=t[44].name),attr(f,"class","w-full bg-neutral-500 py-0.5 rounded-2xl")},m(S,T){insert(S,e,T),mount_component(n,e,null),insert(S,i,T),insert(S,a,T),append(a,l),insert(S,d,T),insert(S,f,T);for(let y=0;y<c.length;y+=1)c[y].m(f,null);h=!0,E||(g=[listen(e,"mousedown",t[21]),listen(e,"touchstart",t[21]),listen(e,"keydown",t[22]),action_destroyer(m=dndzone.call(null,f,{items:t[44].subscriptions,dropFromOthersDisabled:t[7]&&t[19](t[44]),dragDisabled:t[2],flipDurationMs})),listen(f,"consider",A),listen(f,"finalize",R)],E=!0)},p(S,T){t=S;const y={};if(T[1]&2097152&&(y.$$scope={dirty:T,ctx:t}),n.$set(y),(!h||T[0]&4&&r!==(r=t[2]?0:-1))&&attr(e,"tabindex",r),(!h||T[0]&4&&o!==(o=t[2]?"cursor: grab":"cursor: grabbing"))&&attr(e,"style",o),(!h||T[0]&32)&&s!==(s=t[44].name+"")&&set_data(l,s),(!h||T[0]&32&&u!==(u=t[44].name))&&attr(a,"title",u),T[0]&7340068){I=t[44].subscriptions;for(let w=0;w<c.length;w+=1)c[w].r();c=update_keyed_each(c,T,b,1,t,I,_,f,fix_and_destroy_block,create_each_block_1,null,get_each_context_1);for(let w=0;w<c.length;w+=1)c[w].a()}m&&is_function(m.update)&&T[0]&164&&m.update.call(null,{items:t[44].subscriptions,dropFromOthersDisabled:t[7]&&t[19](t[44]),dragDisabled:t[2],flipDurationMs})},i(S){h||(transition_in(n.$$.fragment,S),h=!0)},o(S){transition_out(n.$$.fragment,S),h=!1},d(S){S&&detach(e),destroy_component(n),S&&detach(i),S&&detach(a),S&&detach(d),S&&detach(f);for(let T=0;T<c.length;T+=1)c[T].d();E=!1,run_all(g)}}}function create_if_block$1(t){let e,n,r,o,i,a,s=t[44].subscription.title+"",l,u,d,f;return{c(){e=element("img"),i=space(),a=element("span"),l=text(s),attr(e,"class","inline-block h-8 w-8 rounded-2xl"),src_url_equal(e.src,n=t[44].subscription.thumbnailUrl)||attr(e,"src",n),attr(e,"alt",""),attr(e,"loading","lazy"),attr(e,"width","88"),attr(e,"height","88"),attr(e,"tabindex",r=t[2]?0:-1),attr(e,"aria-label","drag-handle"),attr(e,"style",o=t[2]?"cursor: grab":"cursor: grabbing"),attr(a,"title",u=t[44].subscription.title)},m(c,_){insert(c,e,_),insert(c,i,_),insert(c,a,_),append(a,l),d||(f=[listen(e,"mousedown",t[21]),listen(e,"touchstart",t[21]),listen(e,"keydown",t[22])],d=!0)},p(c,_){_[0]&32&&!src_url_equal(e.src,n=c[44].subscription.thumbnailUrl)&&attr(e,"src",n),_[0]&4&&r!==(r=c[2]?0:-1)&&attr(e,"tabindex",r),_[0]&4&&o!==(o=c[2]?"cursor: grab":"cursor: grabbing")&&attr(e,"style",o),_[0]&32&&s!==(s=c[44].subscription.title+"")&&set_data(l,s),_[0]&32&&u!==(u=c[44].subscription.title)&&attr(a,"title",u)},i:noop,o:noop,d(c){c&&detach(e),c&&detach(i),c&&detach(a),d=!1,run_all(f)}}}function create_default_slot_3(t){let e;return{c(){e=text("\u2630")},m(n,r){insert(n,e,r)},d(n){n&&detach(e)}}}function create_each_block_1(t,e){let n,r,o,i,a,s,l,u,d,f=e[47].subscription.title+"",c,_,m,h,E=noop,g,I;function b(){return e[26](e[44],e[47])}return{key:t,first:null,c(){n=element("div"),r=element("span"),r.textContent="\xD7",o=space(),i=element("img"),u=space(),d=element("span"),c=text(f),m=space(),attr(r,"class","float-right p-0.5"),attr(i,"class","inline-block h-8 w-8 rounded-2xl"),src_url_equal(i.src,a=e[47].subscription.thumbnailUrl)||attr(i,"src",a),attr(i,"alt",""),attr(i,"loading","lazy"),attr(i,"width","88"),attr(i,"height","88"),attr(i,"tabindex",s=e[2]?0:-1),attr(i,"aria-label","drag-handle"),attr(i,"style",l=e[2]?"cursor: grab":"cursor: grabbing"),attr(d,"title",_=e[47].subscription.title),attr(n,"class","bg-neutral-700 m-1 p-0.5 rounded-2xl truncate"),set_style(n,"width","calc(100% - 0.5rem)"),this.first=n},m(A,R){insert(A,n,R),append(n,r),append(n,o),append(n,i),append(n,u),append(n,d),append(d,c),append(n,m),g||(I=[listen(r,"click",b),listen(i,"mousedown",e[21]),listen(i,"touchstart",e[21]),listen(i,"keydown",e[22])],g=!0)},p(A,R){e=A,R[0]&32&&!src_url_equal(i.src,a=e[47].subscription.thumbnailUrl)&&attr(i,"src",a),R[0]&4&&s!==(s=e[2]?0:-1)&&attr(i,"tabindex",s),R[0]&4&&l!==(l=e[2]?"cursor: grab":"cursor: grabbing")&&attr(i,"style",l),R[0]&32&&f!==(f=e[47].subscription.title+"")&&set_data(c,f),R[0]&32&&_!==(_=e[47].subscription.title)&&attr(d,"title",_)},r(){h=n.getBoundingClientRect()},f(){fix_position(n),E()},a(){E(),E=create_animation(n,h,flip,{duration:flipDurationMs})},d(A){A&&detach(n),g=!1,run_all(I)}}}function create_each_block(t,e){let n,r,o,i,a,s,l,u,d,f=noop,c,_,m;function h(){return e[25](e[44])}const E=[create_if_block$1,create_if_block_1],g=[];function I(b,A){return A[0]&32&&(i=null),A[0]&32&&(a=null),i==null&&(i=!!isSubscription(b[44])),i?0:(a==null&&(a=!!isGroup(b[44])),a?1:-1)}return~(s=I(e,[-1,-1]))&&(l=g[s]=E[s](e)),{key:t,first:null,c(){n=element("div"),r=element("span"),r.textContent="\xD7",o=space(),l&&l.c(),u=space(),attr(r,"class","float-right p-0.5"),attr(n,"class","bg-neutral-700 m-1 p-0.5 rounded-2xl truncate"),set_style(n,"width","calc(100% - 0.5rem)"),this.first=n},m(b,A){insert(b,n,A),append(n,r),append(n,o),~s&&g[s].m(n,null),append(n,u),c=!0,_||(m=listen(r,"click",h),_=!0)},p(b,A){e=b;let R=s;s=I(e,A),s===R?~s&&g[s].p(e,A):(l&&(group_outros(),transition_out(g[R],1,1,()=>{g[R]=null}),check_outros()),~s?(l=g[s],l?l.p(e,A):(l=g[s]=E[s](e),l.c()),transition_in(l,1),l.m(n,u)):l=null)},r(){d=n.getBoundingClientRect()},f(){fix_position(n),f()},a(){f(),f=create_animation(n,d,flip,{duration:flipDurationMs})},i(b){c||(transition_in(l),c=!0)},o(b){transition_out(l),c=!1},d(b){b&&detach(n),~s&&g[s].d(),_=!1,m()}}}function create_default_slot_2(t){let e;return{c(){e=text("Close")},m(n,r){insert(n,e,r)},d(n){n&&detach(e)}}}function create_default_slot_1(t){let e;return{c(){e=text("Add group")},m(n,r){insert(n,e,r)},d(n){n&&detach(e)}}}function create_default_slot(t){let e;return{c(){e=text("Save")},m(n,r){insert(n,e,r)},d(n){n&&detach(e)}}}function create_fragment$1(t){let e,n,r,o,i,a,s,l,u,d,f,c,_=[],m=new Map_1,h,E,g,I,b,A,R,S,T=[],y=new Map_1,w,C,O,P,G,z,F,Y,B,M,q,V,j;i=new Center({props:{$$slots:{default:[create_default_slot_6]},$$scope:{ctx:t}}}),d=new Center({props:{$$slots:{default:[create_default_slot_5]},$$scope:{ctx:t}}});let H=t[4];const W=D=>D[44].id;for(let D=0;D<H.length;D+=1){let L=get_each_context_2(t,H,D),x=W(L);m.set(x,_[D]=create_each_block_2(x,L))}b=new Center({props:{$$slots:{default:[create_default_slot_4]},$$scope:{ctx:t}}});let X=t[5];const K=D=>D[44].id;for(let D=0;D<X.length;D+=1){let L=get_each_context(t,X,D),x=K(L);y.set(x,T[D]=create_each_block(x,L))}return P=new PrimaryButton({props:{class:"w-20 m-1 float-left",$$slots:{default:[create_default_slot_2]},$$scope:{ctx:t}}}),P.$on("click",t[23]),Y=new PrimaryButton({props:{class:"w-24 rounded-l-none",$$slots:{default:[create_default_slot_1]},$$scope:{ctx:t}}}),Y.$on("click",t[9]),M=new PrimaryButton({props:{class:"w-20 m-1 float-right",$$slots:{default:[create_default_slot]},$$scope:{ctx:t}}}),M.$on("click",t[10]),{c(){e=element("div"),n=element("div"),r=element("div"),o=element("div"),create_component(i.$$.fragment),a=space(),s=element("div"),l=element("div"),u=element("div"),create_component(d.$$.fragment),f=space(),c=element("div");for(let D=0;D<_.length;D+=1)_[D].c();E=space(),g=element("div"),I=element("div"),create_component(b.$$.fragment),A=space(),R=element("div"),S=element("div");for(let D=0;D<T.length;D+=1)T[D].c();C=space(),O=element("div"),create_component(P.$$.fragment),G=space(),z=element("div"),F=element("input"),create_component(Y.$$.fragment),B=space(),create_component(M.$$.fragment),attr(o,"class","w-full h-16"),attr(u,"class","w-full h-6"),attr(c,"class","w-full overflow-y-auto y-scroll mb-2"),set_style(c,"height","calc(100% - 2rem)"),attr(l,"class","inline-block min-w-[9.5rem] m-1 bg-neutral-800 rounded-xl"),set_style(l,"width","calc(50% - 0.65rem)"),set_style(l,"height","calc(100% - 0.5rem)"),attr(I,"class","w-full h-6"),attr(S,"class","w-full h-max"),attr(R,"class","w-full overflow-y-auto y-scroll mb-2"),set_style(R,"height","calc(100% - 2rem)"),attr(g,"class","inline-block min-w-[9.5rem] m-1 bg-neutral-800 rounded-xl"),set_style(g,"width","calc(50% - 0.65rem)"),set_style(g,"height","calc(100% - 0.5rem)"),attr(s,"class","w-full"),set_style(s,"height","calc(100% - 7rem)"),attr(F,"type","text"),attr(F,"class","bg-neutral-800 p-1.5 rounded-l-2xl"),set_style(F,"width","calc(100% - 6rem)"),attr(z,"class","inline-block m-1"),set_style(z,"width","calc(100% - 11.5rem)"),attr(O,"class","w-full h-12"),attr(r,"class","min-w-[20.5rem] w-full h-full"),attr(n,"class","absolute inset-y-0 left-1/2 -translate-x-1/2 w-full max-w-[40rem] bg-neutral-700 rounded-2xl overflow-x-auto x-scroll"),attr(e,"class","fixed inset-0 z-10 svelte-v5cnxt"),set_style(e,"background-color","rgba(0, 0, 0, 0.8)"),toggle_class(e,"fadeIn",t[1]),toggle_class(e,"fadeOut",!t[1])},m(D,L){insert(D,e,L),append(e,n),append(n,r),append(r,o),mount_component(i,o,null),append(r,a),append(r,s),append(s,l),append(l,u),mount_component(d,u,null),append(l,f),append(l,c);for(let x=0;x<_.length;x+=1)_[x].m(c,null);append(s,E),append(s,g),append(g,I),mount_component(b,I,null),append(g,A),append(g,R),append(R,S);for(let x=0;x<T.length;x+=1)T[x].m(S,null);t[29](R),append(r,C),append(r,O),mount_component(P,O,null),append(O,G),append(O,z),append(z,F),set_input_value(F,t[6]),mount_component(Y,z,null),append(O,B),mount_component(M,O,null),q=!0,V||(j=[action_destroyer(h=dndzone.call(null,c,{items:t[4],dropFromOthersDisabled:!0,dragDisabled:t[2],flipDurationMs})),listen(c,"consider",t[11]),listen(c,"finalize",t[12]),action_destroyer(w=dndzone.call(null,S,{items:t[5],dropFromOthersDisabled:t[7]&&t[15](),dragDisabled:t[2],flipDurationMs})),listen(S,"consider",t[13]),listen(S,"finalize",t[14]),listen(R,"scroll",t[24]),listen(F,"input",t[30])],V=!0)},p(D,L){const x={};L[0]&8|L[1]&2097152&&(x.$$scope={dirty:L,ctx:D}),i.$set(x);const J={};if(L[1]&2097152&&(J.$$scope={dirty:L,ctx:D}),d.$set(J),L[0]&6291476){H=D[4];for(let k=0;k<_.length;k+=1)_[k].r();_=update_keyed_each(_,L,W,1,D,H,m,c,fix_and_destroy_block,create_each_block_2,null,get_each_context_2);for(let k=0;k<_.length;k+=1)_[k].a()}h&&is_function(h.update)&&L[0]&20&&h.update.call(null,{items:D[4],dropFromOthersDisabled:!0,dragDisabled:D[2],flipDurationMs});const Q={};if(L[1]&2097152&&(Q.$$scope={dirty:L,ctx:D}),b.$set(Q),L[0]&8323236){X=D[5],group_outros();for(let k=0;k<T.length;k+=1)T[k].r();T=update_keyed_each(T,L,K,1,D,X,y,S,fix_and_outro_and_destroy_block,create_each_block,null,get_each_context);for(let k=0;k<T.length;k+=1)T[k].a();check_outros()}w&&is_function(w.update)&&L[0]&164&&w.update.call(null,{items:D[5],dropFromOthersDisabled:D[7]&&D[15](),dragDisabled:D[2],flipDurationMs});const v={};L[1]&2097152&&(v.$$scope={dirty:L,ctx:D}),P.$set(v),L[0]&64&&F.value!==D[6]&&set_input_value(F,D[6]);const N={};L[1]&2097152&&(N.$$scope={dirty:L,ctx:D}),Y.$set(N);const U={};L[1]&2097152&&(U.$$scope={dirty:L,ctx:D}),M.$set(U),L[0]&2&&toggle_class(e,"fadeIn",D[1]),L[0]&2&&toggle_class(e,"fadeOut",!D[1])},i(D){if(!q){transition_in(i.$$.fragment,D),transition_in(d.$$.fragment,D),transition_in(b.$$.fragment,D);for(let L=0;L<X.length;L+=1)transition_in(T[L]);transition_in(P.$$.fragment,D),transition_in(Y.$$.fragment,D),transition_in(M.$$.fragment,D),q=!0}},o(D){transition_out(i.$$.fragment,D),transition_out(d.$$.fragment,D),transition_out(b.$$.fragment,D);for(let L=0;L<T.length;L+=1)transition_out(T[L]);transition_out(P.$$.fragment,D),transition_out(Y.$$.fragment,D),transition_out(M.$$.fragment,D),q=!1},d(D){D&&detach(e),destroy_component(i),destroy_component(d);for(let L=0;L<_.length;L+=1)_[L].d();destroy_component(b);for(let L=0;L<T.length;L+=1)T[L].d();t[29](null),destroy_component(P),destroy_component(Y),destroy_component(M),V=!1,run_all(j)}}}const flipDurationMs=300,scrollOffset=32,duration=100;function instance$1(t,e,n){let r,o,i,a;component_subscribe(t,editorVisible,v=>n(1,o=v)),component_subscribe(t,settingsStore,v=>n(36,i=v)),component_subscribe(t,subscriptionsStore,v=>n(37,a=v));let s=0,l=!0,u=[],d=!1,f=[],c=[],_="";function m(){n(3,d=!d),h()}function h(){if(d){const v=new Set(c.flatMap(N=>isGroup(N)?N.subscriptions.map(U=>U.subscription.channelId):[N.subscription.channelId]));n(4,f=u.filter(N=>!v.has(N.subscription.channelId)))}else n(4,f=u)}function E(){_!==""&&(c.push({id:s++,name:_,subscriptions:[]}),n(6,_=""),n(5,c))}let g;function I(){const v=a.items,N=i.subscriptionGroups;s=0,u=v.map(k=>({id:s++,name:k.title,subscription:k})),h();const U=new Map(v.map(k=>[k.channelId,k]));n(5,c=N.map(k=>{const ee=k.subscriptionIds.map(te=>U.get(te));return ee.length===1&&k.name===ee[0].title?{id:s++,name:k.name,subscription:ee[0]}:{id:s++,name:k.name,subscriptions:ee.map(te=>({id:s++,name:te.title,subscription:te}))}}))}async function b(){set_store_value(settingsStore,i.subscriptionGroups=c.map(v=>({name:v.name,subscriptionIds:isGroup(v)?v.subscriptions.map(N=>N.subscription.channelId):[v.subscription.channelId]})),i),await writeSettings(i),set_store_value(editorVisible,o=!1,o)}function A(v){if(v.detail.info.trigger===TRIGGERS.DRAG_STARTED){const N=u.findIndex(U=>U.id==v.detail.info.id);n(7,g=u[N]),u[N]=re(Z({},g),{id:s++}),h(),j()}else v.detail.info.source===SOURCES.KEYBOARD&&v.detail.info.trigger===TRIGGERS.DRAG_STOPPED&&n(2,l=!0),n(4,f)}function R(v){v.detail.info.source===SOURCES.POINTER&&n(2,l=!0),n(4,f)}function S(v){v.detail.info.trigger===TRIGGERS.DRAG_STARTED?(n(7,g=c.find(N=>N.id==v.detail.info.id)),j()):v.detail.info.source===SOURCES.KEYBOARD&&v.detail.info.trigger===TRIGGERS.DRAG_STOPPED&&n(2,l=!0),n(5,c=v.detail.items)}function T(v){v.detail.info.source===SOURCES.POINTER&&n(2,l=!0),n(5,c=v.detail.items),h()}function y(){if(isSubscription(g)){const v=g.subscription.channelId;return c.some(N=>!N[SHADOW_ITEM_MARKER_PROPERTY_NAME]&&isSubscription(N)&&N.subscription.channelId===v)}else return!1}function w(v){n(5,c=c.filter(N=>N.id!==v.id)),h()}function C(v,N){N.detail.info.trigger===TRIGGERS.DRAG_STARTED?(n(7,g=v.subscriptions.find(U=>U.id==N.detail.info.id)),j()):N.detail.info.source===SOURCES.KEYBOARD&&N.detail.info.trigger===TRIGGERS.DRAG_STOPPED&&n(2,l=!0),v.subscriptions=N.detail.items,n(5,c)}function O(v,N){N.detail.info.source===SOURCES.POINTER&&n(2,l=!0),v.subscriptions=N.detail.items,n(5,c),h()}function P(v){if(isSubscription(g)){const N=g.subscription.channelId;return v.subscriptions.some(U=>!U[SHADOW_ITEM_MARKER_PROPERTY_NAME]&&U.subscription.channelId===N)}else return!0}function G(v,N){v.subscriptions=v.subscriptions.filter(U=>U.id!==N.id),n(5,c),h()}function z(v){v.preventDefault(),n(2,l=!1)}function F(v){(v.key==="Enter"||v.key===" ")&&l&&n(2,l=!1)}function Y(){set_store_value(editorVisible,o=!1,o)}let B;const M=tweened(0,{duration:2*duration});let q,V;onDestroy(M.subscribe(v=>B&&n(0,B.scrollTop=v,B)));function j(){q||(q=setInterval(H,duration))}function H(){const v=document.getElementById("dnd-action-dragged-el");if(v){const N=v.getBoundingClientRect();N.bottom+scrollOffset>=r.bottom?M.update(U=>W(U+N.bottom+scrollOffset-r.bottom)):N.top-scrollOffset<=r.top&&M.update(U=>W(U+N.top-scrollOffset-r.top))}else clearInterval(q),q=null}function W(v){return Math.max(0,Math.min(v,B.scrollHeight-B.clientHeight))}function X(){clearTimeout(V),V=setTimeout(()=>{M.set(B.scrollTop,{duration:0})},duration)}const K=v=>w(v),D=(v,N)=>G(v,N),L=(v,N)=>C(v,N),x=(v,N)=>O(v,N);function J(v){binding_callbacks[v?"unshift":"push"](()=>{B=v,n(0,B)})}function Q(){_=this.value,n(6,_)}return t.$$.update=()=>{t.$$.dirty[0]&2&&o&&I(),t.$$.dirty[0]&1&&(r=B==null?void 0:B.getBoundingClientRect())},[B,o,l,d,f,c,_,g,m,E,b,A,R,S,T,y,w,C,O,P,G,z,F,Y,X,K,D,L,x,J,Q]}class SubscriptionsEditor extends SvelteComponent{constructor(e){super(),init(this,e,instance$1,create_fragment$1,safe_not_equal,{},null,[-1,-1])}}function create_catch_block(t){let e,n=JSON.stringify(t[5])+"",r;return{c(){e=element("p"),r=text(n),attr(e,"class","text-center")},m(o,i){insert(o,e,i),append(e,r)},p:noop,i:noop,o:noop,d(o){o&&detach(e)}}}function create_then_block(t){let e,n,r,o;const i=[create_if_block,create_else_block],a=[];function s(l,u){return l[1]?0:1}return e=s(t),n=a[e]=i[e](t),{c(){n.c(),r=empty()},m(l,u){a[e].m(l,u),insert(l,r,u),o=!0},p(l,u){let d=e;e=s(l),e===d?a[e].p(l,u):(group_outros(),transition_out(a[d],1,1,()=>{a[d]=null}),check_outros(),n=a[e],n?n.p(l,u):(n=a[e]=i[e](l),n.c()),transition_in(n,1),n.m(r.parentNode,r))},i(l){o||(transition_in(n),o=!0)},o(l){transition_out(n),o=!1},d(l){a[e].d(l),l&&detach(r)}}}function create_else_block(t){let e,n;return e=new LoginScreen({props:{isSignedIn:t[0]}}),{c(){create_component(e.$$.fragment)},m(r,o){mount_component(e,r,o),n=!0},p(r,o){const i={};o&1&&(i.isSignedIn=r[0]),e.$set(i)},i(r){n||(transition_in(e.$$.fragment,r),n=!0)},o(r){transition_out(e.$$.fragment,r),n=!1},d(r){destroy_component(e,r)}}}function create_if_block(t){let e,n,r,o,i,a;return e=new Player({}),r=new SubscriptionsEditor({}),i=new SubscriptionsDeck({}),{c(){create_component(e.$$.fragment),n=space(),create_component(r.$$.fragment),o=space(),create_component(i.$$.fragment)},m(s,l){mount_component(e,s,l),insert(s,n,l),mount_component(r,s,l),insert(s,o,l),mount_component(i,s,l),a=!0},p:noop,i(s){a||(transition_in(e.$$.fragment,s),transition_in(r.$$.fragment,s),transition_in(i.$$.fragment,s),a=!0)},o(s){transition_out(e.$$.fragment,s),transition_out(r.$$.fragment,s),transition_out(i.$$.fragment,s),a=!1},d(s){destroy_component(e,s),s&&detach(n),destroy_component(r,s),s&&detach(o),destroy_component(i,s)}}}function create_pending_block(t){let e,n;return e=new Spinner({}),{c(){create_component(e.$$.fragment)},m(r,o){mount_component(e,r,o),n=!0},p:noop,i(r){n||(transition_in(e.$$.fragment,r),n=!0)},o(r){transition_out(e.$$.fragment,r),n=!1},d(r){destroy_component(e,r)}}}function create_fragment(t){let e,n,r,o,i;n=new Header({props:{isSignedIn:t[0],isAuthorized:t[1]}});let a={ctx:t,current:null,token:null,hasCatch:!0,pending:create_pending_block,then:create_then_block,catch:create_catch_block,value:4,error:5,blocks:[,,,]};return handle_promise(t[2](),a),{c(){e=element("main"),create_component(n.$$.fragment),r=space(),o=element("section"),a.block.c(),attr(o,"class","w-full"),set_style(o,"height","calc(100% - 3rem)"),attr(e,"class","w-full h-full bg-neutral-700 text-white")},m(s,l){insert(s,e,l),mount_component(n,e,null),append(e,r),append(e,o),a.block.m(o,a.anchor=null),a.mount=()=>o,a.anchor=null,i=!0},p(s,[l]){t=s;const u={};l&1&&(u.isSignedIn=t[0]),l&2&&(u.isAuthorized=t[1]),n.$set(u),update_await_block_branch(a,t,l)},i(s){i||(transition_in(n.$$.fragment,s),transition_in(a.block),i=!0)},o(s){transition_out(n.$$.fragment,s);for(let l=0;l<3;l+=1){const u=a.blocks[l];transition_out(u)}i=!1},d(s){s&&detach(e),destroy_component(n),a.block.d(),a.token=null,a=null}}}const scope="https://www.googleapis.com/auth/youtube.readonly https://www.googleapis.com/auth/drive.appdata";function instance(t,e,n){let r,o;function i(){return new Promise((s,l)=>{gapi.load("client:auth2",()=>a().then(()=>s()).catch(u=>l(u)))})}async function a(){await gapi.client.init({apiKey:"AIzaSyBAHcJ9fPTrCjDExl1NZkF4fZd15fICEFI",clientId:"789354109817-qrqoqtfj1k3gvs01gufrpqlv38g0bi9p.apps.googleusercontent.com",scope});const s=gapi.auth2.getAuthInstance();n(0,r=s.isSignedIn.get()),s.isSignedIn.listen(l=>n(0,r=l)),n(1,o=s.currentUser.get().hasGrantedScopes(scope)),s.currentUser.listen(l=>n(1,o=l.hasGrantedScopes(scope)))}return[r,o,i]}class App extends SvelteComponent{constructor(e){super(),init(this,e,instance,create_fragment,safe_not_equal,{})}}var index="";new App({target:document.getElementById("app")});
