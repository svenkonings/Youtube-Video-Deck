var _e=Object.defineProperty,me=Object.defineProperties;var ge=Object.getOwnPropertyDescriptors;var le=Object.getOwnPropertySymbols;var fe=Object.prototype.hasOwnProperty,de=Object.prototype.propertyIsEnumerable;var ce=(t,e,n)=>e in t?_e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Z=(t,e)=>{for(var n in e||(e={}))fe.call(e,n)&&ce(t,n,e[n]);if(le)for(var n of le(e))de.call(e,n)&&ce(t,n,e[n]);return t},ue=(t,e)=>me(t,ge(e));var pe=(t,e)=>{var n={};for(var r in t)fe.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&le)for(var r of le(t))e.indexOf(r)<0&&de.call(t,r)&&(n[r]=t[r]);return n};const p=function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))r(o);new MutationObserver(o=>{for(const i of o)if(i.type==="childList")for(const a of i.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function n(o){const i={};return o.integrity&&(i.integrity=o.integrity),o.referrerpolicy&&(i.referrerPolicy=o.referrerpolicy),o.crossorigin==="use-credentials"?i.credentials="include":o.crossorigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(o){if(o.ep)return;o.ep=!0;const i=n(o);fetch(o.href,i)}};p();function noop(){}const identity=t=>t;function assign(t,e){for(const n in e)t[n]=e[n];return t}function is_promise(t){return t&&typeof t=="object"&&typeof t.then=="function"}function run(t){return t()}function blank_object(){return Object.create(null)}function run_all(t){t.forEach(run)}function is_function(t){return typeof t=="function"}function safe_not_equal(t,e){return t!=t?e==e:t!==e||t&&typeof t=="object"||typeof t=="function"}let src_url_equal_anchor;function src_url_equal(t,e){return src_url_equal_anchor||(src_url_equal_anchor=document.createElement("a")),src_url_equal_anchor.href=e,t===src_url_equal_anchor.href}function not_equal(t,e){return t!=t?e==e:t!==e}function is_empty(t){return Object.keys(t).length===0}function subscribe(t,...e){if(t==null)return noop;const n=t.subscribe(...e);return n.unsubscribe?()=>n.unsubscribe():n}function component_subscribe(t,e,n){t.$$.on_destroy.push(subscribe(e,n))}function create_slot(t,e,n,r){if(t){const o=get_slot_context(t,e,n,r);return t[0](o)}}function get_slot_context(t,e,n,r){return t[1]&&r?assign(n.ctx.slice(),t[1](r(e))):n.ctx}function get_slot_changes(t,e,n,r){if(t[2]&&r){const o=t[2](r(n));if(e.dirty===void 0)return o;if(typeof o=="object"){const i=[],a=Math.max(e.dirty.length,o.length);for(let s=0;s<a;s+=1)i[s]=e.dirty[s]|o[s];return i}return e.dirty|o}return e.dirty}function update_slot_base(t,e,n,r,o,i){if(o){const a=get_slot_context(e,n,r,i);t.p(a,o)}}function get_all_dirty_from_scope(t){if(t.ctx.length>32){const e=[],n=t.ctx.length/32;for(let r=0;r<n;r++)e[r]=-1;return e}return-1}function null_to_empty(t){return t==null?"":t}function set_store_value(t,e,n){return t.set(n),e}function action_destroyer(t){return t&&is_function(t.destroy)?t.destroy:noop}const is_client=typeof window!="undefined";let now$1=is_client?()=>window.performance.now():()=>Date.now(),raf=is_client?t=>requestAnimationFrame(t):noop;const tasks=new Set;function run_tasks(t){tasks.forEach(e=>{e.c(t)||(tasks.delete(e),e.f())}),tasks.size!==0&&raf(run_tasks)}function loop$1(t){let e;return tasks.size===0&&raf(run_tasks),{promise:new Promise(n=>{tasks.add(e={c:t,f:n})}),abort(){tasks.delete(e)}}}function append(t,e){t.appendChild(e)}function get_root_for_style(t){if(!t)return document;const e=t.getRootNode?t.getRootNode():t.ownerDocument;return e&&e.host?e:t.ownerDocument}function append_empty_stylesheet(t){const e=element("style");return append_stylesheet(get_root_for_style(t),e),e.sheet}function append_stylesheet(t,e){append(t.head||t,e)}function insert(t,e,n){t.insertBefore(e,n||null)}function detach(t){t.parentNode.removeChild(t)}function destroy_each(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}function element(t){return document.createElement(t)}function svg_element(t){return document.createElementNS("http://www.w3.org/2000/svg",t)}function text(t){return document.createTextNode(t)}function space(){return text(" ")}function empty(){return text("")}function listen(t,e,n,r){return t.addEventListener(e,n,r),()=>t.removeEventListener(e,n,r)}function prevent_default(t){return function(e){return e.preventDefault(),t.call(this,e)}}function stop_propagation(t){return function(e){return e.stopPropagation(),t.call(this,e)}}function self(t){return function(e){e.target===this&&t.call(this,e)}}function attr(t,e,n){n==null?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function children(t){return Array.from(t.childNodes)}function set_data(t,e){e=""+e,t.wholeText!==e&&(t.data=e)}function set_input_value(t,e){t.value=e==null?"":e}function toggle_class(t,e,n){t.classList[n?"add":"remove"](e)}function custom_event(t,e,n=!1){const r=document.createEvent("CustomEvent");return r.initCustomEvent(t,n,!1,e),r}const managed_styles=new Map;let active=0;function hash(t){let e=5381,n=t.length;for(;n--;)e=(e<<5)-e^t.charCodeAt(n);return e>>>0}function create_style_information(t,e){const n={stylesheet:append_empty_stylesheet(e),rules:{}};return managed_styles.set(t,n),n}function create_rule(t,e,n,r,o,i,a,s=0){const l=16.666/r;let u=`{
`;for(let I=0;I<=1;I+=l){const g=e+(n-e)*i(I);u+=I*100+`%{${a(g,1-g)}}
`}const d=u+`100% {${a(n,1-n)}}
}`,f=`__svelte_${hash(d)}_${s}`,c=get_root_for_style(t),{stylesheet:_,rules:m}=managed_styles.get(c)||create_style_information(c,t);m[f]||(m[f]=!0,_.insertRule(`@keyframes ${f} ${d}`,_.cssRules.length));const E=t.style.animation||"";return t.style.animation=`${E?`${E}, `:""}${f} ${r}ms linear ${o}ms 1 both`,active+=1,f}function delete_rule(t,e){const n=(t.style.animation||"").split(", "),r=n.filter(e?i=>i.indexOf(e)<0:i=>i.indexOf("__svelte")===-1),o=n.length-r.length;o&&(t.style.animation=r.join(", "),active-=o,active||clear_rules())}function clear_rules(){raf(()=>{active||(managed_styles.forEach(t=>{const{stylesheet:e}=t;let n=e.cssRules.length;for(;n--;)e.deleteRule(n);t.rules={}}),managed_styles.clear())})}function create_animation(t,e,n,r){if(!e)return noop;const o=t.getBoundingClientRect();if(e.left===o.left&&e.right===o.right&&e.top===o.top&&e.bottom===o.bottom)return noop;const{delay:i=0,duration:a=300,easing:s=identity,start:l=now$1()+i,end:u=l+a,tick:d=noop,css:f}=n(t,{from:e,to:o},r);let c=!0,_=!1,m;function E(){f&&(m=create_rule(t,0,1,a,i,s,f)),i||(_=!0)}function I(){f&&delete_rule(t,m),c=!1}return loop$1(g=>{if(!_&&g>=l&&(_=!0),_&&g>=u&&(d(1,0),I()),!c)return!1;if(_){const y=g-l,T=0+1*s(y/a);d(T,1-T)}return!0}),E(),d(0,1),I}function fix_position(t){const e=getComputedStyle(t);if(e.position!=="absolute"&&e.position!=="fixed"){const{width:n,height:r}=e,o=t.getBoundingClientRect();t.style.position="absolute",t.style.width=n,t.style.height=r,add_transform(t,o)}}function add_transform(t,e){const n=t.getBoundingClientRect();if(e.left!==n.left||e.top!==n.top){const r=getComputedStyle(t),o=r.transform==="none"?"":r.transform;t.style.transform=`${o} translate(${e.left-n.left}px, ${e.top-n.top}px)`}}let current_component;function set_current_component(t){current_component=t}function get_current_component(){if(!current_component)throw new Error("Function called outside component initialization");return current_component}function onDestroy(t){get_current_component().$$.on_destroy.push(t)}function bubble(t,e){const n=t.$$.callbacks[e.type];n&&n.slice().forEach(r=>r.call(this,e))}const dirty_components=[],binding_callbacks=[],render_callbacks=[],flush_callbacks=[],resolved_promise=Promise.resolve();let update_scheduled=!1;function schedule_update(){update_scheduled||(update_scheduled=!0,resolved_promise.then(flush))}function tick(){return schedule_update(),resolved_promise}function add_render_callback(t){render_callbacks.push(t)}const seen_callbacks=new Set;let flushidx=0;function flush(){const t=current_component;do{for(;flushidx<dirty_components.length;){const e=dirty_components[flushidx];flushidx++,set_current_component(e),update(e.$$)}for(set_current_component(null),dirty_components.length=0,flushidx=0;binding_callbacks.length;)binding_callbacks.pop()();for(let e=0;e<render_callbacks.length;e+=1){const n=render_callbacks[e];seen_callbacks.has(n)||(seen_callbacks.add(n),n())}render_callbacks.length=0}while(dirty_components.length);for(;flush_callbacks.length;)flush_callbacks.pop()();update_scheduled=!1,seen_callbacks.clear(),set_current_component(t)}function update(t){if(t.fragment!==null){t.update(),run_all(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(add_render_callback)}}let promise;function wait(){return promise||(promise=Promise.resolve(),promise.then(()=>{promise=null})),promise}function dispatch(t,e,n){t.dispatchEvent(custom_event(`${e?"intro":"outro"}${n}`))}const outroing=new Set;let outros;function group_outros(){outros={r:0,c:[],p:outros}}function check_outros(){outros.r||run_all(outros.c),outros=outros.p}function transition_in(t,e){t&&t.i&&(outroing.delete(t),t.i(e))}function transition_out(t,e,n,r){if(t&&t.o){if(outroing.has(t))return;outroing.add(t),outros.c.push(()=>{outroing.delete(t),r&&(n&&t.d(1),r())}),t.o(e)}}const null_transition={duration:0};function create_in_transition(t,e,n){let r=e(t,n),o=!1,i,a,s=0;function l(){i&&delete_rule(t,i)}function u(){const{delay:f=0,duration:c=300,easing:_=identity,tick:m=noop,css:E}=r||null_transition;E&&(i=create_rule(t,0,1,c,f,_,E,s++)),m(0,1);const I=now$1()+f,g=I+c;a&&a.abort(),o=!0,add_render_callback(()=>dispatch(t,!0,"start")),a=loop$1(y=>{if(o){if(y>=g)return m(1,0),dispatch(t,!0,"end"),l(),o=!1;if(y>=I){const T=_((y-I)/c);m(T,1-T)}}return o})}let d=!1;return{start(){d||(d=!0,delete_rule(t),is_function(r)?(r=r(),wait().then(u)):u())},invalidate(){d=!1},end(){o&&(l(),o=!1)}}}function handle_promise(t,e){const n=e.token={};function r(o,i,a,s){if(e.token!==n)return;e.resolved=s;let l=e.ctx;a!==void 0&&(l=l.slice(),l[a]=s);const u=o&&(e.current=o)(l);let d=!1;e.block&&(e.blocks?e.blocks.forEach((f,c)=>{c!==i&&f&&(group_outros(),transition_out(f,1,1,()=>{e.blocks[c]===f&&(e.blocks[c]=null)}),check_outros())}):e.block.d(1),u.c(),transition_in(u,1),u.m(e.mount(),e.anchor),d=!0),e.block=u,e.blocks&&(e.blocks[i]=u),d&&flush()}if(is_promise(t)){const o=get_current_component();if(t.then(i=>{set_current_component(o),r(e.then,1,e.value,i),set_current_component(null)},i=>{if(set_current_component(o),r(e.catch,2,e.error,i),set_current_component(null),!e.hasCatch)throw i}),e.current!==e.pending)return r(e.pending,0),!0}else{if(e.current!==e.then)return r(e.then,1,e.value,t),!0;e.resolved=t}}function update_await_block_branch(t,e,n){const r=e.slice(),{resolved:o}=t;t.current===t.then&&(r[t.value]=o),t.current===t.catch&&(r[t.error]=o),t.block.p(r,n)}const globals=typeof window!="undefined"?window:typeof globalThis!="undefined"?globalThis:global;function destroy_block(t,e){t.d(1),e.delete(t.key)}function outro_and_destroy_block(t,e){transition_out(t,1,1,()=>{e.delete(t.key)})}function fix_and_destroy_block(t,e){t.f(),destroy_block(t,e)}function fix_and_outro_and_destroy_block(t,e){t.f(),outro_and_destroy_block(t,e)}function update_keyed_each(t,e,n,r,o,i,a,s,l,u,d,f){let c=t.length,_=i.length,m=c;const E={};for(;m--;)E[t[m].key]=m;const I=[],g=new Map,y=new Map;for(m=_;m--;){const h=f(o,i,m),v=n(h);let b=a.get(v);b?r&&b.p(h,e):(b=u(v,h),b.c()),g.set(v,I[m]=b),v in E&&y.set(v,Math.abs(m-E[v]))}const T=new Set,w=new Set;function A(h){transition_in(h,1),h.m(s,d),a.set(h.key,h),d=h.first,_--}for(;c&&_;){const h=I[_-1],v=t[c-1],b=h.key,D=v.key;h===v?(d=h.first,c--,_--):g.has(D)?!a.has(b)||T.has(b)?A(h):w.has(D)?c--:y.get(b)>y.get(D)?(w.add(b),A(h)):(T.add(D),c--):(l(v,a),c--)}for(;c--;){const h=t[c];g.has(h.key)||l(h,a)}for(;_;)A(I[_-1]);return I}function create_component(t){t&&t.c()}function mount_component(t,e,n,r){const{fragment:o,on_mount:i,on_destroy:a,after_update:s}=t.$$;o&&o.m(e,n),r||add_render_callback(()=>{const l=i.map(run).filter(is_function);a?a.push(...l):run_all(l),t.$$.on_mount=[]}),s.forEach(add_render_callback)}function destroy_component(t,e){const n=t.$$;n.fragment!==null&&(run_all(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function make_dirty(t,e){t.$$.dirty[0]===-1&&(dirty_components.push(t),schedule_update(),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function init(t,e,n,r,o,i,a,s=[-1]){const l=current_component;set_current_component(t);const u=t.$$={fragment:null,ctx:null,props:i,update:noop,not_equal:o,bound:blank_object(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(l?l.$$.context:[])),callbacks:blank_object(),dirty:s,skip_bound:!1,root:e.target||l.$$.root};a&&a(u.root);let d=!1;if(u.ctx=n?n(t,e.props||{},(f,c,..._)=>{const m=_.length?_[0]:c;return u.ctx&&o(u.ctx[f],u.ctx[f]=m)&&(!u.skip_bound&&u.bound[f]&&u.bound[f](m),d&&make_dirty(t,f)),c}):[],u.update(),d=!0,run_all(u.before_update),u.fragment=r?r(u.ctx):!1,e.target){if(e.hydrate){const f=children(e.target);u.fragment&&u.fragment.l(f),f.forEach(detach)}else u.fragment&&u.fragment.c();e.intro&&transition_in(t.$$.fragment),mount_component(t,e.target,e.anchor,e.customElement),flush()}set_current_component(l)}class SvelteComponent{$destroy(){destroy_component(this,1),this.$destroy=noop}$on(e,n){const r=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return r.push(n),()=>{const o=r.indexOf(n);o!==-1&&r.splice(o,1)}}$set(e){this.$$set&&!is_empty(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}var Spinner_svelte_svelte_type_style_lang="";function create_fragment$d(t){let e;return{c(){e=element("div"),e.innerHTML=`<span class="loader svelte-gg29y1"></span> 
  <br/> 
  <span class="font-extrabold">Loading\u2026</span>`,attr(e,"class","text-center")},m(n,r){insert(n,e,r)},p:noop,i:noop,o:noop,d(n){n&&detach(e)}}}class Spinner extends SvelteComponent{constructor(e){super(),init(this,e,null,create_fragment$d,safe_not_equal,{})}}const get_after_slot_changes=t=>({}),get_after_slot_context=t=>({}),get_before_slot_changes=t=>({}),get_before_slot_context=t=>({});function create_fragment$c(t){let e,n,r,o,i;const a=t[1].before,s=create_slot(a,t,t[0],get_before_slot_context),l=t[1].default,u=create_slot(l,t,t[0],null),d=t[1].after,f=create_slot(d,t,t[0],get_after_slot_context);return{c(){e=element("div"),s&&s.c(),n=space(),r=element("div"),u&&u.c(),o=space(),f&&f.c(),attr(r,"class","absolute top-1/2 -translate-y-1/2 left-1/2 -translate-x-1/2 text-center"),attr(e,"class","relative w-full h-full")},m(c,_){insert(c,e,_),s&&s.m(e,null),append(e,n),append(e,r),u&&u.m(r,null),append(e,o),f&&f.m(e,null),i=!0},p(c,[_]){s&&s.p&&(!i||_&1)&&update_slot_base(s,a,c,c[0],i?get_slot_changes(a,c[0],_,get_before_slot_changes):get_all_dirty_from_scope(c[0]),get_before_slot_context),u&&u.p&&(!i||_&1)&&update_slot_base(u,l,c,c[0],i?get_slot_changes(l,c[0],_,null):get_all_dirty_from_scope(c[0]),null),f&&f.p&&(!i||_&1)&&update_slot_base(f,d,c,c[0],i?get_slot_changes(d,c[0],_,get_after_slot_changes):get_all_dirty_from_scope(c[0]),get_after_slot_context)},i(c){i||(transition_in(s,c),transition_in(u,c),transition_in(f,c),i=!0)},o(c){transition_out(s,c),transition_out(u,c),transition_out(f,c),i=!1},d(c){c&&detach(e),s&&s.d(c),u&&u.d(c),f&&f.d(c)}}}function instance$c(t,e,n){let{$$slots:r={},$$scope:o}=e;return t.$$set=i=>{"$$scope"in i&&n(0,o=i.$$scope)},[o,r]}class Center extends SvelteComponent{constructor(e){super(),init(this,e,instance$c,create_fragment$c,safe_not_equal,{})}}function create_fragment$b(t){let e,n,r,o,i;const a=t[2].default,s=create_slot(a,t,t[1],null);return{c(){e=element("button"),s&&s.c(),attr(e,"class",n="bg-blue-600 text-white p-1.5 rounded-2xl hover:bg-blue-700 "+t[0])},m(l,u){insert(l,e,u),s&&s.m(e,null),r=!0,o||(i=listen(e,"click",t[3]),o=!0)},p(l,[u]){s&&s.p&&(!r||u&2)&&update_slot_base(s,a,l,l[1],r?get_slot_changes(a,l[1],u,null):get_all_dirty_from_scope(l[1]),null),(!r||u&1&&n!==(n="bg-blue-600 text-white p-1.5 rounded-2xl hover:bg-blue-700 "+l[0]))&&attr(e,"class",n)},i(l){r||(transition_in(s,l),r=!0)},o(l){transition_out(s,l),r=!1},d(l){l&&detach(e),s&&s.d(l),o=!1,i()}}}function instance$b(t,e,n){let{$$slots:r={},$$scope:o}=e,{class:i=""}=e;function a(s){bubble.call(this,t,s)}return t.$$set=s=>{"class"in s&&n(0,i=s.class),"$$scope"in s&&n(1,o=s.$$scope)},[i,o,r,a]}class PrimaryButton extends SvelteComponent{constructor(e){super(),init(this,e,instance$b,create_fragment$b,safe_not_equal,{class:0})}}function create_default_slot_1$4(t){let e=t[0]?"Authorize":"Sign in",n;return{c(){n=text(e)},m(r,o){insert(r,n,o)},p(r,o){o&1&&e!==(e=r[0]?"Authorize":"Sign in")&&set_data(n,e)},d(r){r&&detach(n)}}}function create_default_slot$5(t){let e,n,r=t[0]?"authorize this app":"sign in",o,i,a,s,l,u,d;return u=new PrimaryButton({props:{class:"w-full",$$slots:{default:[create_default_slot_1$4]},$$scope:{ctx:t}}}),u.$on("click",signIn),{c(){e=element("p"),n=text("Please "),o=text(r),i=text(" to continue"),a=space(),s=element("br"),l=space(),create_component(u.$$.fragment)},m(f,c){insert(f,e,c),append(e,n),append(e,o),append(e,i),insert(f,a,c),insert(f,s,c),insert(f,l,c),mount_component(u,f,c),d=!0},p(f,c){(!d||c&1)&&r!==(r=f[0]?"authorize this app":"sign in")&&set_data(o,r);const _={};c&3&&(_.$$scope={dirty:c,ctx:f}),u.$set(_)},i(f){d||(transition_in(u.$$.fragment,f),d=!0)},o(f){transition_out(u.$$.fragment,f),d=!1},d(f){f&&detach(e),f&&detach(a),f&&detach(s),f&&detach(l),destroy_component(u,f)}}}function create_fragment$a(t){let e,n;return e=new Center({props:{$$slots:{default:[create_default_slot$5]},$$scope:{ctx:t}}}),{c(){create_component(e.$$.fragment)},m(r,o){mount_component(e,r,o),n=!0},p(r,[o]){const i={};o&3&&(i.$$scope={dirty:o,ctx:r}),e.$set(i)},i(r){n||(transition_in(e.$$.fragment,r),n=!0)},o(r){transition_out(e.$$.fragment,r),n=!1},d(r){destroy_component(e,r)}}}function signIn(){return gapi.auth2.getAuthInstance().signIn()}function instance$a(t,e,n){let{isSignedIn:r}=e;return t.$$set=o=>{"isSignedIn"in o&&n(0,r=o.isSignedIn)},[r]}class LoginScreen extends SvelteComponent{constructor(e){super(),init(this,e,instance$a,create_fragment$a,safe_not_equal,{isSignedIn:0})}}const subscriber_queue=[];function writable(t,e=noop){let n;const r=new Set;function o(s){if(safe_not_equal(t,s)&&(t=s,n)){const l=!subscriber_queue.length;for(const u of r)u[1](),subscriber_queue.push(u,t);if(l){for(let u=0;u<subscriber_queue.length;u+=2)subscriber_queue[u][0](subscriber_queue[u+1]);subscriber_queue.length=0}}}function i(s){o(s(t))}function a(s,l=noop){const u=[s,l];return r.add(u),r.size===1&&(n=e(o)||noop),s(t),()=>{r.delete(u),r.size===0&&(n(),n=null)}}return{set:o,update:i,subscribe:a}}function getDefaultExportFromCjs(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var browserCookies={};(function(t){t.defaults={},t.set=function(e,n,r){var o=r||{},i=t.defaults,a=o.expires||i.expires,s=o.domain||i.domain,l=o.path!==void 0?o.path:i.path!==void 0?i.path:"/",u=o.secure!==void 0?o.secure:i.secure,d=o.httponly!==void 0?o.httponly:i.httponly,f=o.samesite!==void 0?o.samesite:i.samesite,c=a?new Date(typeof a=="number"?new Date().getTime()+a*864e5:a):0;document.cookie=e.replace(/[^+#$&^`|]/g,encodeURIComponent).replace("(","%28").replace(")","%29")+"="+n.replace(/[^+#$&/:<-\[\]-}]/g,encodeURIComponent)+(c&&c.getTime()>=0?";expires="+c.toUTCString():"")+(s?";domain="+s:"")+(l?";path="+l:"")+(u?";secure":"")+(d?";httponly":"")+(f?";samesite="+f:"")},t.get=function(e){for(var n=document.cookie.split(";");n.length;){var r=n.pop(),o=r.indexOf("=");o=o<0?r.length:o;var i=decodeURIComponent(r.slice(0,o).replace(/^\s+/,""));if(i===e)return decodeURIComponent(r.slice(o+1))}return null},t.erase=function(e,n){t.set(e,"",{expires:-1,domain:n&&n.domain,path:n&&n.path,secure:0,httponly:0})},t.all=function(){for(var e={},n=document.cookie.split(";");n.length;){var r=n.pop(),o=r.indexOf("=");o=o<0?r.length:o;var i=decodeURIComponent(r.slice(0,o).replace(/^\s+/,""));e[i]=decodeURIComponent(r.slice(o+1))}return e}})(browserCookies);var bundle={};(function(exports){(function(t,e){for(var n in e)t[n]=e[n];e.__esModule&&Object.defineProperty(t,"__esModule",{value:!0})})(exports,(()=>{var __webpack_modules__={607:(module,exports,__webpack_require__)=>{Object.defineProperty(exports,"__esModule",{value:!0});var serializer_1=__webpack_require__(810),deserializer_1=__webpack_require__(496),Module;typeof process!="undefined"&&process.release.name==="node"&&(Module=eval("require")("module"));var ESSerializer=function(){function t(){}return t.throwErrorIfInNonNodeEnvironment=function(){if(!Module)throw new Error("Cannot intercept require in non-Node environment.")},t.interceptRequire=function(){this.isRequireIntercepted||(this.isRequireIntercepted=!0,this.throwErrorIfInNonNodeEnvironment(),t.originRequire=Module.prototype.require,Module.prototype.require=function(){var e=t.originRequire.apply(this,arguments),n=e.name;return t.requiredClasses[n]||(t.requiredClasses[n]=e),e})},t.stopInterceptRequire=function(){this.throwErrorIfInNonNodeEnvironment(),Module.prototype.require=t.originRequire,this.isRequireIntercepted=!1},t.isInterceptingRequire=function(){return this.isRequireIntercepted},t.getRequiredClasses=function(){return this.requiredClasses},t.clearRequiredClasses=function(){this.requiredClasses={}},t.registerClass=function(e){this.registeredClasses.push(e)},t.registerClasses=function(e){this.registeredClasses=this.registeredClasses.concat(e)},t.clearRegisteredClasses=function(){this.registeredClasses=[]},t.serialize=function(e,n){return n===void 0&&(n={}),JSON.stringify(serializer_1.getSerializeValueWithClassName(e,n))},t.deserialize=function(e,n,r){return n===void 0&&(n=[]),r===void 0&&(r={}),deserializer_1.deserializeFromParsedObj(JSON.parse(e),Object.values(this.requiredClasses).concat(this.registeredClasses).concat(n),r)},t.originRequire=null,t.isRequireIntercepted=!1,t.requiredClasses={},t.registeredClasses=[],t}();module.exports=ESSerializer},917:function(t,e){var n=this&&this.__spreadArrays||function(){for(var M=0,U=0,Y=arguments.length;U<Y;U++)M+=arguments[U].length;var j=Array(M),V=0;for(U=0;U<Y;U++)for(var W=arguments[U],H=0,K=W.length;H<K;H++,V++)j[V]=W[H];return j};Object.defineProperty(e,"__esModule",{value:!0}),e.TO_STRING_FIELD=e.TIMESTAMP_FIELD=e.OPTIONS_FIELD=e.CLASS_NAME_FIELD=e.BOOLEAN_FIELD=e.ARRAY_FIELD=e.BUILTIN_TYPE_UNDEFINED=e.BUILTIN_TYPE_NOT_FINITE=e.BUILTIN_TYPE_BIG_INT=e.BUILTIN_CLASS_AGGREGATE_ERROR=e.BUILTIN_CLASS_URI_ERROR=e.BUILTIN_CLASS_TYPE_ERROR=e.BUILTIN_CLASS_SYNTAX_ERROR=e.BUILTIN_CLASS_REFERENCE_ERROR=e.BUILTIN_CLASS_RANGE_ERROR=e.BUILTIN_CLASS_EVAL_ERROR=e.BUILTIN_CLASS_ERROR=e.BUILTIN_CLASS_STRING=e.BUILTIN_CLASS_SET=e.BUILTIN_CLASS_REGEXP=e.BUILTIN_CLASS_INTL_RELATIVETIMEFORMAT=e.BUILTIN_CLASS_INTL_PLURALRULES=e.BUILTIN_CLASS_INTL_NUMBERFORMAT=e.BUILTIN_CLASS_INTL_LOCALE=e.BUILTIN_CLASS_INTL_LISTFORMAT=e.BUILTIN_CLASS_INTL_DATETIMEFORMAT=e.BUILTIN_CLASS_INTL_COLLATOR=e.BUILTIN_CLASS_DATE=e.BUILTIN_CLASS_DATAVIEW=e.BUILTIN_CLASS_BOOLEAN=e.BUILTIN_CLASS_SHAREDARRAYBUFFER=e.BUILTIN_CLASS_ARRAYBUFFER=e.BUILTIN_CLASS_BIGUINT64ARRAY=e.BUILTIN_CLASS_BIGINT64ARRAY=e.BUILTIN_CLASS_FLOAT64ARRAY=e.BUILTIN_CLASS_FLOAT32ARRAY=e.BUILTIN_CLASS_UINT32ARRAY=e.BUILTIN_CLASS_INT32ARRAY=e.BUILTIN_CLASS_UINT16ARRAY=e.BUILTIN_CLASS_INT16ARRAY=e.BUILTIN_CLASS_UINT8CLAMPEDARRAY=e.BUILTIN_CLASS_UINT8ARRAY=e.BUILTIN_CLASS_INT8ARRAY=e.CLASSNAMES_WHOSE_ENUMERABLE_PROPERTIES_SHOULD_BE_IGNORED=e.ALL_BUILTIN_INTLS=e.ALL_BUILTIN_ERRORS=e.ALL_BUILTIN_ARRAYS=e.ESSERIALIZER_NULL=void 0,e.ESSERIALIZER_NULL="__ESSERIALIZER_NULL__",e.ARRAY_FIELD="ess_arr",e.BOOLEAN_FIELD="ess_bool",e.CLASS_NAME_FIELD="ess_cn",e.OPTIONS_FIELD="ess_opt",e.TIMESTAMP_FIELD="ess_ts",e.TO_STRING_FIELD="ess_str";var r="Int8Array";e.BUILTIN_CLASS_INT8ARRAY=r;var o="Uint8Array";e.BUILTIN_CLASS_UINT8ARRAY=o;var i="Uint8ClampedArray";e.BUILTIN_CLASS_UINT8CLAMPEDARRAY=i;var a="Int16Array";e.BUILTIN_CLASS_INT16ARRAY=a;var s="Uint16Array";e.BUILTIN_CLASS_UINT16ARRAY=s;var l="Int32Array";e.BUILTIN_CLASS_INT32ARRAY=l;var u="Uint32Array";e.BUILTIN_CLASS_UINT32ARRAY=u;var d="Float32Array";e.BUILTIN_CLASS_FLOAT32ARRAY=d;var f="Float64Array";e.BUILTIN_CLASS_FLOAT64ARRAY=f;var c="BigInt64Array";e.BUILTIN_CLASS_BIGINT64ARRAY=c;var _="BigUint64Array";e.BUILTIN_CLASS_BIGUINT64ARRAY=_,e.BUILTIN_CLASS_ARRAYBUFFER="ArrayBuffer",e.BUILTIN_CLASS_SHAREDARRAYBUFFER="SharedArrayBuffer",e.BUILTIN_CLASS_BOOLEAN="Boolean",e.BUILTIN_CLASS_DATAVIEW="DataView",e.BUILTIN_CLASS_DATE="Date";var m="Collator";e.BUILTIN_CLASS_INTL_COLLATOR=m;var E="DateTimeFormat";e.BUILTIN_CLASS_INTL_DATETIMEFORMAT=E;var I="ListFormat";e.BUILTIN_CLASS_INTL_LISTFORMAT=I,e.BUILTIN_CLASS_INTL_LOCALE="Locale";var g="NumberFormat";e.BUILTIN_CLASS_INTL_NUMBERFORMAT=g;var y="PluralRules";e.BUILTIN_CLASS_INTL_PLURALRULES=y;var T="RelativeTimeFormat";e.BUILTIN_CLASS_INTL_RELATIVETIMEFORMAT=T,e.BUILTIN_CLASS_REGEXP="RegExp",e.BUILTIN_CLASS_SET="Set";var w="String";e.BUILTIN_CLASS_STRING=w;var A="Error";e.BUILTIN_CLASS_ERROR=A;var h="EvalError";e.BUILTIN_CLASS_EVAL_ERROR=h;var v="RangeError";e.BUILTIN_CLASS_RANGE_ERROR=v;var b="ReferenceError";e.BUILTIN_CLASS_REFERENCE_ERROR=b;var D="SyntaxError";e.BUILTIN_CLASS_SYNTAX_ERROR=D;var L="TypeError";e.BUILTIN_CLASS_TYPE_ERROR=L;var S="URIError";e.BUILTIN_CLASS_URI_ERROR=S;var k="AggregateError";e.BUILTIN_CLASS_AGGREGATE_ERROR=k,e.BUILTIN_TYPE_BIG_INT="BI",e.BUILTIN_TYPE_NOT_FINITE="NF",e.BUILTIN_TYPE_UNDEFINED="UD";var F=[r,o,i,a,s,l,u,d,f,c,_];e.ALL_BUILTIN_ARRAYS=F;var G=[A,h,v,b,D,L,S,k];e.ALL_BUILTIN_ERRORS=G;var x=[m,E,I,g,y,T];e.ALL_BUILTIN_INTLS=x;var P=n([w],F);e.CLASSNAMES_WHOSE_ENUMERABLE_PROPERTIES_SHOULD_BE_IGNORED=P},496:function(t,e,n){var r=this&&this.__spreadArrays||function(){for(var g=0,y=0,T=arguments.length;y<T;y++)g+=arguments[y].length;var w=Array(g),A=0;for(y=0;y<T;y++)for(var h=arguments[y],v=0,b=h.length;v<b;v++,A++)w[A]=h[v];return w};Object.defineProperty(e,"__esModule",{value:!0}),e.getParentClassName=e.getClassMappingFromClassArray=e.deserializeFromParsedObjWithClassMapping=e.deserializeFromParsedObj=void 0;var o=n(821),i=n(917),a=/^\s*class\s+/;function s(g,y,T){if(T===void 0&&(T={}),o.notObject(g))return g;if(Array.isArray(g))return l(g,y);var w=g[i.CLASS_NAME_FIELD],A=function(v,b,D){switch(v){case i.BUILTIN_CLASS_INT8ARRAY:return u(b[i.ARRAY_FIELD],Int8Array);case i.BUILTIN_CLASS_UINT8ARRAY:return u(b[i.ARRAY_FIELD],Uint8Array);case i.BUILTIN_CLASS_UINT8CLAMPEDARRAY:return u(b[i.ARRAY_FIELD],Uint8ClampedArray);case i.BUILTIN_CLASS_INT16ARRAY:return u(b[i.ARRAY_FIELD],Int16Array);case i.BUILTIN_CLASS_UINT16ARRAY:return u(b[i.ARRAY_FIELD],Uint16Array);case i.BUILTIN_CLASS_INT32ARRAY:return u(b[i.ARRAY_FIELD],Int32Array);case i.BUILTIN_CLASS_UINT32ARRAY:return u(b[i.ARRAY_FIELD],Uint32Array);case i.BUILTIN_CLASS_FLOAT32ARRAY:return u(b[i.ARRAY_FIELD],Float32Array);case i.BUILTIN_CLASS_FLOAT64ARRAY:return u(b[i.ARRAY_FIELD],Float64Array);case i.BUILTIN_CLASS_BIGINT64ARRAY:return d(b[i.ARRAY_FIELD],BigInt64Array);case i.BUILTIN_CLASS_BIGUINT64ARRAY:return d(b[i.ARRAY_FIELD],BigUint64Array);case i.BUILTIN_TYPE_BIG_INT:return f(b[i.TO_STRING_FIELD]);case i.BUILTIN_TYPE_UNDEFINED:return;case i.BUILTIN_TYPE_NOT_FINITE:return o.getValueFromToStringResult(b[i.TO_STRING_FIELD]);case i.BUILTIN_CLASS_ARRAYBUFFER:return L=b[i.ARRAY_FIELD],new Uint8Array(L).buffer;case i.BUILTIN_CLASS_SHAREDARRAYBUFFER:return function(S){var k=new SharedArrayBuffer(S.length),F=new Uint8Array(k);return S.forEach(function(G,x){F[x]=G}),k}(b[i.ARRAY_FIELD]);case i.BUILTIN_CLASS_BOOLEAN:return function(S){return new Boolean(S[i.BOOLEAN_FIELD])}(b);case i.BUILTIN_CLASS_DATAVIEW:return function(S){return new DataView(new Uint8Array(S).buffer)}(b[i.ARRAY_FIELD]);case i.BUILTIN_CLASS_DATE:return function(S){return typeof S[i.TIMESTAMP_FIELD]=="number"?new Date(S[i.TIMESTAMP_FIELD]):null}(b);case i.BUILTIN_CLASS_INTL_COLLATOR:return c(b,Intl.Collator);case i.BUILTIN_CLASS_INTL_DATETIMEFORMAT:return c(b,Intl.DateTimeFormat);case i.BUILTIN_CLASS_INTL_LISTFORMAT:return c(b,Intl.ListFormat);case i.BUILTIN_CLASS_INTL_LOCALE:return new Intl.Locale(b[i.TO_STRING_FIELD]);case i.BUILTIN_CLASS_INTL_NUMBERFORMAT:return c(b,Intl.NumberFormat);case i.BUILTIN_CLASS_INTL_PLURALRULES:return c(b,Intl.PluralRules);case i.BUILTIN_CLASS_INTL_RELATIVETIMEFORMAT:return c(b,Intl.RelativeTimeFormat);case i.BUILTIN_CLASS_REGEXP:return function(S){var k=S[i.TO_STRING_FIELD],F=k.lastIndexOf("/");return new RegExp(k.substring(1,F),k.substring(F+1))}(b);case i.BUILTIN_CLASS_SET:return function(S,k){return new Set(l(S[i.ARRAY_FIELD],k))}(b,D);case i.BUILTIN_CLASS_STRING:return function(S){return new String(S[i.TO_STRING_FIELD])}(b);case i.BUILTIN_CLASS_ERROR:return _(b,Error);case i.BUILTIN_CLASS_EVAL_ERROR:return _(b,EvalError);case i.BUILTIN_CLASS_RANGE_ERROR:return _(b,RangeError);case i.BUILTIN_CLASS_REFERENCE_ERROR:return _(b,ReferenceError);case i.BUILTIN_CLASS_SYNTAX_ERROR:return _(b,SyntaxError);case i.BUILTIN_CLASS_TYPE_ERROR:return _(b,TypeError);case i.BUILTIN_CLASS_URI_ERROR:return _(b,URIError);case i.BUILTIN_CLASS_AGGREGATE_ERROR:return _(b,AggregateError);default:return i.ESSERIALIZER_NULL}var L}(w,g,y);if(A!==i.ESSERIALIZER_NULL)return A;if(w&&!y[w])throw new Error("Class "+w+" not found");var h=[];return T.fieldsForConstructorParameters&&(h=T.fieldsForConstructorParameters.map(function(v){return v in g?g[v]:{}})),function(v,b,D,L){for(var S in b){var k=b[S];if(!L.ignoreProperties||!L.ignoreProperties.includes(S))if(L.rawProperties&&L.rawProperties.includes(S))v[S]=JSON.stringify(k);else{var F=Object.getOwnPropertyDescriptor(v,S);G=k,x=F,S===i.CLASS_NAME_FIELD||x&&(typeof x.set=="function"||x.writable===!1&&typeof G!="object")||(F&&F.writable===!1&&typeof k=="object"?E(v[S],k,D):v[S]=s(k,D))}}var G,x;return v}(function(v,b){var D={};if(!v)return D;var L=v.length-b.length;if(L>0&&(b=b.concat(Array.from(Array(L),function(){return{}}))),a.test(v.toString()))try{D=new(v.bind.apply(v,r([void 0],b)))}catch{m(v.name),D={},Object.setPrototypeOf(D,v?v.prototype:Object.prototype)}else{D=Object.create(v.prototype.constructor.prototype);try{v.prototype.constructor.call(D,b)}catch{m(v.name)}}return D}(y[w],h),g,y,T)}function l(g,y){return g.map(function(T){return s(T,y)})}function u(g,y){return new y(g)}function d(g,y){return new y(g.map(function(T){return f(T[i.TO_STRING_FIELD])}))}function f(g){return BigInt(g)}function c(g,y){var T=g[i.OPTIONS_FIELD],w=T.locale;return delete T.locale,new y(w,T)}function _(g,y){var T;return delete(T=g.message?new y(g.message):new y).stack,g.name&&(T.name=g.name),g.stack&&(T.stack=g.stack),y===AggregateError&&(T.errors=s(g.errors,{})),T}function m(g){console.warn("Incorrect parameter type passed to constructor: "+g)}function E(g,y,T){for(var w in y){var A=Object.getOwnPropertyDescriptor(g,w);A&&A.writable!==!0&&typeof A.set!="function"||(g[w]=s(y[w],T))}}function I(g){g===void 0&&(g=[]);var y={};return g.forEach(function(T){if(o.isClass(T)){var w=T.name,A=y[w];A&&A!==T&&console.warn("WARNING: Found class definition with the same name: "+w),y[w]=T}}),y}e.deserializeFromParsedObj=function(g,y,T){return s(g,I(y),T)},e.deserializeFromParsedObjWithClassMapping=s,e.getClassMappingFromClassArray=I,e.getParentClassName=function(g){return g.prototype.__proto__.constructor.name}},821:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.isClass=e.notObject=e.getValueFromToStringResult=void 0,e.notObject=function(n){return n===null||typeof n!="object"},e.getValueFromToStringResult=function(n){switch(n){case"Infinity":return 1/0;case"-Infinity":return-1/0;case"NaN":return NaN;default:return null}},e.isClass=function(n){if(function(r){return[Date].indexOf(r)>=0}(n))return!0;try{Reflect.construct(String,[],n)}catch{return!1}return!0}},810:(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.getSerializeValueWithClassName=void 0;var r=n(917),o=n(821);function i(s,l){l===void 0&&(l={});var u=function(_){var m,E,I;return _===void 0?((m={})[r.CLASS_NAME_FIELD]=r.BUILTIN_TYPE_UNDEFINED,m):typeof _!="number"||isFinite(_)?typeof _=="bigint"?((I={})[r.CLASS_NAME_FIELD]=r.BUILTIN_TYPE_BIG_INT,I[r.TO_STRING_FIELD]=_.toString(),I):o.notObject(_)?_:r.ESSERIALIZER_NULL:((E={})[r.CLASS_NAME_FIELD]=r.BUILTIN_TYPE_NOT_FINITE,E[r.TO_STRING_FIELD]=_.toString(),E)}(s);if(u!==r.ESSERIALIZER_NULL)return u;if(Array.isArray(s))return a(s);var d={};if(!function(_){var m=_.__proto__.constructor.name;return r.CLASSNAMES_WHOSE_ENUMERABLE_PROPERTIES_SHOULD_BE_IGNORED.includes(m)}(s)){if(l.ignoreProperties&&l.ignoreProperties.forEach(function(_){delete s[_]}),l.interceptProperties)for(var f in l.interceptProperties)s[f]=l.interceptProperties[f].call(s,s[f]);for(var c in s)d[c]=i(s[c])}return function(_,m){var E=_.__proto__.constructor.name;return E!=="Object"&&(m[r.CLASS_NAME_FIELD]=E,E===r.BUILTIN_CLASS_ARRAYBUFFER||E===r.BUILTIN_CLASS_SHAREDARRAYBUFFER?m[r.ARRAY_FIELD]=a(Array.from(new Uint8Array(_))):E===r.BUILTIN_CLASS_BOOLEAN?m[r.BOOLEAN_FIELD]=_.valueOf():E===r.BUILTIN_CLASS_DATAVIEW?m[r.ARRAY_FIELD]=a(Array.from(new Uint8Array(_.buffer))):E===r.BUILTIN_CLASS_DATE?m[r.TIMESTAMP_FIELD]=_.getTime():E===r.BUILTIN_CLASS_INTL_LOCALE||E===r.BUILTIN_CLASS_REGEXP?m[r.TO_STRING_FIELD]=_.toString():E===r.BUILTIN_CLASS_SET?m[r.ARRAY_FIELD]=a(Array.from(_)):E===r.BUILTIN_CLASS_STRING?m[r.TO_STRING_FIELD]=_.toString():r.ALL_BUILTIN_ARRAYS.includes(E)?m[r.ARRAY_FIELD]=a(Array.from(_)):r.ALL_BUILTIN_ERRORS.includes(E)?function(I,g,y){I.name!=="Error"&&(g.name=I.name),I.message&&(g.message=I.message),I.stack&&(g.stack=I.stack),y===r.BUILTIN_CLASS_AGGREGATE_ERROR&&(g.errors=i(I.errors))}(_,m,E):r.ALL_BUILTIN_INTLS.includes(E)&&(m[r.OPTIONS_FIELD]=_.resolvedOptions())),m}(s,d)}function a(s){return s.map(function(l){return i(l)})}e.getSerializeValueWithClassName=i}},__webpack_module_cache__={};function __webpack_require__(t){if(__webpack_module_cache__[t])return __webpack_module_cache__[t].exports;var e=__webpack_module_cache__[t]={exports:{}};return __webpack_modules__[t].call(e.exports,e,e.exports,__webpack_require__),e.exports}return __webpack_require__(607)})())})(bundle);var ESSerializer=getDefaultExportFromCjs(bundle);function idbReady(){if(!(!navigator.userAgentData&&/Safari\//.test(navigator.userAgent)&&!/Chrom(e|ium)\//.test(navigator.userAgent))||!indexedDB.databases)return Promise.resolve();let e;return new Promise(n=>{const r=()=>indexedDB.databases().finally(n);e=setInterval(r,100),r()}).finally(()=>clearInterval(e))}function promisifyRequest(t){return new Promise((e,n)=>{t.oncomplete=t.onsuccess=()=>e(t.result),t.onabort=t.onerror=()=>n(t.error)})}function createStore(t,e){const n=idbReady().then(()=>{const r=indexedDB.open(t);return r.onupgradeneeded=()=>r.result.createObjectStore(e),promisifyRequest(r)});return(r,o)=>n.then(i=>o(i.transaction(e,r).objectStore(e)))}let defaultGetStoreFunc;function defaultGetStore(){return defaultGetStoreFunc||(defaultGetStoreFunc=createStore("keyval-store","keyval")),defaultGetStoreFunc}function get(t,e=defaultGetStore()){return e("readonly",n=>promisifyRequest(n.get(t)))}function set(t,e,n=defaultGetStore()){return n("readwrite",r=>(r.put(e,t),promisifyRequest(r.transaction)))}function del(t,e=defaultGetStore()){return e("readwrite",n=>(n.delete(t),promisifyRequest(n.transaction)))}const alreadyWarnFor=[],warnStorageNotFound=t=>{var e;const n=typeof process!="undefined"&&((e=process.env)===null||e===void 0?void 0:e.NODE_ENV)==="production";if(alreadyWarnFor.indexOf(t)===-1&&!n){let r=`Unable to find the ${t}. No data will be persisted.`;typeof window=="undefined"&&(r+=`
Are you running on a server? Most of storages are not available while running on a server.`),console.warn(r),alreadyWarnFor.push(t)}},allowedClasses=[],serialize=t=>ESSerializer.serialize(t),deserialize=t=>{if(t!=="undefined"){if(t!=null){try{return ESSerializer.deserialize(t,allowedClasses)}catch{}try{return JSON.parse(t)}catch{}}return t}};function persist(t,e,n){const r=e.getValue(n);return r!==null&&t.set(r),e.addListener&&e.addListener(n,o=>{t.set(o)}),t.subscribe(o=>{e.setValue(n,o)}),Object.assign(Object.assign({},t),{delete(){e.deleteValue(n)}})}function indexedDBStorage(){if(typeof indexedDB!="object"||typeof window=="undefined"||typeof(window==null?void 0:window.indexedDB)!="object")return warnStorageNotFound("IndexedDB"),noopSelfUpdateStorage();const t=createStore("svelte-persist","persist"),e=[],n=(r,o)=>{o!==void 0&&e.filter(({key:i})=>i===r).forEach(({listener:i})=>i(o))};return{addListener(r,o){e.push({key:r,listener:o})},removeListener(r,o){const i=e.indexOf({key:r,listener:o});i!==-1&&e.splice(i,1)},getValue(r){return get(r,t).then(o=>n(r,deserialize(o))),null},setValue(r,o){set(r,serialize(o),t)},deleteValue(r){del(r,t)}}}function noopSelfUpdateStorage(){return{addListener(){},removeListener(){},getValue(){return null},deleteValue(){},setValue(){}}}const subscriptionsStore=persist(writable(),indexedDBStorage(),"subscriptions"),settingsStore=writable(),editorVisible=writable(!1),playerStore=writable();function create_default_slot_2$3(t){let e;return{c(){e=element("a"),e.textContent="YouTube Video Deck",attr(e,"class","font-extrabold"),attr(e,"href","#")},m(n,r){insert(n,e,r)},p:noop,d(n){n&&detach(e)}}}function create_if_block_1$3(t){let e,n;return e=new PrimaryButton({props:{class:"w-20 m-1",$$slots:{default:[create_default_slot_1$3]},$$scope:{ctx:t}}}),e.$on("click",t[4]),{c(){create_component(e.$$.fragment)},m(r,o){mount_component(e,r,o),n=!0},p(r,o){const i={};o&64&&(i.$$scope={dirty:o,ctx:r}),e.$set(i)},i(r){n||(transition_in(e.$$.fragment,r),n=!0)},o(r){transition_out(e.$$.fragment,r),n=!1},d(r){destroy_component(e,r)}}}function create_default_slot_1$3(t){let e;return{c(){e=text("Edit")},m(n,r){insert(n,e,r)},d(n){n&&detach(e)}}}function create_before_slot(t){let e,n,r=t[1]&&t[2]&&t[3]&&create_if_block_1$3(t);return{c(){e=element("div"),r&&r.c(),attr(e,"slot","before"),attr(e,"class","float-left p-1")},m(o,i){insert(o,e,i),r&&r.m(e,null),n=!0},p(o,i){o[1]&&o[2]&&o[3]?r?(r.p(o,i),i&14&&transition_in(r,1)):(r=create_if_block_1$3(o),r.c(),transition_in(r,1),r.m(e,null)):r&&(group_outros(),transition_out(r,1,1,()=>{r=null}),check_outros())},i(o){n||(transition_in(r),n=!0)},o(o){transition_out(r),n=!1},d(o){o&&detach(e),r&&r.d()}}}function create_if_block$5(t){let e,n;return e=new PrimaryButton({props:{class:"w-20 m-1",$$slots:{default:[create_default_slot$4]},$$scope:{ctx:t}}}),e.$on("click",signOut),{c(){create_component(e.$$.fragment)},m(r,o){mount_component(e,r,o),n=!0},p(r,o){const i={};o&64&&(i.$$scope={dirty:o,ctx:r}),e.$set(i)},i(r){n||(transition_in(e.$$.fragment,r),n=!0)},o(r){transition_out(e.$$.fragment,r),n=!1},d(r){destroy_component(e,r)}}}function create_default_slot$4(t){let e;return{c(){e=text("Sign out")},m(n,r){insert(n,e,r)},d(n){n&&detach(e)}}}function create_after_slot(t){let e,n,r=t[0]&&create_if_block$5(t);return{c(){e=element("div"),r&&r.c(),attr(e,"slot","after"),attr(e,"class","float-right p-1")},m(o,i){insert(o,e,i),r&&r.m(e,null),n=!0},p(o,i){o[0]?r?(r.p(o,i),i&1&&transition_in(r,1)):(r=create_if_block$5(o),r.c(),transition_in(r,1),r.m(e,null)):r&&(group_outros(),transition_out(r,1,1,()=>{r=null}),check_outros())},i(o){n||(transition_in(r),n=!0)},o(o){transition_out(r),n=!1},d(o){o&&detach(e),r&&r.d()}}}function create_fragment$9(t){let e,n,r;return n=new Center({props:{$$slots:{after:[create_after_slot],before:[create_before_slot],default:[create_default_slot_2$3]},$$scope:{ctx:t}}}),{c(){e=element("header"),create_component(n.$$.fragment),attr(e,"class","w-full h-12")},m(o,i){insert(o,e,i),mount_component(n,e,null),r=!0},p(o,[i]){const a={};i&79&&(a.$$scope={dirty:i,ctx:o}),n.$set(a)},i(o){r||(transition_in(n.$$.fragment,o),r=!0)},o(o){transition_out(n.$$.fragment,o),r=!1},d(o){o&&detach(e),destroy_component(n)}}}function signOut(){gapi.auth2.getAuthInstance().signOut()}function instance$9(t,e,n){let r,o,i;component_subscribe(t,editorVisible,u=>n(5,r=u)),component_subscribe(t,settingsStore,u=>n(2,o=u)),component_subscribe(t,subscriptionsStore,u=>n(3,i=u));let{isSignedIn:a}=e,{isAuthorized:s}=e;function l(){set_store_value(editorVisible,r=!0,r)}return t.$$set=u=>{"isSignedIn"in u&&n(0,a=u.isSignedIn),"isAuthorized"in u&&n(1,s=u.isAuthorized)},[a,s,o,i,l]}class Header extends SvelteComponent{constructor(e){super(),init(this,e,instance$9,create_fragment$9,safe_not_equal,{isSignedIn:0,isAuthorized:1})}}function Video(t){return{title:t.snippet.title,description:t.snippet.description.substring(0,275),publishedAt:t.snippet.publishedAt,thumbnailUrl:t.snippet.thumbnails.medium.url,videoId:t.snippet.resourceId.videoId}}function Subscription(t,e){return{channelId:t.snippet.resourceId.channelId,title:t.snippet.title,thumbnailUrl:t.snippet.thumbnails.default.url,uploadsPlaylistId:e.contentDetails.relatedPlaylists.uploads,uploads:[]}}function setUploads(t,e){t.uploadsEtag=e.etag,t.nextUploadPageToken=e.nextPageToken,t.uploads=e.items.map(Video)}function addUploads(t,e){t.nextUploadPageToken=e.nextPageToken,e.items.forEach(n=>t.uploads.push(Video(n)))}function Subscriptions(t,e){return{etag:t.etag,items:t.items.flatMap(n=>n.map(r=>{const o=e.get(r.snippet.resourceId.channelId);return Subscription(r,o)}))}}var defaultLocale$1="en",localesData$1={},lowercaseLocaleLookup={};function getDefaultLocale(){return defaultLocale$1}function setDefaultLocale(t){defaultLocale$1=t}function getLocaleData$1(t){return localesData$1[t]}function addLocaleData$1(t){if(!t)throw new Error("No locale data passed");localesData$1[t.locale]=t,lowercaseLocaleLookup[t.locale.toLowerCase()]=t.locale}function resolveLocale$1(t){if(localesData$1[t])return t;if(lowercaseLocaleLookup[t.toLowerCase()])return lowercaseLocaleLookup[t.toLowerCase()]}function resolveLocale(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=e.localeMatcher||"lookup";switch(n){case"lookup":return resolveLocaleLookup(t);case"best fit":return resolveLocaleLookup(t);default:throw new RangeError('Invalid "localeMatcher" option: '.concat(n))}}function resolveLocaleLookup(t){var e=resolveLocale$1(t);if(e)return e;for(var n=t.split("-");t.length>1;){n.pop(),t=n.join("-");var r=resolveLocale$1(t);if(r)return r}}var $={af:function t(e){return e==1?"one":"other"},am:function t(e){return e>=0&&e<=1?"one":"other"},ar:function t(e){var n=String(e).split("."),r=Number(n[0])==e,o=r&&n[0].slice(-2);return e==0?"zero":e==1?"one":e==2?"two":o>=3&&o<=10?"few":o>=11&&o<=99?"many":"other"},ast:function t(e){var n=String(e).split("."),r=!n[1];return e==1&&r?"one":"other"},be:function t(e){var n=String(e).split("."),r=Number(n[0])==e,o=r&&n[0].slice(-1),i=r&&n[0].slice(-2);return o==1&&i!=11?"one":o>=2&&o<=4&&(i<12||i>14)?"few":r&&o==0||o>=5&&o<=9||i>=11&&i<=14?"many":"other"},br:function t(e){var n=String(e).split("."),r=Number(n[0])==e,o=r&&n[0].slice(-1),i=r&&n[0].slice(-2),a=r&&n[0].slice(-6);return o==1&&i!=11&&i!=71&&i!=91?"one":o==2&&i!=12&&i!=72&&i!=92?"two":(o==3||o==4||o==9)&&(i<10||i>19)&&(i<70||i>79)&&(i<90||i>99)?"few":e!=0&&r&&a==0?"many":"other"},bs:function t(e){var n=String(e).split("."),r=n[0],o=n[1]||"",i=!n[1],a=r.slice(-1),s=r.slice(-2),l=o.slice(-1),u=o.slice(-2);return i&&a==1&&s!=11||l==1&&u!=11?"one":i&&a>=2&&a<=4&&(s<12||s>14)||l>=2&&l<=4&&(u<12||u>14)?"few":"other"},ceb:function t(e){var n=String(e).split("."),r=n[0],o=n[1]||"",i=!n[1],a=r.slice(-1),s=o.slice(-1);return i&&(r==1||r==2||r==3)||i&&a!=4&&a!=6&&a!=9||!i&&s!=4&&s!=6&&s!=9?"one":"other"},cs:function t(e){var n=String(e).split("."),r=n[0],o=!n[1];return e==1&&o?"one":r>=2&&r<=4&&o?"few":o?"other":"many"},cy:function t(e){return e==0?"zero":e==1?"one":e==2?"two":e==3?"few":e==6?"many":"other"},da:function t(e){var n=String(e).split("."),r=n[0],o=Number(n[0])==e;return e==1||!o&&(r==0||r==1)?"one":"other"},dsb:function t(e){var n=String(e).split("."),r=n[0],o=n[1]||"",i=!n[1],a=r.slice(-2),s=o.slice(-2);return i&&a==1||s==1?"one":i&&a==2||s==2?"two":i&&(a==3||a==4)||s==3||s==4?"few":"other"},dz:function t(e){return"other"},es:function t(e){var n=String(e).split("."),r=n[0],o=!n[1],i=r.slice(-6);return e==1?"one":r!=0&&i==0&&o?"many":"other"},ff:function t(e){return e>=0&&e<2?"one":"other"},fr:function t(e){var n=String(e).split("."),r=n[0],o=!n[1],i=r.slice(-6);return e>=0&&e<2?"one":r!=0&&i==0&&o?"many":"other"},ga:function t(e){var n=String(e).split("."),r=Number(n[0])==e;return e==1?"one":e==2?"two":r&&e>=3&&e<=6?"few":r&&e>=7&&e<=10?"many":"other"},gd:function t(e){var n=String(e).split("."),r=Number(n[0])==e;return e==1||e==11?"one":e==2||e==12?"two":r&&e>=3&&e<=10||r&&e>=13&&e<=19?"few":"other"},he:function t(e){var n=String(e).split("."),r=n[0],o=!n[1],i=Number(n[0])==e,a=i&&n[0].slice(-1);return e==1&&o?"one":r==2&&o?"two":o&&(e<0||e>10)&&i&&a==0?"many":"other"},is:function t(e){var n=String(e).split("."),r=n[0],o=Number(n[0])==e,i=r.slice(-1),a=r.slice(-2);return o&&i==1&&a!=11||!o?"one":"other"},it:function t(e){var n=String(e).split("."),r=n[0],o=!n[1],i=r.slice(-6);return e==1&&o?"one":r!=0&&i==0&&o?"many":"other"},ksh:function t(e){return e==0?"zero":e==1?"one":"other"},lt:function t(e){var n=String(e).split("."),r=n[1]||"",o=Number(n[0])==e,i=o&&n[0].slice(-1),a=o&&n[0].slice(-2);return i==1&&(a<11||a>19)?"one":i>=2&&i<=9&&(a<11||a>19)?"few":r!=0?"many":"other"},lv:function t(e){var n=String(e).split("."),r=n[1]||"",o=r.length,i=Number(n[0])==e,a=i&&n[0].slice(-1),s=i&&n[0].slice(-2),l=r.slice(-2),u=r.slice(-1);return i&&a==0||s>=11&&s<=19||o==2&&l>=11&&l<=19?"zero":a==1&&s!=11||o==2&&u==1&&l!=11||o!=2&&u==1?"one":"other"},mk:function t(e){var n=String(e).split("."),r=n[0],o=n[1]||"",i=!n[1],a=r.slice(-1),s=r.slice(-2),l=o.slice(-1),u=o.slice(-2);return i&&a==1&&s!=11||l==1&&u!=11?"one":"other"},mt:function t(e){var n=String(e).split("."),r=Number(n[0])==e,o=r&&n[0].slice(-2);return e==1?"one":e==0||o>=2&&o<=10?"few":o>=11&&o<=19?"many":"other"},pa:function t(e){return e==0||e==1?"one":"other"},pl:function t(e){var n=String(e).split("."),r=n[0],o=!n[1],i=r.slice(-1),a=r.slice(-2);return e==1&&o?"one":o&&i>=2&&i<=4&&(a<12||a>14)?"few":o&&r!=1&&(i==0||i==1)||o&&i>=5&&i<=9||o&&a>=12&&a<=14?"many":"other"},pt:function t(e){var n=String(e).split("."),r=n[0],o=!n[1],i=r.slice(-6);return r==0||r==1?"one":r!=0&&i==0&&o?"many":"other"},ro:function t(e){var n=String(e).split("."),r=!n[1],o=Number(n[0])==e,i=o&&n[0].slice(-2);return e==1&&r?"one":!r||e==0||i>=2&&i<=19?"few":"other"},ru:function t(e){var n=String(e).split("."),r=n[0],o=!n[1],i=r.slice(-1),a=r.slice(-2);return o&&i==1&&a!=11?"one":o&&i>=2&&i<=4&&(a<12||a>14)?"few":o&&i==0||o&&i>=5&&i<=9||o&&a>=11&&a<=14?"many":"other"},se:function t(e){return e==1?"one":e==2?"two":"other"},si:function t(e){var n=String(e).split("."),r=n[0],o=n[1]||"";return e==0||e==1||r==0&&o==1?"one":"other"},sl:function t(e){var n=String(e).split("."),r=n[0],o=!n[1],i=r.slice(-2);return o&&i==1?"one":o&&i==2?"two":o&&(i==3||i==4)||!o?"few":"other"}};$.as=$.am;$.az=$.af;$.bg=$.af;$.bn=$.am;$.brx=$.af;$.ca=$.ast;$.ce=$.af;$.chr=$.af;$.de=$.ast;$.ee=$.af;$.el=$.af;$.en=$.ast;$.et=$.ast;$.eu=$.af;$.fa=$.am;$.fi=$.ast;$.fil=$.ceb;$.fo=$.af;$.fur=$.af;$.fy=$.ast;$.gl=$.ast;$.gu=$.am;$.ha=$.af;$.hi=$.am;$.hr=$.bs;$.hsb=$.dsb;$.hu=$.af;$.hy=$.ff;$.ia=$.ast;$.id=$.dz;$.ig=$.dz;$.ja=$.dz;$.jgo=$.af;$.jv=$.dz;$.ka=$.af;$.kea=$.dz;$.kk=$.af;$.kl=$.af;$.km=$.dz;$.kn=$.am;$.ko=$.dz;$.ku=$.af;$.ky=$.af;$.lb=$.af;$.lkt=$.dz;$.lo=$.dz;$.ml=$.af;$.mn=$.af;$.mr=$.af;$.ms=$.dz;$.my=$.dz;$.nb=$.af;$.ne=$.af;$.nl=$.ast;$.nn=$.af;$.no=$.af;$.or=$.af;$.pcm=$.am;$.ps=$.af;$.rm=$.af;$.sah=$.dz;$.sc=$.ast;$.sd=$.af;$.sk=$.cs;$.so=$.af;$.sq=$.af;$.sr=$.bs;$.su=$.dz;$.sv=$.ast;$.sw=$.ast;$.ta=$.af;$.te=$.af;$.th=$.dz;$.ti=$.pa;$.tk=$.af;$.to=$.dz;$.tr=$.af;$.ug=$.af;$.uk=$.ru;$.ur=$.ast;$.uz=$.af;$.vi=$.dz;$.wae=$.af;$.wo=$.dz;$.yi=$.ast;$.yo=$.dz;$.yue=$.dz;$.zh=$.dz;$.zu=$.am;var PluralRuleFunctions=$;function getPluralRulesLocale(t){return t==="pt-PT"?t:getLanguageFromLanguageTag(t)}var LANGUAGE_REG_EXP=/^([a-z0-9]+)/i;function getLanguageFromLanguageTag(t){var e=t.match(LANGUAGE_REG_EXP);if(!e)throw new TypeError("Invalid locale: ".concat(t));return e[1]}function _classCallCheck$3(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _defineProperties$3(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function _createClass$3(t,e,n){return e&&_defineProperties$3(t.prototype,e),n&&_defineProperties$3(t,n),t}var PluralRules=function(){function t(e,n){_classCallCheck$3(this,t);var r=t.supportedLocalesOf(e);if(r.length===0)throw new RangeError("Unsupported locale: "+e);if(n&&n.type!=="cardinal")throw new RangeError('Only "cardinal" "type" is supported');this.$=PluralRuleFunctions[getPluralRulesLocale(r[0])]}return _createClass$3(t,[{key:"select",value:function(n){return this.$(n)}}],[{key:"supportedLocalesOf",value:function(n){return typeof n=="string"&&(n=[n]),n.filter(function(r){return PluralRuleFunctions[getPluralRulesLocale(r)]})}}]),t}();function _typeof$5(t){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?_typeof$5=function(n){return typeof n}:_typeof$5=function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},_typeof$5(t)}function _objectSpread$9(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{},r=Object.keys(n);typeof Object.getOwnPropertySymbols=="function"&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(o){return Object.getOwnPropertyDescriptor(n,o).enumerable}))),r.forEach(function(o){_defineProperty$b(t,o,n[o])})}return t}function _slicedToArray$1(t,e){return _arrayWithHoles$1(t)||_iterableToArrayLimit$1(t,e)||_nonIterableRest$1()}function _nonIterableRest$1(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function _iterableToArrayLimit$1(t,e){var n=[],r=!0,o=!1,i=void 0;try{for(var a=t[Symbol.iterator](),s;!(r=(s=a.next()).done)&&(n.push(s.value),!(e&&n.length===e));r=!0);}catch(l){o=!0,i=l}finally{try{!r&&a.return!=null&&a.return()}finally{if(o)throw i}}return n}function _arrayWithHoles$1(t){if(Array.isArray(t))return t}function _classCallCheck$2(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _defineProperties$2(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function _createClass$2(t,e,n){return e&&_defineProperties$2(t.prototype,e),n&&_defineProperties$2(t,n),t}function _defineProperty$b(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var UNITS=["second","minute","hour","day","week","month","quarter","year"],NUMERIC_VALUES=["auto","always"],STYLE_VALUES=["long","short","narrow"],LOCALE_MATCHER_VALUES=["lookup","best fit"],RelativeTimeFormat=function(){function t(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};_classCallCheck$2(this,t),_defineProperty$b(this,"numeric","always"),_defineProperty$b(this,"style","long"),_defineProperty$b(this,"localeMatcher","lookup");var r=n.numeric,o=n.style,i=n.styleFallback,a=n.localeMatcher;if(r!==void 0){if(NUMERIC_VALUES.indexOf(r)<0)throw new RangeError('Invalid "numeric" option: '.concat(r));this.numeric=r}if(o!==void 0){if(STYLE_VALUES.indexOf(o)<0&&!i)throw new RangeError('Invalid "style" option: '.concat(o));this.style=o}if(a!==void 0){if(LOCALE_MATCHER_VALUES.indexOf(a)<0)throw new RangeError('Invalid "localeMatcher" option: '.concat(a));this.localeMatcher=a}if(typeof e=="string"&&(e=[e]),e.push(getDefaultLocale()),this.locale=t.supportedLocalesOf(e,{localeMatcher:this.localeMatcher})[0],!this.locale)throw new Error("No supported locale was found");if(PluralRules.supportedLocalesOf(this.locale).length>0?this.pluralRules=new PluralRules(this.locale):console.warn('"'.concat(this.locale,'" locale is not supported')),typeof Intl!="undefined"&&Intl.NumberFormat?(this.numberFormat=new Intl.NumberFormat(this.locale),this.numberingSystem=this.numberFormat.resolvedOptions().numberingSystem):this.numberingSystem="latn",this.locale=resolveLocale(this.locale,{localeMatcher:this.localeMatcher}),i)for(var s=Object.keys(getLocaleData$1(this.locale)),l=[this.style].concat(STYLE_VALUES,[s[0]]),u=0;u<l.length;u++){var d=l[u];if(s.indexOf(d)>=0){this.style=d;break}}}return _createClass$2(t,[{key:"format",value:function(){var n=parseFormatArgs(arguments),r=_slicedToArray$1(n,2),o=r[0],i=r[1];return this.getRule(o,i).replace("{0}",this.formatNumber(Math.abs(o)))}},{key:"formatToParts",value:function(){var n=parseFormatArgs(arguments),r=_slicedToArray$1(n,2),o=r[0],i=r[1],a=this.getRule(o,i),s=a.indexOf("{0}");if(s<0)return[{type:"literal",value:a}];var l=[];return s>0&&l.push({type:"literal",value:a.slice(0,s)}),l=l.concat(this.formatNumberToParts(Math.abs(o)).map(function(u){return _objectSpread$9({},u,{unit:i})})),s+3<a.length-1&&l.push({type:"literal",value:a.slice(s+3)}),l}},{key:"getRule",value:function(n,r){var o=getLocaleData$1(this.locale)[this.style][r];if(typeof o=="string")return o;if(this.numeric==="auto"){if(n===-2||n===-1){var i=o["previous".concat(n===-1?"":"-"+Math.abs(n))];if(i)return i}else if(n===1||n===2){var a=o["next".concat(n===1?"":"-"+Math.abs(n))];if(a)return a}else if(n===0&&o.current)return o.current}var s=o[isNegative(n)?"past":"future"];if(typeof s=="string")return s;var l=this.pluralRules&&this.pluralRules.select(Math.abs(n))||"other";return s[l]||s.other}},{key:"formatNumber",value:function(n){return this.numberFormat?this.numberFormat.format(n):String(n)}},{key:"formatNumberToParts",value:function(n){return this.numberFormat&&this.numberFormat.formatToParts?this.numberFormat.formatToParts(n):[{type:"integer",value:this.formatNumber(n)}]}},{key:"resolvedOptions",value:function(){return{locale:this.locale,style:this.style,numeric:this.numeric,numberingSystem:this.numberingSystem}}}]),t}();RelativeTimeFormat.supportedLocalesOf=function(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(typeof t=="string")t=[t];else if(!Array.isArray(t))throw new TypeError('Invalid "locales" argument');return t.filter(function(n){return resolveLocale(n,e)})};RelativeTimeFormat.addLocale=addLocaleData$1;RelativeTimeFormat.setDefaultLocale=setDefaultLocale;RelativeTimeFormat.getDefaultLocale=getDefaultLocale;RelativeTimeFormat.PluralRules=PluralRules;var UNIT_ERROR='Invalid "unit" argument';function parseUnit(t){if(_typeof$5(t)==="symbol")throw new TypeError(UNIT_ERROR);if(typeof t!="string")throw new RangeError("".concat(UNIT_ERROR,": ").concat(t));if(t[t.length-1]==="s"&&(t=t.slice(0,t.length-1)),UNITS.indexOf(t)<0)throw new RangeError("".concat(UNIT_ERROR,": ").concat(t));return t}var NUMBER_ERROR='Invalid "number" argument';function parseNumber$1(t){if(t=Number(t),Number.isFinite&&!Number.isFinite(t))throw new RangeError("".concat(NUMBER_ERROR,": ").concat(t));return t}function isNegativeZero(t){return 1/t===-1/0}function isNegative(t){return t<0||t===0&&isNegativeZero(t)}function parseFormatArgs(t){if(t.length<2)throw new TypeError('"unit" argument is required');return[parseNumber$1(t[0]),parseUnit(t[1])]}function _typeof$4(t){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?_typeof$4=function(n){return typeof n}:_typeof$4=function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},_typeof$4(t)}function _classCallCheck$1(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _defineProperties$1(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function _createClass$1(t,e,n){return e&&_defineProperties$1(t.prototype,e),n&&_defineProperties$1(t,n),t}function _defineProperty$a(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var Cache=function(){function t(){_classCallCheck$1(this,t),_defineProperty$a(this,"cache",{})}return _createClass$1(t,[{key:"get",value:function(){for(var n=this.cache,r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];for(var a=0;a<o.length;a++){var s=o[a];if(_typeof$4(n)!=="object")return;n=n[s]}return n}},{key:"put",value:function(){for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];for(var i=r.pop(),a=r.pop(),s=this.cache,l=0;l<r.length;l++){var u=r[l];_typeof$4(s[u])!=="object"&&(s[u]={}),s=s[u]}return s[a]=i}}]),t}();function _typeof$3(t){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?_typeof$3=function(n){return typeof n}:_typeof$3=function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},_typeof$3(t)}function chooseLocale(t,e){for(var o=t,n=Array.isArray(o),r=0,o=n?o:o[Symbol.iterator]();;){var i;if(n){if(r>=o.length)break;i=o[r++]}else{if(r=o.next(),r.done)break;i=r.value}var a=i;if(e(a))return a;for(var s=a.split("-");s.length>1;)if(s.pop(),a=s.join("-"),e(a))return a}throw new Error("No locale data has been registered for any of the locales: ".concat(t.join(", ")))}function intlDateTimeFormatSupported(){var t=(typeof Intl=="undefined"?"undefined":_typeof$3(Intl))==="object";return t&&typeof Intl.DateTimeFormat=="function"}function _typeof$2(t){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?_typeof$2=function(n){return typeof n}:_typeof$2=function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},_typeof$2(t)}function isStyleObject(t){return isObject(t)&&(Array.isArray(t.steps)||Array.isArray(t.gradation)||Array.isArray(t.flavour)||typeof t.flavour=="string"||Array.isArray(t.labels)||typeof t.labels=="string"||Array.isArray(t.units)||typeof t.custom=="function")}var OBJECT_CONSTRUCTOR={}.constructor;function isObject(t){return _typeof$2(t)!==void 0&&t!==null&&t.constructor===OBJECT_CONSTRUCTOR}var minute=60,hour=60*minute,day=24*hour,week=7*day,month=30.44*day,year=146097/400*day;function getSecondsInUnit(t){switch(t){case"second":return 1;case"minute":return minute;case"hour":return hour;case"day":return day;case"week":return week;case"month":return month;case"year":return year}}function getStepDenominator(t){return t.factor!==void 0?t.factor:getSecondsInUnit(t.unit||t.formatAs)||1}function getRoundFunction(t){switch(t){case"floor":return Math.floor;default:return Math.round}}function getDiffRatioToNextRoundedNumber(t){switch(t){case"floor":return 1;default:return .5}}function _typeof$1(t){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?_typeof$1=function(n){return typeof n}:_typeof$1=function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},_typeof$1(t)}function getStepMinTime(t,e){var n=e.prevStep,r=e.timestamp,o=e.now,i=e.future,a=e.round,s;return n&&(n.id||n.unit)&&(s=t["threshold_for_".concat(n.id||n.unit)]),s===void 0&&t.threshold!==void 0&&(s=t.threshold,typeof s=="function"&&(s=s(o,i))),s===void 0&&(s=t.minTime),_typeof$1(s)==="object"&&(n&&n.id&&s[n.id]!==void 0?s=s[n.id]:s=s.default),typeof s=="function"&&(s=s(r,{future:i,getMinTimeForUnit:function(u,d){return _getMinTimeForUnit(u,d||n&&n.formatAs,{round:a})}})),s===void 0&&t.test&&(t.test(r,{now:o,future:i})?s=0:s=9007199254740991),s===void 0&&(n?t.formatAs&&n.formatAs&&(s=_getMinTimeForUnit(t.formatAs,n.formatAs,{round:a})):s=0),s===void 0&&console.warn("[javascript-time-ago] A step should specify `minTime`:\n"+JSON.stringify(t,null,2)),s}function _getMinTimeForUnit(t,e,n){var r=n.round,o=getSecondsInUnit(t),i;if(e==="now"?i=getSecondsInUnit(t):i=getSecondsInUnit(e),o!==void 0&&i!==void 0)return o-i*(1-getDiffRatioToNextRoundedNumber(r))}function _objectSpread$8(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{},r=Object.keys(n);typeof Object.getOwnPropertySymbols=="function"&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(o){return Object.getOwnPropertyDescriptor(n,o).enumerable}))),r.forEach(function(o){_defineProperty$9(t,o,n[o])})}return t}function _defineProperty$9(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function getStep(t,e,n){var r=n.now,o=n.future,i=n.round,a=n.units,s=n.getNextStep;t=filterStepsByUnits(t,a);var l=_getStep(t,e,{now:r,future:o,round:i});if(s){if(l){var u=t[t.indexOf(l)-1],d=t[t.indexOf(l)+1];return[u,l,d]}return[void 0,void 0,t[0]]}return l}function _getStep(t,e,n){var r=n.now,o=n.future,i=n.round;if(t.length!==0){var a=getStepIndex(t,e,{now:r,future:o||e<0,round:i});if(a!==-1){var s=t[a];if(s.granularity){var l=getRoundFunction(i)(Math.abs(e)/getStepDenominator(s)/s.granularity)*s.granularity;if(l===0&&a>0)return t[a-1]}return s}}}function getStepIndex(t,e,n){var r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0,o=getStepMinTime(t[r],_objectSpread$8({prevStep:t[r-1],timestamp:n.now-e*1e3},n));return o===void 0||Math.abs(e)<o?r-1:r===t.length-1?r:getStepIndex(t,e,n,r+1)}function filterStepsByUnits(t,e){return t.filter(function(n){var r=n.unit,o=n.formatAs;return r=r||o,r?e.indexOf(r)>=0:!0})}function getTimeToNextUpdateForUnit(t,e,n){var r=n.now,o=n.round;if(!!getSecondsInUnit(t)){var i=getSecondsInUnit(t)*1e3,a=e>r,s=Math.abs(e-r),l=getRoundFunction(o)(s/i)*i;return a?l>0?s-l+getDiffToPreviousRoundedNumber(o,i):s-l+1:-(s-l)+getDiffToNextRoundedNumber(o,i)}}function getDiffToNextRoundedNumber(t,e){return getDiffRatioToNextRoundedNumber(t)*e}function getDiffToPreviousRoundedNumber(t,e){return(1-getDiffRatioToNextRoundedNumber(t))*e+1}var YEAR=365*24*60*60*1e3,INFINITY=1e3*YEAR;function getTimeToNextUpdate(t,e,n){var r=n.prevStep,o=n.nextStep,i=n.now,a=n.future,s=n.round,l=t.getTime?t.getTime():t,u=function(m){return getTimeToNextUpdateForUnit(m,l,{now:i,round:s})},d=getTimeToStepChange(a?e:o,l,{future:a,now:i,round:s,prevStep:a?r:e});if(d!==void 0){var f;if(e&&(e.getTimeToNextUpdate&&(f=e.getTimeToNextUpdate(l,{getTimeToNextUpdateForUnit:u,getRoundFunction,now:i,future:a,round:s})),f===void 0)){var c=e.unit||e.formatAs;c&&(f=u(c))}return f===void 0?d:Math.min(f,d)}}function getStepChangesAt(t,e,n){var r=n.now,o=n.future,i=n.round,a=n.prevStep,s=getStepMinTime(t,{timestamp:e,now:r,future:o,round:i,prevStep:a});if(s!==void 0)return o?e-s*1e3+1:s===0&&e===r?INFINITY:e+s*1e3}function getTimeToStepChange(t,e,n){var r=n.now,o=n.future,i=n.round,a=n.prevStep;if(t){var s=getStepChangesAt(t,e,{now:r,future:o,round:i,prevStep:a});return s===void 0?void 0:s-r}else return o?e-r+1:INFINITY}var localesData={};function getLocaleData(t){return localesData[t]}function addLocaleData(t){if(!t)throw new Error("[javascript-time-ago] No locale data passed.");localesData[t.locale]=t}var round$1=[{formatAs:"now"},{formatAs:"second"},{formatAs:"minute"},{formatAs:"hour"},{formatAs:"day"},{formatAs:"week"},{formatAs:"month"},{formatAs:"year"}],round={steps:round$1,labels:"long"};function _objectSpread$7(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{},r=Object.keys(n);typeof Object.getOwnPropertySymbols=="function"&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(o){return Object.getOwnPropertyDescriptor(n,o).enumerable}))),r.forEach(function(o){_defineProperty$8(t,o,n[o])})}return t}function _defineProperty$8(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var defaultStyle=_objectSpread$7({},round,{steps:round.steps.filter(function(t){return t.formatAs!=="second"})}),approximate$1=[{factor:1,unit:"now"},{threshold:1,threshold_for_now:45.5,factor:1,unit:"second"},{threshold:45.5,factor:minute,unit:"minute"},{threshold:2.5*minute,granularity:5,factor:minute,unit:"minute"},{threshold:22.5*minute,factor:.5*hour,unit:"half-hour"},{threshold:42.5*minute,threshold_for_minute:52.5*minute,factor:hour,unit:"hour"},{threshold:20.5/24*day,factor:day,unit:"day"},{threshold:5.5*day,factor:week,unit:"week"},{threshold:3.5*week,factor:month,unit:"month"},{threshold:10.5*month,factor:year,unit:"year"}],approximate={gradation:approximate$1,flavour:"long",units:["now","minute","hour","day","week","month","year"]},approximateTime={gradation:approximate$1,flavour:"long-time",units:["now","minute","hour","day","week","month","year"]};function getDate(t){return t instanceof Date?t:new Date(t)}var steps=[{formatAs:"second"},{formatAs:"minute"},{formatAs:"hour"}],formatters={},monthAndDay={minTime:function t(e,n){n.future;var r=n.getMinTimeForUnit;return r("day")},format:function t(e,n){return formatters[n]||(formatters[n]={}),formatters[n].dayMonth||(formatters[n].dayMonth=new Intl.DateTimeFormat(n,{month:"short",day:"numeric"})),formatters[n].dayMonth.format(getDate(e))}},yearMonthAndDay={minTime:function t(e,n){var r=n.future;if(r){var o=new Date(new Date(e).getFullYear(),0).getTime()-1;return(e-o)/1e3}else{var i=new Date(new Date(e).getFullYear()+1,0).getTime();return(i-e)/1e3}},format:function t(e,n){return formatters[n]||(formatters[n]={}),formatters[n].dayMonthYear||(formatters[n].dayMonthYear=new Intl.DateTimeFormat(n,{year:"numeric",month:"short",day:"numeric"})),formatters[n].dayMonthYear.format(getDate(e))}};intlDateTimeFormatSupported()?steps.push(monthAndDay,yearMonthAndDay):steps.push({formatAs:"day"},{formatAs:"week"},{formatAs:"month"},{formatAs:"year"});var twitter={steps,labels:["mini","short-time","narrow","short"]};function _objectSpread$6(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{},r=Object.keys(n);typeof Object.getOwnPropertySymbols=="function"&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(o){return Object.getOwnPropertyDescriptor(n,o).enumerable}))),r.forEach(function(o){_defineProperty$7(t,o,n[o])})}return t}function _defineProperty$7(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var twitterNow=_objectSpread$6({},twitter,{steps:[{formatAs:"now"}].concat(twitter.steps)});function _objectSpread$5(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{},r=Object.keys(n);typeof Object.getOwnPropertySymbols=="function"&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(o){return Object.getOwnPropertyDescriptor(n,o).enumerable}))),r.forEach(function(o){_defineProperty$6(t,o,n[o])})}return t}function _defineProperty$6(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var twitterMinute=_objectSpread$5({},twitter,{steps:twitter.steps.filter(function(t){return t.formatAs!=="second"})});function _objectSpread$4(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{},r=Object.keys(n);typeof Object.getOwnPropertySymbols=="function"&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(o){return Object.getOwnPropertyDescriptor(n,o).enumerable}))),r.forEach(function(o){_defineProperty$5(t,o,n[o])})}return t}function _defineProperty$5(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var twitterMinuteNow=_objectSpread$4({},twitterMinute,{steps:[{formatAs:"now"}].concat(twitterMinute.steps)});function _objectSpread$3(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{},r=Object.keys(n);typeof Object.getOwnPropertySymbols=="function"&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(o){return Object.getOwnPropertyDescriptor(n,o).enumerable}))),r.forEach(function(o){_defineProperty$4(t,o,n[o])})}return t}function _defineProperty$4(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var twitterFirstMinute=_objectSpread$3({},twitter,{steps:twitter.steps.filter(function(t){return t.formatAs!=="second"}).map(function(t){return t.formatAs==="minute"?_objectSpread$3({},t,{minTime:minute}):t})}),mini$1={steps:[{formatAs:"second"},{formatAs:"minute"},{formatAs:"hour"},{formatAs:"day"},{formatAs:"month"},{formatAs:"year"}],labels:["mini","short-time","narrow","short"]};function _objectSpread$2(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{},r=Object.keys(n);typeof Object.getOwnPropertySymbols=="function"&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(o){return Object.getOwnPropertyDescriptor(n,o).enumerable}))),r.forEach(function(o){_defineProperty$3(t,o,n[o])})}return t}function _defineProperty$3(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var miniNow=_objectSpread$2({},mini$1,{steps:[{formatAs:"now"}].concat(mini$1.steps)});function _objectSpread$1(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{},r=Object.keys(n);typeof Object.getOwnPropertySymbols=="function"&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(o){return Object.getOwnPropertyDescriptor(n,o).enumerable}))),r.forEach(function(o){_defineProperty$2(t,o,n[o])})}return t}function _defineProperty$2(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var miniMinute=_objectSpread$1({},mini$1,{steps:mini$1.steps.filter(function(t){return t.formatAs!=="second"})});function _objectSpread(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{},r=Object.keys(n);typeof Object.getOwnPropertySymbols=="function"&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(o){return Object.getOwnPropertyDescriptor(n,o).enumerable}))),r.forEach(function(o){_defineProperty$1(t,o,n[o])})}return t}function _defineProperty$1(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var miniMinuteNow=_objectSpread({},miniMinute,{steps:[{formatAs:"now"}].concat(miniMinute.steps)});function getStyleByName(t){switch(t){case"default":case"round":return round;case"round-minute":return defaultStyle;case"approximate":return approximate;case"time":case"approximate-time":return approximateTime;case"mini":return mini$1;case"mini-now":return miniNow;case"mini-minute":return miniMinute;case"mini-minute-now":return miniMinuteNow;case"twitter":return twitter;case"twitter-now":return twitterNow;case"twitter-minute":return twitterMinute;case"twitter-minute-now":return twitterMinuteNow;case"twitter-first-minute":return twitterFirstMinute;default:return approximate}}function _typeof(t){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?_typeof=function(n){return typeof n}:_typeof=function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},_typeof(t)}function _slicedToArray(t,e){return _arrayWithHoles(t)||_iterableToArrayLimit(t,e)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function _iterableToArrayLimit(t,e){var n=[],r=!0,o=!1,i=void 0;try{for(var a=t[Symbol.iterator](),s;!(r=(s=a.next()).done)&&(n.push(s.value),!(e&&n.length===e));r=!0);}catch(l){o=!0,i=l}finally{try{!r&&a.return!=null&&a.return()}finally{if(o)throw i}}return n}function _arrayWithHoles(t){if(Array.isArray(t))return t}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _defineProperties(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function _createClass(t,e,n){return e&&_defineProperties(t.prototype,e),n&&_defineProperties(t,n),t}var TimeAgo=function(){function t(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=n.polyfill;_classCallCheck(this,t),typeof e=="string"&&(e=[e]),this.locale=chooseLocale(e.concat(t.getDefaultLocale()),getLocaleData),typeof Intl!="undefined"&&Intl.NumberFormat&&(this.numberFormat=new Intl.NumberFormat(this.locale)),r===!1?(this.IntlRelativeTimeFormat=Intl.RelativeTimeFormat,this.IntlPluralRules=Intl.PluralRules):(this.IntlRelativeTimeFormat=RelativeTimeFormat,this.IntlPluralRules=RelativeTimeFormat.PluralRules),this.relativeTimeFormatCache=new Cache,this.pluralRulesCache=new Cache}return _createClass(t,[{key:"format",value:function(n,r,o){o||(r&&!isStyle(r)?(o=r,r=void 0):o={}),r||(r=defaultStyle),typeof r=="string"&&(r=getStyleByName(r));var i=getTimestamp(n),a=this.getLabels(r.flavour||r.labels),s=a.labels,l=a.labelsType,u;r.now!==void 0&&(u=r.now),u===void 0&&o.now!==void 0&&(u=o.now),u===void 0&&(u=Date.now());var d=(u-i)/1e3,f=o.future||d<0,c=getNowLabel(s,getLocaleData(this.locale).now,getLocaleData(this.locale).long,f);if(r.custom){var _=r.custom({now:u,date:new Date(i),time:i,elapsed:d,locale:this.locale});if(_!==void 0)return _}var m=getTimeIntervalMeasurementUnits(r.units,s,c),E=o.round||r.round,I=getStep(r.gradation||r.steps||defaultStyle.steps,d,{now:u,units:m,round:E,future:f,getNextStep:!0}),g=_slicedToArray(I,3),y=g[0],T=g[1],w=g[2],A=this.formatDateForStep(i,T,d,{labels:s,labelsType:l,nowLabel:c,now:u,future:f,round:E})||"";if(o.getTimeToNextUpdate){var h=getTimeToNextUpdate(i,T,{nextStep:w,prevStep:y,now:u,future:f,round:E});return[A,h]}return A}},{key:"formatDateForStep",value:function(n,r,o,i){var a=this,s=i.labels,l=i.labelsType,u=i.nowLabel,d=i.now,f=i.future,c=i.round;if(!!r){if(r.format)return r.format(n,this.locale,{formatAs:function(g,y){return a.formatValue(y,g,{labels:s,future:f})},now:d,future:f});var _=r.unit||r.formatAs;if(!_)throw new Error("[javascript-time-ago] Each step must define either `formatAs` or `format()`. Step: ".concat(JSON.stringify(r)));if(_==="now")return u;var m=Math.abs(o)/getStepDenominator(r);r.granularity&&(m=getRoundFunction(c)(m/r.granularity)*r.granularity);var E=-1*Math.sign(o)*getRoundFunction(c)(m);switch(E===0&&(f?E=0:E=-0),l){case"long":case"short":case"narrow":return this.getFormatter(l).format(E,_);default:return this.formatValue(E,_,{labels:s,future:f})}}}},{key:"formatValue",value:function(n,r,o){var i=o.labels,a=o.future;return this.getFormattingRule(i,r,n,{future:a}).replace("{0}",this.formatNumber(Math.abs(n)))}},{key:"getFormattingRule",value:function(n,r,o,i){var a=i.future;if(this.locale,n=n[r],typeof n=="string")return n;var s=o===0?a?"future":"past":o<0?"past":"future",l=n[s]||n;if(typeof l=="string")return l;var u=this.getPluralRules().select(Math.abs(o));return l[u]||l.other}},{key:"formatNumber",value:function(n){return this.numberFormat?this.numberFormat.format(n):String(n)}},{key:"getFormatter",value:function(n){return this.relativeTimeFormatCache.get(this.locale,n)||this.relativeTimeFormatCache.put(this.locale,n,new this.IntlRelativeTimeFormat(this.locale,{style:n}))}},{key:"getPluralRules",value:function(){return this.pluralRulesCache.get(this.locale)||this.pluralRulesCache.put(this.locale,new this.IntlPluralRules(this.locale))}},{key:"getLabels",value:function(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];typeof n=="string"&&(n=[n]),n=n.map(function(u){switch(u){case"tiny":case"mini-time":return"mini";default:return u}}),n=n.concat("long");for(var r=getLocaleData(this.locale),a=n,o=Array.isArray(a),i=0,a=o?a:a[Symbol.iterator]();;){var s;if(o){if(i>=a.length)break;s=a[i++]}else{if(i=a.next(),i.done)break;s=i.value}var l=s;if(r[l])return{labelsType:l,labels:r[l]}}}}]),t}(),defaultLocale="en";TimeAgo.getDefaultLocale=function(){return defaultLocale};TimeAgo.setDefaultLocale=function(t){return defaultLocale=t};TimeAgo.addDefaultLocale=function(t){if(defaultLocaleHasBeenSpecified)return console.error("[javascript-time-ago] `TimeAgo.addDefaultLocale()` can only be called once. To add other locales, use `TimeAgo.addLocale()`.");defaultLocaleHasBeenSpecified=!0,TimeAgo.setDefaultLocale(t.locale),TimeAgo.addLocale(t)};var defaultLocaleHasBeenSpecified;TimeAgo.addLocale=function(t){addLocaleData(t),RelativeTimeFormat.addLocale(t)};TimeAgo.locale=TimeAgo.addLocale;TimeAgo.addLabels=function(t,e,n){var r=getLocaleData(t);r||(addLocaleData({locale:t}),r=getLocaleData(t)),r[e]=n};function getTimestamp(t){if(t.constructor===Date||isMockedDate(t))return t.getTime();if(typeof t=="number")return t;throw new Error("Unsupported relative time formatter input: ".concat(_typeof(t),", ").concat(t))}function isMockedDate(t){return _typeof(t)==="object"&&typeof t.getTime=="function"}function getTimeIntervalMeasurementUnits(t,e,n){var r=Object.keys(e);return n&&r.push("now"),t&&(r=t.filter(function(o){return o==="now"||r.indexOf(o)>=0})),r}function getNowLabel(t,e,n,r){var o=t.now||e&&e.now;if(o)return typeof o=="string"?o:r?o.future:o.past;if(n&&n.second&&n.second.current)return n.second.current}function isStyle(t){return typeof t=="string"||isStyleObject(t)}const locale="en",long={year:{previous:"last year",current:"this year",next:"next year",past:{one:"{0} year ago",other:"{0} years ago"},future:{one:"in {0} year",other:"in {0} years"}},quarter:{previous:"last quarter",current:"this quarter",next:"next quarter",past:{one:"{0} quarter ago",other:"{0} quarters ago"},future:{one:"in {0} quarter",other:"in {0} quarters"}},month:{previous:"last month",current:"this month",next:"next month",past:{one:"{0} month ago",other:"{0} months ago"},future:{one:"in {0} month",other:"in {0} months"}},week:{previous:"last week",current:"this week",next:"next week",past:{one:"{0} week ago",other:"{0} weeks ago"},future:{one:"in {0} week",other:"in {0} weeks"}},day:{previous:"yesterday",current:"today",next:"tomorrow",past:{one:"{0} day ago",other:"{0} days ago"},future:{one:"in {0} day",other:"in {0} days"}},hour:{current:"this hour",past:{one:"{0} hour ago",other:"{0} hours ago"},future:{one:"in {0} hour",other:"in {0} hours"}},minute:{current:"this minute",past:{one:"{0} minute ago",other:"{0} minutes ago"},future:{one:"in {0} minute",other:"in {0} minutes"}},second:{current:"now",past:{one:"{0} second ago",other:"{0} seconds ago"},future:{one:"in {0} second",other:"in {0} seconds"}}},short={year:{previous:"last yr.",current:"this yr.",next:"next yr.",past:"{0} yr. ago",future:"in {0} yr."},quarter:{previous:"last qtr.",current:"this qtr.",next:"next qtr.",past:{one:"{0} qtr. ago",other:"{0} qtrs. ago"},future:{one:"in {0} qtr.",other:"in {0} qtrs."}},month:{previous:"last mo.",current:"this mo.",next:"next mo.",past:"{0} mo. ago",future:"in {0} mo."},week:{previous:"last wk.",current:"this wk.",next:"next wk.",past:"{0} wk. ago",future:"in {0} wk."},day:{previous:"yesterday",current:"today",next:"tomorrow",past:{one:"{0} day ago",other:"{0} days ago"},future:{one:"in {0} day",other:"in {0} days"}},hour:{current:"this hour",past:"{0} hr. ago",future:"in {0} hr."},minute:{current:"this minute",past:"{0} min. ago",future:"in {0} min."},second:{current:"now",past:"{0} sec. ago",future:"in {0} sec."}},narrow={year:{previous:"last yr.",current:"this yr.",next:"next yr.",past:"{0} yr. ago",future:"in {0} yr."},quarter:{previous:"last qtr.",current:"this qtr.",next:"next qtr.",past:{one:"{0} qtr. ago",other:"{0} qtrs. ago"},future:{one:"in {0} qtr.",other:"in {0} qtrs."}},month:{previous:"last mo.",current:"this mo.",next:"next mo.",past:"{0} mo. ago",future:"in {0} mo."},week:{previous:"last wk.",current:"this wk.",next:"next wk.",past:"{0} wk. ago",future:"in {0} wk."},day:{previous:"yesterday",current:"today",next:"tomorrow",past:{one:"{0} day ago",other:"{0} days ago"},future:{one:"in {0} day",other:"in {0} days"}},hour:{current:"this hour",past:"{0} hr. ago",future:"in {0} hr."},minute:{current:"this minute",past:"{0} min. ago",future:"in {0} min."},second:{current:"now",past:"{0} sec. ago",future:"in {0} sec."}},now={now:{current:"now",future:"in a moment",past:"just now"}},tiny={year:"{0}yr",month:"{0}mo",week:"{0}wk",day:"{0}d",hour:"{0}h",minute:"{0}m",second:"{0}s",now:"now"},mini={year:"{0}yr",month:"{0}mo",week:"{0}wk",day:"{0}d",hour:"{0}h",minute:"{0}m",second:"{0}s",now:"now"};var en={locale,long,short,narrow,"short-time":{year:"{0} yr.",month:"{0} mo.",week:"{0} wk.",day:{one:"{0} day",other:"{0} days"},hour:"{0} hr.",minute:"{0} min.",second:"{0} sec."},"long-time":{year:{one:"{0} year",other:"{0} years"},month:{one:"{0} month",other:"{0} months"},week:{one:"{0} week",other:"{0} weeks"},day:{one:"{0} day",other:"{0} days"},hour:{one:"{0} hour",other:"{0} hours"},minute:{one:"{0} minute",other:"{0} minutes"},second:{one:"{0} second",other:"{0} seconds"}},now,tiny,mini};TimeAgo.addDefaultLocale(en);const timeAgo=new TimeAgo("en-US");function create_fragment$8(t){let e,n,r,o,i,a,s,l=t[0].title+"",u,d,f,c,_=timeAgo.format(new Date(t[0].publishedAt))+"",m,E,I=t[0].channelTitle+"",g,y,T,w=t[0].description+"",A,h,v,b;return{c(){e=element("a"),n=element("div"),r=element("img"),i=space(),a=element("div"),s=element("p"),u=text(l),f=space(),c=element("p"),m=text(_),E=text(" - "),g=text(I),y=space(),T=element("p"),A=text(w),src_url_equal(r.src,o=t[0].thumbnailUrl)||attr(r,"src",o),attr(r,"alt",""),attr(r,"loading","lazy"),attr(r,"width","320"),attr(r,"height","180"),attr(n,"class","inline-block w-[11rem] align-text-bottom p-1"),attr(s,"class","font-bold truncate"),attr(s,"title",d=t[0].title),attr(c,"class","text-neutral-400 truncate"),attr(T,"class","text-ellipsis line-clamp-3"),attr(a,"class","inline-block w-[calc(100%-11.5rem)] align-top text-sm"),attr(e,"class","block w-[calc(100%-1rem)] bg-neutral-600 p-2 m-2 first:mt-0 last:mb-0 rounded-2xl"),attr(e,"href",h="https://www.youtube.com/watch?v="+t[0].videoId)},m(D,L){insert(D,e,L),append(e,n),append(n,r),append(e,i),append(e,a),append(a,s),append(s,u),append(a,f),append(a,c),append(c,m),append(c,E),append(c,g),append(a,y),append(a,T),append(T,A),v||(b=listen(e,"click",prevent_default(t[1])),v=!0)},p(D,[L]){L&1&&!src_url_equal(r.src,o=D[0].thumbnailUrl)&&attr(r,"src",o),L&1&&l!==(l=D[0].title+"")&&set_data(u,l),L&1&&d!==(d=D[0].title)&&attr(s,"title",d),L&1&&_!==(_=timeAgo.format(new Date(D[0].publishedAt))+"")&&set_data(m,_),L&1&&I!==(I=D[0].channelTitle+"")&&set_data(g,I),L&1&&w!==(w=D[0].description+"")&&set_data(A,w),L&1&&h!==(h="https://www.youtube.com/watch?v="+D[0].videoId)&&attr(e,"href",h)},i:noop,o:noop,d(D){D&&detach(e),v=!1,b()}}}function instance$8(t,e,n){let{video:r}=e;function o(){playerStore.set({videoId:r.videoId})}return t.$$set=i=>{"video"in i&&n(0,r=i.video)},[r,o]}class VideoCard extends SvelteComponent{constructor(e){super(),init(this,e,instance$8,create_fragment$8,safe_not_equal,{video:0})}}const NOT_MODIFIED="Not Modified";function appendQuery(t,e){if(e){const n=new URLSearchParams(e);return`${t}?${n}`}else return t}function toRequest(t,e={}){const n=appendQuery("https://www.googleapis.com"+t,e.query);return e.headers=new Headers(e.headers),e.headers.append("Authorization","Bearer "+gapi.auth.getToken().access_token),e.etag&&e.headers.append("If-None-Match",e.etag),new Request(n,e)}async function request(t,e={}){typeof t=="string"&&(t=toRequest(t,e));const n=await fetch(t);if(n.status===304)throw NOT_MODIFIED;if(!n.ok)throw n;return n}async function batchRequest(t,e){const n=`boundary${Date.now()}`,r="/batch"+t,o=await request(r,{method:"POST",headers:{"Content-Type":`multipart/mixed; boundary=${n}`},body:await batchRequestsToBody(e,n)});return batchResponseToMap(o)}async function batchRequestsToBody(t,e){let n=[];for(const[r,o]of t){if(n.push(`--${e}`),n.push("Content-Type: application/http"),n.push(`Content-ID: ${r}`),o.bodyUsed&&n.push(`Content-Length: ${(await o.blob()).size}`),n.push(""),n.push(`${o.method} ${o.url}`),o.headers)for(const[i,a]of o.headers.entries())n.push(`${i}: ${a}`);o.bodyUsed&&(n.push(""),n.push(await o.text()))}return n.push(`--${e}--`),n.join(`\r
`)}async function batchResponseToMap(t){const e=t.headers.get("Content-Type").match(/^multipart\/mixed; boundary=(.+)$/)[1],r=(await t.text()).split(new RegExp(`\r
--${e}(?:--)?\r
`,"g")).slice(1,-1),o=new Map;for(const i of r){const[a,s,l]=i.split(`\r
\r
`,3),d=headerStringToHeaders(a).get("Content-ID").match(/^response-(.+)$/)[1],[f,c]=s.split(`\r
`,2),[_,m,E]=f.split(" ",3),I=headerStringToHeaders(c),g=l.length===0?null:l,y=new Response(g,{status:parseInt(m,10),statusText:E,headers:I});o.set(d,y)}return o}function headerStringToHeaders(t){const e=new Headers;for(const n of t.split(`\r
`)){const[r,o]=n.split(": ");e.append(r,o)}return e}function jsonBlob(t){return new Blob([JSON.stringify(t)],{type:"application/json"})}async function listAllSubscriptions(t){let e=await listSubscriptions({etag:t});const n=e.etag,r=[e.items];for(;e.nextPageToken;)e=await listSubscriptions({pageToken:e.nextPageToken}),r.push(e.items);return{etag:n,items:r}}async function listSubscriptions(t={}){return(await request(listSubscriptionsRequest(t))).json()}function listSubscriptionsRequest(t={}){return toRequest("/youtube/v3/subscriptions",Z({method:"GET",query:Z({part:"snippet",fields:"etag,items(snippet(title,resourceId/channelId,thumbnails/default/url)),nextPageToken",mine:"true",order:"alphabetical",maxResults:"50"},t.pageToken&&{pageToken:t.pageToken})},t.etag&&{etag:t.etag}))}async function listAllChannels(t){const e=new Map(t.map((o,i)=>[`${i}`,listChannelsRequest(o)])),n=await batchRequest("/youtube/v3",e),r=await Promise.all(Array.from(n.values()).map(o=>o.json()));return new Map(r.flatMap(o=>o.items.map(i=>[i.id,i])))}function listChannelsRequest(t){return toRequest("/youtube/v3/channels",{method:"GET",query:{part:"contentDetails",fields:"items(id,contentDetails/relatedPlaylists/uploads)",id:t.map(e=>e.snippet.resourceId.channelId).join(","),maxResults:"50"}})}async function listAllPlaylistItems(t,e){const n=new Set(e.subscriptionGroups.flatMap(r=>r.subscriptionIds));if(n.size>0){const r=t.items.filter(a=>n.has(a.channelId)),o=new Map(r.map(a=>[a.uploadsPlaylistId,listPlaylistItemsRequest(a,!0)])),i=await batchRequest("/youtube/v3",o);await Promise.all(r.map(a=>listPlaylistItemsResponse(a,i.get(a.uploadsPlaylistId),!0)))}}async function listPlaylistItems(t){const e=await request(listPlaylistItemsRequest(t,!1));await listPlaylistItemsResponse(t,e,!1)}function listPlaylistItemsRequest(t,e){return toRequest("/youtube/v3/playlistItems",Z({method:"GET",query:Z({part:"snippet",fields:"etag,items(snippet(title,description,publishedAt,thumbnails/medium/url,resourceId/videoId)),nextPageToken",playlistId:t.uploadsPlaylistId,maxResults:"50"},!e&&t.nextUploadPageToken&&{pageToken:t.nextUploadPageToken})},e&&t.uploadsEtag&&{etag:t.uploadsEtag}))}async function listPlaylistItemsResponse(t,e,n){if(e.status===304)return;if(!e.ok)throw e;const r=await e.json();n?setUploads(t,r):addUploads(t,r)}const maxPlaylistLength=200;async function SubscriptionGroup(t,e,n){const r=Z({name:t,expanded:e,subscriptions:n.map(o=>({subscription:o,uploadIndex:0})),videos:[]},n.length===1&&{playlistId:n[0].uploadsPlaylistId});return await loadMoreVideos(r),r}function SubscriptionGroupChild(t){return{name:t.title,expanded:!1,subscriptions:[{subscription:t,uploadIndex:0}],videos:t.uploads.slice(0,10),playlist:{playlistId:t.uploadsPlaylistId}}}async function loadCustomPlaylist(t){t.videos.length<maxPlaylistLength&&await loadMoreVideos(t,maxPlaylistLength-t.videos.length),t.playlist={customPlaylist:t.videos.slice(0,maxPlaylistLength).map(e=>e.videoId)}}async function loadMoreVideos(t,e=10){for(let n=0;n<e;n++){let r,o;for(const i of t.subscriptions){if(i.uploadIndex===i.subscription.uploads.length){if(!i.subscription.nextUploadPageToken)continue;await listPlaylistItems(i.subscription)}const a=i.subscription.uploads[i.uploadIndex];(!r||a.publishedAt>r.publishedAt)&&(r=a,o=i)}if(!r||!o)break;r.channelTitle=o.subscription.title,t.videos.push(r),o.uploadIndex++}}function allVideosLoaded(t){return t.subscriptions.every(e=>e.uploadIndex===e.subscription.uploads.length&&!e.subscription.nextUploadPageToken)}const parseNumber=parseFloat;function joinCss(t,e=";"){let n;if(Array.isArray(t))n=t.filter(r=>r);else{n=[];for(const r in t)t[r]&&n.push(`${r}:${t[r]}`)}return n.join(e)}function getStyles(t,e,n,r){let o,i;const a="1em";let s,l,u,d="-.125em";const f="visible";return r&&(u="center",i="1.25em"),n&&(o=n),e&&(e=="lg"?(l="1.33333em",s=".75em",d="-.225em"):e=="xs"?l=".75em":e=="sm"?l=".875em":l=e.replace("x","em")),joinCss([joinCss({float:o,width:i,height:a,"line-height":s,"font-size":l,"text-align":u,"vertical-align":d,"transform-origin":"center",overflow:f}),t])}function getTransform(t,e,n,r,o,i=1,a="",s=""){let l=1,u=1;return o&&(o=="horizontal"?l=-1:o=="vertical"?u=-1:l=u=-1),joinCss([`translate(${parseNumber(e)*i}${a},${parseNumber(n)*i}${a})`,`scale(${l*parseNumber(t)},${u*parseNumber(t)})`,r&&`rotate(${r}${s})`]," ")}var fa_svelte_svelte_type_style_lang="";function create_if_block$4(t){let e,n,r,o,i,a,s;function l(f,c){return typeof f[7][4]=="string"?create_if_block_1$2:create_else_block$4}let u=l(t),d=u(t);return{c(){e=svg_element("svg"),n=svg_element("g"),r=svg_element("g"),d.c(),attr(r,"transform",t[10]),attr(n,"transform",o=`translate(${t[7][0]/2} ${t[7][1]/2})`),attr(n,"transform-origin",i=`${t[7][0]/4} 0`),attr(e,"id",t[0]),attr(e,"class",a=null_to_empty(t[8])+" svelte-1w3t65e"),attr(e,"style",t[9]),attr(e,"viewBox",s=`0 0 ${t[7][0]} ${t[7][1]}`),attr(e,"aria-hidden","true"),attr(e,"role","img"),attr(e,"xmlns","http://www.w3.org/2000/svg")},m(f,c){insert(f,e,c),append(e,n),append(n,r),d.m(r,null)},p(f,c){u===(u=l(f))&&d?d.p(f,c):(d.d(1),d=u(f),d&&(d.c(),d.m(r,null))),c&1024&&attr(r,"transform",f[10]),c&128&&o!==(o=`translate(${f[7][0]/2} ${f[7][1]/2})`)&&attr(n,"transform",o),c&128&&i!==(i=`${f[7][0]/4} 0`)&&attr(n,"transform-origin",i),c&1&&attr(e,"id",f[0]),c&256&&a!==(a=null_to_empty(f[8])+" svelte-1w3t65e")&&attr(e,"class",a),c&512&&attr(e,"style",f[9]),c&128&&s!==(s=`0 0 ${f[7][0]} ${f[7][1]}`)&&attr(e,"viewBox",s)},d(f){f&&detach(e),d.d()}}}function create_else_block$4(t){let e,n,r,o,i,a,s,l,u,d;return{c(){e=svg_element("path"),a=svg_element("path"),attr(e,"d",n=t[7][4][0]),attr(e,"fill",r=t[3]||t[1]||"currentColor"),attr(e,"fill-opacity",o=t[6]!=!1?t[4]:t[5]),attr(e,"transform",i=`translate(${t[7][0]/-2} ${t[7][1]/-2})`),attr(a,"d",s=t[7][4][1]),attr(a,"fill",l=t[2]||t[1]||"currentColor"),attr(a,"fill-opacity",u=t[6]!=!1?t[5]:t[4]),attr(a,"transform",d=`translate(${t[7][0]/-2} ${t[7][1]/-2})`)},m(f,c){insert(f,e,c),insert(f,a,c)},p(f,c){c&128&&n!==(n=f[7][4][0])&&attr(e,"d",n),c&10&&r!==(r=f[3]||f[1]||"currentColor")&&attr(e,"fill",r),c&112&&o!==(o=f[6]!=!1?f[4]:f[5])&&attr(e,"fill-opacity",o),c&128&&i!==(i=`translate(${f[7][0]/-2} ${f[7][1]/-2})`)&&attr(e,"transform",i),c&128&&s!==(s=f[7][4][1])&&attr(a,"d",s),c&6&&l!==(l=f[2]||f[1]||"currentColor")&&attr(a,"fill",l),c&112&&u!==(u=f[6]!=!1?f[5]:f[4])&&attr(a,"fill-opacity",u),c&128&&d!==(d=`translate(${f[7][0]/-2} ${f[7][1]/-2})`)&&attr(a,"transform",d)},d(f){f&&detach(e),f&&detach(a)}}}function create_if_block_1$2(t){let e,n,r,o;return{c(){e=svg_element("path"),attr(e,"d",n=t[7][4]),attr(e,"fill",r=t[1]||t[2]||"currentColor"),attr(e,"transform",o=`translate(${t[7][0]/-2} ${t[7][1]/-2})`)},m(i,a){insert(i,e,a)},p(i,a){a&128&&n!==(n=i[7][4])&&attr(e,"d",n),a&6&&r!==(r=i[1]||i[2]||"currentColor")&&attr(e,"fill",r),a&128&&o!==(o=`translate(${i[7][0]/-2} ${i[7][1]/-2})`)&&attr(e,"transform",o)},d(i){i&&detach(e)}}}function create_fragment$7(t){let e,n=t[7][4]&&create_if_block$4(t);return{c(){n&&n.c(),e=empty()},m(r,o){n&&n.m(r,o),insert(r,e,o)},p(r,[o]){r[7][4]?n?n.p(r,o):(n=create_if_block$4(r),n.c(),n.m(e.parentNode,e)):n&&(n.d(1),n=null)},i:noop,o:noop,d(r){n&&n.d(r),r&&detach(e)}}}function instance$7(t,e,n){let{class:r=""}=e,{id:o=""}=e,{style:i=""}=e,{icon:a}=e,{size:s=""}=e,{color:l=""}=e,{fw:u=!1}=e,{pull:d=""}=e,{scale:f=1}=e,{translateX:c=0}=e,{translateY:_=0}=e,{rotate:m=""}=e,{flip:E=!1}=e,{spin:I=!1}=e,{pulse:g=!1}=e,{primaryColor:y=""}=e,{secondaryColor:T=""}=e,{primaryOpacity:w=1}=e,{secondaryOpacity:A=.4}=e,{swapOpacity:h=!1}=e,v,b,D,L;return t.$$set=S=>{"class"in S&&n(11,r=S.class),"id"in S&&n(0,o=S.id),"style"in S&&n(12,i=S.style),"icon"in S&&n(13,a=S.icon),"size"in S&&n(14,s=S.size),"color"in S&&n(1,l=S.color),"fw"in S&&n(15,u=S.fw),"pull"in S&&n(16,d=S.pull),"scale"in S&&n(17,f=S.scale),"translateX"in S&&n(18,c=S.translateX),"translateY"in S&&n(19,_=S.translateY),"rotate"in S&&n(20,m=S.rotate),"flip"in S&&n(21,E=S.flip),"spin"in S&&n(22,I=S.spin),"pulse"in S&&n(23,g=S.pulse),"primaryColor"in S&&n(2,y=S.primaryColor),"secondaryColor"in S&&n(3,T=S.secondaryColor),"primaryOpacity"in S&&n(4,w=S.primaryOpacity),"secondaryOpacity"in S&&n(5,A=S.secondaryOpacity),"swapOpacity"in S&&n(6,h=S.swapOpacity)},t.$$.update=()=>{t.$$.dirty&8192&&n(7,v=a&&a.icon||[0,0,"",[],""]),t.$$.dirty&12584960&&n(8,b=joinCss([r,"svelte-fa",I&&"spin",g&&"pulse"]," ")),t.$$.dirty&118784&&n(9,D=getStyles(i,s,d,u)),t.$$.dirty&4063232&&n(10,L=getTransform(f,c,_,m,E,512))},[o,l,y,T,w,A,h,v,b,D,L,r,i,a,s,u,d,f,c,_,m,E,I,g]}class Fa extends SvelteComponent{constructor(e){super(),init(this,e,instance$7,create_fragment$7,safe_not_equal,{class:11,id:0,style:12,icon:13,size:14,color:1,fw:15,pull:16,scale:17,translateX:18,translateY:19,rotate:20,flip:21,spin:22,pulse:23,primaryColor:2,secondaryColor:3,primaryOpacity:4,secondaryOpacity:5,swapOpacity:6})}}var Fa$1=Fa,faLayers_svelte_svelte_type_style_lang="";function create_fragment$6(t){let e,n,r;const o=t[8].default,i=create_slot(o,t,t[7],null);return{c(){e=element("span"),i&&i.c(),attr(e,"id",t[0]),attr(e,"class",n=null_to_empty(t[1])+" svelte-w9owi"),attr(e,"style",t[2])},m(a,s){insert(a,e,s),i&&i.m(e,null),r=!0},p(a,[s]){i&&i.p&&(!r||s&128)&&update_slot_base(i,o,a,a[7],r?get_slot_changes(o,a[7],s,null):get_all_dirty_from_scope(a[7]),null),(!r||s&1)&&attr(e,"id",a[0]),(!r||s&2&&n!==(n=null_to_empty(a[1])+" svelte-w9owi"))&&attr(e,"class",n),(!r||s&4)&&attr(e,"style",a[2])},i(a){r||(transition_in(i,a),r=!0)},o(a){transition_out(i,a),r=!1},d(a){a&&detach(e),i&&i.d(a)}}}function instance$6(t,e,n){let{$$slots:r={},$$scope:o}=e,{class:i=""}=e,{id:a=""}=e,{style:s=""}=e,{size:l=""}=e,{pull:u=""}=e,d,f;return t.$$set=c=>{"class"in c&&n(3,i=c.class),"id"in c&&n(0,a=c.id),"style"in c&&n(4,s=c.style),"size"in c&&n(5,l=c.size),"pull"in c&&n(6,u=c.pull),"$$scope"in c&&n(7,o=c.$$scope)},t.$$.update=()=>{t.$$.dirty&8&&n(1,d=joinCss([i,"svelte-fa-layers"]," ")),t.$$.dirty&112&&n(2,f=getStyles(s,l,u,!0))},[a,d,f,i,s,l,u,o,r]}class Fa_layers extends SvelteComponent{constructor(e){super(),init(this,e,instance$6,create_fragment$6,safe_not_equal,{class:3,id:0,style:4,size:5,pull:6})}}var FaLayers=Fa_layers;/*!
 * Font Awesome Free 5.15.4 by @fontawesome - https://fontawesome.com
 * License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License)
 */var faCircle={prefix:"fas",iconName:"circle",icon:[512,512,[],"f111","M256 8C119 8 8 119 8 256s111 248 248 248 248-111 248-248S393 8 256 8z"]},faCompressAlt={prefix:"fas",iconName:"compress-alt",icon:[448,512,[],"f422","M4.686 427.314L104 328l-32.922-31.029C55.958 281.851 66.666 256 88.048 256h112C213.303 256 224 266.745 224 280v112c0 21.382-25.803 32.09-40.922 16.971L152 376l-99.314 99.314c-6.248 6.248-16.379 6.248-22.627 0L4.686 449.941c-6.248-6.248-6.248-16.379 0-22.627zM443.314 84.686L344 184l32.922 31.029c15.12 15.12 4.412 40.971-16.97 40.971h-112C234.697 256 224 245.255 224 232V120c0-21.382 25.803-32.09 40.922-16.971L296 136l99.314-99.314c6.248-6.248 16.379-6.248 22.627 0l25.373 25.373c6.248 6.248 6.248 16.379 0 22.627z"]},faExpandAlt={prefix:"fas",iconName:"expand-alt",icon:[448,512,[],"f424","M212.686 315.314L120 408l32.922 31.029c15.12 15.12 4.412 40.971-16.97 40.971h-112C10.697 480 0 469.255 0 456V344c0-21.382 25.803-32.09 40.922-16.971L72 360l92.686-92.686c6.248-6.248 16.379-6.248 22.627 0l25.373 25.373c6.249 6.248 6.249 16.378 0 22.627zm22.628-118.628L328 104l-32.922-31.029C279.958 57.851 290.666 32 312.048 32h112C437.303 32 448 42.745 448 56v112c0 21.382-25.803 32.09-40.922 16.971L376 152l-92.686 92.686c-6.248 6.248-16.379 6.248-22.627 0l-25.373-25.373c-6.249-6.248-6.249-16.378 0-22.627z"]},faPlay={prefix:"fas",iconName:"play",icon:[448,512,[],"f04b","M424.4 214.7L72.4 6.6C43.8-10.3 0 6.1 0 47.9V464c0 37.5 40.7 60.1 72.4 41.3l352-208c31.4-18.5 31.5-64.1 0-82.6z"]},faTimesCircle={prefix:"fas",iconName:"times-circle",icon:[512,512,[],"f057","M256 8C119 8 8 119 8 256s111 248 248 248 248-111 248-248S393 8 256 8zm121.6 313.1c4.7 4.7 4.7 12.3 0 17L338 377.6c-4.7 4.7-12.3 4.7-17 0L256 312l-65.1 65.6c-4.7 4.7-12.3 4.7-17 0L134.4 338c-4.7-4.7-4.7-12.3 0-17l65.6-65-65.6-65.1c-4.7-4.7-4.7-12.3 0-17l39.6-39.6c4.7-4.7 12.3-4.7 17 0l65 65.7 65.1-65.6c4.7-4.7 12.3-4.7 17 0l39.6 39.6c4.7 4.7 4.7 12.3 0 17L312 256l65.6 65.1z"]},faUsers={prefix:"fas",iconName:"users",icon:[640,512,[],"f0c0","M96 224c35.3 0 64-28.7 64-64s-28.7-64-64-64-64 28.7-64 64 28.7 64 64 64zm448 0c35.3 0 64-28.7 64-64s-28.7-64-64-64-64 28.7-64 64 28.7 64 64 64zm32 32h-64c-17.6 0-33.5 7.1-45.1 18.6 40.3 22.1 68.9 62 75.1 109.4h66c17.7 0 32-14.3 32-32v-32c0-35.3-28.7-64-64-64zm-256 0c61.9 0 112-50.1 112-112S381.9 32 320 32 208 82.1 208 144s50.1 112 112 112zm76.8 32h-8.3c-20.8 10-43.9 16-68.5 16s-47.6-6-68.5-16h-8.3C179.6 288 128 339.6 128 403.2V432c0 26.5 21.5 48 48 48h288c26.5 0 48-21.5 48-48v-28.8c0-63.6-51.6-115.2-115.2-115.2zm-223.7-13.4C161.5 263.1 145.6 256 128 256H64c-35.3 0-64 28.7-64 64v32c0 17.7 14.3 32 32 32h65.9c6.3-47.4 34.9-87.3 75.2-109.4z"]};const defaultOptions={root:null,rootMargin:"0px",threshold:0,unobserveOnEnter:!1},createEvent=(t,e)=>new CustomEvent(t,{detail:e});function inview(t,e={}){const{root:n,rootMargin:r,threshold:o,unobserveOnEnter:i}=Object.assign(Object.assign({},defaultOptions),e);let a={x:void 0,y:void 0},s={vertical:void 0,horizontal:void 0};if(typeof IntersectionObserver!="undefined"&&t){const l=new IntersectionObserver((u,d)=>{u.forEach(f=>{a.y>f.boundingClientRect.y?s.vertical="up":s.vertical="down",a.x>f.boundingClientRect.x?s.horizontal="left":s.horizontal="right",a={y:f.boundingClientRect.y,x:f.boundingClientRect.x};const c={inView:f.isIntersecting,entry:f,scrollDirection:s,node:t,observer:d};t.dispatchEvent(createEvent("change",c)),f.isIntersecting?(t.dispatchEvent(createEvent("enter",c)),i&&d.unobserve(t)):t.dispatchEvent(createEvent("leave",c))})},{root:n,rootMargin:r,threshold:o});return setTimeout(()=>{t.dispatchEvent(createEvent("init",{observer:l,node:t}))},0),l.observe(t),{destroy(){l.unobserve(t)}}}}function backOut(t){return--t*t*((1.70158+1)*t+1.70158)+1}function cubicOut(t){const e=t-1;return e*e*e+1}function fly(t,{delay:e=0,duration:n=400,easing:r=cubicOut,x:o=0,y:i=0,opacity:a=0}={}){const s=getComputedStyle(t),l=+s.opacity,u=s.transform==="none"?"":s.transform,d=l*(1-a);return{delay:e,duration:n,easing:r,css:(f,c)=>`
			transform: ${u} translate(${(1-f)*o}px, ${(1-f)*i}px);
			opacity: ${l-d*c}`}}function errorString(t){return t instanceof Error?t.message:JSON.stringify(t).slice(1,-1)}const settingsFileName="settings.json";let settingsFileId;async function getSettingsFileId(){const e=await(await request("/drive/v3/files",{method:"GET",query:{spaces:"appDataFolder",fields:"files(id)",q:`name = '${settingsFileName}'`,pageSize:"1"}})).json();settingsFileId=e.files.length>0?e.files[0].id:null}async function readSettings(){return settingsFileId===void 0&&await getSettingsFileId(),settingsFileId==null?null:(await request(`/drive/v3/files/${settingsFileId}`,{method:"GET",query:{alt:"media"}})).json()}async function writeSettings(t){settingsFileId===void 0&&await getSettingsFileId(),settingsFileId==null?await createSettings(t):await updateSettings(t)}async function createSettings(t){const e={name:settingsFileName,mimeType:"application/json",parents:["appDataFolder"]},n=new FormData;n.append("metadata",jsonBlob(e)),n.append("file",jsonBlob(t),settingsFileName),settingsFileId=(await(await request("/upload/drive/v3/files",{method:"POST",query:{uploadType:"multipart"},body:n})).json()).id}async function updateSettings(t){await request(`/upload/drive/v3/files/${settingsFileId}`,{method:"PATCH",query:{uploadType:"media"},body:jsonBlob(t)})}function get_each_context_1$1(t,e,n){const r=t.slice();return r[18]=e[n],r}function get_each_context$2(t,e,n){const r=t.slice();return r[15]=e[n],r}function create_else_block$3(t){let e,n,r,o,i,a,s,l=!allVideosLoaded(t[0]),u,d,f,c;const _=[create_if_block_4,create_if_block_6],m=[];function E(w,A){return w[0].subscriptions.length===1?0:w[0].subscriptions.length>1?1:-1}~(r=E(t))&&(o=m[r]=_[r](t));let I=t[0].videos,g=[];for(let w=0;w<I.length;w+=1)g[w]=create_each_block_1$1(get_each_context_1$1(t,I,w));const y=w=>transition_out(g[w],1,1,()=>{g[w]=null});let T=l&&create_if_block_2$1(t);return{c(){e=element("div"),n=element("p"),o&&o.c(),i=space(),a=element("div");for(let w=0;w<g.length;w+=1)g[w].c();s=space(),T&&T.c(),attr(n,"class","text-center font-bold h-8 mb-1"),attr(a,"class","h-[calc(100%-2.25rem)] overflow-y-scroll y-scroll-hover overflow-x-hidden"),attr(e,"class","inline-block h-full w-screen max-w-[32rem] min-w-[22rem] bg-neutral-800 p-1 pb-4 ml-1 mr-1 rounded-2xl align-top")},m(w,A){insert(w,e,A),append(e,n),~r&&m[r].m(n,null),append(e,i),append(e,a);for(let h=0;h<g.length;h+=1)g[h].m(a,null);append(a,s),T&&T.m(a,null),d=!0,f||(c=listen(a,"wheel",stop_propagation(t[7]),{passive:!0}),f=!0)},p(w,A){t=w;let h=r;if(r=E(t),r===h?~r&&m[r].p(t,A):(o&&(group_outros(),transition_out(m[h],1,1,()=>{m[h]=null}),check_outros()),~r?(o=m[r],o?o.p(t,A):(o=m[r]=_[r](t),o.c()),transition_in(o,1),o.m(n,null)):o=null),A&1){I=t[0].videos;let v;for(v=0;v<I.length;v+=1){const b=get_each_context_1$1(t,I,v);g[v]?(g[v].p(b,A),transition_in(g[v],1)):(g[v]=create_each_block_1$1(b),g[v].c(),transition_in(g[v],1),g[v].m(a,s))}for(group_outros(),v=I.length;v<g.length;v+=1)y(v);check_outros()}A&1&&(l=!allVideosLoaded(t[0])),l?T?(T.p(t,A),A&1&&transition_in(T,1)):(T=create_if_block_2$1(t),T.c(),transition_in(T,1),T.m(a,null)):T&&(group_outros(),transition_out(T,1,1,()=>{T=null}),check_outros())},i(w){if(!d){transition_in(o);for(let A=0;A<I.length;A+=1)transition_in(g[A]);transition_in(T),u||add_render_callback(()=>{u=create_in_transition(e,fly,{x:100,easing:backOut}),u.start()}),d=!0}},o(w){transition_out(o),g=g.filter(Boolean);for(let A=0;A<g.length;A+=1)transition_out(g[A]);transition_out(T),d=!1},d(w){w&&detach(e),~r&&m[r].d(),destroy_each(g,w),T&&T.d(),f=!1,c()}}}function create_if_block$3(t){let e,n,r,o,i,a,s=t[0].name+"",l,u,d,f,c,_,m,E,I,g,y,T;o=new FaLayers({props:{size:"2x",class:"-mx-1",$$slots:{default:[create_default_slot$3]},$$scope:{ctx:t}}}),c=new Fa$1({props:{icon:faCompressAlt,translateY:.5}});let w=t[0].videos.length>0&&create_if_block_1$1(t),A=t[0].subscriptions,h=[];for(let b=0;b<A.length;b+=1)h[b]=create_each_block$2(get_each_context$2(t,A,b));const v=b=>transition_out(h[b],1,1,()=>{h[b]=null});return{c(){e=element("div"),n=element("p"),r=element("span"),create_component(o.$$.fragment),i=space(),a=element("span"),l=text(s),d=space(),f=element("span"),create_component(c.$$.fragment),_=space(),w&&w.c(),m=space(),E=element("div");for(let b=0;b<h.length;b+=1)h[b].c();attr(r,"class","inline-block h-8 align-middle"),attr(a,"class","inline-block h-8 max-w-[26rem] align-text-top truncate cursor-default"),attr(a,"title",u=t[0].name),attr(f,"class","float-left inline-block h-8 w-8 px-2 cursor-pointer"),attr(f,"title","Collapse"),attr(n,"class","font-bold h-8 mb-1"),attr(E,"class","h-[calc(100%-2.25rem)]"),attr(e,"class","inline-block h-full w-max bg-neutral-900 p-1 pb-4 ml-1 mr-1 rounded-2xl align-top")},m(b,D){insert(b,e,D),append(e,n),append(n,r),mount_component(o,r,null),append(n,i),append(n,a),append(a,l),append(n,d),append(n,f),mount_component(c,f,null),append(n,_),w&&w.m(n,null),append(e,m),append(e,E);for(let L=0;L<h.length;L+=1)h[L].m(E,null);g=!0,y||(T=listen(f,"click",t[6]),y=!0)},p(b,D){t=b;const L={};if(D&2097152&&(L.$$scope={dirty:D,ctx:t}),o.$set(L),(!g||D&1)&&s!==(s=t[0].name+"")&&set_data(l,s),(!g||D&1&&u!==(u=t[0].name))&&attr(a,"title",u),t[0].videos.length>0?w?(w.p(t,D),D&1&&transition_in(w,1)):(w=create_if_block_1$1(t),w.c(),transition_in(w,1),w.m(n,null)):w&&(group_outros(),transition_out(w,1,1,()=>{w=null}),check_outros()),D&3){A=t[0].subscriptions;let S;for(S=0;S<A.length;S+=1){const k=get_each_context$2(t,A,S);h[S]?(h[S].p(k,D),transition_in(h[S],1)):(h[S]=create_each_block$2(k),h[S].c(),transition_in(h[S],1),h[S].m(E,null))}for(group_outros(),S=A.length;S<h.length;S+=1)v(S);check_outros()}},i(b){if(!g){transition_in(o.$$.fragment,b),transition_in(c.$$.fragment,b),transition_in(w);for(let D=0;D<A.length;D+=1)transition_in(h[D]);I||add_render_callback(()=>{I=create_in_transition(e,fly,{x:100,easing:backOut}),I.start()}),g=!0}},o(b){transition_out(o.$$.fragment,b),transition_out(c.$$.fragment,b),transition_out(w),h=h.filter(Boolean);for(let D=0;D<h.length;D+=1)transition_out(h[D]);g=!1},d(b){b&&detach(e),destroy_component(o),destroy_component(c),w&&w.d(),destroy_each(h,b),y=!1,T()}}}function create_if_block_6(t){let e,n,r,o,i=t[0].name+"",a,s,l,u,d,f,c,_,m,E;n=new FaLayers({props:{size:"2x",class:"-mx-1",$$slots:{default:[create_default_slot_2$2]},$$scope:{ctx:t}}}),d=new Fa$1({props:{icon:faExpandAlt,translateY:.5}});let I=t[0].videos.length>0&&create_if_block_7(t);return{c(){e=element("span"),create_component(n.$$.fragment),r=space(),o=element("span"),a=text(i),l=space(),u=element("span"),create_component(d.$$.fragment),f=space(),I&&I.c(),c=empty(),attr(e,"class","inline-block h-8 align-middle"),attr(o,"class","inline-block h-8 max-w-[26rem] align-text-top truncate cursor-default"),attr(o,"title",s=t[0].name),attr(u,"class","float-left inline-block h-8 w-8 px-2 -mr-8 cursor-pointer"),attr(u,"title","Expand")},m(g,y){insert(g,e,y),mount_component(n,e,null),insert(g,r,y),insert(g,o,y),append(o,a),insert(g,l,y),insert(g,u,y),mount_component(d,u,null),insert(g,f,y),I&&I.m(g,y),insert(g,c,y),_=!0,m||(E=listen(u,"click",t[6]),m=!0)},p(g,y){const T={};y&2097152&&(T.$$scope={dirty:y,ctx:g}),n.$set(T),(!_||y&1)&&i!==(i=g[0].name+"")&&set_data(a,i),(!_||y&1&&s!==(s=g[0].name))&&attr(o,"title",s),g[0].videos.length>0?I?(I.p(g,y),y&1&&transition_in(I,1)):(I=create_if_block_7(g),I.c(),transition_in(I,1),I.m(c.parentNode,c)):I&&(group_outros(),transition_out(I,1,1,()=>{I=null}),check_outros())},i(g){_||(transition_in(n.$$.fragment,g),transition_in(d.$$.fragment,g),transition_in(I),_=!0)},o(g){transition_out(n.$$.fragment,g),transition_out(d.$$.fragment,g),transition_out(I),_=!1},d(g){g&&detach(e),destroy_component(n),g&&detach(r),g&&detach(o),g&&detach(l),g&&detach(u),destroy_component(d),g&&detach(f),I&&I.d(g),g&&detach(c),m=!1,E()}}}function create_if_block_4(t){let e,n,r,o,i,a=t[0].name+"",s,l,u,d,f,c,_=t[0].videos.length>0&&create_if_block_5(t);return{c(){e=element("a"),n=element("img"),o=space(),i=element("span"),s=text(a),d=space(),_&&_.c(),f=empty(),attr(n,"class","inline-block h-8 w-8 rounded-2xl align-middle"),src_url_equal(n.src,r=t[0].subscriptions[0].subscription.thumbnailUrl)||attr(n,"src",r),attr(n,"alt",""),attr(n,"loading","lazy"),attr(n,"width","88"),attr(n,"height","88"),attr(i,"class","inline-block h-8 max-w-[26rem] align-text-top truncate"),attr(i,"title",l=t[0].name),attr(e,"href",u="https://www.youtube.com/channel/"+t[0].subscriptions[0].subscription.channelId)},m(m,E){insert(m,e,E),append(e,n),append(e,o),append(e,i),append(i,s),insert(m,d,E),_&&_.m(m,E),insert(m,f,E),c=!0},p(m,E){(!c||E&1&&!src_url_equal(n.src,r=m[0].subscriptions[0].subscription.thumbnailUrl))&&attr(n,"src",r),(!c||E&1)&&a!==(a=m[0].name+"")&&set_data(s,a),(!c||E&1&&l!==(l=m[0].name))&&attr(i,"title",l),(!c||E&1&&u!==(u="https://www.youtube.com/channel/"+m[0].subscriptions[0].subscription.channelId))&&attr(e,"href",u),m[0].videos.length>0?_?(_.p(m,E),E&1&&transition_in(_,1)):(_=create_if_block_5(m),_.c(),transition_in(_,1),_.m(f.parentNode,f)):_&&(group_outros(),transition_out(_,1,1,()=>{_=null}),check_outros())},i(m){c||(transition_in(_),c=!0)},o(m){transition_out(_),c=!1},d(m){m&&detach(e),m&&detach(d),_&&_.d(m),m&&detach(f)}}}function create_default_slot_2$2(t){let e,n,r,o;return e=new Fa$1({props:{icon:faCircle,color:"rgb(82 82 82)"}}),r=new Fa$1({props:{icon:faUsers,scale:.5}}),{c(){create_component(e.$$.fragment),n=space(),create_component(r.$$.fragment)},m(i,a){mount_component(e,i,a),insert(i,n,a),mount_component(r,i,a),o=!0},p:noop,i(i){o||(transition_in(e.$$.fragment,i),transition_in(r.$$.fragment,i),o=!0)},o(i){transition_out(e.$$.fragment,i),transition_out(r.$$.fragment,i),o=!1},d(i){destroy_component(e,i),i&&detach(n),destroy_component(r,i)}}}function create_if_block_7(t){let e,n,r,o,i;return n=new Fa$1({props:{icon:faPlay,translateY:.5}}),{c(){e=element("span"),create_component(n.$$.fragment),attr(e,"class","float-right inline-block h-8 w-8 px-2 -ml-8 cursor-pointer"),attr(e,"title","Play all")},m(a,s){insert(a,e,s),mount_component(n,e,null),r=!0,o||(i=listen(e,"click",t[5]),o=!0)},p:noop,i(a){r||(transition_in(n.$$.fragment,a),r=!0)},o(a){transition_out(n.$$.fragment,a),r=!1},d(a){a&&detach(e),destroy_component(n),o=!1,i()}}}function create_if_block_5(t){let e,n,r,o,i,a;return n=new Fa$1({props:{icon:faPlay,translateY:.5}}),{c(){e=element("a"),create_component(n.$$.fragment),attr(e,"class","float-right h-8 w-8 px-2 -ml-8"),attr(e,"title","Play all"),attr(e,"href",r="https://www.youtube.com/watch?v="+t[0].videos[0].videoId+"&list="+t[0].subscriptions[0].subscription.uploadsPlaylistId)},m(s,l){insert(s,e,l),mount_component(n,e,null),o=!0,i||(a=listen(e,"click",prevent_default(t[5])),i=!0)},p(s,l){(!o||l&1&&r!==(r="https://www.youtube.com/watch?v="+s[0].videos[0].videoId+"&list="+s[0].subscriptions[0].subscription.uploadsPlaylistId))&&attr(e,"href",r)},i(s){o||(transition_in(n.$$.fragment,s),o=!0)},o(s){transition_out(n.$$.fragment,s),o=!1},d(s){s&&detach(e),destroy_component(n),i=!1,a()}}}function create_each_block_1$1(t){let e,n;return e=new VideoCard({props:{video:t[18]}}),{c(){create_component(e.$$.fragment)},m(r,o){mount_component(e,r,o),n=!0},p(r,o){const i={};o&1&&(i.video=r[18]),e.$set(i)},i(r){n||(transition_in(e.$$.fragment,r),n=!0)},o(r){transition_out(e.$$.fragment,r),n=!1},d(r){destroy_component(e,r)}}}function create_if_block_2$1(t){let e,n,r,o;const i=[create_if_block_3,create_else_block_1],a=[];function s(l,u){return l[3]<3?0:1}return e=s(t),n=a[e]=i[e](t),{c(){n.c(),r=empty()},m(l,u){a[e].m(l,u),insert(l,r,u),o=!0},p(l,u){let d=e;e=s(l),e===d?a[e].p(l,u):(group_outros(),transition_out(a[d],1,1,()=>{a[d]=null}),check_outros(),n=a[e],n?n.p(l,u):(n=a[e]=i[e](l),n.c()),transition_in(n,1),n.m(r.parentNode,r))},i(l){o||(transition_in(n),o=!0)},o(l){transition_out(n),o=!1},d(l){a[e].d(l),l&&detach(r)}}}function create_else_block_1(t){let e,n,r,o,i=errorString(t[4])+"",a,s,l,u;return l=new PrimaryButton({props:{class:"w-20 m-1",$$slots:{default:[create_default_slot_1$2]},$$scope:{ctx:t}}}),l.$on("click",t[9]),{c(){e=element("div"),n=element("p"),n.textContent="Error loading subscriptions:",r=space(),o=element("p"),a=text(i),s=space(),create_component(l.$$.fragment),attr(e,"class","w-full text-center")},m(d,f){insert(d,e,f),append(e,n),append(e,r),append(e,o),append(o,a),append(e,s),mount_component(l,e,null),u=!0},p(d,f){(!u||f&16)&&i!==(i=errorString(d[4])+"")&&set_data(a,i);const c={};f&2097152&&(c.$$scope={dirty:f,ctx:d}),l.$set(c)},i(d){u||(transition_in(l.$$.fragment,d),u=!0)},o(d){transition_out(l.$$.fragment,d),u=!1},d(d){d&&detach(e),destroy_component(l)}}}function create_if_block_3(t){let e,n,r,o,i;return n=new Spinner({}),{c(){e=element("div"),create_component(n.$$.fragment)},m(a,s){insert(a,e,s),mount_component(n,e,null),r=!0,o||(i=[action_destroyer(inview.call(null,e)),listen(e,"change",t[8])],o=!0)},p:noop,i(a){r||(transition_in(n.$$.fragment,a),r=!0)},o(a){transition_out(n.$$.fragment,a),r=!1},d(a){a&&detach(e),destroy_component(n),o=!1,run_all(i)}}}function create_default_slot_1$2(t){let e;return{c(){e=text("Retry")},m(n,r){insert(n,e,r)},d(n){n&&detach(e)}}}function create_default_slot$3(t){let e,n,r,o;return e=new Fa$1({props:{icon:faCircle,color:"rgb(82 82 82)"}}),r=new Fa$1({props:{icon:faUsers,scale:.5}}),{c(){create_component(e.$$.fragment),n=space(),create_component(r.$$.fragment)},m(i,a){mount_component(e,i,a),insert(i,n,a),mount_component(r,i,a),o=!0},p:noop,i(i){o||(transition_in(e.$$.fragment,i),transition_in(r.$$.fragment,i),o=!0)},o(i){transition_out(e.$$.fragment,i),transition_out(r.$$.fragment,i),o=!1},d(i){destroy_component(e,i),i&&detach(n),destroy_component(r,i)}}}function create_if_block_1$1(t){let e,n,r,o,i;return n=new Fa$1({props:{icon:faPlay,translateY:.5}}),{c(){e=element("span"),create_component(n.$$.fragment),attr(e,"class","float-right inline-block h-8 w-8 px-2 cursor-pointer"),attr(e,"title","Play all")},m(a,s){insert(a,e,s),mount_component(n,e,null),r=!0,o||(i=listen(e,"click",t[5]),o=!0)},p:noop,i(a){r||(transition_in(n.$$.fragment,a),r=!0)},o(a){transition_out(n.$$.fragment,a),r=!1},d(a){a&&detach(e),destroy_component(n),o=!1,i()}}}function create_each_block$2(t){let e,n;return e=new SubscriptionOverview({props:{subscriptionGroup:SubscriptionGroupChild(t[15].subscription),index:t[1]}}),{c(){create_component(e.$$.fragment)},m(r,o){mount_component(e,r,o),n=!0},p(r,o){const i={};o&1&&(i.subscriptionGroup=SubscriptionGroupChild(r[15].subscription)),o&2&&(i.index=r[1]),e.$set(i)},i(r){n||(transition_in(e.$$.fragment,r),n=!0)},o(r){transition_out(e.$$.fragment,r),n=!1},d(r){destroy_component(e,r)}}}function create_fragment$5(t){let e,n,r,o;const i=[create_if_block$3,create_else_block$3],a=[];function s(l,u){return l[0].expanded&&l[0].subscriptions.length>1?0:1}return e=s(t),n=a[e]=i[e](t),{c(){n.c(),r=empty()},m(l,u){a[e].m(l,u),insert(l,r,u),o=!0},p(l,[u]){let d=e;e=s(l),e===d?a[e].p(l,u):(group_outros(),transition_out(a[d],1,1,()=>{a[d]=null}),check_outros(),n=a[e],n?n.p(l,u):(n=a[e]=i[e](l),n.c()),transition_in(n,1),n.m(r.parentNode,r))},i(l){o||(transition_in(n),o=!0)},o(l){transition_out(n),o=!1},d(l){a[e].d(l),l&&detach(r)}}}function instance$5(t,e,n){let r,o;component_subscribe(t,settingsStore,y=>n(11,r=y)),component_subscribe(t,playerStore,y=>n(12,o=y));let{subscriptionGroup:i}=e,{index:a}=e,s=!1,l=!1,u=0,d;async function f(){i.playlist||(set_store_value(playerStore,o={loading:!0},o),await loadCustomPlaylist(i)),set_store_value(playerStore,o=i.playlist,o)}async function c(){s&&u<3&&(await _(),setTimeout(c,100))}async function _(){if(!l){l=!0;try{await loadMoreVideos(i),n(0,i),n(3,u=0)}catch(y){console.error(y),n(3,u++,u),n(4,d=y)}l=!1}}function m(){n(0,i.expanded=!i.expanded,i);const y=r;y.subscriptionGroups[a].expanded=i.expanded,writeSettings(y).then()}function E(y){bubble.call(this,t,y)}const I=y=>n(2,s=y.detail.inView),g=()=>n(3,u=0);return t.$$set=y=>{"subscriptionGroup"in y&&n(0,i=y.subscriptionGroup),"index"in y&&n(1,a=y.index)},t.$$.update=()=>{t.$$.dirty&12&&s&&u<3&&c()},[i,a,s,u,d,f,m,E,I,g]}class SubscriptionOverview extends SvelteComponent{constructor(e){super(),init(this,e,instance$5,create_fragment$5,safe_not_equal,{subscriptionGroup:0,index:1})}}function is_date(t){return Object.prototype.toString.call(t)==="[object Date]"}function get_interpolator(t,e){if(t===e||t!==t)return()=>t;const n=typeof t;if(n!==typeof e||Array.isArray(t)!==Array.isArray(e))throw new Error("Cannot interpolate values of different type");if(Array.isArray(t)){const r=e.map((o,i)=>get_interpolator(t[i],o));return o=>r.map(i=>i(o))}if(n==="object"){if(!t||!e)throw new Error("Object cannot be null");if(is_date(t)&&is_date(e)){t=t.getTime(),e=e.getTime();const i=e-t;return a=>new Date(t+a*i)}const r=Object.keys(e),o={};return r.forEach(i=>{o[i]=get_interpolator(t[i],e[i])}),i=>{const a={};return r.forEach(s=>{a[s]=o[s](i)}),a}}if(n==="number"){const r=e-t;return o=>t+o*r}throw new Error(`Cannot interpolate ${n} values`)}function tweened(t,e={}){const n=writable(t);let r,o=t;function i(a,s){if(t==null)return n.set(t=a),Promise.resolve();o=a;let l=r,u=!1,{delay:d=0,duration:f=400,easing:c=identity,interpolate:_=get_interpolator}=assign(assign({},e),s);if(f===0)return l&&(l.abort(),l=null),n.set(t=o),Promise.resolve();const m=now$1()+d;let E;return r=loop$1(I=>{if(I<m)return!0;u||(E=_(t,a),typeof f=="function"&&(f=f(t,a)),u=!0),l&&(l.abort(),l=null);const g=I-m;return g>f?(n.set(t=a),!1):(n.set(t=E(c(g/f))),!0)}),r.promise}return{set:i,update:(a,s)=>i(a(o,t),s),subscribe:n.subscribe}}function create_fragment$4(t){let e,n,r,o;const i=t[4].default,a=create_slot(i,t,t[3],null);return{c(){e=element("div"),a&&a.c(),attr(e,"class","w-full h-full pb-[2px] overflow-x-scroll x-scroll")},m(s,l){insert(s,e,l),a&&a.m(e,null),t[5](e),n=!0,r||(o=[listen(e,"wheel",t[1],{passive:!0}),listen(e,"scroll",t[2])],r=!0)},p(s,[l]){a&&a.p&&(!n||l&8)&&update_slot_base(a,i,s,s[3],n?get_slot_changes(i,s[3],l,null):get_all_dirty_from_scope(s[3]),null)},i(s){n||(transition_in(a,s),n=!0)},o(s){transition_out(a,s),n=!1},d(s){s&&detach(e),a&&a.d(s),t[5](null),r=!1,run_all(o)}}}const duration$1=100;function instance$4(t,e,n){let{$$slots:r={},$$scope:o}=e,i;const a=tweened(0,{duration:duration$1});let s=!1,l;onDestroy(a.subscribe(_=>{s&&n(0,i.scrollLeft=_,i)}));function u(_){_.deltaX?(s=!1,a.update(m=>d(m+_.deltaX),{duration:0})):_.deltaY&&(s=!0,a.update(m=>d(m+_.deltaY)))}function d(_){return Math.max(0,Math.min(_,i.scrollWidth-i.clientWidth))}function f(){clearTimeout(l),l=setTimeout(()=>{s=!1,a.set(i.scrollLeft,{duration:0})},duration$1)}function c(_){binding_callbacks[_?"unshift":"push"](()=>{i=_,n(0,i)})}return t.$$set=_=>{"$$scope"in _&&n(3,o=_.$$scope)},[i,u,f,o,r,c]}class HorizontalScroll extends SvelteComponent{constructor(e){super(),init(this,e,instance$4,create_fragment$4,safe_not_equal,{})}}function Settings(t=[]){return{subscriptionGroups:t.map(SubscriptionGroupSettings)}}function SubscriptionGroupSettings(t){return{name:t.name,expanded:t.expanded,subscriptionIds:t.subscriptions.map(e=>e.subscription.channelId)}}function fade(t,e){const n=()=>{t.classList.contains("fadeOut")&&t.classList.add("hidden")};t.addEventListener("transitionend",n),e.initial?t.classList.add("fadeIn"):(t.classList.add("hidden"),t.classList.add("fadeOut"));const r=i=>{i.visible?(t.classList.remove("hidden"),setTimeout(()=>t.classList.replace("fadeOut","fadeIn"))):t.classList.replace("fadeIn","fadeOut")},o=()=>{t.removeEventListener("transitionend",n)};return r(e),{update:r,destroy:o}}function get_each_context$1(t,e,n){const r=t.slice();return r[10]=e[n],r[12]=n,r}function create_catch_block$1(t){let e,n=errorString(t[13])+"",r;return{c(){e=element("p"),r=text(n),attr(e,"class","text-center")},m(o,i){insert(o,e,i),append(e,r)},p:noop,i:noop,o:noop,d(o){o&&detach(e)}}}function create_then_block$1(t){let e,n,r,o;const i=[create_if_block$2,create_else_block$2],a=[];function s(l,u){return l[0].length===0?0:1}return e=s(t),n=a[e]=i[e](t),{c(){n.c(),r=empty()},m(l,u){a[e].m(l,u),insert(l,r,u),o=!0},p(l,u){let d=e;e=s(l),e===d?a[e].p(l,u):(group_outros(),transition_out(a[d],1,1,()=>{a[d]=null}),check_outros(),n=a[e],n?n.p(l,u):(n=a[e]=i[e](l),n.c()),transition_in(n,1),n.m(r.parentNode,r))},i(l){o||(transition_in(n),o=!0)},o(l){transition_out(n),o=!1},d(l){a[e].d(l),l&&detach(r)}}}function create_else_block$2(t){let e,n,r,o,i,a;return n=new HorizontalScroll({props:{$$slots:{default:[create_default_slot_2$1]},$$scope:{ctx:t}}}),{c(){e=element("div"),create_component(n.$$.fragment),attr(e,"class","w-full h-[calc(100%-6px)]")},m(s,l){insert(s,e,l),mount_component(n,e,null),o=!0,i||(a=action_destroyer(r=fade.call(null,e,{visible:!t[1],initial:!0})),i=!0)},p(s,l){const u={};l&16385&&(u.$$scope={dirty:l,ctx:s}),n.$set(u),r&&is_function(r.update)&&l&2&&r.update.call(null,{visible:!s[1],initial:!0})},i(s){o||(transition_in(n.$$.fragment,s),o=!0)},o(s){transition_out(n.$$.fragment,s),o=!1},d(s){s&&detach(e),destroy_component(n),i=!1,a()}}}function create_if_block$2(t){let e,n;return e=new Center({props:{$$slots:{default:[create_default_slot_1$1]},$$scope:{ctx:t}}}),{c(){create_component(e.$$.fragment)},m(r,o){mount_component(e,r,o),n=!0},p(r,o){const i={};o&16384&&(i.$$scope={dirty:o,ctx:r}),e.$set(i)},i(r){n||(transition_in(e.$$.fragment,r),n=!0)},o(r){transition_out(e.$$.fragment,r),n=!1},d(r){destroy_component(e,r)}}}function create_each_block$1(t){let e,n;return e=new SubscriptionOverview({props:{subscriptionGroup:t[10],index:t[12]}}),{c(){create_component(e.$$.fragment)},m(r,o){mount_component(e,r,o),n=!0},p(r,o){const i={};o&1&&(i.subscriptionGroup=r[10]),e.$set(i)},i(r){n||(transition_in(e.$$.fragment,r),n=!0)},o(r){transition_out(e.$$.fragment,r),n=!1},d(r){destroy_component(e,r)}}}function create_default_slot_2$1(t){let e,n,r=t[0],o=[];for(let a=0;a<r.length;a+=1)o[a]=create_each_block$1(get_each_context$1(t,r,a));const i=a=>transition_out(o[a],1,1,()=>{o[a]=null});return{c(){e=element("div");for(let a=0;a<o.length;a+=1)o[a].c();attr(e,"class","w-max h-full")},m(a,s){insert(a,e,s);for(let l=0;l<o.length;l+=1)o[l].m(e,null);n=!0},p(a,s){if(s&1){r=a[0];let l;for(l=0;l<r.length;l+=1){const u=get_each_context$1(a,r,l);o[l]?(o[l].p(u,s),transition_in(o[l],1)):(o[l]=create_each_block$1(u),o[l].c(),transition_in(o[l],1),o[l].m(e,null))}for(group_outros(),l=r.length;l<o.length;l+=1)i(l);check_outros()}},i(a){if(!n){for(let s=0;s<r.length;s+=1)transition_in(o[s]);n=!0}},o(a){o=o.filter(Boolean);for(let s=0;s<o.length;s+=1)transition_out(o[s]);n=!1},d(a){a&&detach(e),destroy_each(o,a)}}}function create_default_slot_1$1(t){let e,n,r,o,i;return{c(){e=element("p"),e.textContent="No subscriptions to display",n=space(),r=element("br"),o=space(),i=element("p"),i.textContent='Click the "Edit" button to add subscriptions'},m(a,s){insert(a,e,s),insert(a,n,s),insert(a,r,s),insert(a,o,s),insert(a,i,s)},p:noop,d(a){a&&detach(e),a&&detach(n),a&&detach(r),a&&detach(o),a&&detach(i)}}}function create_pending_block$1(t){let e,n;return e=new Center({props:{$$slots:{default:[create_default_slot$2]},$$scope:{ctx:t}}}),{c(){create_component(e.$$.fragment)},m(r,o){mount_component(e,r,o),n=!0},p(r,o){const i={};o&16384&&(i.$$scope={dirty:o,ctx:r}),e.$set(i)},i(r){n||(transition_in(e.$$.fragment,r),n=!0)},o(r){transition_out(e.$$.fragment,r),n=!1},d(r){destroy_component(e,r)}}}function create_default_slot$2(t){let e,n;return e=new Spinner({}),{c(){create_component(e.$$.fragment)},m(r,o){mount_component(e,r,o),n=!0},i(r){n||(transition_in(e.$$.fragment,r),n=!0)},o(r){transition_out(e.$$.fragment,r),n=!1},d(r){destroy_component(e,r)}}}function create_fragment$3(t){let e,n,r={ctx:t,current:null,token:null,hasCatch:!0,pending:create_pending_block$1,then:create_then_block$1,catch:create_catch_block$1,value:9,error:13,blocks:[,,,]};return handle_promise(t[2](),r),{c(){e=empty(),r.block.c()},m(o,i){insert(o,e,i),r.block.m(o,r.anchor=i),r.mount=()=>e.parentNode,r.anchor=e,n=!0},p(o,[i]){t=o,update_await_block_branch(r,t,i)},i(o){n||(transition_in(r.block),n=!0)},o(o){for(let i=0;i<3;i+=1){const a=r.blocks[i];transition_out(a)}n=!1},d(o){o&&detach(e),r.block.d(o),r.token=null,r=null}}}function instance$3(t,e,n){let r,o,i;component_subscribe(t,subscriptionsStore,c=>n(4,r=c)),component_subscribe(t,settingsStore,c=>n(5,o=c)),component_subscribe(t,editorVisible,c=>n(1,i=c));let a=!1,s;async function l(){const[c,_]=await Promise.all([d(),u()]);set_store_value(settingsStore,o=c,o),await f(c,_),a=!0}onDestroy(settingsStore.subscribe(c=>a&&f(c,r)));async function u(){const c=r;try{const _=await listAllSubscriptions(c==null?void 0:c.etag),m=await listAllChannels(_.items);return Subscriptions(_,m)}catch(_){if(c&&_===NOT_MODIFIED)return c;throw _}}async function d(){let c=await readSettings();return c||(c=Settings()),c}async function f(c,_){await listAllPlaylistItems(_,c),set_store_value(subscriptionsStore,r=_,r);const m=new Map(_.items.map(E=>[E.channelId,E]));n(0,s=await Promise.all(c.subscriptionGroups.map(E=>SubscriptionGroup(E.name,E.expanded,E.subscriptionIds.map(I=>m.get(I))))))}return[s,i,l]}class SubscriptionsDeck extends SvelteComponent{constructor(e){super(),init(this,e,instance$3,create_fragment$3,safe_not_equal,{})}}/*!
* tabbable 5.3.1
* @license MIT, https://github.com/focus-trap/tabbable/blob/master/LICENSE
*/var candidateSelectors=["input","select","textarea","a[href]","button","[tabindex]:not(slot)","audio[controls]","video[controls]",'[contenteditable]:not([contenteditable="false"])',"details>summary:first-of-type","details"],candidateSelector=candidateSelectors.join(","),NoElement=typeof Element=="undefined",matches=NoElement?function(){}:Element.prototype.matches||Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector,getRootNode=!NoElement&&Element.prototype.getRootNode?function(t){return t.getRootNode()}:function(t){return t.ownerDocument},getCandidates=function t(e,n,r){var o=Array.prototype.slice.apply(e.querySelectorAll(candidateSelector));return n&&matches.call(e,candidateSelector)&&o.unshift(e),o=o.filter(r),o},getCandidatesIteratively=function t(e,n,r){for(var o=[],i=Array.from(e);i.length;){var a=i.shift();if(a.tagName==="SLOT"){var s=a.assignedElements(),l=s.length?s:a.children,u=t(l,!0,r);r.flatten?o.push.apply(o,u):o.push({scope:a,candidates:u})}else{var d=matches.call(a,candidateSelector);d&&r.filter(a)&&(n||!e.includes(a))&&o.push(a);var f=a.shadowRoot||typeof r.getShadowRoot=="function"&&r.getShadowRoot(a);if(f){var c=t(f===!0?a.children:f.children,!0,r);r.flatten?o.push.apply(o,c):o.push({scope:a,candidates:c})}else i.unshift.apply(i,a.children)}}return o},getTabindex=function t(e,n){return e.tabIndex<0&&(n||/^(AUDIO|VIDEO|DETAILS)$/.test(e.tagName)||e.isContentEditable)&&isNaN(parseInt(e.getAttribute("tabindex"),10))?0:e.tabIndex},sortOrderedTabbables=function t(e,n){return e.tabIndex===n.tabIndex?e.documentOrder-n.documentOrder:e.tabIndex-n.tabIndex},isInput=function t(e){return e.tagName==="INPUT"},isHiddenInput=function t(e){return isInput(e)&&e.type==="hidden"},isDetailsWithSummary=function t(e){var n=e.tagName==="DETAILS"&&Array.prototype.slice.apply(e.children).some(function(r){return r.tagName==="SUMMARY"});return n},getCheckedRadio=function t(e,n){for(var r=0;r<e.length;r++)if(e[r].checked&&e[r].form===n)return e[r]},isTabbableRadio=function t(e){if(!e.name)return!0;var n=e.form||getRootNode(e),r=function(s){return n.querySelectorAll('input[type="radio"][name="'+s+'"]')},o;if(typeof window!="undefined"&&typeof window.CSS!="undefined"&&typeof window.CSS.escape=="function")o=r(window.CSS.escape(e.name));else try{o=r(e.name)}catch(a){return console.error("Looks like you have a radio button with a name attribute containing invalid CSS selector characters and need the CSS.escape polyfill: %s",a.message),!1}var i=getCheckedRadio(o,e.form);return!i||i===e},isRadio=function t(e){return isInput(e)&&e.type==="radio"},isNonTabbableRadio=function t(e){return isRadio(e)&&!isTabbableRadio(e)},isZeroArea=function t(e){var n=e.getBoundingClientRect(),r=n.width,o=n.height;return r===0&&o===0},isHidden=function t(e,n){var r=n.displayCheck,o=n.getShadowRoot;if(getComputedStyle(e).visibility==="hidden")return!0;var i=matches.call(e,"details>summary:first-of-type"),a=i?e.parentElement:e;if(matches.call(a,"details:not([open]) *"))return!0;if(!r||r==="full"){if(typeof o=="function"){for(var s=e;e;){var l=e.parentElement,u=getRootNode(e);if(l&&!l.shadowRoot&&o(l)===!0)return isZeroArea(e);e.assignedSlot?e=e.assignedSlot:!l&&u!==e.ownerDocument?e=u.host:e=l}e=s}return!e.getClientRects().length}else if(r==="non-zero-area")return isZeroArea(e);return!1},isDisabledFromFieldset=function t(e){if(/^(INPUT|BUTTON|SELECT|TEXTAREA)$/.test(e.tagName))for(var n=e.parentElement;n;){if(n.tagName==="FIELDSET"&&n.disabled){for(var r=0;r<n.children.length;r++){var o=n.children.item(r);if(o.tagName==="LEGEND")return matches.call(n,"fieldset[disabled] *")?!0:!o.contains(e)}return!0}n=n.parentElement}return!1},isNodeMatchingSelectorFocusable=function t(e,n){return!(n.disabled||isHiddenInput(n)||isHidden(n,e)||isDetailsWithSummary(n)||isDisabledFromFieldset(n))},isNodeMatchingSelectorTabbable=function t(e,n){return!(isNonTabbableRadio(n)||getTabindex(n)<0||!isNodeMatchingSelectorFocusable(e,n))},sortByOrder=function t(e){var n=[],r=[];return e.forEach(function(o,i){var a=!!o.scope,s=a?o.scope:o,l=getTabindex(s,a),u=a?t(o.candidates):s;l===0?a?n.push.apply(n,u):n.push(s):r.push({documentOrder:i,tabIndex:l,item:o,isScope:a,content:u})}),r.sort(sortOrderedTabbables).reduce(function(o,i){return i.isScope?o.push.apply(o,i.content):o.push(i.content),o},[]).concat(n)},tabbable=function t(e,n){n=n||{};var r;return n.getShadowRoot?r=getCandidatesIteratively([e],n.includeContainer,{filter:isNodeMatchingSelectorTabbable.bind(null,n),flatten:!1,getShadowRoot:n.getShadowRoot}):r=getCandidates(e,n.includeContainer,isNodeMatchingSelectorTabbable.bind(null,n)),sortByOrder(r)},focusable=function t(e,n){n=n||{};var r;return n.getShadowRoot?r=getCandidatesIteratively([e],n.includeContainer,{filter:isNodeMatchingSelectorFocusable.bind(null,n),flatten:!0,getShadowRoot:n.getShadowRoot}):r=getCandidates(e,n.includeContainer,isNodeMatchingSelectorFocusable.bind(null,n)),r},isTabbable=function t(e,n){if(n=n||{},!e)throw new Error("No node provided");return matches.call(e,candidateSelector)===!1?!1:isNodeMatchingSelectorTabbable(n,e)},focusableCandidateSelector=candidateSelectors.concat("iframe").join(","),isFocusable=function t(e,n){if(n=n||{},!e)throw new Error("No node provided");return matches.call(e,focusableCandidateSelector)===!1?!1:isNodeMatchingSelectorFocusable(n,e)};/*!
* focus-trap 6.8.1
* @license MIT, https://github.com/focus-trap/focus-trap/blob/master/LICENSE
*/function ownKeys(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(t,o).enumerable})),n.push.apply(n,r)}return n}function _objectSpread2(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?ownKeys(Object(n),!0).forEach(function(r){_defineProperty(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ownKeys(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function _defineProperty(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var activeFocusTraps=function(){var t=[];return{activateTrap:function(n){if(t.length>0){var r=t[t.length-1];r!==n&&r.pause()}var o=t.indexOf(n);o===-1||t.splice(o,1),t.push(n)},deactivateTrap:function(n){var r=t.indexOf(n);r!==-1&&t.splice(r,1),t.length>0&&t[t.length-1].unpause()}}}(),isSelectableInput=function t(e){return e.tagName&&e.tagName.toLowerCase()==="input"&&typeof e.select=="function"},isEscapeEvent=function t(e){return e.key==="Escape"||e.key==="Esc"||e.keyCode===27},isTabEvent=function t(e){return e.key==="Tab"||e.keyCode===9},delay=function t(e){return setTimeout(e,0)},findIndex=function t(e,n){var r=-1;return e.every(function(o,i){return n(o)?(r=i,!1):!0}),r},valueOrHandler=function t(e){for(var n=arguments.length,r=new Array(n>1?n-1:0),o=1;o<n;o++)r[o-1]=arguments[o];return typeof e=="function"?e.apply(void 0,r):e},getActualTarget=function t(e){return e.target.shadowRoot&&typeof e.composedPath=="function"?e.composedPath()[0]:e.target},createFocusTrap=function t(e,n){var r=(n==null?void 0:n.document)||document,o=_objectSpread2({returnFocusOnDeactivate:!0,escapeDeactivates:!0,delayInitialFocus:!0},n),i={containers:[],containerGroups:[],tabbableGroups:[],nodeFocusedBeforeActivation:null,mostRecentlyFocusedNode:null,active:!1,paused:!1,delayInitialFocusTimer:void 0},a,s=function(h,v,b){return h&&h[v]!==void 0?h[v]:o[b||v]},l=function(h){return i.containerGroups.findIndex(function(v){var b=v.container,D=v.tabbableNodes;return b.contains(h)||D.find(function(L){return L===h})})},u=function(h){var v=o[h];if(typeof v=="function"){for(var b=arguments.length,D=new Array(b>1?b-1:0),L=1;L<b;L++)D[L-1]=arguments[L];v=v.apply(void 0,D)}if(!v){if(v===void 0||v===!1)return v;throw new Error("`".concat(h,"` was specified but was not a node, or did not return a node"))}var S=v;if(typeof v=="string"&&(S=r.querySelector(v),!S))throw new Error("`".concat(h,"` as selector refers to no known node"));return S},d=function(){var h=u("initialFocus");if(h===!1)return!1;if(h===void 0)if(l(r.activeElement)>=0)h=r.activeElement;else{var v=i.tabbableGroups[0],b=v&&v.firstTabbableNode;h=b||u("fallbackFocus")}if(!h)throw new Error("Your focus-trap needs to have at least one focusable element");return h},f=function(){if(i.containerGroups=i.containers.map(function(h){var v=tabbable(h,o.tabbableOptions),b=focusable(h,o.tabbableOptions);return{container:h,tabbableNodes:v,focusableNodes:b,firstTabbableNode:v.length>0?v[0]:null,lastTabbableNode:v.length>0?v[v.length-1]:null,nextTabbableNode:function(L){var S=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,k=b.findIndex(function(F){return F===L});if(!(k<0))return S?b.slice(k+1).find(function(F){return isTabbable(F,o.tabbableOptions)}):b.slice(0,k).reverse().find(function(F){return isTabbable(F,o.tabbableOptions)})}}}),i.tabbableGroups=i.containerGroups.filter(function(h){return h.tabbableNodes.length>0}),i.tabbableGroups.length<=0&&!u("fallbackFocus"))throw new Error("Your focus-trap must have at least one container with at least one tabbable node in it at all times")},c=function A(h){if(h!==!1&&h!==r.activeElement){if(!h||!h.focus){A(d());return}h.focus({preventScroll:!!o.preventScroll}),i.mostRecentlyFocusedNode=h,isSelectableInput(h)&&h.select()}},_=function(h){var v=u("setReturnFocus",h);return v||(v===!1?!1:h)},m=function(h){var v=getActualTarget(h);if(!(l(v)>=0)){if(valueOrHandler(o.clickOutsideDeactivates,h)){a.deactivate({returnFocus:o.returnFocusOnDeactivate&&!isFocusable(v,o.tabbableOptions)});return}valueOrHandler(o.allowOutsideClick,h)||h.preventDefault()}},E=function(h){var v=getActualTarget(h),b=l(v)>=0;b||v instanceof Document?b&&(i.mostRecentlyFocusedNode=v):(h.stopImmediatePropagation(),c(i.mostRecentlyFocusedNode||d()))},I=function(h){var v=getActualTarget(h);f();var b=null;if(i.tabbableGroups.length>0){var D=l(v),L=D>=0?i.containerGroups[D]:void 0;if(D<0)h.shiftKey?b=i.tabbableGroups[i.tabbableGroups.length-1].lastTabbableNode:b=i.tabbableGroups[0].firstTabbableNode;else if(h.shiftKey){var S=findIndex(i.tabbableGroups,function(M){var U=M.firstTabbableNode;return v===U});if(S<0&&(L.container===v||isFocusable(v,o.tabbableOptions)&&!isTabbable(v,o.tabbableOptions)&&!L.nextTabbableNode(v,!1))&&(S=D),S>=0){var k=S===0?i.tabbableGroups.length-1:S-1,F=i.tabbableGroups[k];b=F.lastTabbableNode}}else{var G=findIndex(i.tabbableGroups,function(M){var U=M.lastTabbableNode;return v===U});if(G<0&&(L.container===v||isFocusable(v,o.tabbableOptions)&&!isTabbable(v,o.tabbableOptions)&&!L.nextTabbableNode(v))&&(G=D),G>=0){var x=G===i.tabbableGroups.length-1?0:G+1,P=i.tabbableGroups[x];b=P.firstTabbableNode}}}else b=u("fallbackFocus");b&&(h.preventDefault(),c(b))},g=function(h){if(isEscapeEvent(h)&&valueOrHandler(o.escapeDeactivates,h)!==!1){h.preventDefault(),a.deactivate();return}if(isTabEvent(h)){I(h);return}},y=function(h){if(!valueOrHandler(o.clickOutsideDeactivates,h)){var v=getActualTarget(h);l(v)>=0||valueOrHandler(o.allowOutsideClick,h)||(h.preventDefault(),h.stopImmediatePropagation())}},T=function(){if(!!i.active)return activeFocusTraps.activateTrap(a),i.delayInitialFocusTimer=o.delayInitialFocus?delay(function(){c(d())}):c(d()),r.addEventListener("focusin",E,!0),r.addEventListener("mousedown",m,{capture:!0,passive:!1}),r.addEventListener("touchstart",m,{capture:!0,passive:!1}),r.addEventListener("click",y,{capture:!0,passive:!1}),r.addEventListener("keydown",g,{capture:!0,passive:!1}),a},w=function(){if(!!i.active)return r.removeEventListener("focusin",E,!0),r.removeEventListener("mousedown",m,!0),r.removeEventListener("touchstart",m,!0),r.removeEventListener("click",y,!0),r.removeEventListener("keydown",g,!0),a};return a={activate:function(h){if(i.active)return this;var v=s(h,"onActivate"),b=s(h,"onPostActivate"),D=s(h,"checkCanFocusTrap");D||f(),i.active=!0,i.paused=!1,i.nodeFocusedBeforeActivation=r.activeElement,v&&v();var L=function(){D&&f(),T(),b&&b()};return D?(D(i.containers.concat()).then(L,L),this):(L(),this)},deactivate:function(h){if(!i.active)return this;clearTimeout(i.delayInitialFocusTimer),i.delayInitialFocusTimer=void 0,w(),i.active=!1,i.paused=!1,activeFocusTraps.deactivateTrap(a);var v=s(h,"onDeactivate"),b=s(h,"onPostDeactivate"),D=s(h,"checkCanReturnFocus");v&&v();var L=s(h,"returnFocus","returnFocusOnDeactivate"),S=function(){delay(function(){L&&c(_(i.nodeFocusedBeforeActivation)),b&&b()})};return L&&D?(D(_(i.nodeFocusedBeforeActivation)).then(S,S),this):(S(),this)},pause:function(){return i.paused||!i.active?this:(i.paused=!0,w(),this)},unpause:function(){return!i.paused||!i.active?this:(i.paused=!1,f(),T(),this)},updateContainerElements:function(h){var v=[].concat(h).filter(Boolean);return i.containers=v.map(function(b){return typeof b=="string"?r.querySelector(b):b}),i.active&&f(),this}},a.updateContainerElements(e),a};function trapFocus(t,e){const n=createFocusTrap(t,{checkCanFocusTrap:tick,checkCanReturnFocus:tick,initialFocus:!1,allowOutsideClick:!0,escapeDeactivates:!1}),r=i=>i?n.activate():n.deactivate(),o=()=>n.deactivate();return r(e),{update:r,destroy:o}}function create_fragment$2(t){let e,n,r,o,i,a,s,l,u,d;return r=new Spinner({}),{c(){e=element("div"),n=element("div"),create_component(r.$$.fragment),o=space(),i=element("div"),i.innerHTML='<div id="player" tabindex="0"></div>',attr(n,"class","fixed top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 z-20"),toggle_class(n,"invisible",!t[0]||t[2]),attr(i,"class","fixed top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 z-30"),toggle_class(i,"invisible",!t[0]||!t[2]),attr(e,"class","fixed inset-0 z-10 bg-black/80")},m(f,c){insert(f,e,c),append(e,n),mount_component(r,n,null),append(e,o),append(e,i),l=!0,u||(d=[listen(window,"resize",t[6]),action_destroyer(a=trapFocus.call(null,i,t[0]&&t[2])),action_destroyer(s=fade.call(null,e,{visible:t[0]&&!t[3],initial:!1})),listen(e,"click",self(t[7]))],u=!0)},p(f,[c]){c&5&&toggle_class(n,"invisible",!f[0]||f[2]),a&&is_function(a.update)&&c&5&&a.update.call(null,f[0]&&f[2]),c&5&&toggle_class(i,"invisible",!f[0]||!f[2]),s&&is_function(s.update)&&c&9&&s.update.call(null,{visible:f[0]&&!f[3],initial:!1})},i(f){l||(transition_in(r.$$.fragment,f),l=!0)},o(f){transition_out(r.$$.fragment,f),l=!1},d(f){f&&detach(e),destroy_component(r),u=!1,run_all(d)}}}function calcPlayerSize(){let t=Math.min(document.body.clientWidth,16*document.body.clientHeight/9),e=Math.min(document.body.clientHeight,9*document.body.clientWidth/16);return t>.9*document.body.clientWidth&&e>.9*document.body.clientHeight&&(t*=.9,e*=.9),[t,e]}function instance$2(t,e,n){let r;component_subscribe(t,editorVisible,c=>n(3,r=c));var o;(function(c){c[c.UNINITIALISED=0]="UNINITIALISED",c[c.INITIALISING=1]="INITIALISING",c[c.INITIALISED=2]="INITIALISED"})(o||(o={}));let i=!1,a=!1,s,l=o.UNINITIALISED;function u(c){if(l===o.UNINITIALISED){n(5,l=o.INITIALISING);const[_,m]=calcPlayerSize(),E={width:_,height:m,playerVars:{autohide:1,autoplay:1,playsinline:1},events:{onReady:()=>{console.log("playerReady"),n(5,l=o.INITIALISED),n(2,a=!0)},onStateChange:I=>{console.log("playerState",I),(I.data===YT.PlayerState.BUFFERING||I.data===YT.PlayerState.PLAYING)&&n(2,a=!0)},onError:I=>{console.error("playerError",I),s.getPlaylist()&&s.nextVideo()}}};c.videoId?E.videoId=c.videoId:c.playlistId?(E.playerVars.listType="playlist",E.playerVars.list=c.playlistId):c.customPlaylist&&(E.playerVars.playlist=c.customPlaylist.join(",")),n(1,s=new YT.Player("player",E))}else l===o.INITIALISING?setTimeout(()=>u(c),100):l===o.INITIALISED&&(c.videoId?s.loadVideoById(c.videoId):c.playlistId?s.loadPlaylist({listType:"playlist",list:c.playlistId}):c.customPlaylist&&s.loadPlaylist(c.customPlaylist))}onDestroy(playerStore.subscribe(c=>{c&&(playerStore.set(null),n(0,i=!0),c.loading||u(c))}));const d=()=>s&&s.setSize(...calcPlayerSize()),f=()=>n(0,i=!1);return t.$$.update=()=>{t.$$.dirty&1&&(i||n(2,a=!1)),t.$$.dirty&51&&l===o.INITIALISED&&!i&&s.stopVideo()},[i,s,a,r,o,l,d,f]}class Player extends SvelteComponent{constructor(e){super(),init(this,e,instance$2,create_fragment$2,safe_not_equal,{})}}function flip(t,{from:e,to:n},r={}){const o=getComputedStyle(t),i=o.transform==="none"?"":o.transform,[a,s]=o.transformOrigin.split(" ").map(parseFloat),l=e.left+e.width*a/n.width-(n.left+a),u=e.top+e.height*s/n.height-(n.top+s),{delay:d=0,duration:f=_=>Math.sqrt(_)*120,easing:c=cubicOut}=r;return{delay:d,duration:is_function(f)?f(Math.sqrt(l*l+u*u)):f,easing:c,css:(_,m)=>{const E=m*l,I=m*u,g=_+m*e.width/n.width,y=_+m*e.height/n.height;return`transform: ${i} translate(${E}px, ${I}px) scale(${g}, ${y});`}}}const FINALIZE_EVENT_NAME="finalize",CONSIDER_EVENT_NAME="consider";function dispatchFinalizeEvent(t,e,n){t.dispatchEvent(new CustomEvent(FINALIZE_EVENT_NAME,{detail:{items:e,info:n}}))}function dispatchConsiderEvent(t,e,n){t.dispatchEvent(new CustomEvent(CONSIDER_EVENT_NAME,{detail:{items:e,info:n}}))}const DRAGGED_ENTERED_EVENT_NAME="draggedEntered",DRAGGED_LEFT_EVENT_NAME="draggedLeft",DRAGGED_OVER_INDEX_EVENT_NAME="draggedOverIndex",DRAGGED_LEFT_DOCUMENT_EVENT_NAME="draggedLeftDocument",DRAGGED_LEFT_TYPES={LEFT_FOR_ANOTHER:"leftForAnother",OUTSIDE_OF_ANY:"outsideOfAny"};function dispatchDraggedElementEnteredContainer(t,e,n){t.dispatchEvent(new CustomEvent(DRAGGED_ENTERED_EVENT_NAME,{detail:{indexObj:e,draggedEl:n}}))}function dispatchDraggedElementLeftContainerForAnother(t,e,n){t.dispatchEvent(new CustomEvent(DRAGGED_LEFT_EVENT_NAME,{detail:{draggedEl:e,type:DRAGGED_LEFT_TYPES.LEFT_FOR_ANOTHER,theOtherDz:n}}))}function dispatchDraggedElementLeftContainerForNone(t,e){t.dispatchEvent(new CustomEvent(DRAGGED_LEFT_EVENT_NAME,{detail:{draggedEl:e,type:DRAGGED_LEFT_TYPES.OUTSIDE_OF_ANY}}))}function dispatchDraggedElementIsOverIndex(t,e,n){t.dispatchEvent(new CustomEvent(DRAGGED_OVER_INDEX_EVENT_NAME,{detail:{indexObj:e,draggedEl:n}}))}function dispatchDraggedLeftDocument(t){window.dispatchEvent(new CustomEvent(DRAGGED_LEFT_DOCUMENT_EVENT_NAME,{detail:{draggedEl:t}}))}const TRIGGERS={DRAG_STARTED:"dragStarted",DRAGGED_ENTERED:DRAGGED_ENTERED_EVENT_NAME,DRAGGED_ENTERED_ANOTHER:"dragEnteredAnother",DRAGGED_OVER_INDEX:DRAGGED_OVER_INDEX_EVENT_NAME,DRAGGED_LEFT:DRAGGED_LEFT_EVENT_NAME,DRAGGED_LEFT_ALL:"draggedLeftAll",DROPPED_INTO_ZONE:"droppedIntoZone",DROPPED_INTO_ANOTHER:"droppedIntoAnother",DROPPED_OUTSIDE_OF_ANY:"droppedOutsideOfAny",DRAG_STOPPED:"dragStopped"},SOURCES={POINTER:"pointer",KEYBOARD:"keyboard"},SHADOW_ITEM_MARKER_PROPERTY_NAME="isDndShadowItem",SHADOW_ELEMENT_ATTRIBUTE_NAME="data-is-dnd-shadow-item",SHADOW_PLACEHOLDER_ITEM_ID="id:dnd-shadow-placeholder-0000",DRAGGED_ELEMENT_ID="dnd-action-dragged-el";let ITEM_ID_KEY="id",activeDndZoneCount=0;function incrementActiveDropZoneCount(){activeDndZoneCount++}function decrementActiveDropZoneCount(){if(activeDndZoneCount===0)throw new Error("Bug! trying to decrement when there are no dropzones");activeDndZoneCount--}const isOnServer=typeof window=="undefined";function getBoundingRectNoTransforms(t){let e;const n=t.getBoundingClientRect(),r=getComputedStyle(t),o=r.transform;if(o){let i,a,s,l;if(o.startsWith("matrix3d("))e=o.slice(9,-1).split(/, /),i=+e[0],a=+e[5],s=+e[12],l=+e[13];else if(o.startsWith("matrix("))e=o.slice(7,-1).split(/, /),i=+e[0],a=+e[3],s=+e[4],l=+e[5];else return n;const u=r.transformOrigin,d=n.x-s-(1-i)*parseFloat(u),f=n.y-l-(1-a)*parseFloat(u.slice(u.indexOf(" ")+1)),c=i?n.width/i:t.offsetWidth,_=a?n.height/a:t.offsetHeight;return{x:d,y:f,width:c,height:_,top:f,right:d+c,bottom:f+_,left:d}}else return n}function getAbsoluteRectNoTransforms(t){const e=getBoundingRectNoTransforms(t);return{top:e.top+window.scrollY,bottom:e.bottom+window.scrollY,left:e.left+window.scrollX,right:e.right+window.scrollX}}function getAbsoluteRect(t){const e=t.getBoundingClientRect();return{top:e.top+window.scrollY,bottom:e.bottom+window.scrollY,left:e.left+window.scrollX,right:e.right+window.scrollX}}function findCenter(t){return{x:(t.left+t.right)/2,y:(t.top+t.bottom)/2}}function calcDistance(t,e){return Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))}function isPointInsideRect(t,e){return t.y<=e.bottom&&t.y>=e.top&&t.x>=e.left&&t.x<=e.right}function findCenterOfElement(t){return findCenter(getAbsoluteRect(t))}function isCenterOfAInsideB(t,e){const n=findCenterOfElement(t),r=getAbsoluteRectNoTransforms(e);return isPointInsideRect(n,r)}function calcDistanceBetweenCenters(t,e){const n=findCenterOfElement(t),r=findCenterOfElement(e);return calcDistance(n,r)}function isElementOffDocument(t){const e=getAbsoluteRect(t);return e.right<0||e.left>document.documentElement.scrollWidth||e.bottom<0||e.top>document.documentElement.scrollHeight}function calcInnerDistancesBetweenPointAndSidesOfElement(t,e){const n=getAbsoluteRect(e);return isPointInsideRect(t,n)?{top:t.y-n.top,bottom:n.bottom-t.y,left:t.x-n.left,right:Math.min(n.right,document.documentElement.clientWidth)-t.x}:null}let dzToShadowIndexToRect;function resetIndexesCache(){dzToShadowIndexToRect=new Map}resetIndexesCache();function resetIndexesCacheForDz(t){dzToShadowIndexToRect.delete(t)}function cacheShadowRect(t){const e=Array.from(t.children).findIndex(n=>n.getAttribute(SHADOW_ELEMENT_ATTRIBUTE_NAME));if(e>=0)return dzToShadowIndexToRect.has(t)||dzToShadowIndexToRect.set(t,new Map),dzToShadowIndexToRect.get(t).set(e,getAbsoluteRectNoTransforms(t.children[e])),e}function findWouldBeIndex(t,e){if(!isCenterOfAInsideB(t,e))return null;const n=e.children;if(n.length===0)return{index:0,isProximityBased:!0};const r=cacheShadowRect(e);for(let a=0;a<n.length;a++)if(isCenterOfAInsideB(t,n[a])){const s=dzToShadowIndexToRect.has(e)&&dzToShadowIndexToRect.get(e).get(a);return s&&!isPointInsideRect(findCenterOfElement(t),s)?{index:r,isProximityBased:!1}:{index:a,isProximityBased:!1}}let o=Number.MAX_VALUE,i;for(let a=0;a<n.length;a++){const s=calcDistanceBetweenCenters(t,n[a]);s<o&&(o=s,i=a)}return{index:i,isProximityBased:!0}}const SCROLL_ZONE_PX=25;function makeScroller(){let t;function e(){t={directionObj:void 0,stepPx:0}}e();function n(i){const{directionObj:a,stepPx:s}=t;a&&(i.scrollBy(a.x*s,a.y*s),window.requestAnimationFrame(()=>n(i)))}function r(i){return SCROLL_ZONE_PX-i}function o(i,a){if(!a)return!1;const s=calcInnerDistancesBetweenPointAndSidesOfElement(i,a);if(s===null)return e(),!1;const l=!!t.directionObj;let[u,d]=[!1,!1];return a.scrollHeight>a.clientHeight&&(s.bottom<SCROLL_ZONE_PX?(u=!0,t.directionObj={x:0,y:1},t.stepPx=r(s.bottom)):s.top<SCROLL_ZONE_PX&&(u=!0,t.directionObj={x:0,y:-1},t.stepPx=r(s.top)),!l&&u)||a.scrollWidth>a.clientWidth&&(s.right<SCROLL_ZONE_PX?(d=!0,t.directionObj={x:1,y:0},t.stepPx=r(s.right)):s.left<SCROLL_ZONE_PX&&(d=!0,t.directionObj={x:-1,y:0},t.stepPx=r(s.left)),!l&&d)?(n(a),!0):(e(),!1)}return{scrollIfNeeded:o,resetScrolling:e}}function toString(t){return JSON.stringify(t,null,2)}function getDepth(t){if(!t)throw new Error("cannot get depth of a falsy node");return _getDepth(t,0)}function _getDepth(t,e=0){return t.parentElement?_getDepth(t.parentElement,e+1):e-1}function areObjectsShallowEqual(t,e){if(Object.keys(t).length!==Object.keys(e).length)return!1;for(const n in t)if(!{}.hasOwnProperty.call(e,n)||e[n]!==t[n])return!1;return!0}function areArraysShallowEqualSameOrder(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}const INTERVAL_MS$1=200,TOLERANCE_PX=10,{scrollIfNeeded:scrollIfNeeded$1,resetScrolling:resetScrolling$1}=makeScroller();let next$1;function observe(t,e,n=INTERVAL_MS$1){let r,o,i=!1,a;const s=Array.from(e).sort((u,d)=>getDepth(d)-getDepth(u));function l(){const u=findCenterOfElement(t),d=scrollIfNeeded$1(u,r);if(!d&&a&&Math.abs(a.x-u.x)<TOLERANCE_PX&&Math.abs(a.y-u.y)<TOLERANCE_PX){next$1=window.setTimeout(l,n);return}if(isElementOffDocument(t)){dispatchDraggedLeftDocument(t);return}a=u;let f=!1;for(const c of s){d&&resetIndexesCacheForDz(r);const _=findWouldBeIndex(t,c);if(_===null)continue;const{index:m}=_;f=!0,c!==r?(r&&dispatchDraggedElementLeftContainerForAnother(r,t,c),dispatchDraggedElementEnteredContainer(c,_,t),r=c):m!==o&&(dispatchDraggedElementIsOverIndex(c,_,t),o=m);break}!f&&i&&r?(dispatchDraggedElementLeftContainerForNone(r,t),r=void 0,o=void 0,i=!1):i=!0,next$1=window.setTimeout(l,n)}l()}function unobserve(){clearTimeout(next$1),resetScrolling$1(),resetIndexesCache()}const INTERVAL_MS=300;let mousePosition;function updateMousePosition(t){const e=t.touches?t.touches[0]:t;mousePosition={x:e.clientX,y:e.clientY}}const{scrollIfNeeded,resetScrolling}=makeScroller();let next;function loop(){mousePosition&&scrollIfNeeded(mousePosition,document.documentElement)&&resetIndexesCache(),next=window.setTimeout(loop,INTERVAL_MS)}function armWindowScroller(){window.addEventListener("mousemove",updateMousePosition),window.addEventListener("touchmove",updateMousePosition),loop()}function disarmWindowScroller(){window.removeEventListener("mousemove",updateMousePosition),window.removeEventListener("touchmove",updateMousePosition),mousePosition=void 0,window.clearTimeout(next),resetScrolling()}function svelteNodeClone(t){const e=t.cloneNode(!0),n=[],r=t.tagName==="SELECT",o=r?[t]:[...t.querySelectorAll("select")];for(const a of o)n.push(a.value);if(o.length<=0)return e;const i=r?[e]:[...e.querySelectorAll("select")];for(let a=0;a<i.length;a++){const s=i[a],l=n[a],u=s.querySelector(`option[value="${l}"`);u&&u.setAttribute("selected",!0)}return e}const TRANSITION_DURATION_SECONDS=.2;function trs(t){return`${t} ${TRANSITION_DURATION_SECONDS}s ease`}function createDraggedElementFrom(t,e){const n=t.getBoundingClientRect(),r=svelteNodeClone(t);copyStylesFromTo(t,r),r.id=DRAGGED_ELEMENT_ID,r.style.position="fixed";let o=n.top,i=n.left;if(r.style.top=`${o}px`,r.style.left=`${i}px`,e){const a=findCenter(n);o-=a.y-e.y,i-=a.x-e.x,window.setTimeout(()=>{r.style.top=`${o}px`,r.style.left=`${i}px`},0)}return r.style.margin="0",r.style.boxSizing="border-box",r.style.height=`${n.height}px`,r.style.width=`${n.width}px`,r.style.transition=`${trs("top")}, ${trs("left")}, ${trs("background-color")}, ${trs("opacity")}, ${trs("color")} `,window.setTimeout(()=>r.style.transition+=`, ${trs("width")}, ${trs("height")}`,0),r.style.zIndex="9999",r.style.cursor="grabbing",r}function moveDraggedElementToWasDroppedState(t){t.style.cursor="grab"}function morphDraggedElementToBeLike(t,e,n,r,o){const i=e.getBoundingClientRect(),a=t.getBoundingClientRect(),s=i.width-a.width,l=i.height-a.height;if(s||l){const u={left:(n-a.left)/a.width,top:(r-a.top)/a.height};t.style.height=`${i.height}px`,t.style.width=`${i.width}px`,t.style.left=`${parseFloat(t.style.left)-u.left*s}px`,t.style.top=`${parseFloat(t.style.top)-u.top*l}px`}copyStylesFromTo(e,t),o()}function copyStylesFromTo(t,e){const n=window.getComputedStyle(t);Array.from(n).filter(r=>r.startsWith("background")||r.startsWith("padding")||r.startsWith("font")||r.startsWith("text")||r.startsWith("align")||r.startsWith("justify")||r.startsWith("display")||r.startsWith("flex")||r.startsWith("border")||r==="opacity"||r==="color"||r==="list-style-type").forEach(r=>e.style.setProperty(r,n.getPropertyValue(r),n.getPropertyPriority(r)))}function styleDraggable(t,e){t.draggable=!1,t.ondragstart=()=>!1,e?(t.style.userSelect="",t.style.WebkitUserSelect="",t.style.cursor=""):(t.style.userSelect="none",t.style.WebkitUserSelect="none",t.style.cursor="grab")}function hideElement(t){t.style.display="none",t.style.position="fixed",t.style.zIndex="-5"}function decorateShadowEl(t){t.style.visibility="hidden",t.setAttribute(SHADOW_ELEMENT_ATTRIBUTE_NAME,"true")}function unDecorateShadowElement(t){t.style.visibility="",t.removeAttribute(SHADOW_ELEMENT_ATTRIBUTE_NAME)}function styleActiveDropZones(t,e=()=>{},n=()=>[]){t.forEach(r=>{const o=e(r);Object.keys(o).forEach(i=>{r.style[i]=o[i]}),n(r).forEach(i=>r.classList.add(i))})}function styleInactiveDropZones(t,e=()=>{},n=()=>[]){t.forEach(r=>{const o=e(r);Object.keys(o).forEach(i=>{r.style[i]=""}),n(r).forEach(i=>r.classList.contains(i)&&r.classList.remove(i))})}function preventShrinking(t){const e=t.style.minHeight;t.style.minHeight=window.getComputedStyle(t).getPropertyValue("height");const n=t.style.minWidth;return t.style.minWidth=window.getComputedStyle(t).getPropertyValue("width"),function(){t.style.minHeight=e,t.style.minWidth=n}}const DEFAULT_DROP_ZONE_TYPE$1="--any--",MIN_OBSERVATION_INTERVAL_MS=100,MIN_MOVEMENT_BEFORE_DRAG_START_PX=3,DEFAULT_DROP_TARGET_STYLE$1={outline:"rgba(255, 255, 102, 0.7) solid 2px"};let originalDragTarget,draggedEl,draggedElData,draggedElType,originDropZone,originIndex,shadowElData,shadowElDropZone,dragStartMousePosition,currentMousePosition,isWorkingOnPreviousDrag=!1,finalizingPreviousDrag=!1,unlockOriginDzMinDimensions,isDraggedOutsideOfAnyDz=!1,scheduledForRemovalAfterDrop=[];const typeToDropZones$1=new Map,dzToConfig$1=new Map,elToMouseDownListener=new WeakMap;function registerDropZone$1(t,e){typeToDropZones$1.has(e)||typeToDropZones$1.set(e,new Set),typeToDropZones$1.get(e).has(t)||(typeToDropZones$1.get(e).add(t),incrementActiveDropZoneCount())}function unregisterDropZone$1(t,e){typeToDropZones$1.get(e).delete(t),decrementActiveDropZoneCount(),typeToDropZones$1.get(e).size===0&&typeToDropZones$1.delete(e)}function watchDraggedElement(){armWindowScroller();const t=typeToDropZones$1.get(draggedElType);for(const n of t)n.addEventListener(DRAGGED_ENTERED_EVENT_NAME,handleDraggedEntered),n.addEventListener(DRAGGED_LEFT_EVENT_NAME,handleDraggedLeft),n.addEventListener(DRAGGED_OVER_INDEX_EVENT_NAME,handleDraggedIsOverIndex);window.addEventListener(DRAGGED_LEFT_DOCUMENT_EVENT_NAME,handleDrop$1);const e=Math.max(MIN_OBSERVATION_INTERVAL_MS,...Array.from(t.keys()).map(n=>dzToConfig$1.get(n).dropAnimationDurationMs));observe(draggedEl,t,e*1.07)}function unWatchDraggedElement(){disarmWindowScroller();const t=typeToDropZones$1.get(draggedElType);for(const e of t)e.removeEventListener(DRAGGED_ENTERED_EVENT_NAME,handleDraggedEntered),e.removeEventListener(DRAGGED_LEFT_EVENT_NAME,handleDraggedLeft),e.removeEventListener(DRAGGED_OVER_INDEX_EVENT_NAME,handleDraggedIsOverIndex);window.removeEventListener(DRAGGED_LEFT_DOCUMENT_EVENT_NAME,handleDrop$1),unobserve()}function findShadowPlaceHolderIdx(t){return t.findIndex(e=>e[ITEM_ID_KEY]===SHADOW_PLACEHOLDER_ITEM_ID)}function findShadowElementIdx(t){return t.findIndex(e=>!!e[SHADOW_ITEM_MARKER_PROPERTY_NAME]&&e[ITEM_ID_KEY]!==SHADOW_PLACEHOLDER_ITEM_ID)}function handleDraggedEntered(t){let{items:e,dropFromOthersDisabled:n}=dzToConfig$1.get(t.currentTarget);if(n&&t.currentTarget!==originDropZone)return;if(isDraggedOutsideOfAnyDz=!1,e=e.filter(a=>a[ITEM_ID_KEY]!==shadowElData[ITEM_ID_KEY]),originDropZone!==t.currentTarget){const s=dzToConfig$1.get(originDropZone).items.filter(l=>!l[SHADOW_ITEM_MARKER_PROPERTY_NAME]);dispatchConsiderEvent(originDropZone,s,{trigger:TRIGGERS.DRAGGED_ENTERED_ANOTHER,id:draggedElData[ITEM_ID_KEY],source:SOURCES.POINTER})}else{const a=findShadowPlaceHolderIdx(e);a!==-1&&e.splice(a,1)}const{index:r,isProximityBased:o}=t.detail.indexObj,i=o&&r===t.currentTarget.children.length-1?r+1:r;shadowElDropZone=t.currentTarget,e.splice(i,0,shadowElData),dispatchConsiderEvent(t.currentTarget,e,{trigger:TRIGGERS.DRAGGED_ENTERED,id:draggedElData[ITEM_ID_KEY],source:SOURCES.POINTER})}function handleDraggedLeft(t){if(!isWorkingOnPreviousDrag)return;const{items:e,dropFromOthersDisabled:n}=dzToConfig$1.get(t.currentTarget);if(n&&t.currentTarget!==originDropZone&&t.currentTarget!==shadowElDropZone)return;const r=findShadowElementIdx(e),o=e.splice(r,1)[0];shadowElDropZone=void 0;const{type:i,theOtherDz:a}=t.detail;if(i===DRAGGED_LEFT_TYPES.OUTSIDE_OF_ANY||i===DRAGGED_LEFT_TYPES.LEFT_FOR_ANOTHER&&a!==originDropZone&&dzToConfig$1.get(a).dropFromOthersDisabled){isDraggedOutsideOfAnyDz=!0,shadowElDropZone=originDropZone;const s=dzToConfig$1.get(originDropZone).items;s.splice(originIndex,0,o),dispatchConsiderEvent(originDropZone,s,{trigger:TRIGGERS.DRAGGED_LEFT_ALL,id:draggedElData[ITEM_ID_KEY],source:SOURCES.POINTER})}dispatchConsiderEvent(t.currentTarget,e,{trigger:TRIGGERS.DRAGGED_LEFT,id:draggedElData[ITEM_ID_KEY],source:SOURCES.POINTER})}function handleDraggedIsOverIndex(t){const{items:e,dropFromOthersDisabled:n}=dzToConfig$1.get(t.currentTarget);if(n&&t.currentTarget!==originDropZone)return;isDraggedOutsideOfAnyDz=!1;const{index:r}=t.detail.indexObj,o=findShadowElementIdx(e);e.splice(o,1),e.splice(r,0,shadowElData),dispatchConsiderEvent(t.currentTarget,e,{trigger:TRIGGERS.DRAGGED_OVER_INDEX,id:draggedElData[ITEM_ID_KEY],source:SOURCES.POINTER})}function handleMouseMove(t){t.preventDefault();const e=t.touches?t.touches[0]:t;currentMousePosition={x:e.clientX,y:e.clientY},draggedEl.style.transform=`translate3d(${currentMousePosition.x-dragStartMousePosition.x}px, ${currentMousePosition.y-dragStartMousePosition.y}px, 0)`}function handleDrop$1(){finalizingPreviousDrag=!0,window.removeEventListener("mousemove",handleMouseMove),window.removeEventListener("touchmove",handleMouseMove),window.removeEventListener("mouseup",handleDrop$1),window.removeEventListener("touchend",handleDrop$1),unWatchDraggedElement(),moveDraggedElementToWasDroppedState(draggedEl),shadowElDropZone||(shadowElDropZone=originDropZone);let{items:t,type:e}=dzToConfig$1.get(shadowElDropZone);styleInactiveDropZones(typeToDropZones$1.get(e),o=>dzToConfig$1.get(o).dropTargetStyle,o=>dzToConfig$1.get(o).dropTargetClasses);let n=findShadowElementIdx(t);n===-1&&(n=originIndex),t=t.map(o=>o[SHADOW_ITEM_MARKER_PROPERTY_NAME]?draggedElData:o);function r(){unlockOriginDzMinDimensions(),dispatchFinalizeEvent(shadowElDropZone,t,{trigger:isDraggedOutsideOfAnyDz?TRIGGERS.DROPPED_OUTSIDE_OF_ANY:TRIGGERS.DROPPED_INTO_ZONE,id:draggedElData[ITEM_ID_KEY],source:SOURCES.POINTER}),shadowElDropZone!==originDropZone&&dispatchFinalizeEvent(originDropZone,dzToConfig$1.get(originDropZone).items,{trigger:TRIGGERS.DROPPED_INTO_ANOTHER,id:draggedElData[ITEM_ID_KEY],source:SOURCES.POINTER}),unDecorateShadowElement(shadowElDropZone.children[n]),cleanupPostDrop()}animateDraggedToFinalPosition(n,r)}function animateDraggedToFinalPosition(t,e){const n=getBoundingRectNoTransforms(shadowElDropZone.children[t]),r={x:n.left-parseFloat(draggedEl.style.left),y:n.top-parseFloat(draggedEl.style.top)},{dropAnimationDurationMs:o}=dzToConfig$1.get(shadowElDropZone),i=`transform ${o}ms ease`;draggedEl.style.transition=draggedEl.style.transition?draggedEl.style.transition+","+i:i,draggedEl.style.transform=`translate3d(${r.x}px, ${r.y}px, 0)`,window.setTimeout(e,o)}function scheduleDZForRemovalAfterDrop(t,e){scheduledForRemovalAfterDrop.push({dz:t,destroy:e}),window.requestAnimationFrame(()=>{hideElement(t),document.body.appendChild(t)})}function cleanupPostDrop(){draggedEl.remove(),originalDragTarget.remove(),scheduledForRemovalAfterDrop.length&&(scheduledForRemovalAfterDrop.forEach(({dz:t,destroy:e})=>{e(),t.remove()}),scheduledForRemovalAfterDrop=[]),draggedEl=void 0,originalDragTarget=void 0,draggedElData=void 0,draggedElType=void 0,originDropZone=void 0,originIndex=void 0,shadowElData=void 0,shadowElDropZone=void 0,dragStartMousePosition=void 0,currentMousePosition=void 0,isWorkingOnPreviousDrag=!1,finalizingPreviousDrag=!1,unlockOriginDzMinDimensions=void 0,isDraggedOutsideOfAnyDz=!1}function dndzone$2(t,e){let n=!1;const r={items:void 0,type:void 0,flipDurationMs:0,dragDisabled:!1,morphDisabled:!1,dropFromOthersDisabled:!1,dropTargetStyle:DEFAULT_DROP_TARGET_STYLE$1,dropTargetClasses:[],transformDraggedElement:()=>{},centreDraggedOnCursor:!1};let o=new Map;function i(){window.addEventListener("mousemove",l,{passive:!1}),window.addEventListener("touchmove",l,{passive:!1,capture:!1}),window.addEventListener("mouseup",s,{passive:!1}),window.addEventListener("touchend",s,{passive:!1})}function a(){window.removeEventListener("mousemove",l),window.removeEventListener("touchmove",l),window.removeEventListener("mouseup",s),window.removeEventListener("touchend",s)}function s(){a(),originalDragTarget=void 0,dragStartMousePosition=void 0,currentMousePosition=void 0}function l(c){c.preventDefault();const _=c.touches?c.touches[0]:c;currentMousePosition={x:_.clientX,y:_.clientY},(Math.abs(currentMousePosition.x-dragStartMousePosition.x)>=MIN_MOVEMENT_BEFORE_DRAG_START_PX||Math.abs(currentMousePosition.y-dragStartMousePosition.y)>=MIN_MOVEMENT_BEFORE_DRAG_START_PX)&&(a(),d())}function u(c){if(c.target!==c.currentTarget&&(c.target.value!==void 0||c.target.isContentEditable)||c.button||isWorkingOnPreviousDrag)return;c.stopPropagation();const _=c.touches?c.touches[0]:c;dragStartMousePosition={x:_.clientX,y:_.clientY},currentMousePosition=Z({},dragStartMousePosition),originalDragTarget=c.currentTarget,i()}function d(){isWorkingOnPreviousDrag=!0;const c=o.get(originalDragTarget);originIndex=c,originDropZone=originalDragTarget.parentElement;const _=originDropZone.getRootNode(),m=_.body||_,{items:E,type:I,centreDraggedOnCursor:g}=r;draggedElData=Z({},E[c]),draggedElType=I,shadowElData=ue(Z({},draggedElData),{[SHADOW_ITEM_MARKER_PROPERTY_NAME]:!0});const y=ue(Z({},shadowElData),{[ITEM_ID_KEY]:SHADOW_PLACEHOLDER_ITEM_ID});draggedEl=createDraggedElementFrom(originalDragTarget,g&&currentMousePosition);function T(){draggedEl.parentElement?window.requestAnimationFrame(T):(m.appendChild(draggedEl),draggedEl.focus(),watchDraggedElement(),hideElement(originalDragTarget),m.appendChild(originalDragTarget))}window.requestAnimationFrame(T),styleActiveDropZones(Array.from(typeToDropZones$1.get(r.type)).filter(w=>w===originDropZone||!dzToConfig$1.get(w).dropFromOthersDisabled),w=>dzToConfig$1.get(w).dropTargetStyle,w=>dzToConfig$1.get(w).dropTargetClasses),E.splice(c,1,y),unlockOriginDzMinDimensions=preventShrinking(originDropZone),dispatchConsiderEvent(originDropZone,E,{trigger:TRIGGERS.DRAG_STARTED,id:draggedElData[ITEM_ID_KEY],source:SOURCES.POINTER}),window.addEventListener("mousemove",handleMouseMove,{passive:!1}),window.addEventListener("touchmove",handleMouseMove,{passive:!1,capture:!1}),window.addEventListener("mouseup",handleDrop$1,{passive:!1}),window.addEventListener("touchend",handleDrop$1,{passive:!1})}function f({items:c=void 0,flipDurationMs:_=0,type:m=DEFAULT_DROP_ZONE_TYPE$1,dragDisabled:E=!1,morphDisabled:I=!1,dropFromOthersDisabled:g=!1,dropTargetStyle:y=DEFAULT_DROP_TARGET_STYLE$1,dropTargetClasses:T=[],transformDraggedElement:w=()=>{},centreDraggedOnCursor:A=!1}){r.dropAnimationDurationMs=_,r.type&&m!==r.type&&unregisterDropZone$1(t,r.type),r.type=m,registerDropZone$1(t,m),r.items=[...c],r.dragDisabled=E,r.morphDisabled=I,r.transformDraggedElement=w,r.centreDraggedOnCursor=A,n&&isWorkingOnPreviousDrag&&!finalizingPreviousDrag&&(!areObjectsShallowEqual(y,r.dropTargetStyle)||!areArraysShallowEqualSameOrder(T,r.dropTargetClasses))&&(styleInactiveDropZones([t],()=>r.dropTargetStyle,()=>T),styleActiveDropZones([t],()=>y,()=>T)),r.dropTargetStyle=y,r.dropTargetClasses=[...T];function h(b,D){return dzToConfig$1.get(b)?dzToConfig$1.get(b)[D]:r[D]}n&&isWorkingOnPreviousDrag&&r.dropFromOthersDisabled!==g&&(g?styleInactiveDropZones([t],b=>h(b,"dropTargetStyle"),b=>h(b,"dropTargetClasses")):styleActiveDropZones([t],b=>h(b,"dropTargetStyle"),b=>h(b,"dropTargetClasses"))),r.dropFromOthersDisabled=g,dzToConfig$1.set(t,r);const v=findShadowElementIdx(r.items);for(let b=0;b<t.children.length;b++){const D=t.children[b];if(styleDraggable(D,E),b===v){I||morphDraggedElementToBeLike(draggedEl,D,currentMousePosition.x,currentMousePosition.y,()=>r.transformDraggedElement(draggedEl,draggedElData,b)),decorateShadowEl(D);continue}D.removeEventListener("mousedown",elToMouseDownListener.get(D)),D.removeEventListener("touchstart",elToMouseDownListener.get(D)),E||(D.addEventListener("mousedown",u),D.addEventListener("touchstart",u),elToMouseDownListener.set(D,u)),o.set(D,b),n||(n=!0)}}return f(e),{update:c=>{f(c)},destroy:()=>{function c(){unregisterDropZone$1(t,dzToConfig$1.get(t).type),dzToConfig$1.delete(t)}isWorkingOnPreviousDrag?scheduleDZForRemovalAfterDrop(t,c):c()}}}const INSTRUCTION_IDs$1={DND_ZONE_ACTIVE:"dnd-zone-active",DND_ZONE_DRAG_DISABLED:"dnd-zone-drag-disabled"},ID_TO_INSTRUCTION={[INSTRUCTION_IDs$1.DND_ZONE_ACTIVE]:"Tab to one the items and press space-bar or enter to start dragging it",[INSTRUCTION_IDs$1.DND_ZONE_DRAG_DISABLED]:"This is a disabled drag and drop list"},ALERT_DIV_ID="dnd-action-aria-alert";let alertsDiv;function initAriaOnBrowser(){alertsDiv||(alertsDiv=document.createElement("div"),function(){alertsDiv.id=ALERT_DIV_ID,alertsDiv.style.position="fixed",alertsDiv.style.bottom="0",alertsDiv.style.left="0",alertsDiv.style.zIndex="-5",alertsDiv.style.opacity="0",alertsDiv.style.height="0",alertsDiv.style.width="0",alertsDiv.setAttribute("role","alert")}(),document.body.prepend(alertsDiv),Object.entries(ID_TO_INSTRUCTION).forEach(([t,e])=>document.body.prepend(instructionToHiddenDiv(t,e))))}function initAria(){return isOnServer?null:(document.readyState==="complete"?initAriaOnBrowser():window.addEventListener("DOMContentLoaded",initAriaOnBrowser),Z({},INSTRUCTION_IDs$1))}function destroyAria(){isOnServer||!alertsDiv||(Object.keys(ID_TO_INSTRUCTION).forEach(t=>{var e;return(e=document.getElementById(t))==null?void 0:e.remove()}),alertsDiv.remove(),alertsDiv=void 0)}function instructionToHiddenDiv(t,e){const n=document.createElement("div");return n.id=t,n.innerHTML=`<p>${e}</p>`,n.style.display="none",n.style.position="fixed",n.style.zIndex="-5",n}function alertToScreenReader(t){if(isOnServer)return;alertsDiv||initAriaOnBrowser(),alertsDiv.innerHTML="";const e=document.createTextNode(t);alertsDiv.appendChild(e),alertsDiv.style.display="none",alertsDiv.style.display="inline"}const DEFAULT_DROP_ZONE_TYPE="--any--",DEFAULT_DROP_TARGET_STYLE={outline:"rgba(255, 255, 102, 0.7) solid 2px"};let isDragging=!1,draggedItemType,focusedDz,focusedDzLabel="",focusedItem,focusedItemId,focusedItemLabel="";const allDragTargets=new WeakSet,elToKeyDownListeners=new WeakMap,elToFocusListeners=new WeakMap,dzToHandles=new Map,dzToConfig=new Map,typeToDropZones=new Map;let INSTRUCTION_IDs;function registerDropZone(t,e){typeToDropZones.size===0&&(INSTRUCTION_IDs=initAria(),window.addEventListener("keydown",globalKeyDownHandler),window.addEventListener("click",globalClickHandler)),typeToDropZones.has(e)||typeToDropZones.set(e,new Set),typeToDropZones.get(e).has(t)||(typeToDropZones.get(e).add(t),incrementActiveDropZoneCount())}function unregisterDropZone(t,e){focusedDz===t&&handleDrop(),typeToDropZones.get(e).delete(t),decrementActiveDropZoneCount(),typeToDropZones.get(e).size===0&&typeToDropZones.delete(e),typeToDropZones.size===0&&(window.removeEventListener("keydown",globalKeyDownHandler),window.removeEventListener("click",globalClickHandler),INSTRUCTION_IDs=void 0,destroyAria())}function globalKeyDownHandler(t){if(!!isDragging)switch(t.key){case"Escape":{handleDrop();break}}}function globalClickHandler(){!isDragging||allDragTargets.has(document.activeElement)||handleDrop()}function handleZoneFocus(t){if(!isDragging)return;const e=t.currentTarget;if(e===focusedDz)return;focusedDzLabel=e.getAttribute("aria-label")||"";const{items:n}=dzToConfig.get(focusedDz),r=n.find(u=>u[ITEM_ID_KEY]===focusedItemId),o=n.indexOf(r),i=n.splice(o,1)[0],{items:a,autoAriaDisabled:s}=dzToConfig.get(e);e.getBoundingClientRect().top<focusedDz.getBoundingClientRect().top||e.getBoundingClientRect().left<focusedDz.getBoundingClientRect().left?(a.push(i),s||alertToScreenReader(`Moved item ${focusedItemLabel} to the end of the list ${focusedDzLabel}`)):(a.unshift(i),s||alertToScreenReader(`Moved item ${focusedItemLabel} to the beginning of the list ${focusedDzLabel}`)),dispatchFinalizeEvent(focusedDz,n,{trigger:TRIGGERS.DROPPED_INTO_ANOTHER,id:focusedItemId,source:SOURCES.KEYBOARD}),dispatchFinalizeEvent(e,a,{trigger:TRIGGERS.DROPPED_INTO_ZONE,id:focusedItemId,source:SOURCES.KEYBOARD}),focusedDz=e}function triggerAllDzsUpdate(){dzToHandles.forEach(({update:t},e)=>t(dzToConfig.get(e)))}function handleDrop(t=!0){dzToConfig.get(focusedDz).autoAriaDisabled||alertToScreenReader(`Stopped dragging item ${focusedItemLabel}`),allDragTargets.has(document.activeElement)&&document.activeElement.blur(),t&&dispatchConsiderEvent(focusedDz,dzToConfig.get(focusedDz).items,{trigger:TRIGGERS.DRAG_STOPPED,id:focusedItemId,source:SOURCES.KEYBOARD}),styleInactiveDropZones(typeToDropZones.get(draggedItemType),e=>dzToConfig.get(e).dropTargetStyle,e=>dzToConfig.get(e).dropTargetClasses),focusedItem=null,focusedItemId=null,focusedItemLabel="",draggedItemType=null,focusedDz=null,focusedDzLabel="",isDragging=!1,triggerAllDzsUpdate()}function dndzone$1(t,e){const n={items:void 0,type:void 0,dragDisabled:!1,zoneTabIndex:0,dropFromOthersDisabled:!1,dropTargetStyle:DEFAULT_DROP_TARGET_STYLE,dropTargetClasses:[],autoAriaDisabled:!1};function r(d,f,c){d.length<=1||d.splice(c,1,d.splice(f,1,d[c])[0])}function o(d){switch(d.key){case"Enter":case" ":{if((d.target.disabled!==void 0||d.target.href||d.target.isContentEditable)&&!allDragTargets.has(d.target))return;d.preventDefault(),d.stopPropagation(),isDragging?handleDrop():i(d);break}case"ArrowDown":case"ArrowRight":{if(!isDragging)return;d.preventDefault(),d.stopPropagation();const{items:f}=dzToConfig.get(t),c=Array.from(t.children),_=c.indexOf(d.currentTarget);_<c.length-1&&(n.autoAriaDisabled||alertToScreenReader(`Moved item ${focusedItemLabel} to position ${_+2} in the list ${focusedDzLabel}`),r(f,_,_+1),dispatchFinalizeEvent(t,f,{trigger:TRIGGERS.DROPPED_INTO_ZONE,id:focusedItemId,source:SOURCES.KEYBOARD}));break}case"ArrowUp":case"ArrowLeft":{if(!isDragging)return;d.preventDefault(),d.stopPropagation();const{items:f}=dzToConfig.get(t),_=Array.from(t.children).indexOf(d.currentTarget);_>0&&(n.autoAriaDisabled||alertToScreenReader(`Moved item ${focusedItemLabel} to position ${_} in the list ${focusedDzLabel}`),r(f,_,_-1),dispatchFinalizeEvent(t,f,{trigger:TRIGGERS.DROPPED_INTO_ZONE,id:focusedItemId,source:SOURCES.KEYBOARD}));break}}}function i(d){s(d.currentTarget),focusedDz=t,draggedItemType=n.type,isDragging=!0;const f=Array.from(typeToDropZones.get(n.type)).filter(c=>c===focusedDz||!dzToConfig.get(c).dropFromOthersDisabled);if(styleActiveDropZones(f,c=>dzToConfig.get(c).dropTargetStyle,c=>dzToConfig.get(c).dropTargetClasses),!n.autoAriaDisabled){let c=`Started dragging item ${focusedItemLabel}. Use the arrow keys to move it within its list ${focusedDzLabel}`;f.length>1&&(c+=", or tab to another list in order to move the item into it"),alertToScreenReader(c)}dispatchConsiderEvent(t,dzToConfig.get(t).items,{trigger:TRIGGERS.DRAG_STARTED,id:focusedItemId,source:SOURCES.KEYBOARD}),triggerAllDzsUpdate()}function a(d){!isDragging||d.currentTarget!==focusedItem&&(d.stopPropagation(),handleDrop(!1),i(d))}function s(d){const{items:f}=dzToConfig.get(t),c=Array.from(t.children),_=c.indexOf(d);focusedItem=d,focusedItem.tabIndex=0,focusedItemId=f[_][ITEM_ID_KEY],focusedItemLabel=c[_].getAttribute("aria-label")||""}function l({items:d=[],type:f=DEFAULT_DROP_ZONE_TYPE,dragDisabled:c=!1,zoneTabIndex:_=0,dropFromOthersDisabled:m=!1,dropTargetStyle:E=DEFAULT_DROP_TARGET_STYLE,dropTargetClasses:I=[],autoAriaDisabled:g=!1}){n.items=[...d],n.dragDisabled=c,n.dropFromOthersDisabled=m,n.zoneTabIndex=_,n.dropTargetStyle=E,n.dropTargetClasses=I,n.autoAriaDisabled=g,n.type&&f!==n.type&&unregisterDropZone(t,n.type),n.type=f,registerDropZone(t,f),g||(t.setAttribute("aria-disabled",c),t.setAttribute("role","list"),t.setAttribute("aria-describedby",c?INSTRUCTION_IDs.DND_ZONE_DRAG_DISABLED:INSTRUCTION_IDs.DND_ZONE_ACTIVE)),dzToConfig.set(t,n),isDragging?t.tabIndex=t===focusedDz||focusedItem.contains(t)||n.dropFromOthersDisabled||focusedDz&&n.type!==dzToConfig.get(focusedDz).type?-1:0:t.tabIndex=n.zoneTabIndex,t.addEventListener("focus",handleZoneFocus);for(let y=0;y<t.children.length;y++){const T=t.children[y];allDragTargets.add(T),T.tabIndex=isDragging?-1:0,g||T.setAttribute("role","listitem"),T.removeEventListener("keydown",elToKeyDownListeners.get(T)),T.removeEventListener("click",elToFocusListeners.get(T)),c||(T.addEventListener("keydown",o),elToKeyDownListeners.set(T,o),T.addEventListener("click",a),elToFocusListeners.set(T,a)),isDragging&&n.items[y][ITEM_ID_KEY]===focusedItemId&&(focusedItem=T,focusedItem.tabIndex=0,T.focus())}}l(e);const u={update:d=>{l(d)},destroy:()=>{unregisterDropZone(t,n.type),dzToConfig.delete(t),dzToHandles.delete(t)}};return dzToHandles.set(t,u),u}function dndzone(t,e){validateOptions(e);const n=dndzone$2(t,e),r=dndzone$1(t,e);return{update:o=>{validateOptions(o),n.update(o),r.update(o)},destroy:()=>{n.destroy(),r.destroy()}}}function validateOptions(t){const E=t,{items:e,flipDurationMs:n,type:r,dragDisabled:o,morphDisabled:i,dropFromOthersDisabled:a,zoneTabIndex:s,dropTargetStyle:l,dropTargetClasses:u,transformDraggedElement:d,autoAriaDisabled:f,centreDraggedOnCursor:c}=E,_=pe(E,["items","flipDurationMs","type","dragDisabled","morphDisabled","dropFromOthersDisabled","zoneTabIndex","dropTargetStyle","dropTargetClasses","transformDraggedElement","autoAriaDisabled","centreDraggedOnCursor"]);if(Object.keys(_).length>0&&console.warn("dndzone will ignore unknown options",_),!e)throw new Error("no 'items' key provided to dndzone");const m=e.find(I=>!{}.hasOwnProperty.call(I,ITEM_ID_KEY));if(m)throw new Error(`missing '${ITEM_ID_KEY}' property for item ${toString(m)}`);if(u&&!Array.isArray(u))throw new Error(`dropTargetClasses should be an array but instead it is a ${typeof u}, ${toString(u)}`);if(s&&!isInt(s))throw new Error(`zoneTabIndex should be a number but instead it is a ${typeof s}, ${toString(s)}`)}function isInt(t){return!isNaN(t)&&function(e){return(e|0)===e}(parseFloat(t))}function isSubscription(t){return"subscription"in t}function isGroup(t){return"subscriptions"in t}const{Map:Map_1}=globals;function get_each_context(t,e,n){const r=t.slice();return r[50]=e[n],r[51]=e,r[52]=n,r}function get_each_context_1(t,e,n){const r=t.slice();return r[53]=e[n],r}function get_each_context_2(t,e,n){const r=t.slice();return r[50]=e[n],r}function create_default_slot_6(t){let e,n,r,o,i,a,s,l,u,d,f,c,_,m,E;return l=new Fa$1({props:{icon:faTimesCircle,translateY:.5}}),{c(){e=element("div"),n=element("p"),n.textContent="Deck Editor",r=space(),o=element("div"),i=element("input"),a=space(),s=element("span"),create_component(l.$$.fragment),u=space(),d=element("label"),f=element("input"),c=text(`
              Hide added subscriptions`),attr(n,"class","font-extrabold"),attr(i,"class","w-full h-8 pl-2 pr-7 pb-0.5 bg-neutral-600 rounded-2xl"),attr(i,"type","text"),attr(i,"placeholder","Search subscriptions..."),attr(i,"aria-label","Search subscriptions"),attr(s,"class","absolute right-2 h-8 cursor-pointer"),attr(o,"class","relative w-full h-8 m-1"),attr(f,"type","checkbox"),attr(d,"class","block"),attr(e,"class","min-w-[14rem]")},m(I,g){insert(I,e,g),append(e,n),append(e,r),append(e,o),append(o,i),set_input_value(i,t[0]),append(o,a),append(o,s),mount_component(l,s,null),append(e,u),append(e,d),append(d,f),f.checked=t[2],append(d,c),_=!0,m||(E=[listen(i,"input",t[26]),listen(s,"click",t[27]),listen(f,"change",t[28]),listen(f,"change",t[10])],m=!0)},p(I,g){g[0]&1&&i.value!==I[0]&&set_input_value(i,I[0]),g[0]&4&&(f.checked=I[2])},i(I){_||(transition_in(l.$$.fragment,I),_=!0)},o(I){transition_out(l.$$.fragment,I),_=!1},d(I){I&&detach(e),destroy_component(l),m=!1,run_all(E)}}}function create_default_slot_5(t){let e;return{c(){e=text("Subscriptions")},m(n,r){insert(n,e,r)},d(n){n&&detach(e)}}}function create_each_block_2(t,e){let n,r,o,i,a,s,l,u=e[50].subscription.title+"",d,f,c,_,m=noop,E,I;return{key:t,first:null,c(){n=element("div"),r=element("img"),s=space(),l=element("span"),d=text(u),c=space(),attr(r,"class","inline-block h-8 w-8 rounded-2xl align-top"),src_url_equal(r.src,o=e[50].subscription.thumbnailUrl)||attr(r,"src",o),attr(r,"alt",""),attr(r,"loading","lazy"),attr(r,"width","88"),attr(r,"height","88"),attr(r,"tabindex",i=e[7]?0:-1),attr(r,"aria-label","drag-handle"),attr(r,"style",a=e[7]?"cursor: grab":"cursor: grabbing"),attr(l,"class","inline-block w-[calc(100%-2.5rem)] h-8 pt-1 align-top truncate"),attr(l,"title",f=e[50].subscription.title),attr(n,"class","w-[calc(100%-0.5rem)] bg-neutral-700 m-1 p-0.5 rounded-2xl"),this.first=n},m(g,y){insert(g,n,y),append(n,r),append(n,s),append(n,l),append(l,d),append(n,c),E||(I=[listen(r,"mousedown",e[23]),listen(r,"touchstart",e[23]),listen(r,"keydown",e[24])],E=!0)},p(g,y){e=g,y[0]&8&&!src_url_equal(r.src,o=e[50].subscription.thumbnailUrl)&&attr(r,"src",o),y[0]&128&&i!==(i=e[7]?0:-1)&&attr(r,"tabindex",i),y[0]&128&&a!==(a=e[7]?"cursor: grab":"cursor: grabbing")&&attr(r,"style",a),y[0]&8&&u!==(u=e[50].subscription.title+"")&&set_data(d,u),y[0]&8&&f!==(f=e[50].subscription.title)&&attr(l,"title",f)},r(){_=n.getBoundingClientRect()},f(){fix_position(n),m()},a(){m(),m=create_animation(n,_,flip,{duration:flipDurationMs})},d(g){g&&detach(n),E=!1,run_all(I)}}}function create_default_slot_4(t){let e;return{c(){e=text("Deck")},m(n,r){insert(n,e,r)},d(n){n&&detach(e)}}}function create_if_block_1(t){let e,n,r,o,i,a,s,l,u,d,f,c,_,m,E,I,g;n=new Fa$1({props:{icon:faTimesCircle,translateY:.5}});function y(){return t[30](t[50])}i=new Fa$1({props:{icon:t[50].expanded?faCompressAlt:faExpandAlt,translateY:.5}});function T(){return t[31](t[50],t[51],t[52])}l=new FaLayers({props:{size:"2x",class:"-mx-1",$$slots:{default:[create_default_slot_3]},$$scope:{ctx:t}}});function w(){t[32].call(c,t[51],t[52])}let A=t[50].expanded&&create_if_block_2(t);return{c(){e=element("span"),create_component(n.$$.fragment),r=space(),o=element("span"),create_component(i.$$.fragment),a=space(),s=element("span"),create_component(l.$$.fragment),f=space(),c=element("input"),_=space(),A&&A.c(),m=empty(),attr(e,"class","inline-block float-right h-8 w-8 px-2 cursor-pointer"),attr(o,"class","inline-block float-right h-8 w-8 px-2 -ml-16 cursor-pointer"),attr(s,"class","inline-block h-8 w-8 rounded-2xl bg-neutral-600 align-top"),attr(s,"tabindex",u=t[7]?0:-1),attr(s,"aria-label","drag-handle"),attr(s,"style",d=t[7]?"cursor: grab":"cursor: grabbing"),attr(c,"class","w-[calc(100%-6rem)] h-8 px-2 pb-0.5 bg-neutral-600 align-top rounded-2xl")},m(h,v){insert(h,e,v),mount_component(n,e,null),insert(h,r,v),insert(h,o,v),mount_component(i,o,null),insert(h,a,v),insert(h,s,v),mount_component(l,s,null),insert(h,f,v),insert(h,c,v),set_input_value(c,t[50].name),insert(h,_,v),A&&A.m(h,v),insert(h,m,v),E=!0,I||(g=[listen(e,"click",y),listen(o,"click",T),listen(s,"mousedown",t[23]),listen(s,"touchstart",t[23]),listen(s,"keydown",t[24]),listen(c,"input",w)],I=!0)},p(h,v){t=h;const b={};v[0]&16&&(b.icon=t[50].expanded?faCompressAlt:faExpandAlt),i.$set(b);const D={};v[1]&134217728&&(D.$$scope={dirty:v,ctx:t}),l.$set(D),(!E||v[0]&128&&u!==(u=t[7]?0:-1))&&attr(s,"tabindex",u),(!E||v[0]&128&&d!==(d=t[7]?"cursor: grab":"cursor: grabbing"))&&attr(s,"style",d),v[0]&16&&c.value!==t[50].name&&set_input_value(c,t[50].name),t[50].expanded?A?(A.p(t,v),v[0]&16&&transition_in(A,1)):(A=create_if_block_2(t),A.c(),transition_in(A,1),A.m(m.parentNode,m)):A&&(group_outros(),transition_out(A,1,1,()=>{A=null}),check_outros())},i(h){E||(transition_in(n.$$.fragment,h),transition_in(i.$$.fragment,h),transition_in(l.$$.fragment,h),transition_in(A),E=!0)},o(h){transition_out(n.$$.fragment,h),transition_out(i.$$.fragment,h),transition_out(l.$$.fragment,h),transition_out(A),E=!1},d(h){h&&detach(e),destroy_component(n),h&&detach(r),h&&detach(o),destroy_component(i),h&&detach(a),h&&detach(s),destroy_component(l),h&&detach(f),h&&detach(c),h&&detach(_),A&&A.d(h),h&&detach(m),I=!1,run_all(g)}}}function create_if_block$1(t){let e,n,r,o,i,a,s,l,u,d=t[50].subscription.title+"",f,c,_,m,E;n=new Fa$1({props:{icon:faTimesCircle,translateY:.5}});function I(){return t[29](t[50])}return{c(){e=element("span"),create_component(n.$$.fragment),r=space(),o=element("img"),l=space(),u=element("span"),f=text(d),attr(e,"class","inline-block float-right h-8 w-8 px-2 -ml-8 cursor-pointer"),attr(o,"class","inline-block h-8 w-8 rounded-2xl align-top"),src_url_equal(o.src,i=t[50].subscription.thumbnailUrl)||attr(o,"src",i),attr(o,"alt",""),attr(o,"loading","lazy"),attr(o,"width","88"),attr(o,"height","88"),attr(o,"tabindex",a=t[7]?0:-1),attr(o,"aria-label","drag-handle"),attr(o,"style",s=t[7]?"cursor: grab":"cursor: grabbing"),attr(u,"class","inline-block w-[calc(100%-4rem)] h-8 pt-1 align-top truncate"),attr(u,"title",c=t[50].subscription.title)},m(g,y){insert(g,e,y),mount_component(n,e,null),insert(g,r,y),insert(g,o,y),insert(g,l,y),insert(g,u,y),append(u,f),_=!0,m||(E=[listen(e,"click",I),listen(o,"mousedown",t[23]),listen(o,"touchstart",t[23]),listen(o,"keydown",t[24])],m=!0)},p(g,y){t=g,(!_||y[0]&16&&!src_url_equal(o.src,i=t[50].subscription.thumbnailUrl))&&attr(o,"src",i),(!_||y[0]&128&&a!==(a=t[7]?0:-1))&&attr(o,"tabindex",a),(!_||y[0]&128&&s!==(s=t[7]?"cursor: grab":"cursor: grabbing"))&&attr(o,"style",s),(!_||y[0]&16)&&d!==(d=t[50].subscription.title+"")&&set_data(f,d),(!_||y[0]&16&&c!==(c=t[50].subscription.title))&&attr(u,"title",c)},i(g){_||(transition_in(n.$$.fragment,g),_=!0)},o(g){transition_out(n.$$.fragment,g),_=!1},d(g){g&&detach(e),destroy_component(n),g&&detach(r),g&&detach(o),g&&detach(l),g&&detach(u),m=!1,run_all(E)}}}function create_default_slot_3(t){let e,n,r,o;return e=new Fa$1({props:{icon:faCircle,color:"rgb(82 82 82)"}}),r=new Fa$1({props:{icon:faUsers,scale:.5}}),{c(){create_component(e.$$.fragment),n=space(),create_component(r.$$.fragment)},m(i,a){mount_component(e,i,a),insert(i,n,a),mount_component(r,i,a),o=!0},p:noop,i(i){o||(transition_in(e.$$.fragment,i),transition_in(r.$$.fragment,i),o=!0)},o(i){transition_out(e.$$.fragment,i),transition_out(r.$$.fragment,i),o=!1},d(i){destroy_component(e,i),i&&detach(n),destroy_component(r,i)}}}function create_if_block_2(t){let e,n=[],r=new Map_1,o,i,a,s,l=t[50].subscriptions;const u=_=>_[53].id;for(let _=0;_<l.length;_+=1){let m=get_each_context_1(t,l,_),E=u(m);r.set(E,n[_]=create_each_block_1(E,m))}let d=null;l.length||(d=create_else_block$1());function f(..._){return t[34](t[50],..._)}function c(..._){return t[35](t[50],..._)}return{c(){e=element("div");for(let _=0;_<n.length;_+=1)n[_].c();d&&d.c(),attr(e,"class","w-full bg-neutral-500 mt-1 py-0.5 rounded-2xl")},m(_,m){insert(_,e,m);for(let E=0;E<n.length;E+=1)n[E].m(e,null);d&&d.m(e,null),i=!0,a||(s=[action_destroyer(o=dndzone.call(null,e,{items:t[50].subscriptions,dropFromOthersDisabled:t[6]&&t[21](t[50]),dragDisabled:t[7],flipDurationMs})),listen(e,"consider",f),listen(e,"finalize",c)],a=!0)},p(_,m){if(t=_,m[0]&29360272){l=t[50].subscriptions,group_outros();for(let E=0;E<n.length;E+=1)n[E].r();n=update_keyed_each(n,m,u,1,t,l,r,e,fix_and_outro_and_destroy_block,create_each_block_1,null,get_each_context_1);for(let E=0;E<n.length;E+=1)n[E].a();check_outros(),!l.length&&d?d.p(t,m):l.length?d&&(d.d(1),d=null):(d=create_else_block$1(),d.c(),d.m(e,null))}o&&is_function(o.update)&&m[0]&208&&o.update.call(null,{items:t[50].subscriptions,dropFromOthersDisabled:t[6]&&t[21](t[50]),dragDisabled:t[7],flipDurationMs})},i(_){if(!i){for(let m=0;m<l.length;m+=1)transition_in(n[m]);i=!0}},o(_){for(let m=0;m<n.length;m+=1)transition_out(n[m]);i=!1},d(_){_&&detach(e);for(let m=0;m<n.length;m+=1)n[m].d();d&&d.d(),a=!1,run_all(s)}}}function create_else_block$1(t){let e;return{c(){e=element("div"),e.innerHTML=`<p class="w-full pt-1 text-center text-neutral-300">Drop subscriptions to add</p> 
                          `,attr(e,"class","w-[calc(100%-0.5rem)] h-8 m-1.5")},m(n,r){insert(n,e,r)},p:noop,d(n){n&&detach(e)}}}function create_each_block_1(t,e){let n,r,o,i,a,s,l,u,d,f,c=e[53].subscription.title+"",_,m,E,I,g=noop,y,T,w;o=new Fa$1({props:{icon:faTimesCircle,translateY:.5}});function A(){return e[33](e[50],e[53])}return{key:t,first:null,c(){n=element("div"),r=element("span"),create_component(o.$$.fragment),i=space(),a=element("img"),d=space(),f=element("span"),_=text(c),E=space(),attr(r,"class","inline-block float-right h-8 w-8 px-2 -ml-8 cursor-pointer"),attr(a,"class","inline-block h-8 w-8 rounded-2xl align-top"),src_url_equal(a.src,s=e[53].subscription.thumbnailUrl)||attr(a,"src",s),attr(a,"alt",""),attr(a,"loading","lazy"),attr(a,"width","88"),attr(a,"height","88"),attr(a,"tabindex",l=e[7]?0:-1),attr(a,"aria-label","drag-handle"),attr(a,"style",u=e[7]?"cursor: grab":"cursor: grabbing"),attr(f,"class","inline-block w-[calc(100%-4rem)] h-8 pt-1 align-top truncate"),attr(f,"title",m=e[53].subscription.title),attr(n,"class","w-[calc(100%-0.5rem)] bg-neutral-700 m-1 p-0.5 rounded-2xl truncate"),this.first=n},m(h,v){insert(h,n,v),append(n,r),mount_component(o,r,null),append(n,i),append(n,a),append(n,d),append(n,f),append(f,_),append(n,E),y=!0,T||(w=[listen(r,"click",A),listen(a,"mousedown",e[23]),listen(a,"touchstart",e[23]),listen(a,"keydown",e[24])],T=!0)},p(h,v){e=h,(!y||v[0]&16&&!src_url_equal(a.src,s=e[53].subscription.thumbnailUrl))&&attr(a,"src",s),(!y||v[0]&128&&l!==(l=e[7]?0:-1))&&attr(a,"tabindex",l),(!y||v[0]&128&&u!==(u=e[7]?"cursor: grab":"cursor: grabbing"))&&attr(a,"style",u),(!y||v[0]&16)&&c!==(c=e[53].subscription.title+"")&&set_data(_,c),(!y||v[0]&16&&m!==(m=e[53].subscription.title))&&attr(f,"title",m)},r(){I=n.getBoundingClientRect()},f(){fix_position(n),g()},a(){g(),g=create_animation(n,I,flip,{duration:flipDurationMs})},i(h){y||(transition_in(o.$$.fragment,h),y=!0)},o(h){transition_out(o.$$.fragment,h),y=!1},d(h){h&&detach(n),destroy_component(o),T=!1,run_all(w)}}}function create_each_block(t,e){let n,r,o,i,a,s,l,u=noop,d;const f=[create_if_block$1,create_if_block_1],c=[];function _(m,E){return E[0]&16&&(r=null),E[0]&16&&(o=null),r==null&&(r=!!isSubscription(m[50])),r?0:(o==null&&(o=!!isGroup(m[50])),o?1:-1)}return~(i=_(e,[-1,-1]))&&(a=c[i]=f[i](e)),{key:t,first:null,c(){n=element("div"),a&&a.c(),s=space(),attr(n,"class","w-[calc(100%-0.5rem)] bg-neutral-700 m-1 p-0.5 rounded-2xl truncate"),this.first=n},m(m,E){insert(m,n,E),~i&&c[i].m(n,null),append(n,s),d=!0},p(m,E){e=m;let I=i;i=_(e,E),i===I?~i&&c[i].p(e,E):(a&&(group_outros(),transition_out(c[I],1,1,()=>{c[I]=null}),check_outros()),~i?(a=c[i],a?a.p(e,E):(a=c[i]=f[i](e),a.c()),transition_in(a,1),a.m(n,s)):a=null)},r(){l=n.getBoundingClientRect()},f(){fix_position(n),u()},a(){u(),u=create_animation(n,l,flip,{duration:flipDurationMs})},i(m){d||(transition_in(a),d=!0)},o(m){transition_out(a),d=!1},d(m){m&&detach(n),~i&&c[i].d()}}}function create_default_slot_2(t){let e;return{c(){e=text("Close")},m(n,r){insert(n,e,r)},d(n){n&&detach(e)}}}function create_default_slot_1(t){let e;return{c(){e=text("Add group")},m(n,r){insert(n,e,r)},d(n){n&&detach(e)}}}function create_default_slot$1(t){let e;return{c(){e=text("Save")},m(n,r){insert(n,e,r)},d(n){n&&detach(e)}}}function create_fragment$1(t){let e,n,r,o,i,a,s,l,u,d,f,c,_,m=[],E=new Map_1,I,g,y,T,w,A,h,v,b=[],D=new Map_1,L,S,k,F,G,x,P,M,U,Y,j,V,W,H,K;i=new Center({props:{$$slots:{default:[create_default_slot_6]},$$scope:{ctx:t}}}),d=new Center({props:{$$slots:{default:[create_default_slot_5]},$$scope:{ctx:t}}});let J=t[3];const Q=N=>N[50].id;for(let N=0;N<J.length;N+=1){let C=get_each_context_2(t,J,N),z=Q(C);E.set(z,m[N]=create_each_block_2(z,C))}w=new Center({props:{$$slots:{default:[create_default_slot_4]},$$scope:{ctx:t}}});let X=t[4];const ee=N=>N[50].id;for(let N=0;N<X.length;N+=1){let C=get_each_context(t,X,N),z=ee(C);D.set(z,b[N]=create_each_block(z,C))}return F=new PrimaryButton({props:{class:"w-20 m-1 float-left",$$slots:{default:[create_default_slot_2]},$$scope:{ctx:t}}}),F.$on("click",t[9]),M=new PrimaryButton({props:{class:"w-24 rounded-l-none",$$slots:{default:[create_default_slot_1]},$$scope:{ctx:t}}}),M.$on("click",t[11]),Y=new PrimaryButton({props:{class:"w-20 m-1 float-right",$$slots:{default:[create_default_slot$1]},$$scope:{ctx:t}}}),Y.$on("click",t[12]),{c(){e=element("div"),n=element("div"),r=element("div"),o=element("div"),create_component(i.$$.fragment),a=space(),s=element("div"),l=element("div"),u=element("div"),create_component(d.$$.fragment),f=space(),c=element("div"),_=element("div");for(let N=0;N<m.length;N+=1)m[N].c();g=space(),y=element("div"),T=element("div"),create_component(w.$$.fragment),A=space(),h=element("div"),v=element("div");for(let N=0;N<b.length;N+=1)b[N].c();S=space(),k=element("div"),create_component(F.$$.fragment),G=space(),x=element("div"),P=element("input"),create_component(M.$$.fragment),U=space(),create_component(Y.$$.fragment),attr(o,"class","w-full h-24"),attr(u,"class","w-full h-6"),attr(_,"class","w-[calc(100%-4px)] h-max mx-[2px] rounded-xl"),attr(c,"class","w-full h-[calc(100%-2rem)] overflow-y-auto y-scroll mb-2"),attr(l,"class","inline-block w-[calc(50%-0.65rem)] min-w-[9.5rem] h-[calc(100%-0.5rem)] m-1 bg-neutral-800 rounded-xl"),attr(T,"class","w-full h-6"),attr(v,"class","w-[calc(100%-4px)] h-max mx-[2px] rounded-xl"),attr(h,"class","w-full h-[calc(100%-2rem)] overflow-y-auto y-scroll mb-2"),attr(y,"class","inline-block w-[calc(50%-0.65rem)] min-w-[9.5rem] h-[calc(100%-0.5rem)] m-1 bg-neutral-800 rounded-xl"),attr(s,"class","w-full h-[calc(100%-9rem)]"),attr(P,"type","text"),attr(P,"class","w-[calc(100%-6rem)] bg-neutral-800 p-1.5 rounded-l-2xl"),attr(x,"class","inline-block w-[calc(100%-11.5rem)] m-1"),attr(k,"class","w-full h-12"),attr(r,"class","min-w-[20.5rem] w-full h-full"),attr(n,"class","absolute inset-y-0 left-1/2 -translate-x-1/2 w-full max-w-[40rem] bg-neutral-700 rounded-2xl overflow-x-auto x-scroll"),attr(e,"class","fixed inset-0 z-10 bg-black/80")},m(N,C){insert(N,e,C),append(e,n),append(n,r),append(r,o),mount_component(i,o,null),append(r,a),append(r,s),append(s,l),append(l,u),mount_component(d,u,null),append(l,f),append(l,c),append(c,_);for(let z=0;z<m.length;z+=1)m[z].m(_,null);append(s,g),append(s,y),append(y,T),mount_component(w,T,null),append(y,A),append(y,h),append(h,v);for(let z=0;z<b.length;z+=1)b[z].m(v,null);t[36](h),append(r,S),append(r,k),mount_component(F,k,null),append(k,G),append(k,x),append(x,P),set_input_value(P,t[5]),mount_component(M,x,null),append(k,U),mount_component(Y,k,null),W=!0,H||(K=[action_destroyer(I=dndzone.call(null,_,{items:t[3],dropFromOthersDisabled:!0,dragDisabled:t[7],flipDurationMs})),listen(_,"consider",t[13]),listen(_,"finalize",t[14]),action_destroyer(L=dndzone.call(null,v,{items:t[4],dropFromOthersDisabled:t[6]&&t[17](),dragDisabled:t[7],flipDurationMs})),listen(v,"consider",t[15]),listen(v,"finalize",t[16]),listen(h,"scroll",t[25]),listen(P,"input",t[37]),action_destroyer(j=fade.call(null,e,{visible:t[1],initial:!1})),action_destroyer(V=trapFocus.call(null,e,t[1]))],H=!0)},p(N,C){const z={};C[0]&5|C[1]&134217728&&(z.$$scope={dirty:C,ctx:N}),i.$set(z);const te={};if(C[1]&134217728&&(te.$$scope={dirty:C,ctx:N}),d.$set(te),C[0]&25165960){J=N[3];for(let R=0;R<m.length;R+=1)m[R].r();m=update_keyed_each(m,C,Q,1,N,J,E,_,fix_and_destroy_block,create_each_block_2,null,get_each_context_2);for(let R=0;R<m.length;R+=1)m[R].a()}I&&is_function(I.update)&&C[0]&136&&I.update.call(null,{items:N[3],dropFromOthersDisabled:!0,dragDisabled:N[7],flipDurationMs});const ne={};if(C[1]&134217728&&(ne.$$scope={dirty:C,ctx:N}),w.$set(ne),C[0]&33292496){X=N[4],group_outros();for(let R=0;R<b.length;R+=1)b[R].r();b=update_keyed_each(b,C,ee,1,N,X,D,v,fix_and_outro_and_destroy_block,create_each_block,null,get_each_context);for(let R=0;R<b.length;R+=1)b[R].a();check_outros()}L&&is_function(L.update)&&C[0]&208&&L.update.call(null,{items:N[4],dropFromOthersDisabled:N[6]&&N[17](),dragDisabled:N[7],flipDurationMs});const re={};C[1]&134217728&&(re.$$scope={dirty:C,ctx:N}),F.$set(re),C[0]&32&&P.value!==N[5]&&set_input_value(P,N[5]);const oe={};C[1]&134217728&&(oe.$$scope={dirty:C,ctx:N}),M.$set(oe);const ie={};C[1]&134217728&&(ie.$$scope={dirty:C,ctx:N}),Y.$set(ie),j&&is_function(j.update)&&C[0]&2&&j.update.call(null,{visible:N[1],initial:!1}),V&&is_function(V.update)&&C[0]&2&&V.update.call(null,N[1])},i(N){if(!W){transition_in(i.$$.fragment,N),transition_in(d.$$.fragment,N),transition_in(w.$$.fragment,N);for(let C=0;C<X.length;C+=1)transition_in(b[C]);transition_in(F.$$.fragment,N),transition_in(M.$$.fragment,N),transition_in(Y.$$.fragment,N),W=!0}},o(N){transition_out(i.$$.fragment,N),transition_out(d.$$.fragment,N),transition_out(w.$$.fragment,N);for(let C=0;C<b.length;C+=1)transition_out(b[C]);transition_out(F.$$.fragment,N),transition_out(M.$$.fragment,N),transition_out(Y.$$.fragment,N),W=!1},d(N){N&&detach(e),destroy_component(i),destroy_component(d);for(let C=0;C<m.length;C+=1)m[C].d();destroy_component(w);for(let C=0;C<b.length;C+=1)b[C].d();t[36](null),destroy_component(F),destroy_component(M),destroy_component(Y),H=!1,run_all(K)}}}const flipDurationMs=300,scrollOffset=32,duration=100;function instance$1(t,e,n){let r,o,i;component_subscribe(t,editorVisible,R=>n(1,r=R)),component_subscribe(t,settingsStore,R=>n(43,o=R)),component_subscribe(t,subscriptionsStore,R=>n(44,i=R));function a(){set_store_value(editorVisible,r=!1,r)}let s=0,l=[],u=!0,d=[],f=[],c="",_="";function m(){if(u){const R=new Set(f.flatMap(O=>isGroup(O)?O.subscriptions.map(B=>B.subscription.channelId):[O.subscription.channelId]));n(3,d=l.filter(O=>!R.has(O.subscription.channelId)))}else n(3,d=l);n(0,c=c.trim()),c.length>0&&n(3,d=d.filter(R=>R.name.toLowerCase().includes(c.toLowerCase())))}function E(){_!==""&&(f.push({id:s++,name:_,expanded:!0,subscriptions:[]}),n(5,_=""),n(4,f))}function I(){const R=i.items,O=o.subscriptionGroups;s=0,l=R.map(q=>({id:s++,name:q.title,subscription:q}));const B=new Map(R.map(q=>[q.channelId,q]));n(4,f=O.map(q=>{const ae=q.subscriptionIds.map(se=>B.get(se));return ae.length===1&&q.name===ae[0].title?{id:s++,name:q.name,subscription:ae[0]}:{id:s++,name:q.name,expanded:q.expanded,subscriptions:ae.map(se=>({id:s++,name:se.title,subscription:se}))}})),m()}async function g(){const R=o;R.subscriptionGroups=f.map(O=>({name:O.name,expanded:isGroup(O)&&O.expanded,subscriptionIds:isGroup(O)?O.subscriptions.map(B=>B.subscription.channelId):[O.subscription.channelId]})),set_store_value(settingsStore,o=R,o),await writeSettings(R),set_store_value(editorVisible,r=!1,r)}let y,T=!0;function w(R){if(R.detail.info.trigger===TRIGGERS.DRAG_STARTED){const O=l.findIndex(B=>B.id==R.detail.info.id);n(6,y=l[O]),l[O]=ue(Z({},y),{id:s++}),m(),V()}else R.detail.info.source===SOURCES.KEYBOARD&&R.detail.info.trigger===TRIGGERS.DRAG_STOPPED&&n(7,T=!0),n(3,d)}function A(R){R.detail.info.source===SOURCES.POINTER&&n(7,T=!0),n(3,d)}function h(R){R.detail.info.trigger===TRIGGERS.DRAG_STARTED?(n(6,y=f.find(O=>O.id==R.detail.info.id)),V()):R.detail.info.source===SOURCES.KEYBOARD&&R.detail.info.trigger===TRIGGERS.DRAG_STOPPED&&n(7,T=!0),n(4,f=R.detail.items)}function v(R){R.detail.info.source===SOURCES.POINTER&&n(7,T=!0),n(4,f=R.detail.items),m()}function b(){if(isSubscription(y)){const R=y.subscription.channelId;return f.some(O=>!O[SHADOW_ITEM_MARKER_PROPERTY_NAME]&&isSubscription(O)&&O.subscription.channelId===R)}else return!1}function D(R){n(4,f=f.filter(O=>O.id!==R.id)),m()}function L(R,O){O.detail.info.trigger===TRIGGERS.DRAG_STARTED?(n(6,y=R.subscriptions.find(B=>B.id==O.detail.info.id)),V()):O.detail.info.source===SOURCES.KEYBOARD&&O.detail.info.trigger===TRIGGERS.DRAG_STOPPED&&n(7,T=!0),R.subscriptions=O.detail.items,n(4,f)}function S(R,O){O.detail.info.source===SOURCES.POINTER&&n(7,T=!0),R.subscriptions=O.detail.items,n(4,f),m()}function k(R){if(isSubscription(y)){const O=y.subscription.channelId;return R.subscriptions.some(B=>!B[SHADOW_ITEM_MARKER_PROPERTY_NAME]&&B.subscription.channelId===O)}else return!0}function F(R,O){R.subscriptions=R.subscriptions.filter(B=>B.id!==O.id),n(4,f),m()}function G(R){R.preventDefault(),n(7,T=!1)}function x(R){(R.key==="Enter"||R.key===" ")&&T&&n(7,T=!1)}let P,M;const U=tweened(0,{duration:2*duration});let Y,j;onDestroy(U.subscribe(R=>P&&n(8,P.scrollTop=R,P)));function V(){Y||(M=P.getBoundingClientRect(),Y=setInterval(W,duration))}function W(){const R=document.getElementById("dnd-action-dragged-el");if(R){const O=parseFloat(R.style.top.slice(0,-2))+parseFloat(R.style.transform.split(", ")[1].slice(0,-2)),B=O+parseFloat(R.style.height.slice(0,-2));B+scrollOffset>=M.bottom?U.update(q=>H(q+B+scrollOffset-M.bottom)):O-scrollOffset<=M.top&&U.update(q=>H(q+O-scrollOffset-M.top))}else clearInterval(Y),Y=null}function H(R){return Math.max(0,Math.min(R,P.scrollHeight-P.clientHeight))}function K(){clearTimeout(j),j=setTimeout(()=>{U.set(P.scrollTop,{duration:0})},duration)}function J(){c=this.value,n(0,c)}const Q=()=>n(0,c="");function X(){u=this.checked,n(2,u)}const ee=R=>D(R),N=R=>D(R),C=(R,O,B)=>n(4,O[B].expanded=!R.expanded,f);function z(R,O){R[O].name=this.value,n(4,f)}const te=(R,O)=>F(R,O),ne=(R,O)=>L(R,O),re=(R,O)=>S(R,O);function oe(R){binding_callbacks[R?"unshift":"push"](()=>{P=R,n(8,P)})}function ie(){_=this.value,n(5,_)}return t.$$.update=()=>{t.$$.dirty[0]&2&&r&&I(),t.$$.dirty[0]&1&&c&&m()},[c,r,u,d,f,_,y,T,P,a,m,E,g,w,A,h,v,b,D,L,S,k,F,G,x,K,J,Q,X,ee,N,C,z,te,ne,re,oe,ie]}class SubscriptionsEditor extends SvelteComponent{constructor(e){super(),init(this,e,instance$1,create_fragment$1,safe_not_equal,{},null,[-1,-1])}}function create_catch_block(t){let e,n=errorString(t[5])+"",r;return{c(){e=element("p"),r=text(n),attr(e,"class","text-center")},m(o,i){insert(o,e,i),append(e,r)},p:noop,i:noop,o:noop,d(o){o&&detach(e)}}}function create_then_block(t){let e,n,r,o;const i=[create_if_block,create_else_block],a=[];function s(l,u){return l[1]?0:1}return e=s(t),n=a[e]=i[e](t),{c(){n.c(),r=empty()},m(l,u){a[e].m(l,u),insert(l,r,u),o=!0},p(l,u){let d=e;e=s(l),e===d?a[e].p(l,u):(group_outros(),transition_out(a[d],1,1,()=>{a[d]=null}),check_outros(),n=a[e],n?n.p(l,u):(n=a[e]=i[e](l),n.c()),transition_in(n,1),n.m(r.parentNode,r))},i(l){o||(transition_in(n),o=!0)},o(l){transition_out(n),o=!1},d(l){a[e].d(l),l&&detach(r)}}}function create_else_block(t){let e,n;return e=new LoginScreen({props:{isSignedIn:t[0]}}),{c(){create_component(e.$$.fragment)},m(r,o){mount_component(e,r,o),n=!0},p(r,o){const i={};o&1&&(i.isSignedIn=r[0]),e.$set(i)},i(r){n||(transition_in(e.$$.fragment,r),n=!0)},o(r){transition_out(e.$$.fragment,r),n=!1},d(r){destroy_component(e,r)}}}function create_if_block(t){let e,n,r,o,i,a;return e=new SubscriptionsDeck({}),r=new Player({}),i=new SubscriptionsEditor({}),{c(){create_component(e.$$.fragment),n=space(),create_component(r.$$.fragment),o=space(),create_component(i.$$.fragment)},m(s,l){mount_component(e,s,l),insert(s,n,l),mount_component(r,s,l),insert(s,o,l),mount_component(i,s,l),a=!0},p:noop,i(s){a||(transition_in(e.$$.fragment,s),transition_in(r.$$.fragment,s),transition_in(i.$$.fragment,s),a=!0)},o(s){transition_out(e.$$.fragment,s),transition_out(r.$$.fragment,s),transition_out(i.$$.fragment,s),a=!1},d(s){destroy_component(e,s),s&&detach(n),destroy_component(r,s),s&&detach(o),destroy_component(i,s)}}}function create_pending_block(t){let e,n;return e=new Center({props:{$$slots:{default:[create_default_slot]},$$scope:{ctx:t}}}),{c(){create_component(e.$$.fragment)},m(r,o){mount_component(e,r,o),n=!0},p(r,o){const i={};o&64&&(i.$$scope={dirty:o,ctx:r}),e.$set(i)},i(r){n||(transition_in(e.$$.fragment,r),n=!0)},o(r){transition_out(e.$$.fragment,r),n=!1},d(r){destroy_component(e,r)}}}function create_default_slot(t){let e,n;return e=new Spinner({}),{c(){create_component(e.$$.fragment)},m(r,o){mount_component(e,r,o),n=!0},i(r){n||(transition_in(e.$$.fragment,r),n=!0)},o(r){transition_out(e.$$.fragment,r),n=!1},d(r){destroy_component(e,r)}}}function create_fragment(t){let e,n,r,o,i,a;r=new Header({props:{isSignedIn:t[0],isAuthorized:t[1]}});let s={ctx:t,current:null,token:null,hasCatch:!0,pending:create_pending_block,then:create_then_block,catch:create_catch_block,value:4,error:5,blocks:[,,,]};return handle_promise(t[2](),s),{c(){e=element("main"),n=element("div"),create_component(r.$$.fragment),o=space(),i=element("section"),s.block.c(),attr(i,"class","w-full h-[calc(100%-3rem)]"),attr(n,"class","w-full h-full min-w-[22rem]"),attr(e,"class","w-full h-full overflow-x-auto x-scroll bg-neutral-700 text-white")},m(l,u){insert(l,e,u),append(e,n),mount_component(r,n,null),append(n,o),append(n,i),s.block.m(i,s.anchor=null),s.mount=()=>i,s.anchor=null,a=!0},p(l,[u]){t=l;const d={};u&1&&(d.isSignedIn=t[0]),u&2&&(d.isAuthorized=t[1]),r.$set(d),update_await_block_branch(s,t,u)},i(l){a||(transition_in(r.$$.fragment,l),transition_in(s.block),a=!0)},o(l){transition_out(r.$$.fragment,l);for(let u=0;u<3;u+=1){const d=s.blocks[u];transition_out(d)}a=!1},d(l){l&&detach(e),destroy_component(r),s.block.d(),s.token=null,s=null}}}const scope="https://www.googleapis.com/auth/youtube.readonly https://www.googleapis.com/auth/drive.appdata";function instance(t,e,n){let r,o;function i(){return new Promise((s,l)=>{gapi.load("client:auth2",()=>a().then(()=>s()).catch(u=>l(u)))})}async function a(){await gapi.client.init({apiKey:"AIzaSyBAHcJ9fPTrCjDExl1NZkF4fZd15fICEFI",clientId:"789354109817-qrqoqtfj1k3gvs01gufrpqlv38g0bi9p.apps.googleusercontent.com",scope});const s=gapi.auth2.getAuthInstance();n(0,r=s.isSignedIn.get()),s.isSignedIn.listen(l=>n(0,r=l)),n(1,o=s.currentUser.get().hasGrantedScopes(scope)),s.currentUser.listen(l=>n(1,o=l.hasGrantedScopes(scope)))}return[r,o,i]}class App extends SvelteComponent{constructor(e){super(),init(this,e,instance,create_fragment,not_equal,{})}}var index="";new App({target:document.getElementById("app")});
