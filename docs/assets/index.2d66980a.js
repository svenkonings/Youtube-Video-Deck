var le=Object.defineProperty,ue=Object.defineProperties;var ce=Object.getOwnPropertyDescriptors;var ne=Object.getOwnPropertySymbols;var ie=Object.prototype.hasOwnProperty,ae=Object.prototype.propertyIsEnumerable;var oe=(t,e,n)=>e in t?le(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Z=(t,e)=>{for(var n in e||(e={}))ie.call(e,n)&&oe(t,n,e[n]);if(ne)for(var n of ne(e))ae.call(e,n)&&oe(t,n,e[n]);return t},re=(t,e)=>ue(t,ce(e));var se=(t,e)=>{var n={};for(var r in t)ie.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&ne)for(var r of ne(t))e.indexOf(r)<0&&ae.call(t,r)&&(n[r]=t[r]);return n};const p=function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))r(o);new MutationObserver(o=>{for(const i of o)if(i.type==="childList")for(const a of i.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function n(o){const i={};return o.integrity&&(i.integrity=o.integrity),o.referrerpolicy&&(i.referrerPolicy=o.referrerpolicy),o.crossorigin==="use-credentials"?i.credentials="include":o.crossorigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(o){if(o.ep)return;o.ep=!0;const i=n(o);fetch(o.href,i)}};p();function noop(){}const identity=t=>t;function assign(t,e){for(const n in e)t[n]=e[n];return t}function is_promise(t){return t&&typeof t=="object"&&typeof t.then=="function"}function run(t){return t()}function blank_object(){return Object.create(null)}function run_all(t){t.forEach(run)}function is_function(t){return typeof t=="function"}function safe_not_equal(t,e){return t!=t?e==e:t!==e||t&&typeof t=="object"||typeof t=="function"}let src_url_equal_anchor;function src_url_equal(t,e){return src_url_equal_anchor||(src_url_equal_anchor=document.createElement("a")),src_url_equal_anchor.href=e,t===src_url_equal_anchor.href}function is_empty(t){return Object.keys(t).length===0}function subscribe(t,...e){if(t==null)return noop;const n=t.subscribe(...e);return n.unsubscribe?()=>n.unsubscribe():n}function component_subscribe(t,e,n){t.$$.on_destroy.push(subscribe(e,n))}function create_slot(t,e,n,r){if(t){const o=get_slot_context(t,e,n,r);return t[0](o)}}function get_slot_context(t,e,n,r){return t[1]&&r?assign(n.ctx.slice(),t[1](r(e))):n.ctx}function get_slot_changes(t,e,n,r){if(t[2]&&r){const o=t[2](r(n));if(e.dirty===void 0)return o;if(typeof o=="object"){const i=[],a=Math.max(e.dirty.length,o.length);for(let s=0;s<a;s+=1)i[s]=e.dirty[s]|o[s];return i}return e.dirty|o}return e.dirty}function update_slot_base(t,e,n,r,o,i){if(o){const a=get_slot_context(e,n,r,i);t.p(a,o)}}function get_all_dirty_from_scope(t){if(t.ctx.length>32){const e=[],n=t.ctx.length/32;for(let r=0;r<n;r++)e[r]=-1;return e}return-1}function null_to_empty(t){return t==null?"":t}function set_store_value(t,e,n){return t.set(n),e}function action_destroyer(t){return t&&is_function(t.destroy)?t.destroy:noop}const is_client=typeof window!="undefined";let now$1=is_client?()=>window.performance.now():()=>Date.now(),raf=is_client?t=>requestAnimationFrame(t):noop;const tasks=new Set;function run_tasks(t){tasks.forEach(e=>{e.c(t)||(tasks.delete(e),e.f())}),tasks.size!==0&&raf(run_tasks)}function loop$1(t){let e;return tasks.size===0&&raf(run_tasks),{promise:new Promise(n=>{tasks.add(e={c:t,f:n})}),abort(){tasks.delete(e)}}}function append(t,e){t.appendChild(e)}function get_root_for_style(t){if(!t)return document;const e=t.getRootNode?t.getRootNode():t.ownerDocument;return e&&e.host?e:t.ownerDocument}function append_empty_stylesheet(t){const e=element("style");return append_stylesheet(get_root_for_style(t),e),e.sheet}function append_stylesheet(t,e){append(t.head||t,e)}function insert(t,e,n){t.insertBefore(e,n||null)}function detach(t){t.parentNode.removeChild(t)}function destroy_each(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}function element(t){return document.createElement(t)}function svg_element(t){return document.createElementNS("http://www.w3.org/2000/svg",t)}function text(t){return document.createTextNode(t)}function space(){return text(" ")}function empty(){return text("")}function listen(t,e,n,r){return t.addEventListener(e,n,r),()=>t.removeEventListener(e,n,r)}function prevent_default(t){return function(e){return e.preventDefault(),t.call(this,e)}}function stop_propagation(t){return function(e){return e.stopPropagation(),t.call(this,e)}}function self(t){return function(e){e.target===this&&t.call(this,e)}}function attr(t,e,n){n==null?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function children(t){return Array.from(t.childNodes)}function set_data(t,e){e=""+e,t.wholeText!==e&&(t.data=e)}function set_input_value(t,e){t.value=e==null?"":e}function set_style(t,e,n,r){n===null?t.style.removeProperty(e):t.style.setProperty(e,n,r?"important":"")}function toggle_class(t,e,n){t.classList[n?"add":"remove"](e)}const managed_styles=new Map;let active=0;function hash(t){let e=5381,n=t.length;for(;n--;)e=(e<<5)-e^t.charCodeAt(n);return e>>>0}function create_style_information(t,e){const n={stylesheet:append_empty_stylesheet(e),rules:{}};return managed_styles.set(t,n),n}function create_rule(t,e,n,r,o,i,a,s=0){const l=16.666/r;let c=`{
`;for(let v=0;v<=1;v+=l){const g=e+(n-e)*i(v);c+=v*100+`%{${a(g,1-g)}}
`}const _=c+`100% {${a(n,1-n)}}
}`,f=`__svelte_${hash(_)}_${s}`,u=get_root_for_style(t),{stylesheet:d,rules:m}=managed_styles.get(u)||create_style_information(u,t);m[f]||(m[f]=!0,d.insertRule(`@keyframes ${f} ${_}`,d.cssRules.length));const y=t.style.animation||"";return t.style.animation=`${y?`${y}, `:""}${f} ${r}ms linear ${o}ms 1 both`,active+=1,f}function delete_rule(t,e){const n=(t.style.animation||"").split(", "),r=n.filter(e?i=>i.indexOf(e)<0:i=>i.indexOf("__svelte")===-1),o=n.length-r.length;o&&(t.style.animation=r.join(", "),active-=o,active||clear_rules())}function clear_rules(){raf(()=>{active||(managed_styles.forEach(t=>{const{stylesheet:e}=t;let n=e.cssRules.length;for(;n--;)e.deleteRule(n);t.rules={}}),managed_styles.clear())})}function create_animation(t,e,n,r){if(!e)return noop;const o=t.getBoundingClientRect();if(e.left===o.left&&e.right===o.right&&e.top===o.top&&e.bottom===o.bottom)return noop;const{delay:i=0,duration:a=300,easing:s=identity,start:l=now$1()+i,end:c=l+a,tick:_=noop,css:f}=n(t,{from:e,to:o},r);let u=!0,d=!1,m;function y(){f&&(m=create_rule(t,0,1,a,i,s,f)),i||(d=!0)}function v(){f&&delete_rule(t,m),u=!1}return loop$1(g=>{if(!d&&g>=l&&(d=!0),d&&g>=c&&(_(1,0),v()),!u)return!1;if(d){const E=g-l,h=0+1*s(E/a);_(h,1-h)}return!0}),y(),_(0,1),v}function fix_position(t){const e=getComputedStyle(t);if(e.position!=="absolute"&&e.position!=="fixed"){const{width:n,height:r}=e,o=t.getBoundingClientRect();t.style.position="absolute",t.style.width=n,t.style.height=r,add_transform(t,o)}}function add_transform(t,e){const n=t.getBoundingClientRect();if(e.left!==n.left||e.top!==n.top){const r=getComputedStyle(t),o=r.transform==="none"?"":r.transform;t.style.transform=`${o} translate(${e.left-n.left}px, ${e.top-n.top}px)`}}let current_component;function set_current_component(t){current_component=t}function get_current_component(){if(!current_component)throw new Error("Function called outside component initialization");return current_component}function onDestroy(t){get_current_component().$$.on_destroy.push(t)}function bubble(t,e){const n=t.$$.callbacks[e.type];n&&n.slice().forEach(r=>r.call(this,e))}const dirty_components=[],binding_callbacks=[],render_callbacks=[],flush_callbacks=[],resolved_promise=Promise.resolve();let update_scheduled=!1;function schedule_update(){update_scheduled||(update_scheduled=!0,resolved_promise.then(flush))}function add_render_callback(t){render_callbacks.push(t)}const seen_callbacks=new Set;let flushidx=0;function flush(){const t=current_component;do{for(;flushidx<dirty_components.length;){const e=dirty_components[flushidx];flushidx++,set_current_component(e),update(e.$$)}for(set_current_component(null),dirty_components.length=0,flushidx=0;binding_callbacks.length;)binding_callbacks.pop()();for(let e=0;e<render_callbacks.length;e+=1){const n=render_callbacks[e];seen_callbacks.has(n)||(seen_callbacks.add(n),n())}render_callbacks.length=0}while(dirty_components.length);for(;flush_callbacks.length;)flush_callbacks.pop()();update_scheduled=!1,seen_callbacks.clear(),set_current_component(t)}function update(t){if(t.fragment!==null){t.update(),run_all(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(add_render_callback)}}const outroing=new Set;let outros;function group_outros(){outros={r:0,c:[],p:outros}}function check_outros(){outros.r||run_all(outros.c),outros=outros.p}function transition_in(t,e){t&&t.i&&(outroing.delete(t),t.i(e))}function transition_out(t,e,n,r){if(t&&t.o){if(outroing.has(t))return;outroing.add(t),outros.c.push(()=>{outroing.delete(t),r&&(n&&t.d(1),r())}),t.o(e)}}function handle_promise(t,e){const n=e.token={};function r(o,i,a,s){if(e.token!==n)return;e.resolved=s;let l=e.ctx;a!==void 0&&(l=l.slice(),l[a]=s);const c=o&&(e.current=o)(l);let _=!1;e.block&&(e.blocks?e.blocks.forEach((f,u)=>{u!==i&&f&&(group_outros(),transition_out(f,1,1,()=>{e.blocks[u]===f&&(e.blocks[u]=null)}),check_outros())}):e.block.d(1),c.c(),transition_in(c,1),c.m(e.mount(),e.anchor),_=!0),e.block=c,e.blocks&&(e.blocks[i]=c),_&&flush()}if(is_promise(t)){const o=get_current_component();if(t.then(i=>{set_current_component(o),r(e.then,1,e.value,i),set_current_component(null)},i=>{if(set_current_component(o),r(e.catch,2,e.error,i),set_current_component(null),!e.hasCatch)throw i}),e.current!==e.pending)return r(e.pending,0),!0}else{if(e.current!==e.then)return r(e.then,1,e.value,t),!0;e.resolved=t}}function update_await_block_branch(t,e,n){const r=e.slice(),{resolved:o}=t;t.current===t.then&&(r[t.value]=o),t.current===t.catch&&(r[t.error]=o),t.block.p(r,n)}const globals=typeof window!="undefined"?window:typeof globalThis!="undefined"?globalThis:global;function destroy_block(t,e){t.d(1),e.delete(t.key)}function outro_and_destroy_block(t,e){transition_out(t,1,1,()=>{e.delete(t.key)})}function fix_and_destroy_block(t,e){t.f(),destroy_block(t,e)}function fix_and_outro_and_destroy_block(t,e){t.f(),outro_and_destroy_block(t,e)}function update_keyed_each(t,e,n,r,o,i,a,s,l,c,_,f){let u=t.length,d=i.length,m=u;const y={};for(;m--;)y[t[m].key]=m;const v=[],g=new Map,E=new Map;for(m=d;m--;){const b=f(o,i,m),I=n(b);let T=a.get(I);T?r&&T.p(b,e):(T=c(I,b),T.c()),g.set(I,v[m]=T),I in y&&E.set(I,Math.abs(m-y[I]))}const h=new Set,S=new Set;function R(b){transition_in(b,1),b.m(s,_),a.set(b.key,b),_=b.first,d--}for(;u&&d;){const b=v[d-1],I=t[u-1],T=b.key,D=I.key;b===I?(_=b.first,u--,d--):g.has(D)?!a.has(T)||h.has(T)?R(b):S.has(D)?u--:E.get(T)>E.get(D)?(S.add(T),R(b)):(h.add(D),u--):(l(I,a),u--)}for(;u--;){const b=t[u];g.has(b.key)||l(b,a)}for(;d;)R(v[d-1]);return v}function create_component(t){t&&t.c()}function mount_component(t,e,n,r){const{fragment:o,on_mount:i,on_destroy:a,after_update:s}=t.$$;o&&o.m(e,n),r||add_render_callback(()=>{const l=i.map(run).filter(is_function);a?a.push(...l):run_all(l),t.$$.on_mount=[]}),s.forEach(add_render_callback)}function destroy_component(t,e){const n=t.$$;n.fragment!==null&&(run_all(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function make_dirty(t,e){t.$$.dirty[0]===-1&&(dirty_components.push(t),schedule_update(),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function init(t,e,n,r,o,i,a,s=[-1]){const l=current_component;set_current_component(t);const c=t.$$={fragment:null,ctx:null,props:i,update:noop,not_equal:o,bound:blank_object(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(l?l.$$.context:[])),callbacks:blank_object(),dirty:s,skip_bound:!1,root:e.target||l.$$.root};a&&a(c.root);let _=!1;if(c.ctx=n?n(t,e.props||{},(f,u,...d)=>{const m=d.length?d[0]:u;return c.ctx&&o(c.ctx[f],c.ctx[f]=m)&&(!c.skip_bound&&c.bound[f]&&c.bound[f](m),_&&make_dirty(t,f)),u}):[],c.update(),_=!0,run_all(c.before_update),c.fragment=r?r(c.ctx):!1,e.target){if(e.hydrate){const f=children(e.target);c.fragment&&c.fragment.l(f),f.forEach(detach)}else c.fragment&&c.fragment.c();e.intro&&transition_in(t.$$.fragment),mount_component(t,e.target,e.anchor,e.customElement),flush()}set_current_component(l)}class SvelteComponent{$destroy(){destroy_component(this,1),this.$destroy=noop}$on(e,n){const r=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return r.push(n),()=>{const o=r.indexOf(n);o!==-1&&r.splice(o,1)}}$set(e){this.$$set&&!is_empty(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}const get_after_slot_changes=t=>({}),get_after_slot_context=t=>({}),get_before_slot_changes=t=>({}),get_before_slot_context=t=>({});function create_fragment$d(t){let e,n,r,o,i;const a=t[1].before,s=create_slot(a,t,t[0],get_before_slot_context),l=t[1].default,c=create_slot(l,t,t[0],null),_=t[1].after,f=create_slot(_,t,t[0],get_after_slot_context);return{c(){e=element("div"),s&&s.c(),n=space(),r=element("div"),c&&c.c(),o=space(),f&&f.c(),attr(r,"class","absolute top-1/2 -translate-y-1/2 left-1/2 -translate-x-1/2 text-center"),attr(e,"class","relative w-full h-full")},m(u,d){insert(u,e,d),s&&s.m(e,null),append(e,n),append(e,r),c&&c.m(r,null),append(e,o),f&&f.m(e,null),i=!0},p(u,[d]){s&&s.p&&(!i||d&1)&&update_slot_base(s,a,u,u[0],i?get_slot_changes(a,u[0],d,get_before_slot_changes):get_all_dirty_from_scope(u[0]),get_before_slot_context),c&&c.p&&(!i||d&1)&&update_slot_base(c,l,u,u[0],i?get_slot_changes(l,u[0],d,null):get_all_dirty_from_scope(u[0]),null),f&&f.p&&(!i||d&1)&&update_slot_base(f,_,u,u[0],i?get_slot_changes(_,u[0],d,get_after_slot_changes):get_all_dirty_from_scope(u[0]),get_after_slot_context)},i(u){i||(transition_in(s,u),transition_in(c,u),transition_in(f,u),i=!0)},o(u){transition_out(s,u),transition_out(c,u),transition_out(f,u),i=!1},d(u){u&&detach(e),s&&s.d(u),c&&c.d(u),f&&f.d(u)}}}function instance$c(t,e,n){let{$$slots:r={},$$scope:o}=e;return t.$$set=i=>{"$$scope"in i&&n(0,o=i.$$scope)},[o,r]}class Center extends SvelteComponent{constructor(e){super(),init(this,e,instance$c,create_fragment$d,safe_not_equal,{})}}var Spinner_svelte_svelte_type_style_lang="";function create_fragment$c(t){let e;return{c(){e=element("div"),e.innerHTML=`<span class="loader svelte-gg29y1"></span> 
  <br/> 
  <span class="font-extrabold">Loading\u2026</span>`,attr(e,"class","text-center")},m(n,r){insert(n,e,r)},p:noop,i:noop,o:noop,d(n){n&&detach(e)}}}class Spinner extends SvelteComponent{constructor(e){super(),init(this,e,null,create_fragment$c,safe_not_equal,{})}}function create_fragment$b(t){let e,n,r,o,i;const a=t[2].default,s=create_slot(a,t,t[1],null);return{c(){e=element("button"),s&&s.c(),attr(e,"class",n="bg-blue-600 text-white p-1.5 rounded-2xl hover:bg-blue-700 "+t[0])},m(l,c){insert(l,e,c),s&&s.m(e,null),r=!0,o||(i=listen(e,"click",t[3]),o=!0)},p(l,[c]){s&&s.p&&(!r||c&2)&&update_slot_base(s,a,l,l[1],r?get_slot_changes(a,l[1],c,null):get_all_dirty_from_scope(l[1]),null),(!r||c&1&&n!==(n="bg-blue-600 text-white p-1.5 rounded-2xl hover:bg-blue-700 "+l[0]))&&attr(e,"class",n)},i(l){r||(transition_in(s,l),r=!0)},o(l){transition_out(s,l),r=!1},d(l){l&&detach(e),s&&s.d(l),o=!1,i()}}}function instance$b(t,e,n){let{$$slots:r={},$$scope:o}=e,{class:i=""}=e;function a(s){bubble.call(this,t,s)}return t.$$set=s=>{"class"in s&&n(0,i=s.class),"$$scope"in s&&n(1,o=s.$$scope)},[i,o,r,a]}class PrimaryButton extends SvelteComponent{constructor(e){super(),init(this,e,instance$b,create_fragment$b,safe_not_equal,{class:0})}}function create_default_slot_1$3(t){let e=t[0]?"Authorize":"Sign in",n;return{c(){n=text(e)},m(r,o){insert(r,n,o)},p(r,o){o&1&&e!==(e=r[0]?"Authorize":"Sign in")&&set_data(n,e)},d(r){r&&detach(n)}}}function create_default_slot$5(t){let e,n,r=t[0]?"authorize this app":"sign in",o,i,a,s,l,c,_;return c=new PrimaryButton({props:{class:"w-full",$$slots:{default:[create_default_slot_1$3]},$$scope:{ctx:t}}}),c.$on("click",signIn),{c(){e=element("p"),n=text("Please "),o=text(r),i=text(" to continue"),a=space(),s=element("br"),l=space(),create_component(c.$$.fragment)},m(f,u){insert(f,e,u),append(e,n),append(e,o),append(e,i),insert(f,a,u),insert(f,s,u),insert(f,l,u),mount_component(c,f,u),_=!0},p(f,u){(!_||u&1)&&r!==(r=f[0]?"authorize this app":"sign in")&&set_data(o,r);const d={};u&3&&(d.$$scope={dirty:u,ctx:f}),c.$set(d)},i(f){_||(transition_in(c.$$.fragment,f),_=!0)},o(f){transition_out(c.$$.fragment,f),_=!1},d(f){f&&detach(e),f&&detach(a),f&&detach(s),f&&detach(l),destroy_component(c,f)}}}function create_fragment$a(t){let e,n;return e=new Center({props:{$$slots:{default:[create_default_slot$5]},$$scope:{ctx:t}}}),{c(){create_component(e.$$.fragment)},m(r,o){mount_component(e,r,o),n=!0},p(r,[o]){const i={};o&3&&(i.$$scope={dirty:o,ctx:r}),e.$set(i)},i(r){n||(transition_in(e.$$.fragment,r),n=!0)},o(r){transition_out(e.$$.fragment,r),n=!1},d(r){destroy_component(e,r)}}}function signIn(){return gapi.auth2.getAuthInstance().signIn()}function instance$a(t,e,n){let{isSignedIn:r}=e;return t.$$set=o=>{"isSignedIn"in o&&n(0,r=o.isSignedIn)},[r]}class LoginScreen extends SvelteComponent{constructor(e){super(),init(this,e,instance$a,create_fragment$a,safe_not_equal,{isSignedIn:0})}}const subscriber_queue=[];function writable(t,e=noop){let n;const r=new Set;function o(s){if(safe_not_equal(t,s)&&(t=s,n)){const l=!subscriber_queue.length;for(const c of r)c[1](),subscriber_queue.push(c,t);if(l){for(let c=0;c<subscriber_queue.length;c+=2)subscriber_queue[c][0](subscriber_queue[c+1]);subscriber_queue.length=0}}}function i(s){o(s(t))}function a(s,l=noop){const c=[s,l];return r.add(c),r.size===1&&(n=e(o)||noop),s(t),()=>{r.delete(c),r.size===0&&(n(),n=null)}}return{set:o,update:i,subscribe:a}}function getDefaultExportFromCjs(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var browserCookies={};(function(t){t.defaults={},t.set=function(e,n,r){var o=r||{},i=t.defaults,a=o.expires||i.expires,s=o.domain||i.domain,l=o.path!==void 0?o.path:i.path!==void 0?i.path:"/",c=o.secure!==void 0?o.secure:i.secure,_=o.httponly!==void 0?o.httponly:i.httponly,f=o.samesite!==void 0?o.samesite:i.samesite,u=a?new Date(typeof a=="number"?new Date().getTime()+a*864e5:a):0;document.cookie=e.replace(/[^+#$&^`|]/g,encodeURIComponent).replace("(","%28").replace(")","%29")+"="+n.replace(/[^+#$&/:<-\[\]-}]/g,encodeURIComponent)+(u&&u.getTime()>=0?";expires="+u.toUTCString():"")+(s?";domain="+s:"")+(l?";path="+l:"")+(c?";secure":"")+(_?";httponly":"")+(f?";samesite="+f:"")},t.get=function(e){for(var n=document.cookie.split(";");n.length;){var r=n.pop(),o=r.indexOf("=");o=o<0?r.length:o;var i=decodeURIComponent(r.slice(0,o).replace(/^\s+/,""));if(i===e)return decodeURIComponent(r.slice(o+1))}return null},t.erase=function(e,n){t.set(e,"",{expires:-1,domain:n&&n.domain,path:n&&n.path,secure:0,httponly:0})},t.all=function(){for(var e={},n=document.cookie.split(";");n.length;){var r=n.pop(),o=r.indexOf("=");o=o<0?r.length:o;var i=decodeURIComponent(r.slice(0,o).replace(/^\s+/,""));e[i]=decodeURIComponent(r.slice(o+1))}return e}})(browserCookies);var bundle={};(function(exports){(function(t,e){for(var n in e)t[n]=e[n];e.__esModule&&Object.defineProperty(t,"__esModule",{value:!0})})(exports,(()=>{var __webpack_modules__={607:(module,exports,__webpack_require__)=>{Object.defineProperty(exports,"__esModule",{value:!0});var serializer_1=__webpack_require__(810),deserializer_1=__webpack_require__(496),Module;typeof process!="undefined"&&process.release.name==="node"&&(Module=eval("require")("module"));var ESSerializer=function(){function t(){}return t.throwErrorIfInNonNodeEnvironment=function(){if(!Module)throw new Error("Cannot intercept require in non-Node environment.")},t.interceptRequire=function(){this.isRequireIntercepted||(this.isRequireIntercepted=!0,this.throwErrorIfInNonNodeEnvironment(),t.originRequire=Module.prototype.require,Module.prototype.require=function(){var e=t.originRequire.apply(this,arguments),n=e.name;return t.requiredClasses[n]||(t.requiredClasses[n]=e),e})},t.stopInterceptRequire=function(){this.throwErrorIfInNonNodeEnvironment(),Module.prototype.require=t.originRequire,this.isRequireIntercepted=!1},t.isInterceptingRequire=function(){return this.isRequireIntercepted},t.getRequiredClasses=function(){return this.requiredClasses},t.clearRequiredClasses=function(){this.requiredClasses={}},t.registerClass=function(e){this.registeredClasses.push(e)},t.registerClasses=function(e){this.registeredClasses=this.registeredClasses.concat(e)},t.clearRegisteredClasses=function(){this.registeredClasses=[]},t.serialize=function(e,n){return n===void 0&&(n={}),JSON.stringify(serializer_1.getSerializeValueWithClassName(e,n))},t.deserialize=function(e,n,r){return n===void 0&&(n=[]),r===void 0&&(r={}),deserializer_1.deserializeFromParsedObj(JSON.parse(e),Object.values(this.requiredClasses).concat(this.registeredClasses).concat(n),r)},t.originRequire=null,t.isRequireIntercepted=!1,t.requiredClasses={},t.registeredClasses=[],t}();module.exports=ESSerializer},917:function(t,e){var n=this&&this.__spreadArrays||function(){for(var B=0,F=0,q=arguments.length;F<q;F++)B+=arguments[F].length;var V=Array(B),j=0;for(F=0;F<q;F++)for(var H=arguments[F],W=0,X=H.length;W<X;W++,j++)V[j]=H[W];return V};Object.defineProperty(e,"__esModule",{value:!0}),e.TO_STRING_FIELD=e.TIMESTAMP_FIELD=e.OPTIONS_FIELD=e.CLASS_NAME_FIELD=e.BOOLEAN_FIELD=e.ARRAY_FIELD=e.BUILTIN_TYPE_UNDEFINED=e.BUILTIN_TYPE_NOT_FINITE=e.BUILTIN_TYPE_BIG_INT=e.BUILTIN_CLASS_AGGREGATE_ERROR=e.BUILTIN_CLASS_URI_ERROR=e.BUILTIN_CLASS_TYPE_ERROR=e.BUILTIN_CLASS_SYNTAX_ERROR=e.BUILTIN_CLASS_REFERENCE_ERROR=e.BUILTIN_CLASS_RANGE_ERROR=e.BUILTIN_CLASS_EVAL_ERROR=e.BUILTIN_CLASS_ERROR=e.BUILTIN_CLASS_STRING=e.BUILTIN_CLASS_SET=e.BUILTIN_CLASS_REGEXP=e.BUILTIN_CLASS_INTL_RELATIVETIMEFORMAT=e.BUILTIN_CLASS_INTL_PLURALRULES=e.BUILTIN_CLASS_INTL_NUMBERFORMAT=e.BUILTIN_CLASS_INTL_LOCALE=e.BUILTIN_CLASS_INTL_LISTFORMAT=e.BUILTIN_CLASS_INTL_DATETIMEFORMAT=e.BUILTIN_CLASS_INTL_COLLATOR=e.BUILTIN_CLASS_DATE=e.BUILTIN_CLASS_DATAVIEW=e.BUILTIN_CLASS_BOOLEAN=e.BUILTIN_CLASS_SHAREDARRAYBUFFER=e.BUILTIN_CLASS_ARRAYBUFFER=e.BUILTIN_CLASS_BIGUINT64ARRAY=e.BUILTIN_CLASS_BIGINT64ARRAY=e.BUILTIN_CLASS_FLOAT64ARRAY=e.BUILTIN_CLASS_FLOAT32ARRAY=e.BUILTIN_CLASS_UINT32ARRAY=e.BUILTIN_CLASS_INT32ARRAY=e.BUILTIN_CLASS_UINT16ARRAY=e.BUILTIN_CLASS_INT16ARRAY=e.BUILTIN_CLASS_UINT8CLAMPEDARRAY=e.BUILTIN_CLASS_UINT8ARRAY=e.BUILTIN_CLASS_INT8ARRAY=e.CLASSNAMES_WHOSE_ENUMERABLE_PROPERTIES_SHOULD_BE_IGNORED=e.ALL_BUILTIN_INTLS=e.ALL_BUILTIN_ERRORS=e.ALL_BUILTIN_ARRAYS=e.ESSERIALIZER_NULL=void 0,e.ESSERIALIZER_NULL="__ESSERIALIZER_NULL__",e.ARRAY_FIELD="ess_arr",e.BOOLEAN_FIELD="ess_bool",e.CLASS_NAME_FIELD="ess_cn",e.OPTIONS_FIELD="ess_opt",e.TIMESTAMP_FIELD="ess_ts",e.TO_STRING_FIELD="ess_str";var r="Int8Array";e.BUILTIN_CLASS_INT8ARRAY=r;var o="Uint8Array";e.BUILTIN_CLASS_UINT8ARRAY=o;var i="Uint8ClampedArray";e.BUILTIN_CLASS_UINT8CLAMPEDARRAY=i;var a="Int16Array";e.BUILTIN_CLASS_INT16ARRAY=a;var s="Uint16Array";e.BUILTIN_CLASS_UINT16ARRAY=s;var l="Int32Array";e.BUILTIN_CLASS_INT32ARRAY=l;var c="Uint32Array";e.BUILTIN_CLASS_UINT32ARRAY=c;var _="Float32Array";e.BUILTIN_CLASS_FLOAT32ARRAY=_;var f="Float64Array";e.BUILTIN_CLASS_FLOAT64ARRAY=f;var u="BigInt64Array";e.BUILTIN_CLASS_BIGINT64ARRAY=u;var d="BigUint64Array";e.BUILTIN_CLASS_BIGUINT64ARRAY=d,e.BUILTIN_CLASS_ARRAYBUFFER="ArrayBuffer",e.BUILTIN_CLASS_SHAREDARRAYBUFFER="SharedArrayBuffer",e.BUILTIN_CLASS_BOOLEAN="Boolean",e.BUILTIN_CLASS_DATAVIEW="DataView",e.BUILTIN_CLASS_DATE="Date";var m="Collator";e.BUILTIN_CLASS_INTL_COLLATOR=m;var y="DateTimeFormat";e.BUILTIN_CLASS_INTL_DATETIMEFORMAT=y;var v="ListFormat";e.BUILTIN_CLASS_INTL_LISTFORMAT=v,e.BUILTIN_CLASS_INTL_LOCALE="Locale";var g="NumberFormat";e.BUILTIN_CLASS_INTL_NUMBERFORMAT=g;var E="PluralRules";e.BUILTIN_CLASS_INTL_PLURALRULES=E;var h="RelativeTimeFormat";e.BUILTIN_CLASS_INTL_RELATIVETIMEFORMAT=h,e.BUILTIN_CLASS_REGEXP="RegExp",e.BUILTIN_CLASS_SET="Set";var S="String";e.BUILTIN_CLASS_STRING=S;var R="Error";e.BUILTIN_CLASS_ERROR=R;var b="EvalError";e.BUILTIN_CLASS_EVAL_ERROR=b;var I="RangeError";e.BUILTIN_CLASS_RANGE_ERROR=I;var T="ReferenceError";e.BUILTIN_CLASS_REFERENCE_ERROR=T;var D="SyntaxError";e.BUILTIN_CLASS_SYNTAX_ERROR=D;var C="TypeError";e.BUILTIN_CLASS_TYPE_ERROR=C;var w="URIError";e.BUILTIN_CLASS_URI_ERROR=w;var k="AggregateError";e.BUILTIN_CLASS_AGGREGATE_ERROR=k,e.BUILTIN_TYPE_BIG_INT="BI",e.BUILTIN_TYPE_NOT_FINITE="NF",e.BUILTIN_TYPE_UNDEFINED="UD";var G=[r,o,i,a,s,l,c,_,f,u,d];e.ALL_BUILTIN_ARRAYS=G;var x=[R,b,I,T,D,C,w,k];e.ALL_BUILTIN_ERRORS=x;var M=[m,y,v,g,E,h];e.ALL_BUILTIN_INTLS=M;var Y=n([S],G);e.CLASSNAMES_WHOSE_ENUMERABLE_PROPERTIES_SHOULD_BE_IGNORED=Y},496:function(t,e,n){var r=this&&this.__spreadArrays||function(){for(var g=0,E=0,h=arguments.length;E<h;E++)g+=arguments[E].length;var S=Array(g),R=0;for(E=0;E<h;E++)for(var b=arguments[E],I=0,T=b.length;I<T;I++,R++)S[R]=b[I];return S};Object.defineProperty(e,"__esModule",{value:!0}),e.getParentClassName=e.getClassMappingFromClassArray=e.deserializeFromParsedObjWithClassMapping=e.deserializeFromParsedObj=void 0;var o=n(821),i=n(917),a=/^\s*class\s+/;function s(g,E,h){if(h===void 0&&(h={}),o.notObject(g))return g;if(Array.isArray(g))return l(g,E);var S=g[i.CLASS_NAME_FIELD],R=function(I,T,D){switch(I){case i.BUILTIN_CLASS_INT8ARRAY:return c(T[i.ARRAY_FIELD],Int8Array);case i.BUILTIN_CLASS_UINT8ARRAY:return c(T[i.ARRAY_FIELD],Uint8Array);case i.BUILTIN_CLASS_UINT8CLAMPEDARRAY:return c(T[i.ARRAY_FIELD],Uint8ClampedArray);case i.BUILTIN_CLASS_INT16ARRAY:return c(T[i.ARRAY_FIELD],Int16Array);case i.BUILTIN_CLASS_UINT16ARRAY:return c(T[i.ARRAY_FIELD],Uint16Array);case i.BUILTIN_CLASS_INT32ARRAY:return c(T[i.ARRAY_FIELD],Int32Array);case i.BUILTIN_CLASS_UINT32ARRAY:return c(T[i.ARRAY_FIELD],Uint32Array);case i.BUILTIN_CLASS_FLOAT32ARRAY:return c(T[i.ARRAY_FIELD],Float32Array);case i.BUILTIN_CLASS_FLOAT64ARRAY:return c(T[i.ARRAY_FIELD],Float64Array);case i.BUILTIN_CLASS_BIGINT64ARRAY:return _(T[i.ARRAY_FIELD],BigInt64Array);case i.BUILTIN_CLASS_BIGUINT64ARRAY:return _(T[i.ARRAY_FIELD],BigUint64Array);case i.BUILTIN_TYPE_BIG_INT:return f(T[i.TO_STRING_FIELD]);case i.BUILTIN_TYPE_UNDEFINED:return;case i.BUILTIN_TYPE_NOT_FINITE:return o.getValueFromToStringResult(T[i.TO_STRING_FIELD]);case i.BUILTIN_CLASS_ARRAYBUFFER:return C=T[i.ARRAY_FIELD],new Uint8Array(C).buffer;case i.BUILTIN_CLASS_SHAREDARRAYBUFFER:return function(w){var k=new SharedArrayBuffer(w.length),G=new Uint8Array(k);return w.forEach(function(x,M){G[M]=x}),k}(T[i.ARRAY_FIELD]);case i.BUILTIN_CLASS_BOOLEAN:return function(w){return new Boolean(w[i.BOOLEAN_FIELD])}(T);case i.BUILTIN_CLASS_DATAVIEW:return function(w){return new DataView(new Uint8Array(w).buffer)}(T[i.ARRAY_FIELD]);case i.BUILTIN_CLASS_DATE:return function(w){return typeof w[i.TIMESTAMP_FIELD]=="number"?new Date(w[i.TIMESTAMP_FIELD]):null}(T);case i.BUILTIN_CLASS_INTL_COLLATOR:return u(T,Intl.Collator);case i.BUILTIN_CLASS_INTL_DATETIMEFORMAT:return u(T,Intl.DateTimeFormat);case i.BUILTIN_CLASS_INTL_LISTFORMAT:return u(T,Intl.ListFormat);case i.BUILTIN_CLASS_INTL_LOCALE:return new Intl.Locale(T[i.TO_STRING_FIELD]);case i.BUILTIN_CLASS_INTL_NUMBERFORMAT:return u(T,Intl.NumberFormat);case i.BUILTIN_CLASS_INTL_PLURALRULES:return u(T,Intl.PluralRules);case i.BUILTIN_CLASS_INTL_RELATIVETIMEFORMAT:return u(T,Intl.RelativeTimeFormat);case i.BUILTIN_CLASS_REGEXP:return function(w){var k=w[i.TO_STRING_FIELD],G=k.lastIndexOf("/");return new RegExp(k.substring(1,G),k.substring(G+1))}(T);case i.BUILTIN_CLASS_SET:return function(w,k){return new Set(l(w[i.ARRAY_FIELD],k))}(T,D);case i.BUILTIN_CLASS_STRING:return function(w){return new String(w[i.TO_STRING_FIELD])}(T);case i.BUILTIN_CLASS_ERROR:return d(T,Error);case i.BUILTIN_CLASS_EVAL_ERROR:return d(T,EvalError);case i.BUILTIN_CLASS_RANGE_ERROR:return d(T,RangeError);case i.BUILTIN_CLASS_REFERENCE_ERROR:return d(T,ReferenceError);case i.BUILTIN_CLASS_SYNTAX_ERROR:return d(T,SyntaxError);case i.BUILTIN_CLASS_TYPE_ERROR:return d(T,TypeError);case i.BUILTIN_CLASS_URI_ERROR:return d(T,URIError);case i.BUILTIN_CLASS_AGGREGATE_ERROR:return d(T,AggregateError);default:return i.ESSERIALIZER_NULL}var C}(S,g,E);if(R!==i.ESSERIALIZER_NULL)return R;if(S&&!E[S])throw new Error("Class "+S+" not found");var b=[];return h.fieldsForConstructorParameters&&(b=h.fieldsForConstructorParameters.map(function(I){return I in g?g[I]:{}})),function(I,T,D,C){for(var w in T){var k=T[w];if(!C.ignoreProperties||!C.ignoreProperties.includes(w))if(C.rawProperties&&C.rawProperties.includes(w))I[w]=JSON.stringify(k);else{var G=Object.getOwnPropertyDescriptor(I,w);x=k,M=G,w===i.CLASS_NAME_FIELD||M&&(typeof M.set=="function"||M.writable===!1&&typeof x!="object")||(G&&G.writable===!1&&typeof k=="object"?y(I[w],k,D):I[w]=s(k,D))}}var x,M;return I}(function(I,T){var D={};if(!I)return D;var C=I.length-T.length;if(C>0&&(T=T.concat(Array.from(Array(C),function(){return{}}))),a.test(I.toString()))try{D=new(I.bind.apply(I,r([void 0],T)))}catch{m(I.name),D={},Object.setPrototypeOf(D,I?I.prototype:Object.prototype)}else{D=Object.create(I.prototype.constructor.prototype);try{I.prototype.constructor.call(D,T)}catch{m(I.name)}}return D}(E[S],b),g,E,h)}function l(g,E){return g.map(function(h){return s(h,E)})}function c(g,E){return new E(g)}function _(g,E){return new E(g.map(function(h){return f(h[i.TO_STRING_FIELD])}))}function f(g){return BigInt(g)}function u(g,E){var h=g[i.OPTIONS_FIELD],S=h.locale;return delete h.locale,new E(S,h)}function d(g,E){var h;return delete(h=g.message?new E(g.message):new E).stack,g.name&&(h.name=g.name),g.stack&&(h.stack=g.stack),E===AggregateError&&(h.errors=s(g.errors,{})),h}function m(g){console.warn("Incorrect parameter type passed to constructor: "+g)}function y(g,E,h){for(var S in E){var R=Object.getOwnPropertyDescriptor(g,S);R&&R.writable!==!0&&typeof R.set!="function"||(g[S]=s(E[S],h))}}function v(g){g===void 0&&(g=[]);var E={};return g.forEach(function(h){if(o.isClass(h)){var S=h.name,R=E[S];R&&R!==h&&console.warn("WARNING: Found class definition with the same name: "+S),E[S]=h}}),E}e.deserializeFromParsedObj=function(g,E,h){return s(g,v(E),h)},e.deserializeFromParsedObjWithClassMapping=s,e.getClassMappingFromClassArray=v,e.getParentClassName=function(g){return g.prototype.__proto__.constructor.name}},821:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.isClass=e.notObject=e.getValueFromToStringResult=void 0,e.notObject=function(n){return n===null||typeof n!="object"},e.getValueFromToStringResult=function(n){switch(n){case"Infinity":return 1/0;case"-Infinity":return-1/0;case"NaN":return NaN;default:return null}},e.isClass=function(n){if(function(r){return[Date].indexOf(r)>=0}(n))return!0;try{Reflect.construct(String,[],n)}catch{return!1}return!0}},810:(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.getSerializeValueWithClassName=void 0;var r=n(917),o=n(821);function i(s,l){l===void 0&&(l={});var c=function(d){var m,y,v;return d===void 0?((m={})[r.CLASS_NAME_FIELD]=r.BUILTIN_TYPE_UNDEFINED,m):typeof d!="number"||isFinite(d)?typeof d=="bigint"?((v={})[r.CLASS_NAME_FIELD]=r.BUILTIN_TYPE_BIG_INT,v[r.TO_STRING_FIELD]=d.toString(),v):o.notObject(d)?d:r.ESSERIALIZER_NULL:((y={})[r.CLASS_NAME_FIELD]=r.BUILTIN_TYPE_NOT_FINITE,y[r.TO_STRING_FIELD]=d.toString(),y)}(s);if(c!==r.ESSERIALIZER_NULL)return c;if(Array.isArray(s))return a(s);var _={};if(!function(d){var m=d.__proto__.constructor.name;return r.CLASSNAMES_WHOSE_ENUMERABLE_PROPERTIES_SHOULD_BE_IGNORED.includes(m)}(s)){if(l.ignoreProperties&&l.ignoreProperties.forEach(function(d){delete s[d]}),l.interceptProperties)for(var f in l.interceptProperties)s[f]=l.interceptProperties[f].call(s,s[f]);for(var u in s)_[u]=i(s[u])}return function(d,m){var y=d.__proto__.constructor.name;return y!=="Object"&&(m[r.CLASS_NAME_FIELD]=y,y===r.BUILTIN_CLASS_ARRAYBUFFER||y===r.BUILTIN_CLASS_SHAREDARRAYBUFFER?m[r.ARRAY_FIELD]=a(Array.from(new Uint8Array(d))):y===r.BUILTIN_CLASS_BOOLEAN?m[r.BOOLEAN_FIELD]=d.valueOf():y===r.BUILTIN_CLASS_DATAVIEW?m[r.ARRAY_FIELD]=a(Array.from(new Uint8Array(d.buffer))):y===r.BUILTIN_CLASS_DATE?m[r.TIMESTAMP_FIELD]=d.getTime():y===r.BUILTIN_CLASS_INTL_LOCALE||y===r.BUILTIN_CLASS_REGEXP?m[r.TO_STRING_FIELD]=d.toString():y===r.BUILTIN_CLASS_SET?m[r.ARRAY_FIELD]=a(Array.from(d)):y===r.BUILTIN_CLASS_STRING?m[r.TO_STRING_FIELD]=d.toString():r.ALL_BUILTIN_ARRAYS.includes(y)?m[r.ARRAY_FIELD]=a(Array.from(d)):r.ALL_BUILTIN_ERRORS.includes(y)?function(v,g,E){v.name!=="Error"&&(g.name=v.name),v.message&&(g.message=v.message),v.stack&&(g.stack=v.stack),E===r.BUILTIN_CLASS_AGGREGATE_ERROR&&(g.errors=i(v.errors))}(d,m,y):r.ALL_BUILTIN_INTLS.includes(y)&&(m[r.OPTIONS_FIELD]=d.resolvedOptions())),m}(s,_)}function a(s){return s.map(function(l){return i(l)})}e.getSerializeValueWithClassName=i}},__webpack_module_cache__={};function __webpack_require__(t){if(__webpack_module_cache__[t])return __webpack_module_cache__[t].exports;var e=__webpack_module_cache__[t]={exports:{}};return __webpack_modules__[t].call(e.exports,e,e.exports,__webpack_require__),e.exports}return __webpack_require__(607)})())})(bundle);var ESSerializer=getDefaultExportFromCjs(bundle);function idbReady(){if(!(!navigator.userAgentData&&/Safari\//.test(navigator.userAgent)&&!/Chrom(e|ium)\//.test(navigator.userAgent))||!indexedDB.databases)return Promise.resolve();let e;return new Promise(n=>{const r=()=>indexedDB.databases().finally(n);e=setInterval(r,100),r()}).finally(()=>clearInterval(e))}function promisifyRequest(t){return new Promise((e,n)=>{t.oncomplete=t.onsuccess=()=>e(t.result),t.onabort=t.onerror=()=>n(t.error)})}function createStore(t,e){const n=idbReady().then(()=>{const r=indexedDB.open(t);return r.onupgradeneeded=()=>r.result.createObjectStore(e),promisifyRequest(r)});return(r,o)=>n.then(i=>o(i.transaction(e,r).objectStore(e)))}let defaultGetStoreFunc;function defaultGetStore(){return defaultGetStoreFunc||(defaultGetStoreFunc=createStore("keyval-store","keyval")),defaultGetStoreFunc}function get(t,e=defaultGetStore()){return e("readonly",n=>promisifyRequest(n.get(t)))}function set(t,e,n=defaultGetStore()){return n("readwrite",r=>(r.put(e,t),promisifyRequest(r.transaction)))}function del(t,e=defaultGetStore()){return e("readwrite",n=>(n.delete(t),promisifyRequest(n.transaction)))}const alreadyWarnFor=[],warnStorageNotFound=t=>{var e;const n=typeof process!="undefined"&&((e=process.env)===null||e===void 0?void 0:e.NODE_ENV)==="production";if(alreadyWarnFor.indexOf(t)===-1&&!n){let r=`Unable to find the ${t}. No data will be persisted.`;typeof window=="undefined"&&(r+=`
Are you running on a server? Most of storages are not available while running on a server.`),console.warn(r),alreadyWarnFor.push(t)}},allowedClasses=[],serialize=t=>ESSerializer.serialize(t),deserialize=t=>{if(t!=="undefined"){if(t!=null){try{return ESSerializer.deserialize(t,allowedClasses)}catch{}try{return JSON.parse(t)}catch{}}return t}};function persist(t,e,n){const r=e.getValue(n);return r!==null&&t.set(r),e.addListener&&e.addListener(n,o=>{t.set(o)}),t.subscribe(o=>{e.setValue(n,o)}),Object.assign(Object.assign({},t),{delete(){e.deleteValue(n)}})}function indexedDBStorage(){if(typeof indexedDB!="object"||typeof window=="undefined"||typeof(window==null?void 0:window.indexedDB)!="object")return warnStorageNotFound("IndexedDB"),noopSelfUpdateStorage();const t=createStore("svelte-persist","persist"),e=[],n=(r,o)=>{o!==void 0&&e.filter(({key:i})=>i===r).forEach(({listener:i})=>i(o))};return{addListener(r,o){e.push({key:r,listener:o})},removeListener(r,o){const i=e.indexOf({key:r,listener:o});i!==-1&&e.splice(i,1)},getValue(r){return get(r,t).then(o=>n(r,deserialize(o))),null},setValue(r,o){set(r,serialize(o),t)},deleteValue(r){del(r,t)}}}function noopSelfUpdateStorage(){return{addListener(){},removeListener(){},getValue(){return null},deleteValue(){},setValue(){}}}const subscriptionsStore=persist(writable(),indexedDBStorage(),"subscriptions"),settingsStore=writable(),editorVisible=writable(!1),playerStore=writable();function create_default_slot_2$2(t){let e;return{c(){e=element("a"),e.textContent="YouTube Video Deck",attr(e,"class","font-extrabold"),attr(e,"href","#")},m(n,r){insert(n,e,r)},p:noop,d(n){n&&detach(e)}}}function create_if_block_1$3(t){let e,n;return e=new PrimaryButton({props:{class:"w-20 m-1",$$slots:{default:[create_default_slot_1$2]},$$scope:{ctx:t}}}),e.$on("click",t[2]),{c(){create_component(e.$$.fragment)},m(r,o){mount_component(e,r,o),n=!0},p(r,o){const i={};o&16&&(i.$$scope={dirty:o,ctx:r}),e.$set(i)},i(r){n||(transition_in(e.$$.fragment,r),n=!0)},o(r){transition_out(e.$$.fragment,r),n=!1},d(r){destroy_component(e,r)}}}function create_default_slot_1$2(t){let e;return{c(){e=text("Edit")},m(n,r){insert(n,e,r)},d(n){n&&detach(e)}}}function create_before_slot(t){let e,n,r=t[1]&&create_if_block_1$3(t);return{c(){e=element("div"),r&&r.c(),attr(e,"slot","before"),attr(e,"class","float-left p-1")},m(o,i){insert(o,e,i),r&&r.m(e,null),n=!0},p(o,i){o[1]?r?(r.p(o,i),i&2&&transition_in(r,1)):(r=create_if_block_1$3(o),r.c(),transition_in(r,1),r.m(e,null)):r&&(group_outros(),transition_out(r,1,1,()=>{r=null}),check_outros())},i(o){n||(transition_in(r),n=!0)},o(o){transition_out(r),n=!1},d(o){o&&detach(e),r&&r.d()}}}function create_if_block$5(t){let e,n;return e=new PrimaryButton({props:{class:"w-20 m-1",$$slots:{default:[create_default_slot$4]},$$scope:{ctx:t}}}),e.$on("click",signOut),{c(){create_component(e.$$.fragment)},m(r,o){mount_component(e,r,o),n=!0},p(r,o){const i={};o&16&&(i.$$scope={dirty:o,ctx:r}),e.$set(i)},i(r){n||(transition_in(e.$$.fragment,r),n=!0)},o(r){transition_out(e.$$.fragment,r),n=!1},d(r){destroy_component(e,r)}}}function create_default_slot$4(t){let e;return{c(){e=text("Sign out")},m(n,r){insert(n,e,r)},d(n){n&&detach(e)}}}function create_after_slot(t){let e,n,r=t[0]&&create_if_block$5(t);return{c(){e=element("div"),r&&r.c(),attr(e,"slot","after"),attr(e,"class","float-right p-1")},m(o,i){insert(o,e,i),r&&r.m(e,null),n=!0},p(o,i){o[0]?r?(r.p(o,i),i&1&&transition_in(r,1)):(r=create_if_block$5(o),r.c(),transition_in(r,1),r.m(e,null)):r&&(group_outros(),transition_out(r,1,1,()=>{r=null}),check_outros())},i(o){n||(transition_in(r),n=!0)},o(o){transition_out(r),n=!1},d(o){o&&detach(e),r&&r.d()}}}function create_fragment$9(t){let e,n,r;return n=new Center({props:{$$slots:{after:[create_after_slot],before:[create_before_slot],default:[create_default_slot_2$2]},$$scope:{ctx:t}}}),{c(){e=element("header"),create_component(n.$$.fragment),attr(e,"class","w-full h-12")},m(o,i){insert(o,e,i),mount_component(n,e,null),r=!0},p(o,[i]){const a={};i&19&&(a.$$scope={dirty:i,ctx:o}),n.$set(a)},i(o){r||(transition_in(n.$$.fragment,o),r=!0)},o(o){transition_out(n.$$.fragment,o),r=!1},d(o){o&&detach(e),destroy_component(n)}}}function signOut(){gapi.auth2.getAuthInstance().signOut()}function instance$9(t,e,n){let r;component_subscribe(t,editorVisible,s=>n(3,r=s));let{isSignedIn:o}=e,{isAuthorized:i}=e;function a(){set_store_value(editorVisible,r=!0,r)}return t.$$set=s=>{"isSignedIn"in s&&n(0,o=s.isSignedIn),"isAuthorized"in s&&n(1,i=s.isAuthorized)},[o,i,a]}class Header extends SvelteComponent{constructor(e){super(),init(this,e,instance$9,create_fragment$9,safe_not_equal,{isSignedIn:0,isAuthorized:1})}}function Video(t){return{title:t.snippet.title,description:t.snippet.description.substring(0,313),publishedAt:t.snippet.publishedAt,thumbnailUrl:t.snippet.thumbnails.medium.url,videoId:t.snippet.resourceId.videoId}}function Subscription(t,e){return{channelId:t.snippet.resourceId.channelId,title:t.snippet.title,thumbnailUrl:t.snippet.thumbnails.default.url,uploadsPlaylistId:e.contentDetails.relatedPlaylists.uploads,uploads:[]}}function addUploads(t,e){t.uploadsEtag==null&&(t.uploadsEtag=e.etag),t.nextUploadPageToken=e.nextPageToken,e.items.forEach(n=>t.uploads.push(Video(n)))}function clearUploads(t){t.uploadsEtag=null,t.nextUploadPageToken=null,t.uploads=[]}function Subscriptions(t,e){return{etag:t.etag,items:t.items.flatMap(n=>n.map(r=>{const o=e.get(r.snippet.resourceId.channelId);return Subscription(r,o)}))}}var defaultLocale$1="en",localesData$1={},lowercaseLocaleLookup={};function getDefaultLocale(){return defaultLocale$1}function setDefaultLocale(t){defaultLocale$1=t}function getLocaleData$1(t){return localesData$1[t]}function addLocaleData$1(t){if(!t)throw new Error("No locale data passed");localesData$1[t.locale]=t,lowercaseLocaleLookup[t.locale.toLowerCase()]=t.locale}function resolveLocale$1(t){if(localesData$1[t])return t;if(lowercaseLocaleLookup[t.toLowerCase()])return lowercaseLocaleLookup[t.toLowerCase()]}function resolveLocale(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=e.localeMatcher||"lookup";switch(n){case"lookup":return resolveLocaleLookup(t);case"best fit":return resolveLocaleLookup(t);default:throw new RangeError('Invalid "localeMatcher" option: '.concat(n))}}function resolveLocaleLookup(t){var e=resolveLocale$1(t);if(e)return e;for(var n=t.split("-");t.length>1;){n.pop(),t=n.join("-");var r=resolveLocale$1(t);if(r)return r}}var $={af:function t(e){return e==1?"one":"other"},am:function t(e){return e>=0&&e<=1?"one":"other"},ar:function t(e){var n=String(e).split("."),r=Number(n[0])==e,o=r&&n[0].slice(-2);return e==0?"zero":e==1?"one":e==2?"two":o>=3&&o<=10?"few":o>=11&&o<=99?"many":"other"},ast:function t(e){var n=String(e).split("."),r=!n[1];return e==1&&r?"one":"other"},be:function t(e){var n=String(e).split("."),r=Number(n[0])==e,o=r&&n[0].slice(-1),i=r&&n[0].slice(-2);return o==1&&i!=11?"one":o>=2&&o<=4&&(i<12||i>14)?"few":r&&o==0||o>=5&&o<=9||i>=11&&i<=14?"many":"other"},br:function t(e){var n=String(e).split("."),r=Number(n[0])==e,o=r&&n[0].slice(-1),i=r&&n[0].slice(-2),a=r&&n[0].slice(-6);return o==1&&i!=11&&i!=71&&i!=91?"one":o==2&&i!=12&&i!=72&&i!=92?"two":(o==3||o==4||o==9)&&(i<10||i>19)&&(i<70||i>79)&&(i<90||i>99)?"few":e!=0&&r&&a==0?"many":"other"},bs:function t(e){var n=String(e).split("."),r=n[0],o=n[1]||"",i=!n[1],a=r.slice(-1),s=r.slice(-2),l=o.slice(-1),c=o.slice(-2);return i&&a==1&&s!=11||l==1&&c!=11?"one":i&&a>=2&&a<=4&&(s<12||s>14)||l>=2&&l<=4&&(c<12||c>14)?"few":"other"},ceb:function t(e){var n=String(e).split("."),r=n[0],o=n[1]||"",i=!n[1],a=r.slice(-1),s=o.slice(-1);return i&&(r==1||r==2||r==3)||i&&a!=4&&a!=6&&a!=9||!i&&s!=4&&s!=6&&s!=9?"one":"other"},cs:function t(e){var n=String(e).split("."),r=n[0],o=!n[1];return e==1&&o?"one":r>=2&&r<=4&&o?"few":o?"other":"many"},cy:function t(e){return e==0?"zero":e==1?"one":e==2?"two":e==3?"few":e==6?"many":"other"},da:function t(e){var n=String(e).split("."),r=n[0],o=Number(n[0])==e;return e==1||!o&&(r==0||r==1)?"one":"other"},dsb:function t(e){var n=String(e).split("."),r=n[0],o=n[1]||"",i=!n[1],a=r.slice(-2),s=o.slice(-2);return i&&a==1||s==1?"one":i&&a==2||s==2?"two":i&&(a==3||a==4)||s==3||s==4?"few":"other"},dz:function t(e){return"other"},es:function t(e){var n=String(e).split("."),r=n[0],o=!n[1],i=r.slice(-6);return e==1?"one":r!=0&&i==0&&o?"many":"other"},ff:function t(e){return e>=0&&e<2?"one":"other"},fr:function t(e){var n=String(e).split("."),r=n[0],o=!n[1],i=r.slice(-6);return e>=0&&e<2?"one":r!=0&&i==0&&o?"many":"other"},ga:function t(e){var n=String(e).split("."),r=Number(n[0])==e;return e==1?"one":e==2?"two":r&&e>=3&&e<=6?"few":r&&e>=7&&e<=10?"many":"other"},gd:function t(e){var n=String(e).split("."),r=Number(n[0])==e;return e==1||e==11?"one":e==2||e==12?"two":r&&e>=3&&e<=10||r&&e>=13&&e<=19?"few":"other"},he:function t(e){var n=String(e).split("."),r=n[0],o=!n[1],i=Number(n[0])==e,a=i&&n[0].slice(-1);return e==1&&o?"one":r==2&&o?"two":o&&(e<0||e>10)&&i&&a==0?"many":"other"},is:function t(e){var n=String(e).split("."),r=n[0],o=Number(n[0])==e,i=r.slice(-1),a=r.slice(-2);return o&&i==1&&a!=11||!o?"one":"other"},it:function t(e){var n=String(e).split("."),r=n[0],o=!n[1],i=r.slice(-6);return e==1&&o?"one":r!=0&&i==0&&o?"many":"other"},ksh:function t(e){return e==0?"zero":e==1?"one":"other"},lt:function t(e){var n=String(e).split("."),r=n[1]||"",o=Number(n[0])==e,i=o&&n[0].slice(-1),a=o&&n[0].slice(-2);return i==1&&(a<11||a>19)?"one":i>=2&&i<=9&&(a<11||a>19)?"few":r!=0?"many":"other"},lv:function t(e){var n=String(e).split("."),r=n[1]||"",o=r.length,i=Number(n[0])==e,a=i&&n[0].slice(-1),s=i&&n[0].slice(-2),l=r.slice(-2),c=r.slice(-1);return i&&a==0||s>=11&&s<=19||o==2&&l>=11&&l<=19?"zero":a==1&&s!=11||o==2&&c==1&&l!=11||o!=2&&c==1?"one":"other"},mk:function t(e){var n=String(e).split("."),r=n[0],o=n[1]||"",i=!n[1],a=r.slice(-1),s=r.slice(-2),l=o.slice(-1),c=o.slice(-2);return i&&a==1&&s!=11||l==1&&c!=11?"one":"other"},mt:function t(e){var n=String(e).split("."),r=Number(n[0])==e,o=r&&n[0].slice(-2);return e==1?"one":e==0||o>=2&&o<=10?"few":o>=11&&o<=19?"many":"other"},pa:function t(e){return e==0||e==1?"one":"other"},pl:function t(e){var n=String(e).split("."),r=n[0],o=!n[1],i=r.slice(-1),a=r.slice(-2);return e==1&&o?"one":o&&i>=2&&i<=4&&(a<12||a>14)?"few":o&&r!=1&&(i==0||i==1)||o&&i>=5&&i<=9||o&&a>=12&&a<=14?"many":"other"},pt:function t(e){var n=String(e).split("."),r=n[0],o=!n[1],i=r.slice(-6);return r==0||r==1?"one":r!=0&&i==0&&o?"many":"other"},ro:function t(e){var n=String(e).split("."),r=!n[1],o=Number(n[0])==e,i=o&&n[0].slice(-2);return e==1&&r?"one":!r||e==0||i>=2&&i<=19?"few":"other"},ru:function t(e){var n=String(e).split("."),r=n[0],o=!n[1],i=r.slice(-1),a=r.slice(-2);return o&&i==1&&a!=11?"one":o&&i>=2&&i<=4&&(a<12||a>14)?"few":o&&i==0||o&&i>=5&&i<=9||o&&a>=11&&a<=14?"many":"other"},se:function t(e){return e==1?"one":e==2?"two":"other"},si:function t(e){var n=String(e).split("."),r=n[0],o=n[1]||"";return e==0||e==1||r==0&&o==1?"one":"other"},sl:function t(e){var n=String(e).split("."),r=n[0],o=!n[1],i=r.slice(-2);return o&&i==1?"one":o&&i==2?"two":o&&(i==3||i==4)||!o?"few":"other"}};$.as=$.am;$.az=$.af;$.bg=$.af;$.bn=$.am;$.brx=$.af;$.ca=$.ast;$.ce=$.af;$.chr=$.af;$.de=$.ast;$.ee=$.af;$.el=$.af;$.en=$.ast;$.et=$.ast;$.eu=$.af;$.fa=$.am;$.fi=$.ast;$.fil=$.ceb;$.fo=$.af;$.fur=$.af;$.fy=$.ast;$.gl=$.ast;$.gu=$.am;$.ha=$.af;$.hi=$.am;$.hr=$.bs;$.hsb=$.dsb;$.hu=$.af;$.hy=$.ff;$.ia=$.ast;$.id=$.dz;$.ig=$.dz;$.ja=$.dz;$.jgo=$.af;$.jv=$.dz;$.ka=$.af;$.kea=$.dz;$.kk=$.af;$.kl=$.af;$.km=$.dz;$.kn=$.am;$.ko=$.dz;$.ku=$.af;$.ky=$.af;$.lb=$.af;$.lkt=$.dz;$.lo=$.dz;$.ml=$.af;$.mn=$.af;$.mr=$.af;$.ms=$.dz;$.my=$.dz;$.nb=$.af;$.ne=$.af;$.nl=$.ast;$.nn=$.af;$.no=$.af;$.or=$.af;$.pcm=$.am;$.ps=$.af;$.rm=$.af;$.sah=$.dz;$.sc=$.ast;$.sd=$.af;$.sk=$.cs;$.so=$.af;$.sq=$.af;$.sr=$.bs;$.su=$.dz;$.sv=$.ast;$.sw=$.ast;$.ta=$.af;$.te=$.af;$.th=$.dz;$.ti=$.pa;$.tk=$.af;$.to=$.dz;$.tr=$.af;$.ug=$.af;$.uk=$.ru;$.ur=$.ast;$.uz=$.af;$.vi=$.dz;$.wae=$.af;$.wo=$.dz;$.yi=$.ast;$.yo=$.dz;$.yue=$.dz;$.zh=$.dz;$.zu=$.am;var PluralRuleFunctions=$;function getPluralRulesLocale(t){return t==="pt-PT"?t:getLanguageFromLanguageTag(t)}var LANGUAGE_REG_EXP=/^([a-z0-9]+)/i;function getLanguageFromLanguageTag(t){var e=t.match(LANGUAGE_REG_EXP);if(!e)throw new TypeError("Invalid locale: ".concat(t));return e[1]}function _classCallCheck$3(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _defineProperties$3(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function _createClass$3(t,e,n){return e&&_defineProperties$3(t.prototype,e),n&&_defineProperties$3(t,n),t}var PluralRules=function(){function t(e,n){_classCallCheck$3(this,t);var r=t.supportedLocalesOf(e);if(r.length===0)throw new RangeError("Unsupported locale: "+e);if(n&&n.type!=="cardinal")throw new RangeError('Only "cardinal" "type" is supported');this.$=PluralRuleFunctions[getPluralRulesLocale(r[0])]}return _createClass$3(t,[{key:"select",value:function(n){return this.$(n)}}],[{key:"supportedLocalesOf",value:function(n){return typeof n=="string"&&(n=[n]),n.filter(function(r){return PluralRuleFunctions[getPluralRulesLocale(r)]})}}]),t}();function _typeof$5(t){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?_typeof$5=function(n){return typeof n}:_typeof$5=function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},_typeof$5(t)}function _objectSpread$9(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{},r=Object.keys(n);typeof Object.getOwnPropertySymbols=="function"&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(o){return Object.getOwnPropertyDescriptor(n,o).enumerable}))),r.forEach(function(o){_defineProperty$a(t,o,n[o])})}return t}function _slicedToArray$1(t,e){return _arrayWithHoles$1(t)||_iterableToArrayLimit$1(t,e)||_nonIterableRest$1()}function _nonIterableRest$1(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function _iterableToArrayLimit$1(t,e){var n=[],r=!0,o=!1,i=void 0;try{for(var a=t[Symbol.iterator](),s;!(r=(s=a.next()).done)&&(n.push(s.value),!(e&&n.length===e));r=!0);}catch(l){o=!0,i=l}finally{try{!r&&a.return!=null&&a.return()}finally{if(o)throw i}}return n}function _arrayWithHoles$1(t){if(Array.isArray(t))return t}function _classCallCheck$2(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _defineProperties$2(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function _createClass$2(t,e,n){return e&&_defineProperties$2(t.prototype,e),n&&_defineProperties$2(t,n),t}function _defineProperty$a(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var UNITS=["second","minute","hour","day","week","month","quarter","year"],NUMERIC_VALUES=["auto","always"],STYLE_VALUES=["long","short","narrow"],LOCALE_MATCHER_VALUES=["lookup","best fit"],RelativeTimeFormat=function(){function t(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};_classCallCheck$2(this,t),_defineProperty$a(this,"numeric","always"),_defineProperty$a(this,"style","long"),_defineProperty$a(this,"localeMatcher","lookup");var r=n.numeric,o=n.style,i=n.styleFallback,a=n.localeMatcher;if(r!==void 0){if(NUMERIC_VALUES.indexOf(r)<0)throw new RangeError('Invalid "numeric" option: '.concat(r));this.numeric=r}if(o!==void 0){if(STYLE_VALUES.indexOf(o)<0&&!i)throw new RangeError('Invalid "style" option: '.concat(o));this.style=o}if(a!==void 0){if(LOCALE_MATCHER_VALUES.indexOf(a)<0)throw new RangeError('Invalid "localeMatcher" option: '.concat(a));this.localeMatcher=a}if(typeof e=="string"&&(e=[e]),e.push(getDefaultLocale()),this.locale=t.supportedLocalesOf(e,{localeMatcher:this.localeMatcher})[0],!this.locale)throw new Error("No supported locale was found");if(PluralRules.supportedLocalesOf(this.locale).length>0?this.pluralRules=new PluralRules(this.locale):console.warn('"'.concat(this.locale,'" locale is not supported')),typeof Intl!="undefined"&&Intl.NumberFormat?(this.numberFormat=new Intl.NumberFormat(this.locale),this.numberingSystem=this.numberFormat.resolvedOptions().numberingSystem):this.numberingSystem="latn",this.locale=resolveLocale(this.locale,{localeMatcher:this.localeMatcher}),i)for(var s=Object.keys(getLocaleData$1(this.locale)),l=[this.style].concat(STYLE_VALUES,[s[0]]),c=0;c<l.length;c++){var _=l[c];if(s.indexOf(_)>=0){this.style=_;break}}}return _createClass$2(t,[{key:"format",value:function(){var n=parseFormatArgs(arguments),r=_slicedToArray$1(n,2),o=r[0],i=r[1];return this.getRule(o,i).replace("{0}",this.formatNumber(Math.abs(o)))}},{key:"formatToParts",value:function(){var n=parseFormatArgs(arguments),r=_slicedToArray$1(n,2),o=r[0],i=r[1],a=this.getRule(o,i),s=a.indexOf("{0}");if(s<0)return[{type:"literal",value:a}];var l=[];return s>0&&l.push({type:"literal",value:a.slice(0,s)}),l=l.concat(this.formatNumberToParts(Math.abs(o)).map(function(c){return _objectSpread$9({},c,{unit:i})})),s+3<a.length-1&&l.push({type:"literal",value:a.slice(s+3)}),l}},{key:"getRule",value:function(n,r){var o=getLocaleData$1(this.locale)[this.style][r];if(typeof o=="string")return o;if(this.numeric==="auto"){if(n===-2||n===-1){var i=o["previous".concat(n===-1?"":"-"+Math.abs(n))];if(i)return i}else if(n===1||n===2){var a=o["next".concat(n===1?"":"-"+Math.abs(n))];if(a)return a}else if(n===0&&o.current)return o.current}var s=o[isNegative(n)?"past":"future"];if(typeof s=="string")return s;var l=this.pluralRules&&this.pluralRules.select(Math.abs(n))||"other";return s[l]||s.other}},{key:"formatNumber",value:function(n){return this.numberFormat?this.numberFormat.format(n):String(n)}},{key:"formatNumberToParts",value:function(n){return this.numberFormat&&this.numberFormat.formatToParts?this.numberFormat.formatToParts(n):[{type:"integer",value:this.formatNumber(n)}]}},{key:"resolvedOptions",value:function(){return{locale:this.locale,style:this.style,numeric:this.numeric,numberingSystem:this.numberingSystem}}}]),t}();RelativeTimeFormat.supportedLocalesOf=function(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(typeof t=="string")t=[t];else if(!Array.isArray(t))throw new TypeError('Invalid "locales" argument');return t.filter(function(n){return resolveLocale(n,e)})};RelativeTimeFormat.addLocale=addLocaleData$1;RelativeTimeFormat.setDefaultLocale=setDefaultLocale;RelativeTimeFormat.getDefaultLocale=getDefaultLocale;RelativeTimeFormat.PluralRules=PluralRules;var UNIT_ERROR='Invalid "unit" argument';function parseUnit(t){if(_typeof$5(t)==="symbol")throw new TypeError(UNIT_ERROR);if(typeof t!="string")throw new RangeError("".concat(UNIT_ERROR,": ").concat(t));if(t[t.length-1]==="s"&&(t=t.slice(0,t.length-1)),UNITS.indexOf(t)<0)throw new RangeError("".concat(UNIT_ERROR,": ").concat(t));return t}var NUMBER_ERROR='Invalid "number" argument';function parseNumber$1(t){if(t=Number(t),Number.isFinite&&!Number.isFinite(t))throw new RangeError("".concat(NUMBER_ERROR,": ").concat(t));return t}function isNegativeZero(t){return 1/t===-1/0}function isNegative(t){return t<0||t===0&&isNegativeZero(t)}function parseFormatArgs(t){if(t.length<2)throw new TypeError('"unit" argument is required');return[parseNumber$1(t[0]),parseUnit(t[1])]}function _typeof$4(t){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?_typeof$4=function(n){return typeof n}:_typeof$4=function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},_typeof$4(t)}function _classCallCheck$1(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _defineProperties$1(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function _createClass$1(t,e,n){return e&&_defineProperties$1(t.prototype,e),n&&_defineProperties$1(t,n),t}function _defineProperty$9(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var Cache=function(){function t(){_classCallCheck$1(this,t),_defineProperty$9(this,"cache",{})}return _createClass$1(t,[{key:"get",value:function(){for(var n=this.cache,r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];for(var a=0;a<o.length;a++){var s=o[a];if(_typeof$4(n)!=="object")return;n=n[s]}return n}},{key:"put",value:function(){for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];for(var i=r.pop(),a=r.pop(),s=this.cache,l=0;l<r.length;l++){var c=r[l];_typeof$4(s[c])!=="object"&&(s[c]={}),s=s[c]}return s[a]=i}}]),t}();function _typeof$3(t){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?_typeof$3=function(n){return typeof n}:_typeof$3=function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},_typeof$3(t)}function chooseLocale(t,e){for(var o=t,n=Array.isArray(o),r=0,o=n?o:o[Symbol.iterator]();;){var i;if(n){if(r>=o.length)break;i=o[r++]}else{if(r=o.next(),r.done)break;i=r.value}var a=i;if(e(a))return a;for(var s=a.split("-");s.length>1;)if(s.pop(),a=s.join("-"),e(a))return a}throw new Error("No locale data has been registered for any of the locales: ".concat(t.join(", ")))}function intlDateTimeFormatSupported(){var t=(typeof Intl=="undefined"?"undefined":_typeof$3(Intl))==="object";return t&&typeof Intl.DateTimeFormat=="function"}function _typeof$2(t){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?_typeof$2=function(n){return typeof n}:_typeof$2=function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},_typeof$2(t)}function isStyleObject(t){return isObject(t)&&(Array.isArray(t.steps)||Array.isArray(t.gradation)||Array.isArray(t.flavour)||typeof t.flavour=="string"||Array.isArray(t.labels)||typeof t.labels=="string"||Array.isArray(t.units)||typeof t.custom=="function")}var OBJECT_CONSTRUCTOR={}.constructor;function isObject(t){return _typeof$2(t)!==void 0&&t!==null&&t.constructor===OBJECT_CONSTRUCTOR}var minute=60,hour=60*minute,day=24*hour,week=7*day,month=30.44*day,year=146097/400*day;function getSecondsInUnit(t){switch(t){case"second":return 1;case"minute":return minute;case"hour":return hour;case"day":return day;case"week":return week;case"month":return month;case"year":return year}}function getStepDenominator(t){return t.factor!==void 0?t.factor:getSecondsInUnit(t.unit||t.formatAs)||1}function getRoundFunction(t){switch(t){case"floor":return Math.floor;default:return Math.round}}function getDiffRatioToNextRoundedNumber(t){switch(t){case"floor":return 1;default:return .5}}function _typeof$1(t){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?_typeof$1=function(n){return typeof n}:_typeof$1=function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},_typeof$1(t)}function getStepMinTime(t,e){var n=e.prevStep,r=e.timestamp,o=e.now,i=e.future,a=e.round,s;return n&&(n.id||n.unit)&&(s=t["threshold_for_".concat(n.id||n.unit)]),s===void 0&&t.threshold!==void 0&&(s=t.threshold,typeof s=="function"&&(s=s(o,i))),s===void 0&&(s=t.minTime),_typeof$1(s)==="object"&&(n&&n.id&&s[n.id]!==void 0?s=s[n.id]:s=s.default),typeof s=="function"&&(s=s(r,{future:i,getMinTimeForUnit:function(c,_){return _getMinTimeForUnit(c,_||n&&n.formatAs,{round:a})}})),s===void 0&&t.test&&(t.test(r,{now:o,future:i})?s=0:s=9007199254740991),s===void 0&&(n?t.formatAs&&n.formatAs&&(s=_getMinTimeForUnit(t.formatAs,n.formatAs,{round:a})):s=0),s===void 0&&console.warn("[javascript-time-ago] A step should specify `minTime`:\n"+JSON.stringify(t,null,2)),s}function _getMinTimeForUnit(t,e,n){var r=n.round,o=getSecondsInUnit(t),i;if(e==="now"?i=getSecondsInUnit(t):i=getSecondsInUnit(e),o!==void 0&&i!==void 0)return o-i*(1-getDiffRatioToNextRoundedNumber(r))}function _objectSpread$8(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{},r=Object.keys(n);typeof Object.getOwnPropertySymbols=="function"&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(o){return Object.getOwnPropertyDescriptor(n,o).enumerable}))),r.forEach(function(o){_defineProperty$8(t,o,n[o])})}return t}function _defineProperty$8(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function getStep(t,e,n){var r=n.now,o=n.future,i=n.round,a=n.units,s=n.getNextStep;t=filterStepsByUnits(t,a);var l=_getStep(t,e,{now:r,future:o,round:i});if(s){if(l){var c=t[t.indexOf(l)-1],_=t[t.indexOf(l)+1];return[c,l,_]}return[void 0,void 0,t[0]]}return l}function _getStep(t,e,n){var r=n.now,o=n.future,i=n.round;if(t.length!==0){var a=getStepIndex(t,e,{now:r,future:o||e<0,round:i});if(a!==-1){var s=t[a];if(s.granularity){var l=getRoundFunction(i)(Math.abs(e)/getStepDenominator(s)/s.granularity)*s.granularity;if(l===0&&a>0)return t[a-1]}return s}}}function getStepIndex(t,e,n){var r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0,o=getStepMinTime(t[r],_objectSpread$8({prevStep:t[r-1],timestamp:n.now-e*1e3},n));return o===void 0||Math.abs(e)<o?r-1:r===t.length-1?r:getStepIndex(t,e,n,r+1)}function filterStepsByUnits(t,e){return t.filter(function(n){var r=n.unit,o=n.formatAs;return r=r||o,r?e.indexOf(r)>=0:!0})}function getTimeToNextUpdateForUnit(t,e,n){var r=n.now,o=n.round;if(!!getSecondsInUnit(t)){var i=getSecondsInUnit(t)*1e3,a=e>r,s=Math.abs(e-r),l=getRoundFunction(o)(s/i)*i;return a?l>0?s-l+getDiffToPreviousRoundedNumber(o,i):s-l+1:-(s-l)+getDiffToNextRoundedNumber(o,i)}}function getDiffToNextRoundedNumber(t,e){return getDiffRatioToNextRoundedNumber(t)*e}function getDiffToPreviousRoundedNumber(t,e){return(1-getDiffRatioToNextRoundedNumber(t))*e+1}var YEAR=365*24*60*60*1e3,INFINITY=1e3*YEAR;function getTimeToNextUpdate(t,e,n){var r=n.prevStep,o=n.nextStep,i=n.now,a=n.future,s=n.round,l=t.getTime?t.getTime():t,c=function(m){return getTimeToNextUpdateForUnit(m,l,{now:i,round:s})},_=getTimeToStepChange(a?e:o,l,{future:a,now:i,round:s,prevStep:a?r:e});if(_!==void 0){var f;if(e&&(e.getTimeToNextUpdate&&(f=e.getTimeToNextUpdate(l,{getTimeToNextUpdateForUnit:c,getRoundFunction,now:i,future:a,round:s})),f===void 0)){var u=e.unit||e.formatAs;u&&(f=c(u))}return f===void 0?_:Math.min(f,_)}}function getStepChangesAt(t,e,n){var r=n.now,o=n.future,i=n.round,a=n.prevStep,s=getStepMinTime(t,{timestamp:e,now:r,future:o,round:i,prevStep:a});if(s!==void 0)return o?e-s*1e3+1:s===0&&e===r?INFINITY:e+s*1e3}function getTimeToStepChange(t,e,n){var r=n.now,o=n.future,i=n.round,a=n.prevStep;if(t){var s=getStepChangesAt(t,e,{now:r,future:o,round:i,prevStep:a});return s===void 0?void 0:s-r}else return o?e-r+1:INFINITY}var localesData={};function getLocaleData(t){return localesData[t]}function addLocaleData(t){if(!t)throw new Error("[javascript-time-ago] No locale data passed.");localesData[t.locale]=t}var round$1=[{formatAs:"now"},{formatAs:"second"},{formatAs:"minute"},{formatAs:"hour"},{formatAs:"day"},{formatAs:"week"},{formatAs:"month"},{formatAs:"year"}],round={steps:round$1,labels:"long"};function _objectSpread$7(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{},r=Object.keys(n);typeof Object.getOwnPropertySymbols=="function"&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(o){return Object.getOwnPropertyDescriptor(n,o).enumerable}))),r.forEach(function(o){_defineProperty$7(t,o,n[o])})}return t}function _defineProperty$7(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var defaultStyle=_objectSpread$7({},round,{steps:round.steps.filter(function(t){return t.formatAs!=="second"})}),approximate$1=[{factor:1,unit:"now"},{threshold:1,threshold_for_now:45.5,factor:1,unit:"second"},{threshold:45.5,factor:minute,unit:"minute"},{threshold:2.5*minute,granularity:5,factor:minute,unit:"minute"},{threshold:22.5*minute,factor:.5*hour,unit:"half-hour"},{threshold:42.5*minute,threshold_for_minute:52.5*minute,factor:hour,unit:"hour"},{threshold:20.5/24*day,factor:day,unit:"day"},{threshold:5.5*day,factor:week,unit:"week"},{threshold:3.5*week,factor:month,unit:"month"},{threshold:10.5*month,factor:year,unit:"year"}],approximate={gradation:approximate$1,flavour:"long",units:["now","minute","hour","day","week","month","year"]},approximateTime={gradation:approximate$1,flavour:"long-time",units:["now","minute","hour","day","week","month","year"]};function getDate(t){return t instanceof Date?t:new Date(t)}var steps=[{formatAs:"second"},{formatAs:"minute"},{formatAs:"hour"}],formatters={},monthAndDay={minTime:function t(e,n){n.future;var r=n.getMinTimeForUnit;return r("day")},format:function t(e,n){return formatters[n]||(formatters[n]={}),formatters[n].dayMonth||(formatters[n].dayMonth=new Intl.DateTimeFormat(n,{month:"short",day:"numeric"})),formatters[n].dayMonth.format(getDate(e))}},yearMonthAndDay={minTime:function t(e,n){var r=n.future;if(r){var o=new Date(new Date(e).getFullYear(),0).getTime()-1;return(e-o)/1e3}else{var i=new Date(new Date(e).getFullYear()+1,0).getTime();return(i-e)/1e3}},format:function t(e,n){return formatters[n]||(formatters[n]={}),formatters[n].dayMonthYear||(formatters[n].dayMonthYear=new Intl.DateTimeFormat(n,{year:"numeric",month:"short",day:"numeric"})),formatters[n].dayMonthYear.format(getDate(e))}};intlDateTimeFormatSupported()?steps.push(monthAndDay,yearMonthAndDay):steps.push({formatAs:"day"},{formatAs:"week"},{formatAs:"month"},{formatAs:"year"});var twitter={steps,labels:["mini","short-time","narrow","short"]};function _objectSpread$6(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{},r=Object.keys(n);typeof Object.getOwnPropertySymbols=="function"&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(o){return Object.getOwnPropertyDescriptor(n,o).enumerable}))),r.forEach(function(o){_defineProperty$6(t,o,n[o])})}return t}function _defineProperty$6(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var twitterNow=_objectSpread$6({},twitter,{steps:[{formatAs:"now"}].concat(twitter.steps)});function _objectSpread$5(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{},r=Object.keys(n);typeof Object.getOwnPropertySymbols=="function"&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(o){return Object.getOwnPropertyDescriptor(n,o).enumerable}))),r.forEach(function(o){_defineProperty$5(t,o,n[o])})}return t}function _defineProperty$5(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var twitterMinute=_objectSpread$5({},twitter,{steps:twitter.steps.filter(function(t){return t.formatAs!=="second"})});function _objectSpread$4(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{},r=Object.keys(n);typeof Object.getOwnPropertySymbols=="function"&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(o){return Object.getOwnPropertyDescriptor(n,o).enumerable}))),r.forEach(function(o){_defineProperty$4(t,o,n[o])})}return t}function _defineProperty$4(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var twitterMinuteNow=_objectSpread$4({},twitterMinute,{steps:[{formatAs:"now"}].concat(twitterMinute.steps)});function _objectSpread$3(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{},r=Object.keys(n);typeof Object.getOwnPropertySymbols=="function"&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(o){return Object.getOwnPropertyDescriptor(n,o).enumerable}))),r.forEach(function(o){_defineProperty$3(t,o,n[o])})}return t}function _defineProperty$3(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var twitterFirstMinute=_objectSpread$3({},twitter,{steps:twitter.steps.filter(function(t){return t.formatAs!=="second"}).map(function(t){return t.formatAs==="minute"?_objectSpread$3({},t,{minTime:minute}):t})}),mini$1={steps:[{formatAs:"second"},{formatAs:"minute"},{formatAs:"hour"},{formatAs:"day"},{formatAs:"month"},{formatAs:"year"}],labels:["mini","short-time","narrow","short"]};function _objectSpread$2(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{},r=Object.keys(n);typeof Object.getOwnPropertySymbols=="function"&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(o){return Object.getOwnPropertyDescriptor(n,o).enumerable}))),r.forEach(function(o){_defineProperty$2(t,o,n[o])})}return t}function _defineProperty$2(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var miniNow=_objectSpread$2({},mini$1,{steps:[{formatAs:"now"}].concat(mini$1.steps)});function _objectSpread$1(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{},r=Object.keys(n);typeof Object.getOwnPropertySymbols=="function"&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(o){return Object.getOwnPropertyDescriptor(n,o).enumerable}))),r.forEach(function(o){_defineProperty$1(t,o,n[o])})}return t}function _defineProperty$1(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var miniMinute=_objectSpread$1({},mini$1,{steps:mini$1.steps.filter(function(t){return t.formatAs!=="second"})});function _objectSpread(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{},r=Object.keys(n);typeof Object.getOwnPropertySymbols=="function"&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(o){return Object.getOwnPropertyDescriptor(n,o).enumerable}))),r.forEach(function(o){_defineProperty(t,o,n[o])})}return t}function _defineProperty(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var miniMinuteNow=_objectSpread({},miniMinute,{steps:[{formatAs:"now"}].concat(miniMinute.steps)});function getStyleByName(t){switch(t){case"default":case"round":return round;case"round-minute":return defaultStyle;case"approximate":return approximate;case"time":case"approximate-time":return approximateTime;case"mini":return mini$1;case"mini-now":return miniNow;case"mini-minute":return miniMinute;case"mini-minute-now":return miniMinuteNow;case"twitter":return twitter;case"twitter-now":return twitterNow;case"twitter-minute":return twitterMinute;case"twitter-minute-now":return twitterMinuteNow;case"twitter-first-minute":return twitterFirstMinute;default:return approximate}}function _typeof(t){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?_typeof=function(n){return typeof n}:_typeof=function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},_typeof(t)}function _slicedToArray(t,e){return _arrayWithHoles(t)||_iterableToArrayLimit(t,e)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function _iterableToArrayLimit(t,e){var n=[],r=!0,o=!1,i=void 0;try{for(var a=t[Symbol.iterator](),s;!(r=(s=a.next()).done)&&(n.push(s.value),!(e&&n.length===e));r=!0);}catch(l){o=!0,i=l}finally{try{!r&&a.return!=null&&a.return()}finally{if(o)throw i}}return n}function _arrayWithHoles(t){if(Array.isArray(t))return t}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _defineProperties(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function _createClass(t,e,n){return e&&_defineProperties(t.prototype,e),n&&_defineProperties(t,n),t}var TimeAgo=function(){function t(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=n.polyfill;_classCallCheck(this,t),typeof e=="string"&&(e=[e]),this.locale=chooseLocale(e.concat(t.getDefaultLocale()),getLocaleData),typeof Intl!="undefined"&&Intl.NumberFormat&&(this.numberFormat=new Intl.NumberFormat(this.locale)),r===!1?(this.IntlRelativeTimeFormat=Intl.RelativeTimeFormat,this.IntlPluralRules=Intl.PluralRules):(this.IntlRelativeTimeFormat=RelativeTimeFormat,this.IntlPluralRules=RelativeTimeFormat.PluralRules),this.relativeTimeFormatCache=new Cache,this.pluralRulesCache=new Cache}return _createClass(t,[{key:"format",value:function(n,r,o){o||(r&&!isStyle(r)?(o=r,r=void 0):o={}),r||(r=defaultStyle),typeof r=="string"&&(r=getStyleByName(r));var i=getTimestamp(n),a=this.getLabels(r.flavour||r.labels),s=a.labels,l=a.labelsType,c;r.now!==void 0&&(c=r.now),c===void 0&&o.now!==void 0&&(c=o.now),c===void 0&&(c=Date.now());var _=(c-i)/1e3,f=o.future||_<0,u=getNowLabel(s,getLocaleData(this.locale).now,getLocaleData(this.locale).long,f);if(r.custom){var d=r.custom({now:c,date:new Date(i),time:i,elapsed:_,locale:this.locale});if(d!==void 0)return d}var m=getTimeIntervalMeasurementUnits(r.units,s,u),y=o.round||r.round,v=getStep(r.gradation||r.steps||defaultStyle.steps,_,{now:c,units:m,round:y,future:f,getNextStep:!0}),g=_slicedToArray(v,3),E=g[0],h=g[1],S=g[2],R=this.formatDateForStep(i,h,_,{labels:s,labelsType:l,nowLabel:u,now:c,future:f,round:y})||"";if(o.getTimeToNextUpdate){var b=getTimeToNextUpdate(i,h,{nextStep:S,prevStep:E,now:c,future:f,round:y});return[R,b]}return R}},{key:"formatDateForStep",value:function(n,r,o,i){var a=this,s=i.labels,l=i.labelsType,c=i.nowLabel,_=i.now,f=i.future,u=i.round;if(!!r){if(r.format)return r.format(n,this.locale,{formatAs:function(g,E){return a.formatValue(E,g,{labels:s,future:f})},now:_,future:f});var d=r.unit||r.formatAs;if(!d)throw new Error("[javascript-time-ago] Each step must define either `formatAs` or `format()`. Step: ".concat(JSON.stringify(r)));if(d==="now")return c;var m=Math.abs(o)/getStepDenominator(r);r.granularity&&(m=getRoundFunction(u)(m/r.granularity)*r.granularity);var y=-1*Math.sign(o)*getRoundFunction(u)(m);switch(y===0&&(f?y=0:y=-0),l){case"long":case"short":case"narrow":return this.getFormatter(l).format(y,d);default:return this.formatValue(y,d,{labels:s,future:f})}}}},{key:"formatValue",value:function(n,r,o){var i=o.labels,a=o.future;return this.getFormattingRule(i,r,n,{future:a}).replace("{0}",this.formatNumber(Math.abs(n)))}},{key:"getFormattingRule",value:function(n,r,o,i){var a=i.future;if(this.locale,n=n[r],typeof n=="string")return n;var s=o===0?a?"future":"past":o<0?"past":"future",l=n[s]||n;if(typeof l=="string")return l;var c=this.getPluralRules().select(Math.abs(o));return l[c]||l.other}},{key:"formatNumber",value:function(n){return this.numberFormat?this.numberFormat.format(n):String(n)}},{key:"getFormatter",value:function(n){return this.relativeTimeFormatCache.get(this.locale,n)||this.relativeTimeFormatCache.put(this.locale,n,new this.IntlRelativeTimeFormat(this.locale,{style:n}))}},{key:"getPluralRules",value:function(){return this.pluralRulesCache.get(this.locale)||this.pluralRulesCache.put(this.locale,new this.IntlPluralRules(this.locale))}},{key:"getLabels",value:function(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];typeof n=="string"&&(n=[n]),n=n.map(function(c){switch(c){case"tiny":case"mini-time":return"mini";default:return c}}),n=n.concat("long");for(var r=getLocaleData(this.locale),a=n,o=Array.isArray(a),i=0,a=o?a:a[Symbol.iterator]();;){var s;if(o){if(i>=a.length)break;s=a[i++]}else{if(i=a.next(),i.done)break;s=i.value}var l=s;if(r[l])return{labelsType:l,labels:r[l]}}}}]),t}(),defaultLocale="en";TimeAgo.getDefaultLocale=function(){return defaultLocale};TimeAgo.setDefaultLocale=function(t){return defaultLocale=t};TimeAgo.addDefaultLocale=function(t){if(defaultLocaleHasBeenSpecified)return console.error("[javascript-time-ago] `TimeAgo.addDefaultLocale()` can only be called once. To add other locales, use `TimeAgo.addLocale()`.");defaultLocaleHasBeenSpecified=!0,TimeAgo.setDefaultLocale(t.locale),TimeAgo.addLocale(t)};var defaultLocaleHasBeenSpecified;TimeAgo.addLocale=function(t){addLocaleData(t),RelativeTimeFormat.addLocale(t)};TimeAgo.locale=TimeAgo.addLocale;TimeAgo.addLabels=function(t,e,n){var r=getLocaleData(t);r||(addLocaleData({locale:t}),r=getLocaleData(t)),r[e]=n};function getTimestamp(t){if(t.constructor===Date||isMockedDate(t))return t.getTime();if(typeof t=="number")return t;throw new Error("Unsupported relative time formatter input: ".concat(_typeof(t),", ").concat(t))}function isMockedDate(t){return _typeof(t)==="object"&&typeof t.getTime=="function"}function getTimeIntervalMeasurementUnits(t,e,n){var r=Object.keys(e);return n&&r.push("now"),t&&(r=t.filter(function(o){return o==="now"||r.indexOf(o)>=0})),r}function getNowLabel(t,e,n,r){var o=t.now||e&&e.now;if(o)return typeof o=="string"?o:r?o.future:o.past;if(n&&n.second&&n.second.current)return n.second.current}function isStyle(t){return typeof t=="string"||isStyleObject(t)}const locale="en",long={year:{previous:"last year",current:"this year",next:"next year",past:{one:"{0} year ago",other:"{0} years ago"},future:{one:"in {0} year",other:"in {0} years"}},quarter:{previous:"last quarter",current:"this quarter",next:"next quarter",past:{one:"{0} quarter ago",other:"{0} quarters ago"},future:{one:"in {0} quarter",other:"in {0} quarters"}},month:{previous:"last month",current:"this month",next:"next month",past:{one:"{0} month ago",other:"{0} months ago"},future:{one:"in {0} month",other:"in {0} months"}},week:{previous:"last week",current:"this week",next:"next week",past:{one:"{0} week ago",other:"{0} weeks ago"},future:{one:"in {0} week",other:"in {0} weeks"}},day:{previous:"yesterday",current:"today",next:"tomorrow",past:{one:"{0} day ago",other:"{0} days ago"},future:{one:"in {0} day",other:"in {0} days"}},hour:{current:"this hour",past:{one:"{0} hour ago",other:"{0} hours ago"},future:{one:"in {0} hour",other:"in {0} hours"}},minute:{current:"this minute",past:{one:"{0} minute ago",other:"{0} minutes ago"},future:{one:"in {0} minute",other:"in {0} minutes"}},second:{current:"now",past:{one:"{0} second ago",other:"{0} seconds ago"},future:{one:"in {0} second",other:"in {0} seconds"}}},short={year:{previous:"last yr.",current:"this yr.",next:"next yr.",past:"{0} yr. ago",future:"in {0} yr."},quarter:{previous:"last qtr.",current:"this qtr.",next:"next qtr.",past:{one:"{0} qtr. ago",other:"{0} qtrs. ago"},future:{one:"in {0} qtr.",other:"in {0} qtrs."}},month:{previous:"last mo.",current:"this mo.",next:"next mo.",past:"{0} mo. ago",future:"in {0} mo."},week:{previous:"last wk.",current:"this wk.",next:"next wk.",past:"{0} wk. ago",future:"in {0} wk."},day:{previous:"yesterday",current:"today",next:"tomorrow",past:{one:"{0} day ago",other:"{0} days ago"},future:{one:"in {0} day",other:"in {0} days"}},hour:{current:"this hour",past:"{0} hr. ago",future:"in {0} hr."},minute:{current:"this minute",past:"{0} min. ago",future:"in {0} min."},second:{current:"now",past:"{0} sec. ago",future:"in {0} sec."}},narrow={year:{previous:"last yr.",current:"this yr.",next:"next yr.",past:"{0} yr. ago",future:"in {0} yr."},quarter:{previous:"last qtr.",current:"this qtr.",next:"next qtr.",past:{one:"{0} qtr. ago",other:"{0} qtrs. ago"},future:{one:"in {0} qtr.",other:"in {0} qtrs."}},month:{previous:"last mo.",current:"this mo.",next:"next mo.",past:"{0} mo. ago",future:"in {0} mo."},week:{previous:"last wk.",current:"this wk.",next:"next wk.",past:"{0} wk. ago",future:"in {0} wk."},day:{previous:"yesterday",current:"today",next:"tomorrow",past:{one:"{0} day ago",other:"{0} days ago"},future:{one:"in {0} day",other:"in {0} days"}},hour:{current:"this hour",past:"{0} hr. ago",future:"in {0} hr."},minute:{current:"this minute",past:"{0} min. ago",future:"in {0} min."},second:{current:"now",past:"{0} sec. ago",future:"in {0} sec."}},now={now:{current:"now",future:"in a moment",past:"just now"}},tiny={year:"{0}yr",month:"{0}mo",week:"{0}wk",day:"{0}d",hour:"{0}h",minute:"{0}m",second:"{0}s",now:"now"},mini={year:"{0}yr",month:"{0}mo",week:"{0}wk",day:"{0}d",hour:"{0}h",minute:"{0}m",second:"{0}s",now:"now"};var en={locale,long,short,narrow,"short-time":{year:"{0} yr.",month:"{0} mo.",week:"{0} wk.",day:{one:"{0} day",other:"{0} days"},hour:"{0} hr.",minute:"{0} min.",second:"{0} sec."},"long-time":{year:{one:"{0} year",other:"{0} years"},month:{one:"{0} month",other:"{0} months"},week:{one:"{0} week",other:"{0} weeks"},day:{one:"{0} day",other:"{0} days"},hour:{one:"{0} hour",other:"{0} hours"},minute:{one:"{0} minute",other:"{0} minutes"},second:{one:"{0} second",other:"{0} seconds"}},now,tiny,mini};TimeAgo.addDefaultLocale(en);const timeAgo=new TimeAgo("en-US");function create_fragment$8(t){let e,n,r,o,i,a,s,l=t[0].title+"",c,_,f,u,d=timeAgo.format(new Date(t[0].publishedAt))+"",m,y,v=t[0].channelTitle+"",g,E,h,S=t[0].description+"",R,b,I,T;return{c(){e=element("a"),n=element("div"),r=element("img"),i=space(),a=element("div"),s=element("p"),c=text(l),f=space(),u=element("p"),m=text(d),y=text(" - "),g=text(v),E=space(),h=element("p"),R=text(S),src_url_equal(r.src,o=t[0].thumbnailUrl)||attr(r,"src",o),attr(r,"alt",""),attr(r,"loading","lazy"),attr(r,"width","320"),attr(r,"height","180"),attr(n,"class","inline-block w-[11rem] align-text-bottom p-1"),attr(s,"class","font-bold truncate"),attr(s,"title",_=t[0].title),attr(u,"class","text-neutral-400 truncate"),attr(h,"class","text-ellipsis line-clamp-3"),attr(a,"class","inline-block w-[17rem] align-top text-sm"),attr(e,"class","block w-[30rem] bg-neutral-600 p-2 m-2 first:mt-0 last:mb-0 rounded-2xl"),attr(e,"href",b="https://www.youtube.com/watch?v="+t[0].videoId)},m(D,C){insert(D,e,C),append(e,n),append(n,r),append(e,i),append(e,a),append(a,s),append(s,c),append(a,f),append(a,u),append(u,m),append(u,y),append(u,g),append(a,E),append(a,h),append(h,R),I||(T=listen(e,"click",prevent_default(t[1])),I=!0)},p(D,[C]){C&1&&!src_url_equal(r.src,o=D[0].thumbnailUrl)&&attr(r,"src",o),C&1&&l!==(l=D[0].title+"")&&set_data(c,l),C&1&&_!==(_=D[0].title)&&attr(s,"title",_),C&1&&d!==(d=timeAgo.format(new Date(D[0].publishedAt))+"")&&set_data(m,d),C&1&&v!==(v=D[0].channelTitle+"")&&set_data(g,v),C&1&&S!==(S=D[0].description+"")&&set_data(R,S),C&1&&b!==(b="https://www.youtube.com/watch?v="+D[0].videoId)&&attr(e,"href",b)},i:noop,o:noop,d(D){D&&detach(e),I=!1,T()}}}function instance$8(t,e,n){let{video:r}=e;function o(){playerStore.set({videoId:r.videoId})}return t.$$set=i=>{"video"in i&&n(0,r=i.video)},[r,o]}class VideoCard extends SvelteComponent{constructor(e){super(),init(this,e,instance$8,create_fragment$8,safe_not_equal,{video:0})}}const NOT_MODIFIED="Not Modified";function appendQuery(t,e){if(e){const n=new URLSearchParams(e);return`${t}?${n}`}else return t}function toRequest(t,e={}){const n=appendQuery("https://www.googleapis.com"+t,e.query);return e.headers=new Headers(e.headers),e.headers.append("Authorization","Bearer "+gapi.auth.getToken().access_token),e.etag&&e.headers.append("If-None-Match",e.etag),new Request(n,e)}async function request(t,e={}){typeof t=="string"&&(t=toRequest(t,e));const n=await fetch(t);if(n.status===304)throw NOT_MODIFIED;if(!n.ok)throw n;return n}async function batchRequest(t,e){const n=`boundary${Date.now()}`,r="/batch"+t,o=await request(r,{method:"POST",headers:{"Content-Type":`multipart/mixed; boundary=${n}`},body:await batchRequestsToBody(e,n)});return batchResponseToMap(o)}async function batchRequestsToBody(t,e){let n=[];for(const[r,o]of t){if(n.push(`--${e}`),n.push("Content-Type: application/http"),n.push(`Content-ID: ${r}`),o.bodyUsed&&n.push(`Content-Length: ${(await o.blob()).size}`),n.push(""),n.push(`${o.method} ${o.url}`),o.headers)for(const[i,a]of o.headers.entries())n.push(`${i}: ${a}`);o.bodyUsed&&(n.push(""),n.push(await o.text()))}return n.push(`--${e}--`),n.join(`\r
`)}async function batchResponseToMap(t){const e=t.headers.get("Content-Type").match(/^multipart\/mixed; boundary=(.+)$/)[1],r=(await t.text()).split(new RegExp(`\r
--${e}(?:--)?\r
`,"g")).slice(1,-1),o=new Map;for(const i of r){const[a,s,l]=i.split(`\r
\r
`,3),_=headerStringToHeaders(a).get("Content-ID").match(/^response-(.+)$/)[1],[f,u]=s.split(`\r
`,2),[d,m,y]=f.split(" ",3),v=headerStringToHeaders(u),g=l.length===0?null:l,E=new Response(g,{status:parseInt(m,10),statusText:y,headers:v});o.set(_,E)}return o}function headerStringToHeaders(t){const e=new Headers;for(const n of t.split(`\r
`)){const[r,o]=n.split(": ");e.append(r,o)}return e}function jsonBlob(t){return new Blob([JSON.stringify(t)],{type:"application/json"})}async function listAllSubscriptions(t){let e=await listSubscriptions({etag:t});const n=e.etag,r=[e.items];for(;e.nextPageToken;)e=await listSubscriptions({pageToken:e.nextPageToken}),r.push(e.items);return{etag:n,items:r}}async function listSubscriptions(t={}){return(await request(listSubscriptionsRequest(t))).json()}function listSubscriptionsRequest(t={}){return toRequest("/youtube/v3/subscriptions",Z({method:"GET",query:Z({part:"snippet",fields:"etag,items(snippet(title,resourceId/channelId,thumbnails/default/url)),nextPageToken",mine:"true",order:"alphabetical",maxResults:"50"},t.pageToken&&{pageToken:t.pageToken})},t.etag&&{etag:t.etag}))}async function listAllChannels(t){const e=new Map(t.map((o,i)=>[`${i}`,listChannelsRequest(o)])),n=await batchRequest("/youtube/v3",e),r=await Promise.all(Array.from(n.values()).map(o=>o.json()));return new Map(r.flatMap(o=>o.items.map(i=>[i.id,i])))}function listChannelsRequest(t){return toRequest("/youtube/v3/channels",{method:"GET",query:{part:"contentDetails",fields:"items(id,contentDetails/relatedPlaylists/uploads)",id:t.map(e=>e.snippet.resourceId.channelId).join(","),maxResults:"50"}})}async function listAllPlaylistItems(t,e){const n=new Set(e.subscriptionGroups.flatMap(r=>r.subscriptionIds));if(n.size>0){const r=t.items.filter(a=>n.has(a.channelId)),o=new Map(r.map(a=>[a.uploadsPlaylistId,listPlaylistItemsRequest(a,!0)])),i=await batchRequest("/youtube/v3",o);await Promise.all(r.map(a=>listPlaylistItemsResponse(a,i.get(a.uploadsPlaylistId),!0)))}}async function listPlaylistItems(t){const e=await request(listPlaylistItemsRequest(t,!1));await listPlaylistItemsResponse(t,e,!1)}function listPlaylistItemsRequest(t,e){return toRequest("/youtube/v3/playlistItems",Z({method:"GET",query:Z({part:"snippet",fields:"etag,items(snippet(title,description,publishedAt,thumbnails/medium/url,resourceId/videoId)),nextPageToken",playlistId:t.uploadsPlaylistId,maxResults:"50"},!e&&t.nextUploadPageToken&&{pageToken:t.nextUploadPageToken})},e&&t.uploadsEtag&&{etag:t.uploadsEtag}))}async function listPlaylistItemsResponse(t,e,n){if(n){if(t.uploadsEtag&&e.status===304)return;clearUploads(t)}if(!e.ok)throw e;addUploads(t,await e.json())}async function SubscriptionGroup(t,e){const n={name:t,subscriptions:e.map(r=>({subscription:r,uploadIndex:0})),videos:[]};return await loadMoreVideos(n),n}async function getPlaylist(t){return t.subscriptions.length===1?{playlistId:t.subscriptions[0].subscription.uploadsPlaylistId}:(t.videos.length<200&&await loadMoreVideos(t,200-t.videos.length),{customPlaylist:t.videos.slice(0,200).map(e=>e.videoId)})}async function loadMoreVideos(t,e=10){for(let n=0;n<e;n++){let r,o;for(const i of t.subscriptions){if(i.uploadIndex===i.subscription.uploads.length){if(!i.subscription.nextUploadPageToken)continue;await listPlaylistItems(i.subscription)}const a=i.subscription.uploads[i.uploadIndex];(!r||a.publishedAt>r.publishedAt)&&(r=a,o=i)}if(!r||!o)break;r.channelTitle=o.subscription.title,t.videos.push(r),o.uploadIndex++}}const parseNumber=parseFloat;function joinCss(t,e=";"){let n;if(Array.isArray(t))n=t.filter(r=>r);else{n=[];for(const r in t)t[r]&&n.push(`${r}:${t[r]}`)}return n.join(e)}function getStyles(t,e,n,r){let o,i;const a="1em";let s,l,c,_="-.125em";const f="visible";return r&&(c="center",i="1.25em"),n&&(o=n),e&&(e=="lg"?(l="1.33333em",s=".75em",_="-.225em"):e=="xs"?l=".75em":e=="sm"?l=".875em":l=e.replace("x","em")),joinCss([joinCss({float:o,width:i,height:a,"line-height":s,"font-size":l,"text-align":c,"vertical-align":_,"transform-origin":"center",overflow:f}),t])}function getTransform(t,e,n,r,o,i=1,a="",s=""){let l=1,c=1;return o&&(o=="horizontal"?l=-1:o=="vertical"?c=-1:l=c=-1),joinCss([`translate(${parseNumber(e)*i}${a},${parseNumber(n)*i}${a})`,`scale(${l*parseNumber(t)},${c*parseNumber(t)})`,r&&`rotate(${r}${s})`]," ")}var fa_svelte_svelte_type_style_lang="";function create_if_block$4(t){let e,n,r,o,i,a,s;function l(f,u){return typeof f[7][4]=="string"?create_if_block_1$2:create_else_block$3}let c=l(t),_=c(t);return{c(){e=svg_element("svg"),n=svg_element("g"),r=svg_element("g"),_.c(),attr(r,"transform",t[10]),attr(n,"transform",o=`translate(${t[7][0]/2} ${t[7][1]/2})`),attr(n,"transform-origin",i=`${t[7][0]/4} 0`),attr(e,"id",t[0]),attr(e,"class",a=null_to_empty(t[8])+" svelte-1w3t65e"),attr(e,"style",t[9]),attr(e,"viewBox",s=`0 0 ${t[7][0]} ${t[7][1]}`),attr(e,"aria-hidden","true"),attr(e,"role","img"),attr(e,"xmlns","http://www.w3.org/2000/svg")},m(f,u){insert(f,e,u),append(e,n),append(n,r),_.m(r,null)},p(f,u){c===(c=l(f))&&_?_.p(f,u):(_.d(1),_=c(f),_&&(_.c(),_.m(r,null))),u&1024&&attr(r,"transform",f[10]),u&128&&o!==(o=`translate(${f[7][0]/2} ${f[7][1]/2})`)&&attr(n,"transform",o),u&128&&i!==(i=`${f[7][0]/4} 0`)&&attr(n,"transform-origin",i),u&1&&attr(e,"id",f[0]),u&256&&a!==(a=null_to_empty(f[8])+" svelte-1w3t65e")&&attr(e,"class",a),u&512&&attr(e,"style",f[9]),u&128&&s!==(s=`0 0 ${f[7][0]} ${f[7][1]}`)&&attr(e,"viewBox",s)},d(f){f&&detach(e),_.d()}}}function create_else_block$3(t){let e,n,r,o,i,a,s,l,c,_;return{c(){e=svg_element("path"),a=svg_element("path"),attr(e,"d",n=t[7][4][0]),attr(e,"fill",r=t[3]||t[1]||"currentColor"),attr(e,"fill-opacity",o=t[6]!=!1?t[4]:t[5]),attr(e,"transform",i=`translate(${t[7][0]/-2} ${t[7][1]/-2})`),attr(a,"d",s=t[7][4][1]),attr(a,"fill",l=t[2]||t[1]||"currentColor"),attr(a,"fill-opacity",c=t[6]!=!1?t[5]:t[4]),attr(a,"transform",_=`translate(${t[7][0]/-2} ${t[7][1]/-2})`)},m(f,u){insert(f,e,u),insert(f,a,u)},p(f,u){u&128&&n!==(n=f[7][4][0])&&attr(e,"d",n),u&10&&r!==(r=f[3]||f[1]||"currentColor")&&attr(e,"fill",r),u&112&&o!==(o=f[6]!=!1?f[4]:f[5])&&attr(e,"fill-opacity",o),u&128&&i!==(i=`translate(${f[7][0]/-2} ${f[7][1]/-2})`)&&attr(e,"transform",i),u&128&&s!==(s=f[7][4][1])&&attr(a,"d",s),u&6&&l!==(l=f[2]||f[1]||"currentColor")&&attr(a,"fill",l),u&112&&c!==(c=f[6]!=!1?f[5]:f[4])&&attr(a,"fill-opacity",c),u&128&&_!==(_=`translate(${f[7][0]/-2} ${f[7][1]/-2})`)&&attr(a,"transform",_)},d(f){f&&detach(e),f&&detach(a)}}}function create_if_block_1$2(t){let e,n,r,o;return{c(){e=svg_element("path"),attr(e,"d",n=t[7][4]),attr(e,"fill",r=t[1]||t[2]||"currentColor"),attr(e,"transform",o=`translate(${t[7][0]/-2} ${t[7][1]/-2})`)},m(i,a){insert(i,e,a)},p(i,a){a&128&&n!==(n=i[7][4])&&attr(e,"d",n),a&6&&r!==(r=i[1]||i[2]||"currentColor")&&attr(e,"fill",r),a&128&&o!==(o=`translate(${i[7][0]/-2} ${i[7][1]/-2})`)&&attr(e,"transform",o)},d(i){i&&detach(e)}}}function create_fragment$7(t){let e,n=t[7][4]&&create_if_block$4(t);return{c(){n&&n.c(),e=empty()},m(r,o){n&&n.m(r,o),insert(r,e,o)},p(r,[o]){r[7][4]?n?n.p(r,o):(n=create_if_block$4(r),n.c(),n.m(e.parentNode,e)):n&&(n.d(1),n=null)},i:noop,o:noop,d(r){n&&n.d(r),r&&detach(e)}}}function instance$7(t,e,n){let{class:r=""}=e,{id:o=""}=e,{style:i=""}=e,{icon:a}=e,{size:s=""}=e,{color:l=""}=e,{fw:c=!1}=e,{pull:_=""}=e,{scale:f=1}=e,{translateX:u=0}=e,{translateY:d=0}=e,{rotate:m=""}=e,{flip:y=!1}=e,{spin:v=!1}=e,{pulse:g=!1}=e,{primaryColor:E=""}=e,{secondaryColor:h=""}=e,{primaryOpacity:S=1}=e,{secondaryOpacity:R=.4}=e,{swapOpacity:b=!1}=e,I,T,D,C;return t.$$set=w=>{"class"in w&&n(11,r=w.class),"id"in w&&n(0,o=w.id),"style"in w&&n(12,i=w.style),"icon"in w&&n(13,a=w.icon),"size"in w&&n(14,s=w.size),"color"in w&&n(1,l=w.color),"fw"in w&&n(15,c=w.fw),"pull"in w&&n(16,_=w.pull),"scale"in w&&n(17,f=w.scale),"translateX"in w&&n(18,u=w.translateX),"translateY"in w&&n(19,d=w.translateY),"rotate"in w&&n(20,m=w.rotate),"flip"in w&&n(21,y=w.flip),"spin"in w&&n(22,v=w.spin),"pulse"in w&&n(23,g=w.pulse),"primaryColor"in w&&n(2,E=w.primaryColor),"secondaryColor"in w&&n(3,h=w.secondaryColor),"primaryOpacity"in w&&n(4,S=w.primaryOpacity),"secondaryOpacity"in w&&n(5,R=w.secondaryOpacity),"swapOpacity"in w&&n(6,b=w.swapOpacity)},t.$$.update=()=>{t.$$.dirty&8192&&n(7,I=a&&a.icon||[0,0,"",[],""]),t.$$.dirty&12584960&&n(8,T=joinCss([r,"svelte-fa",v&&"spin",g&&"pulse"]," ")),t.$$.dirty&118784&&n(9,D=getStyles(i,s,_,c)),t.$$.dirty&4063232&&n(10,C=getTransform(f,u,d,m,y,512))},[o,l,E,h,S,R,b,I,T,D,C,r,i,a,s,c,_,f,u,d,m,y,v,g]}class Fa extends SvelteComponent{constructor(e){super(),init(this,e,instance$7,create_fragment$7,safe_not_equal,{class:11,id:0,style:12,icon:13,size:14,color:1,fw:15,pull:16,scale:17,translateX:18,translateY:19,rotate:20,flip:21,spin:22,pulse:23,primaryColor:2,secondaryColor:3,primaryOpacity:4,secondaryOpacity:5,swapOpacity:6})}}var Fa$1=Fa,faLayers_svelte_svelte_type_style_lang="";function create_fragment$6(t){let e,n,r;const o=t[8].default,i=create_slot(o,t,t[7],null);return{c(){e=element("span"),i&&i.c(),attr(e,"id",t[0]),attr(e,"class",n=null_to_empty(t[1])+" svelte-w9owi"),attr(e,"style",t[2])},m(a,s){insert(a,e,s),i&&i.m(e,null),r=!0},p(a,[s]){i&&i.p&&(!r||s&128)&&update_slot_base(i,o,a,a[7],r?get_slot_changes(o,a[7],s,null):get_all_dirty_from_scope(a[7]),null),(!r||s&1)&&attr(e,"id",a[0]),(!r||s&2&&n!==(n=null_to_empty(a[1])+" svelte-w9owi"))&&attr(e,"class",n),(!r||s&4)&&attr(e,"style",a[2])},i(a){r||(transition_in(i,a),r=!0)},o(a){transition_out(i,a),r=!1},d(a){a&&detach(e),i&&i.d(a)}}}function instance$6(t,e,n){let{$$slots:r={},$$scope:o}=e,{class:i=""}=e,{id:a=""}=e,{style:s=""}=e,{size:l=""}=e,{pull:c=""}=e,_,f;return t.$$set=u=>{"class"in u&&n(3,i=u.class),"id"in u&&n(0,a=u.id),"style"in u&&n(4,s=u.style),"size"in u&&n(5,l=u.size),"pull"in u&&n(6,c=u.pull),"$$scope"in u&&n(7,o=u.$$scope)},t.$$.update=()=>{t.$$.dirty&8&&n(1,_=joinCss([i,"svelte-fa-layers"]," ")),t.$$.dirty&112&&n(2,f=getStyles(s,l,c,!0))},[a,_,f,i,s,l,c,o,r]}class Fa_layers extends SvelteComponent{constructor(e){super(),init(this,e,instance$6,create_fragment$6,safe_not_equal,{class:3,id:0,style:4,size:5,pull:6})}}var FaLayers=Fa_layers;/*!
 * Font Awesome Free 5.15.4 by @fontawesome - https://fontawesome.com
 * License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License)
 */var faCircle={prefix:"fas",iconName:"circle",icon:[512,512,[],"f111","M256 8C119 8 8 119 8 256s111 248 248 248 248-111 248-248S393 8 256 8z"]},faPlay={prefix:"fas",iconName:"play",icon:[448,512,[],"f04b","M424.4 214.7L72.4 6.6C43.8-10.3 0 6.1 0 47.9V464c0 37.5 40.7 60.1 72.4 41.3l352-208c31.4-18.5 31.5-64.1 0-82.6z"]},faTimesCircle={prefix:"fas",iconName:"times-circle",icon:[512,512,[],"f057","M256 8C119 8 8 119 8 256s111 248 248 248 248-111 248-248S393 8 256 8zm121.6 313.1c4.7 4.7 4.7 12.3 0 17L338 377.6c-4.7 4.7-12.3 4.7-17 0L256 312l-65.1 65.6c-4.7 4.7-12.3 4.7-17 0L134.4 338c-4.7-4.7-4.7-12.3 0-17l65.6-65-65.6-65.1c-4.7-4.7-4.7-12.3 0-17l39.6-39.6c4.7-4.7 12.3-4.7 17 0l65 65.7 65.1-65.6c4.7-4.7 12.3-4.7 17 0l39.6 39.6c4.7 4.7 4.7 12.3 0 17L312 256l65.6 65.1z"]},faUsers={prefix:"fas",iconName:"users",icon:[640,512,[],"f0c0","M96 224c35.3 0 64-28.7 64-64s-28.7-64-64-64-64 28.7-64 64 28.7 64 64 64zm448 0c35.3 0 64-28.7 64-64s-28.7-64-64-64-64 28.7-64 64 28.7 64 64 64zm32 32h-64c-17.6 0-33.5 7.1-45.1 18.6 40.3 22.1 68.9 62 75.1 109.4h66c17.7 0 32-14.3 32-32v-32c0-35.3-28.7-64-64-64zm-256 0c61.9 0 112-50.1 112-112S381.9 32 320 32 208 82.1 208 144s50.1 112 112 112zm76.8 32h-8.3c-20.8 10-43.9 16-68.5 16s-47.6-6-68.5-16h-8.3C179.6 288 128 339.6 128 403.2V432c0 26.5 21.5 48 48 48h288c26.5 0 48-21.5 48-48v-28.8c0-63.6-51.6-115.2-115.2-115.2zm-223.7-13.4C161.5 263.1 145.6 256 128 256H64c-35.3 0-64 28.7-64 64v32c0 17.7 14.3 32 32 32h65.9c6.3-47.4 34.9-87.3 75.2-109.4z"]};const defaultOptions={root:null,rootMargin:"0px",threshold:0,unobserveOnEnter:!1},createEvent=(t,e)=>new CustomEvent(t,{detail:e});function inview(t,e={}){const{root:n,rootMargin:r,threshold:o,unobserveOnEnter:i}=Object.assign(Object.assign({},defaultOptions),e);let a={x:void 0,y:void 0},s={vertical:void 0,horizontal:void 0};if(typeof IntersectionObserver!="undefined"&&t){const l=new IntersectionObserver((c,_)=>{c.forEach(f=>{a.y>f.boundingClientRect.y?s.vertical="up":s.vertical="down",a.x>f.boundingClientRect.x?s.horizontal="left":s.horizontal="right",a={y:f.boundingClientRect.y,x:f.boundingClientRect.x};const u={inView:f.isIntersecting,entry:f,scrollDirection:s,node:t,observer:_};t.dispatchEvent(createEvent("change",u)),f.isIntersecting?(t.dispatchEvent(createEvent("enter",u)),i&&_.unobserve(t)):t.dispatchEvent(createEvent("leave",u))})},{root:n,rootMargin:r,threshold:o});return setTimeout(()=>{t.dispatchEvent(createEvent("init",{observer:l,node:t}))},0),l.observe(t),{destroy(){l.unobserve(t)}}}}function get_each_context$2(t,e,n){const r=t.slice();return r[10]=e[n],r}function create_else_block$2(t){let e,n,r,o,i=t[0].name+"",a,s,l,c,_;n=new FaLayers({props:{size:"2x",class:"-mx-1",$$slots:{default:[create_default_slot$3]},$$scope:{ctx:t}}});let f=t[0].videos.length>0&&create_if_block_2(t);return{c(){e=element("span"),create_component(n.$$.fragment),r=space(),o=element("span"),a=text(i),l=space(),f&&f.c(),c=empty(),attr(e,"class","inline-block h-8 align-middle"),attr(o,"class","inline-block h-8 max-w-[26rem] align-text-top truncate cursor-default"),attr(o,"title",s=t[0].name)},m(u,d){insert(u,e,d),mount_component(n,e,null),insert(u,r,d),insert(u,o,d),append(o,a),insert(u,l,d),f&&f.m(u,d),insert(u,c,d),_=!0},p(u,d){const m={};d&8192&&(m.$$scope={dirty:d,ctx:u}),n.$set(m),(!_||d&1)&&i!==(i=u[0].name+"")&&set_data(a,i),(!_||d&1&&s!==(s=u[0].name))&&attr(o,"title",s),u[0].videos.length>0?f?(f.p(u,d),d&1&&transition_in(f,1)):(f=create_if_block_2(u),f.c(),transition_in(f,1),f.m(c.parentNode,c)):f&&(group_outros(),transition_out(f,1,1,()=>{f=null}),check_outros())},i(u){_||(transition_in(n.$$.fragment,u),transition_in(f),_=!0)},o(u){transition_out(n.$$.fragment,u),transition_out(f),_=!1},d(u){u&&detach(e),destroy_component(n),u&&detach(r),u&&detach(o),u&&detach(l),f&&f.d(u),u&&detach(c)}}}function create_if_block$3(t){let e,n,r,o,i,a=t[0].name+"",s,l,c,_,f,u,d=t[0].videos.length>0&&create_if_block_1$1(t);return{c(){e=element("a"),n=element("img"),o=space(),i=element("span"),s=text(a),_=space(),d&&d.c(),f=empty(),attr(n,"class","inline-block h-8 w-8 rounded-2xl align-middle"),src_url_equal(n.src,r=t[0].subscriptions[0].subscription.thumbnailUrl)||attr(n,"src",r),attr(n,"alt",""),attr(n,"loading","lazy"),attr(n,"width","88"),attr(n,"height","88"),attr(i,"class","inline-block h-8 max-w-[26rem] align-text-top truncate"),attr(i,"title",l=t[0].name),attr(e,"href",c="https://www.youtube.com/channel/"+t[0].subscriptions[0].subscription.channelId)},m(m,y){insert(m,e,y),append(e,n),append(e,o),append(e,i),append(i,s),insert(m,_,y),d&&d.m(m,y),insert(m,f,y),u=!0},p(m,y){(!u||y&1&&!src_url_equal(n.src,r=m[0].subscriptions[0].subscription.thumbnailUrl))&&attr(n,"src",r),(!u||y&1)&&a!==(a=m[0].name+"")&&set_data(s,a),(!u||y&1&&l!==(l=m[0].name))&&attr(i,"title",l),(!u||y&1&&c!==(c="https://www.youtube.com/channel/"+m[0].subscriptions[0].subscription.channelId))&&attr(e,"href",c),m[0].videos.length>0?d?(d.p(m,y),y&1&&transition_in(d,1)):(d=create_if_block_1$1(m),d.c(),transition_in(d,1),d.m(f.parentNode,f)):d&&(group_outros(),transition_out(d,1,1,()=>{d=null}),check_outros())},i(m){u||(transition_in(d),u=!0)},o(m){transition_out(d),u=!1},d(m){m&&detach(e),m&&detach(_),d&&d.d(m),m&&detach(f)}}}function create_default_slot$3(t){let e,n,r,o;return e=new Fa$1({props:{icon:faCircle,color:"rgb(82 82 82)"}}),r=new Fa$1({props:{icon:faUsers,scale:.5}}),{c(){create_component(e.$$.fragment),n=space(),create_component(r.$$.fragment)},m(i,a){mount_component(e,i,a),insert(i,n,a),mount_component(r,i,a),o=!0},p:noop,i(i){o||(transition_in(e.$$.fragment,i),transition_in(r.$$.fragment,i),o=!0)},o(i){transition_out(e.$$.fragment,i),transition_out(r.$$.fragment,i),o=!1},d(i){destroy_component(e,i),i&&detach(n),destroy_component(r,i)}}}function create_if_block_2(t){let e,n,r,o,i;return n=new Fa$1({props:{icon:faPlay,translateY:.5}}),{c(){e=element("span"),create_component(n.$$.fragment),attr(e,"class","float-right inline-block h-8 w-8 px-2 -ml-8 cursor-pointer"),attr(e,"title","Play all")},m(a,s){insert(a,e,s),mount_component(n,e,null),r=!0,o||(i=listen(e,"click",t[2]),o=!0)},p:noop,i(a){r||(transition_in(n.$$.fragment,a),r=!0)},o(a){transition_out(n.$$.fragment,a),r=!1},d(a){a&&detach(e),destroy_component(n),o=!1,i()}}}function create_if_block_1$1(t){let e,n,r,o,i,a;return n=new Fa$1({props:{icon:faPlay,translateY:.5}}),{c(){e=element("a"),create_component(n.$$.fragment),attr(e,"class","float-right h-8 w-8 pl-2 pr-2 -ml-8"),attr(e,"title","Play all"),attr(e,"href",r="https://www.youtube.com/watch?v="+t[0].videos[0].videoId+"&list="+t[0].subscriptions[0].subscription.uploadsPlaylistId)},m(s,l){insert(s,e,l),mount_component(n,e,null),o=!0,i||(a=listen(e,"click",prevent_default(t[2])),i=!0)},p(s,l){(!o||l&1&&r!==(r="https://www.youtube.com/watch?v="+s[0].videos[0].videoId+"&list="+s[0].subscriptions[0].subscription.uploadsPlaylistId))&&attr(e,"href",r)},i(s){o||(transition_in(n.$$.fragment,s),o=!0)},o(s){transition_out(n.$$.fragment,s),o=!1},d(s){s&&detach(e),destroy_component(n),i=!1,a()}}}function create_each_block$2(t){let e,n;return e=new VideoCard({props:{video:t[10]}}),{c(){create_component(e.$$.fragment)},m(r,o){mount_component(e,r,o),n=!0},p(r,o){const i={};o&1&&(i.video=r[10]),e.$set(i)},i(r){n||(transition_in(e.$$.fragment,r),n=!0)},o(r){transition_out(e.$$.fragment,r),n=!1},d(r){destroy_component(e,r)}}}function create_fragment$5(t){let e,n,r,o,i,a,s,l,c,_,f,u;const d=[create_if_block$3,create_else_block$2],m=[];function y(h,S){return h[0].subscriptions.length===1?0:1}r=y(t),o=m[r]=d[r](t);let v=t[0].videos,g=[];for(let h=0;h<v.length;h+=1)g[h]=create_each_block$2(get_each_context$2(t,v,h));const E=h=>transition_out(g[h],1,1,()=>{g[h]=null});return c=new Spinner({}),{c(){e=element("div"),n=element("p"),o.c(),i=space(),a=element("div");for(let h=0;h<g.length;h+=1)g[h].c();s=space(),l=element("div"),create_component(c.$$.fragment),attr(n,"class","text-center font-bold h-8 mb-1"),attr(a,"class","overflow-y-scroll y-scroll-hover overflow-x-hidden"),set_style(a,"height","calc(100% - 2.25rem)"),attr(e,"class","inline-block h-full w-[32rem] bg-neutral-800 p-1 pb-4 ml-1 mr-1 rounded-2xl")},m(h,S){insert(h,e,S),append(e,n),m[r].m(n,null),append(e,i),append(e,a);for(let R=0;R<g.length;R+=1)g[R].m(a,null);append(a,s),append(a,l),mount_component(c,l,null),_=!0,f||(u=[action_destroyer(inview.call(null,l)),listen(l,"change",t[4]),listen(a,"wheel",stop_propagation(t[3]),{passive:!0})],f=!0)},p(h,[S]){let R=r;if(r=y(h),r===R?m[r].p(h,S):(group_outros(),transition_out(m[R],1,1,()=>{m[R]=null}),check_outros(),o=m[r],o?o.p(h,S):(o=m[r]=d[r](h),o.c()),transition_in(o,1),o.m(n,null)),S&1){v=h[0].videos;let b;for(b=0;b<v.length;b+=1){const I=get_each_context$2(h,v,b);g[b]?(g[b].p(I,S),transition_in(g[b],1)):(g[b]=create_each_block$2(I),g[b].c(),transition_in(g[b],1),g[b].m(a,s))}for(group_outros(),b=v.length;b<g.length;b+=1)E(b);check_outros()}},i(h){if(!_){transition_in(o);for(let S=0;S<v.length;S+=1)transition_in(g[S]);transition_in(c.$$.fragment,h),_=!0}},o(h){transition_out(o),g=g.filter(Boolean);for(let S=0;S<g.length;S+=1)transition_out(g[S]);transition_out(c.$$.fragment,h),_=!1},d(h){h&&detach(e),m[r].d(),destroy_each(g,h),destroy_component(c),f=!1,run_all(u)}}}function instance$5(t,e,n){let r;component_subscribe(t,playerStore,d=>n(7,r=d));let{subscriptionGroup:o}=e,i=!1,a=!1,s=0;async function l(){set_store_value(playerStore,r={loading:!0},r);const d=await getPlaylist(o);n(0,o),set_store_value(playerStore,r=d,r)}async function c(){i&&s<3&&(await _(),setTimeout(c,100))}async function _(){if(!a){a=!0;try{await loadMoreVideos(o),n(0,o),s=0}catch(d){console.error(d),s++}a=!1}}function f(d){bubble.call(this,t,d)}const u=d=>n(1,i=d.detail.inView);return t.$$set=d=>{"subscriptionGroup"in d&&n(0,o=d.subscriptionGroup)},t.$$.update=()=>{t.$$.dirty&2&&i&&c()},[o,i,l,f,u]}class SubscriptionOverview extends SvelteComponent{constructor(e){super(),init(this,e,instance$5,create_fragment$5,safe_not_equal,{subscriptionGroup:0})}}function cubicOut(t){const e=t-1;return e*e*e+1}function is_date(t){return Object.prototype.toString.call(t)==="[object Date]"}function get_interpolator(t,e){if(t===e||t!==t)return()=>t;const n=typeof t;if(n!==typeof e||Array.isArray(t)!==Array.isArray(e))throw new Error("Cannot interpolate values of different type");if(Array.isArray(t)){const r=e.map((o,i)=>get_interpolator(t[i],o));return o=>r.map(i=>i(o))}if(n==="object"){if(!t||!e)throw new Error("Object cannot be null");if(is_date(t)&&is_date(e)){t=t.getTime(),e=e.getTime();const i=e-t;return a=>new Date(t+a*i)}const r=Object.keys(e),o={};return r.forEach(i=>{o[i]=get_interpolator(t[i],e[i])}),i=>{const a={};return r.forEach(s=>{a[s]=o[s](i)}),a}}if(n==="number"){const r=e-t;return o=>t+o*r}throw new Error(`Cannot interpolate ${n} values`)}function tweened(t,e={}){const n=writable(t);let r,o=t;function i(a,s){if(t==null)return n.set(t=a),Promise.resolve();o=a;let l=r,c=!1,{delay:_=0,duration:f=400,easing:u=identity,interpolate:d=get_interpolator}=assign(assign({},e),s);if(f===0)return l&&(l.abort(),l=null),n.set(t=o),Promise.resolve();const m=now$1()+_;let y;return r=loop$1(v=>{if(v<m)return!0;c||(y=d(t,a),typeof f=="function"&&(f=f(t,a)),c=!0),l&&(l.abort(),l=null);const g=v-m;return g>f?(n.set(t=a),!1):(n.set(t=y(u(g/f))),!0)}),r.promise}return{set:i,update:(a,s)=>i(a(o,t),s),subscribe:n.subscribe}}function create_fragment$4(t){let e,n,r,o;const i=t[4].default,a=create_slot(i,t,t[3],null);return{c(){e=element("div"),a&&a.c(),attr(e,"class","w-full h-full pb-[2px] overflow-x-scroll x-scroll")},m(s,l){insert(s,e,l),a&&a.m(e,null),t[5](e),n=!0,r||(o=[listen(e,"wheel",t[1],{passive:!0}),listen(e,"scroll",t[2])],r=!0)},p(s,[l]){a&&a.p&&(!n||l&8)&&update_slot_base(a,i,s,s[3],n?get_slot_changes(i,s[3],l,null):get_all_dirty_from_scope(s[3]),null)},i(s){n||(transition_in(a,s),n=!0)},o(s){transition_out(a,s),n=!1},d(s){s&&detach(e),a&&a.d(s),t[5](null),r=!1,run_all(o)}}}const duration$1=100;function instance$4(t,e,n){let{$$slots:r={},$$scope:o}=e,i;const a=tweened(0,{duration:duration$1});let s=!1,l;onDestroy(a.subscribe(d=>{s&&n(0,i.scrollLeft=d,i)}));function c(d){d.deltaX?(s=!1,a.update(m=>_(m+d.deltaX),{duration:0})):d.deltaY&&(s=!0,a.update(m=>_(m+d.deltaY)))}function _(d){return Math.max(0,Math.min(d,i.scrollWidth-i.clientWidth))}function f(){clearTimeout(l),l=setTimeout(()=>{s=!1,a.set(i.scrollLeft,{duration:0})},duration$1)}function u(d){binding_callbacks[d?"unshift":"push"](()=>{i=d,n(0,i)})}return t.$$set=d=>{"$$scope"in d&&n(3,o=d.$$scope)},[i,c,f,o,r,u]}class HorizontalScroll extends SvelteComponent{constructor(e){super(),init(this,e,instance$4,create_fragment$4,safe_not_equal,{})}}const settingsFileName="settings.json";let settingsFileId;async function getSettingsFileId(){const e=await(await request("/drive/v3/files",{method:"GET",query:{spaces:"appDataFolder",fields:"files(id)",q:`name = '${settingsFileName}'`,pageSize:"1"}})).json();settingsFileId=e.files.length>0?e.files[0].id:null}async function readSettings(){return settingsFileId===void 0&&await getSettingsFileId(),settingsFileId==null?null:(await request(`/drive/v3/files/${settingsFileId}`,{method:"GET",query:{alt:"media"}})).json()}async function writeSettings(t){settingsFileId===void 0&&await getSettingsFileId(),settingsFileId==null?await createSettings(t):await updateSettings(t)}async function createSettings(t){const e={name:settingsFileName,mimeType:"application/json",parents:["appDataFolder"]},n=new FormData;n.append("metadata",jsonBlob(e)),n.append("file",jsonBlob(t),settingsFileName),settingsFileId=(await(await request("/upload/drive/v3/files",{method:"POST",query:{uploadType:"multipart"},body:n})).json()).id}async function updateSettings(t){await request(`/upload/drive/v3/files/${settingsFileId}`,{method:"PATCH",query:{uploadType:"media"},body:jsonBlob(t)})}function Settings(t=[]){return{subscriptionGroups:t.map(e=>({name:e.name,subscriptionIds:e.subscriptions.map(n=>n.subscription.channelId)}))}}function get_each_context$1(t,e,n){const r=t.slice();return r[9]=e[n],r}function create_catch_block$1(t){let e,n=JSON.stringify(t[12])+"",r;return{c(){e=element("p"),r=text(n),attr(e,"class","text-center")},m(o,i){insert(o,e,i),append(e,r)},p:noop,i:noop,o:noop,d(o){o&&detach(e)}}}function create_then_block$1(t){let e,n,r,o;const i=[create_if_block$2,create_else_block$1],a=[];function s(l,c){return l[0].length===0?0:1}return e=s(t),n=a[e]=i[e](t),{c(){n.c(),r=empty()},m(l,c){a[e].m(l,c),insert(l,r,c),o=!0},p(l,c){let _=e;e=s(l),e===_?a[e].p(l,c):(group_outros(),transition_out(a[_],1,1,()=>{a[_]=null}),check_outros(),n=a[e],n?n.p(l,c):(n=a[e]=i[e](l),n.c()),transition_in(n,1),n.m(r.parentNode,r))},i(l){o||(transition_in(n),o=!0)},o(l){transition_out(n),o=!1},d(l){a[e].d(l),l&&detach(r)}}}function create_else_block$1(t){let e,n,r;return n=new HorizontalScroll({props:{$$slots:{default:[create_default_slot_2$1]},$$scope:{ctx:t}}}),{c(){e=element("div"),create_component(n.$$.fragment),attr(e,"class","w-full"),set_style(e,"height","calc(100% - 6px)")},m(o,i){insert(o,e,i),mount_component(n,e,null),r=!0},p(o,i){const a={};i&8193&&(a.$$scope={dirty:i,ctx:o}),n.$set(a)},i(o){r||(transition_in(n.$$.fragment,o),r=!0)},o(o){transition_out(n.$$.fragment,o),r=!1},d(o){o&&detach(e),destroy_component(n)}}}function create_if_block$2(t){let e,n;return e=new Center({props:{$$slots:{default:[create_default_slot_1$1]},$$scope:{ctx:t}}}),{c(){create_component(e.$$.fragment)},m(r,o){mount_component(e,r,o),n=!0},p(r,o){const i={};o&8192&&(i.$$scope={dirty:o,ctx:r}),e.$set(i)},i(r){n||(transition_in(e.$$.fragment,r),n=!0)},o(r){transition_out(e.$$.fragment,r),n=!1},d(r){destroy_component(e,r)}}}function create_each_block$1(t){let e,n;return e=new SubscriptionOverview({props:{subscriptionGroup:t[9]}}),{c(){create_component(e.$$.fragment)},m(r,o){mount_component(e,r,o),n=!0},p(r,o){const i={};o&1&&(i.subscriptionGroup=r[9]),e.$set(i)},i(r){n||(transition_in(e.$$.fragment,r),n=!0)},o(r){transition_out(e.$$.fragment,r),n=!1},d(r){destroy_component(e,r)}}}function create_default_slot_2$1(t){let e,n,r=t[0],o=[];for(let a=0;a<r.length;a+=1)o[a]=create_each_block$1(get_each_context$1(t,r,a));const i=a=>transition_out(o[a],1,1,()=>{o[a]=null});return{c(){e=element("div");for(let a=0;a<o.length;a+=1)o[a].c();attr(e,"class","w-max h-full")},m(a,s){insert(a,e,s);for(let l=0;l<o.length;l+=1)o[l].m(e,null);n=!0},p(a,s){if(s&1){r=a[0];let l;for(l=0;l<r.length;l+=1){const c=get_each_context$1(a,r,l);o[l]?(o[l].p(c,s),transition_in(o[l],1)):(o[l]=create_each_block$1(c),o[l].c(),transition_in(o[l],1),o[l].m(e,null))}for(group_outros(),l=r.length;l<o.length;l+=1)i(l);check_outros()}},i(a){if(!n){for(let s=0;s<r.length;s+=1)transition_in(o[s]);n=!0}},o(a){o=o.filter(Boolean);for(let s=0;s<o.length;s+=1)transition_out(o[s]);n=!1},d(a){a&&detach(e),destroy_each(o,a)}}}function create_default_slot_1$1(t){let e,n,r,o,i;return{c(){e=element("p"),e.textContent="No subscriptions to display",n=space(),r=element("br"),o=space(),i=element("p"),i.textContent='Click the "Edit" button to add subscriptions'},m(a,s){insert(a,e,s),insert(a,n,s),insert(a,r,s),insert(a,o,s),insert(a,i,s)},p:noop,d(a){a&&detach(e),a&&detach(n),a&&detach(r),a&&detach(o),a&&detach(i)}}}function create_pending_block$1(t){let e,n;return e=new Center({props:{$$slots:{default:[create_default_slot$2]},$$scope:{ctx:t}}}),{c(){create_component(e.$$.fragment)},m(r,o){mount_component(e,r,o),n=!0},p(r,o){const i={};o&8192&&(i.$$scope={dirty:o,ctx:r}),e.$set(i)},i(r){n||(transition_in(e.$$.fragment,r),n=!0)},o(r){transition_out(e.$$.fragment,r),n=!1},d(r){destroy_component(e,r)}}}function create_default_slot$2(t){let e,n;return e=new Spinner({}),{c(){create_component(e.$$.fragment)},m(r,o){mount_component(e,r,o),n=!0},i(r){n||(transition_in(e.$$.fragment,r),n=!0)},o(r){transition_out(e.$$.fragment,r),n=!1},d(r){destroy_component(e,r)}}}function create_fragment$3(t){let e,n,r={ctx:t,current:null,token:null,hasCatch:!0,pending:create_pending_block$1,then:create_then_block$1,catch:create_catch_block$1,value:8,error:12,blocks:[,,,]};return handle_promise(t[1](),r),{c(){e=empty(),r.block.c()},m(o,i){insert(o,e,i),r.block.m(o,r.anchor=i),r.mount=()=>e.parentNode,r.anchor=e,n=!0},p(o,[i]){t=o,update_await_block_branch(r,t,i)},i(o){n||(transition_in(r.block),n=!0)},o(o){for(let i=0;i<3;i+=1){const a=r.blocks[i];transition_out(a)}n=!1},d(o){o&&detach(e),r.block.d(o),r.token=null,r=null}}}function instance$3(t,e,n){let r,o;component_subscribe(t,subscriptionsStore,f=>n(3,r=f)),component_subscribe(t,settingsStore,f=>n(4,o=f));let i=!1,a;async function s(){const[f,u]=await Promise.all([c(),l()]);set_store_value(settingsStore,o=f,o),await _(f,u),i=!0}onDestroy(settingsStore.subscribe(f=>i&&_(f,r)));async function l(){const f=r;try{const u=await listAllSubscriptions(f==null?void 0:f.etag),d=await listAllChannels(u.items);return Subscriptions(u,d)}catch(u){if(f&&u===NOT_MODIFIED)return f;throw u}}async function c(){let f=await readSettings();return f||(f=Settings()),f}async function _(f,u){await listAllPlaylistItems(u,f),set_store_value(subscriptionsStore,r=u,r);const d=new Map(u.items.map(m=>[m.channelId,m]));n(0,a=await Promise.all(f.subscriptionGroups.map(m=>SubscriptionGroup(m.name,m.subscriptionIds.map(y=>d.get(y))))))}return[a,s]}class SubscriptionsDeck extends SvelteComponent{constructor(e){super(),init(this,e,instance$3,create_fragment$3,safe_not_equal,{})}}var Player_svelte_svelte_type_style_lang="";function create_fragment$2(t){let e,n,r,o,i,a,s,l;return r=new Spinner({}),{c(){e=element("div"),n=element("div"),create_component(r.$$.fragment),o=space(),i=element("div"),i.innerHTML='<div id="player"></div>',attr(n,"class","fixed top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 z-20"),toggle_class(n,"invisible",!t[0]||t[2]),attr(i,"class","fixed top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 z-30"),toggle_class(i,"invisible",!t[0]||!t[2]),attr(e,"class","fixed inset-0 z-10 bg-black/80 svelte-v5cnxt"),toggle_class(e,"fadeIn",t[0]),toggle_class(e,"fadeOut",!t[0])},m(c,_){insert(c,e,_),append(e,n),mount_component(r,n,null),append(e,o),append(e,i),a=!0,s||(l=[listen(window,"resize",t[5]),listen(e,"click",self(t[6]))],s=!0)},p(c,[_]){_&5&&toggle_class(n,"invisible",!c[0]||c[2]),_&5&&toggle_class(i,"invisible",!c[0]||!c[2]),_&1&&toggle_class(e,"fadeIn",c[0]),_&1&&toggle_class(e,"fadeOut",!c[0])},i(c){a||(transition_in(r.$$.fragment,c),a=!0)},o(c){transition_out(r.$$.fragment,c),a=!1},d(c){c&&detach(e),destroy_component(r),s=!1,run_all(l)}}}function calcPlayerSize(){let t=Math.min(document.body.clientWidth,16*document.body.clientHeight/9),e=Math.min(document.body.clientHeight,9*document.body.clientWidth/16);return t>.9*document.body.clientWidth&&e>.9*document.body.clientHeight&&(t*=.9,e*=.9),[t,e]}function instance$2(t,e,n){var r;(function(f){f[f.UNINITIALISED=0]="UNINITIALISED",f[f.INITIALISING=1]="INITIALISING",f[f.INITIALISED=2]="INITIALISED"})(r||(r={}));let o=!1,i=!1,a,s=r.UNINITIALISED;function l(f){if(s===r.UNINITIALISED){n(4,s=r.INITIALISING);const[u,d]=calcPlayerSize(),m={width:u,height:d,playerVars:{autohide:1,autoplay:1,playsinline:1},events:{onReady:()=>{console.log("playerReady"),n(4,s=r.INITIALISED),n(2,i=!0)},onStateChange:y=>{console.log("playerState",y),(y.data===YT.PlayerState.BUFFERING||y.data===YT.PlayerState.PLAYING)&&n(2,i=!0)},onError:y=>{console.error("playerError",y),a.getPlaylist()!=null&&a.nextVideo()}}};f.videoId?m.videoId=f.videoId:f.playlistId?(m.playerVars.listType="playlist",m.playerVars.list=f.playlistId):f.customPlaylist&&(m.playerVars.playlist=f.customPlaylist.join(",")),n(1,a=new YT.Player("player",m))}else s===r.INITIALISING?setTimeout(()=>l(f),100):s===r.INITIALISED&&(f.videoId?a.loadVideoById(f.videoId):f.playlistId?a.loadPlaylist({listType:"playlist",list:f.playlistId}):f.customPlaylist&&a.loadPlaylist(f.customPlaylist))}onDestroy(playerStore.subscribe(f=>{f&&(playerStore.set(null),n(0,o=!0),f.loading||l(f))}));const c=()=>a&&a.setSize(...calcPlayerSize()),_=()=>n(0,o=!1);return t.$$.update=()=>{t.$$.dirty&1&&(o||n(2,i=!1)),t.$$.dirty&27&&s===r.INITIALISED&&!o&&a.stopVideo()},[o,a,i,r,s,c,_]}class Player extends SvelteComponent{constructor(e){super(),init(this,e,instance$2,create_fragment$2,safe_not_equal,{})}}function flip(t,{from:e,to:n},r={}){const o=getComputedStyle(t),i=o.transform==="none"?"":o.transform,[a,s]=o.transformOrigin.split(" ").map(parseFloat),l=e.left+e.width*a/n.width-(n.left+a),c=e.top+e.height*s/n.height-(n.top+s),{delay:_=0,duration:f=d=>Math.sqrt(d)*120,easing:u=cubicOut}=r;return{delay:_,duration:is_function(f)?f(Math.sqrt(l*l+c*c)):f,easing:u,css:(d,m)=>{const y=m*l,v=m*c,g=d+m*e.width/n.width,E=d+m*e.height/n.height;return`transform: ${i} translate(${y}px, ${v}px) scale(${g}, ${E});`}}}const FINALIZE_EVENT_NAME="finalize",CONSIDER_EVENT_NAME="consider";function dispatchFinalizeEvent(t,e,n){t.dispatchEvent(new CustomEvent(FINALIZE_EVENT_NAME,{detail:{items:e,info:n}}))}function dispatchConsiderEvent(t,e,n){t.dispatchEvent(new CustomEvent(CONSIDER_EVENT_NAME,{detail:{items:e,info:n}}))}const DRAGGED_ENTERED_EVENT_NAME="draggedEntered",DRAGGED_LEFT_EVENT_NAME="draggedLeft",DRAGGED_OVER_INDEX_EVENT_NAME="draggedOverIndex",DRAGGED_LEFT_DOCUMENT_EVENT_NAME="draggedLeftDocument",DRAGGED_LEFT_TYPES={LEFT_FOR_ANOTHER:"leftForAnother",OUTSIDE_OF_ANY:"outsideOfAny"};function dispatchDraggedElementEnteredContainer(t,e,n){t.dispatchEvent(new CustomEvent(DRAGGED_ENTERED_EVENT_NAME,{detail:{indexObj:e,draggedEl:n}}))}function dispatchDraggedElementLeftContainerForAnother(t,e,n){t.dispatchEvent(new CustomEvent(DRAGGED_LEFT_EVENT_NAME,{detail:{draggedEl:e,type:DRAGGED_LEFT_TYPES.LEFT_FOR_ANOTHER,theOtherDz:n}}))}function dispatchDraggedElementLeftContainerForNone(t,e){t.dispatchEvent(new CustomEvent(DRAGGED_LEFT_EVENT_NAME,{detail:{draggedEl:e,type:DRAGGED_LEFT_TYPES.OUTSIDE_OF_ANY}}))}function dispatchDraggedElementIsOverIndex(t,e,n){t.dispatchEvent(new CustomEvent(DRAGGED_OVER_INDEX_EVENT_NAME,{detail:{indexObj:e,draggedEl:n}}))}function dispatchDraggedLeftDocument(t){window.dispatchEvent(new CustomEvent(DRAGGED_LEFT_DOCUMENT_EVENT_NAME,{detail:{draggedEl:t}}))}const TRIGGERS={DRAG_STARTED:"dragStarted",DRAGGED_ENTERED:DRAGGED_ENTERED_EVENT_NAME,DRAGGED_ENTERED_ANOTHER:"dragEnteredAnother",DRAGGED_OVER_INDEX:DRAGGED_OVER_INDEX_EVENT_NAME,DRAGGED_LEFT:DRAGGED_LEFT_EVENT_NAME,DRAGGED_LEFT_ALL:"draggedLeftAll",DROPPED_INTO_ZONE:"droppedIntoZone",DROPPED_INTO_ANOTHER:"droppedIntoAnother",DROPPED_OUTSIDE_OF_ANY:"droppedOutsideOfAny",DRAG_STOPPED:"dragStopped"},SOURCES={POINTER:"pointer",KEYBOARD:"keyboard"},SHADOW_ITEM_MARKER_PROPERTY_NAME="isDndShadowItem",SHADOW_ELEMENT_ATTRIBUTE_NAME="data-is-dnd-shadow-item",SHADOW_PLACEHOLDER_ITEM_ID="id:dnd-shadow-placeholder-0000",DRAGGED_ELEMENT_ID="dnd-action-dragged-el";let ITEM_ID_KEY="id",activeDndZoneCount=0;function incrementActiveDropZoneCount(){activeDndZoneCount++}function decrementActiveDropZoneCount(){if(activeDndZoneCount===0)throw new Error("Bug! trying to decrement when there are no dropzones");activeDndZoneCount--}const isOnServer=typeof window=="undefined";function getBoundingRectNoTransforms(t){let e;const n=t.getBoundingClientRect(),r=getComputedStyle(t),o=r.transform;if(o){let i,a,s,l;if(o.startsWith("matrix3d("))e=o.slice(9,-1).split(/, /),i=+e[0],a=+e[5],s=+e[12],l=+e[13];else if(o.startsWith("matrix("))e=o.slice(7,-1).split(/, /),i=+e[0],a=+e[3],s=+e[4],l=+e[5];else return n;const c=r.transformOrigin,_=n.x-s-(1-i)*parseFloat(c),f=n.y-l-(1-a)*parseFloat(c.slice(c.indexOf(" ")+1)),u=i?n.width/i:t.offsetWidth,d=a?n.height/a:t.offsetHeight;return{x:_,y:f,width:u,height:d,top:f,right:_+u,bottom:f+d,left:_}}else return n}function getAbsoluteRectNoTransforms(t){const e=getBoundingRectNoTransforms(t);return{top:e.top+window.scrollY,bottom:e.bottom+window.scrollY,left:e.left+window.scrollX,right:e.right+window.scrollX}}function getAbsoluteRect(t){const e=t.getBoundingClientRect();return{top:e.top+window.scrollY,bottom:e.bottom+window.scrollY,left:e.left+window.scrollX,right:e.right+window.scrollX}}function findCenter(t){return{x:(t.left+t.right)/2,y:(t.top+t.bottom)/2}}function calcDistance(t,e){return Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))}function isPointInsideRect(t,e){return t.y<=e.bottom&&t.y>=e.top&&t.x>=e.left&&t.x<=e.right}function findCenterOfElement(t){return findCenter(getAbsoluteRect(t))}function isCenterOfAInsideB(t,e){const n=findCenterOfElement(t),r=getAbsoluteRectNoTransforms(e);return isPointInsideRect(n,r)}function calcDistanceBetweenCenters(t,e){const n=findCenterOfElement(t),r=findCenterOfElement(e);return calcDistance(n,r)}function isElementOffDocument(t){const e=getAbsoluteRect(t);return e.right<0||e.left>document.documentElement.scrollWidth||e.bottom<0||e.top>document.documentElement.scrollHeight}function calcInnerDistancesBetweenPointAndSidesOfElement(t,e){const n=getAbsoluteRect(e);return isPointInsideRect(t,n)?{top:t.y-n.top,bottom:n.bottom-t.y,left:t.x-n.left,right:Math.min(n.right,document.documentElement.clientWidth)-t.x}:null}let dzToShadowIndexToRect;function resetIndexesCache(){dzToShadowIndexToRect=new Map}resetIndexesCache();function resetIndexesCacheForDz(t){dzToShadowIndexToRect.delete(t)}function cacheShadowRect(t){const e=Array.from(t.children).findIndex(n=>n.getAttribute(SHADOW_ELEMENT_ATTRIBUTE_NAME));if(e>=0)return dzToShadowIndexToRect.has(t)||dzToShadowIndexToRect.set(t,new Map),dzToShadowIndexToRect.get(t).set(e,getAbsoluteRectNoTransforms(t.children[e])),e}function findWouldBeIndex(t,e){if(!isCenterOfAInsideB(t,e))return null;const n=e.children;if(n.length===0)return{index:0,isProximityBased:!0};const r=cacheShadowRect(e);for(let a=0;a<n.length;a++)if(isCenterOfAInsideB(t,n[a])){const s=dzToShadowIndexToRect.has(e)&&dzToShadowIndexToRect.get(e).get(a);return s&&!isPointInsideRect(findCenterOfElement(t),s)?{index:r,isProximityBased:!1}:{index:a,isProximityBased:!1}}let o=Number.MAX_VALUE,i;for(let a=0;a<n.length;a++){const s=calcDistanceBetweenCenters(t,n[a]);s<o&&(o=s,i=a)}return{index:i,isProximityBased:!0}}const SCROLL_ZONE_PX=25;function makeScroller(){let t;function e(){t={directionObj:void 0,stepPx:0}}e();function n(i){const{directionObj:a,stepPx:s}=t;a&&(i.scrollBy(a.x*s,a.y*s),window.requestAnimationFrame(()=>n(i)))}function r(i){return SCROLL_ZONE_PX-i}function o(i,a){if(!a)return!1;const s=calcInnerDistancesBetweenPointAndSidesOfElement(i,a);if(s===null)return e(),!1;const l=!!t.directionObj;let[c,_]=[!1,!1];return a.scrollHeight>a.clientHeight&&(s.bottom<SCROLL_ZONE_PX?(c=!0,t.directionObj={x:0,y:1},t.stepPx=r(s.bottom)):s.top<SCROLL_ZONE_PX&&(c=!0,t.directionObj={x:0,y:-1},t.stepPx=r(s.top)),!l&&c)||a.scrollWidth>a.clientWidth&&(s.right<SCROLL_ZONE_PX?(_=!0,t.directionObj={x:1,y:0},t.stepPx=r(s.right)):s.left<SCROLL_ZONE_PX&&(_=!0,t.directionObj={x:-1,y:0},t.stepPx=r(s.left)),!l&&_)?(n(a),!0):(e(),!1)}return{scrollIfNeeded:o,resetScrolling:e}}function toString(t){return JSON.stringify(t,null,2)}function getDepth(t){if(!t)throw new Error("cannot get depth of a falsy node");return _getDepth(t,0)}function _getDepth(t,e=0){return t.parentElement?_getDepth(t.parentElement,e+1):e-1}function areObjectsShallowEqual(t,e){if(Object.keys(t).length!==Object.keys(e).length)return!1;for(const n in t)if(!{}.hasOwnProperty.call(e,n)||e[n]!==t[n])return!1;return!0}function areArraysShallowEqualSameOrder(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}const INTERVAL_MS$1=200,TOLERANCE_PX=10,{scrollIfNeeded:scrollIfNeeded$1,resetScrolling:resetScrolling$1}=makeScroller();let next$1;function observe(t,e,n=INTERVAL_MS$1){let r,o,i=!1,a;const s=Array.from(e).sort((c,_)=>getDepth(_)-getDepth(c));function l(){const c=findCenterOfElement(t),_=scrollIfNeeded$1(c,r);if(!_&&a&&Math.abs(a.x-c.x)<TOLERANCE_PX&&Math.abs(a.y-c.y)<TOLERANCE_PX){next$1=window.setTimeout(l,n);return}if(isElementOffDocument(t)){dispatchDraggedLeftDocument(t);return}a=c;let f=!1;for(const u of s){_&&resetIndexesCacheForDz(r);const d=findWouldBeIndex(t,u);if(d===null)continue;const{index:m}=d;f=!0,u!==r?(r&&dispatchDraggedElementLeftContainerForAnother(r,t,u),dispatchDraggedElementEnteredContainer(u,d,t),r=u):m!==o&&(dispatchDraggedElementIsOverIndex(u,d,t),o=m);break}!f&&i&&r?(dispatchDraggedElementLeftContainerForNone(r,t),r=void 0,o=void 0,i=!1):i=!0,next$1=window.setTimeout(l,n)}l()}function unobserve(){clearTimeout(next$1),resetScrolling$1(),resetIndexesCache()}const INTERVAL_MS=300;let mousePosition;function updateMousePosition(t){const e=t.touches?t.touches[0]:t;mousePosition={x:e.clientX,y:e.clientY}}const{scrollIfNeeded,resetScrolling}=makeScroller();let next;function loop(){mousePosition&&scrollIfNeeded(mousePosition,document.documentElement)&&resetIndexesCache(),next=window.setTimeout(loop,INTERVAL_MS)}function armWindowScroller(){window.addEventListener("mousemove",updateMousePosition),window.addEventListener("touchmove",updateMousePosition),loop()}function disarmWindowScroller(){window.removeEventListener("mousemove",updateMousePosition),window.removeEventListener("touchmove",updateMousePosition),mousePosition=void 0,window.clearTimeout(next),resetScrolling()}function svelteNodeClone(t){const e=t.cloneNode(!0),n=[],r=t.tagName==="SELECT",o=r?[t]:[...t.querySelectorAll("select")];for(const a of o)n.push(a.value);if(o.length<=0)return e;const i=r?[e]:[...e.querySelectorAll("select")];for(let a=0;a<i.length;a++){const s=i[a],l=n[a],c=s.querySelector(`option[value="${l}"`);c&&c.setAttribute("selected",!0)}return e}const TRANSITION_DURATION_SECONDS=.2;function trs(t){return`${t} ${TRANSITION_DURATION_SECONDS}s ease`}function createDraggedElementFrom(t,e){const n=t.getBoundingClientRect(),r=svelteNodeClone(t);copyStylesFromTo(t,r),r.id=DRAGGED_ELEMENT_ID,r.style.position="fixed";let o=n.top,i=n.left;if(r.style.top=`${o}px`,r.style.left=`${i}px`,e){const a=findCenter(n);o-=a.y-e.y,i-=a.x-e.x,window.setTimeout(()=>{r.style.top=`${o}px`,r.style.left=`${i}px`},0)}return r.style.margin="0",r.style.boxSizing="border-box",r.style.height=`${n.height}px`,r.style.width=`${n.width}px`,r.style.transition=`${trs("top")}, ${trs("left")}, ${trs("background-color")}, ${trs("opacity")}, ${trs("color")} `,window.setTimeout(()=>r.style.transition+=`, ${trs("width")}, ${trs("height")}`,0),r.style.zIndex="9999",r.style.cursor="grabbing",r}function moveDraggedElementToWasDroppedState(t){t.style.cursor="grab"}function morphDraggedElementToBeLike(t,e,n,r,o){const i=e.getBoundingClientRect(),a=t.getBoundingClientRect(),s=i.width-a.width,l=i.height-a.height;if(s||l){const c={left:(n-a.left)/a.width,top:(r-a.top)/a.height};t.style.height=`${i.height}px`,t.style.width=`${i.width}px`,t.style.left=`${parseFloat(t.style.left)-c.left*s}px`,t.style.top=`${parseFloat(t.style.top)-c.top*l}px`}copyStylesFromTo(e,t),o()}function copyStylesFromTo(t,e){const n=window.getComputedStyle(t);Array.from(n).filter(r=>r.startsWith("background")||r.startsWith("padding")||r.startsWith("font")||r.startsWith("text")||r.startsWith("align")||r.startsWith("justify")||r.startsWith("display")||r.startsWith("flex")||r.startsWith("border")||r==="opacity"||r==="color"||r==="list-style-type").forEach(r=>e.style.setProperty(r,n.getPropertyValue(r),n.getPropertyPriority(r)))}function styleDraggable(t,e){t.draggable=!1,t.ondragstart=()=>!1,e?(t.style.userSelect="",t.style.WebkitUserSelect="",t.style.cursor=""):(t.style.userSelect="none",t.style.WebkitUserSelect="none",t.style.cursor="grab")}function hideElement(t){t.style.display="none",t.style.position="fixed",t.style.zIndex="-5"}function decorateShadowEl(t){t.style.visibility="hidden",t.setAttribute(SHADOW_ELEMENT_ATTRIBUTE_NAME,"true")}function unDecorateShadowElement(t){t.style.visibility="",t.removeAttribute(SHADOW_ELEMENT_ATTRIBUTE_NAME)}function styleActiveDropZones(t,e=()=>{},n=()=>[]){t.forEach(r=>{const o=e(r);Object.keys(o).forEach(i=>{r.style[i]=o[i]}),n(r).forEach(i=>r.classList.add(i))})}function styleInactiveDropZones(t,e=()=>{},n=()=>[]){t.forEach(r=>{const o=e(r);Object.keys(o).forEach(i=>{r.style[i]=""}),n(r).forEach(i=>r.classList.contains(i)&&r.classList.remove(i))})}function preventShrinking(t){const e=t.style.minHeight;t.style.minHeight=window.getComputedStyle(t).getPropertyValue("height");const n=t.style.minWidth;return t.style.minWidth=window.getComputedStyle(t).getPropertyValue("width"),function(){t.style.minHeight=e,t.style.minWidth=n}}const DEFAULT_DROP_ZONE_TYPE$1="--any--",MIN_OBSERVATION_INTERVAL_MS=100,MIN_MOVEMENT_BEFORE_DRAG_START_PX=3,DEFAULT_DROP_TARGET_STYLE$1={outline:"rgba(255, 255, 102, 0.7) solid 2px"};let originalDragTarget,draggedEl,draggedElData,draggedElType,originDropZone,originIndex,shadowElData,shadowElDropZone,dragStartMousePosition,currentMousePosition,isWorkingOnPreviousDrag=!1,finalizingPreviousDrag=!1,unlockOriginDzMinDimensions,isDraggedOutsideOfAnyDz=!1,scheduledForRemovalAfterDrop=[];const typeToDropZones$1=new Map,dzToConfig$1=new Map,elToMouseDownListener=new WeakMap;function registerDropZone$1(t,e){typeToDropZones$1.has(e)||typeToDropZones$1.set(e,new Set),typeToDropZones$1.get(e).has(t)||(typeToDropZones$1.get(e).add(t),incrementActiveDropZoneCount())}function unregisterDropZone$1(t,e){typeToDropZones$1.get(e).delete(t),decrementActiveDropZoneCount(),typeToDropZones$1.get(e).size===0&&typeToDropZones$1.delete(e)}function watchDraggedElement(){armWindowScroller();const t=typeToDropZones$1.get(draggedElType);for(const n of t)n.addEventListener(DRAGGED_ENTERED_EVENT_NAME,handleDraggedEntered),n.addEventListener(DRAGGED_LEFT_EVENT_NAME,handleDraggedLeft),n.addEventListener(DRAGGED_OVER_INDEX_EVENT_NAME,handleDraggedIsOverIndex);window.addEventListener(DRAGGED_LEFT_DOCUMENT_EVENT_NAME,handleDrop$1);const e=Math.max(MIN_OBSERVATION_INTERVAL_MS,...Array.from(t.keys()).map(n=>dzToConfig$1.get(n).dropAnimationDurationMs));observe(draggedEl,t,e*1.07)}function unWatchDraggedElement(){disarmWindowScroller();const t=typeToDropZones$1.get(draggedElType);for(const e of t)e.removeEventListener(DRAGGED_ENTERED_EVENT_NAME,handleDraggedEntered),e.removeEventListener(DRAGGED_LEFT_EVENT_NAME,handleDraggedLeft),e.removeEventListener(DRAGGED_OVER_INDEX_EVENT_NAME,handleDraggedIsOverIndex);window.removeEventListener(DRAGGED_LEFT_DOCUMENT_EVENT_NAME,handleDrop$1),unobserve()}function findShadowPlaceHolderIdx(t){return t.findIndex(e=>e[ITEM_ID_KEY]===SHADOW_PLACEHOLDER_ITEM_ID)}function findShadowElementIdx(t){return t.findIndex(e=>!!e[SHADOW_ITEM_MARKER_PROPERTY_NAME]&&e[ITEM_ID_KEY]!==SHADOW_PLACEHOLDER_ITEM_ID)}function handleDraggedEntered(t){let{items:e,dropFromOthersDisabled:n}=dzToConfig$1.get(t.currentTarget);if(n&&t.currentTarget!==originDropZone)return;if(isDraggedOutsideOfAnyDz=!1,e=e.filter(a=>a[ITEM_ID_KEY]!==shadowElData[ITEM_ID_KEY]),originDropZone!==t.currentTarget){const s=dzToConfig$1.get(originDropZone).items.filter(l=>!l[SHADOW_ITEM_MARKER_PROPERTY_NAME]);dispatchConsiderEvent(originDropZone,s,{trigger:TRIGGERS.DRAGGED_ENTERED_ANOTHER,id:draggedElData[ITEM_ID_KEY],source:SOURCES.POINTER})}else{const a=findShadowPlaceHolderIdx(e);a!==-1&&e.splice(a,1)}const{index:r,isProximityBased:o}=t.detail.indexObj,i=o&&r===t.currentTarget.children.length-1?r+1:r;shadowElDropZone=t.currentTarget,e.splice(i,0,shadowElData),dispatchConsiderEvent(t.currentTarget,e,{trigger:TRIGGERS.DRAGGED_ENTERED,id:draggedElData[ITEM_ID_KEY],source:SOURCES.POINTER})}function handleDraggedLeft(t){if(!isWorkingOnPreviousDrag)return;const{items:e,dropFromOthersDisabled:n}=dzToConfig$1.get(t.currentTarget);if(n&&t.currentTarget!==originDropZone&&t.currentTarget!==shadowElDropZone)return;const r=findShadowElementIdx(e),o=e.splice(r,1)[0];shadowElDropZone=void 0;const{type:i,theOtherDz:a}=t.detail;if(i===DRAGGED_LEFT_TYPES.OUTSIDE_OF_ANY||i===DRAGGED_LEFT_TYPES.LEFT_FOR_ANOTHER&&a!==originDropZone&&dzToConfig$1.get(a).dropFromOthersDisabled){isDraggedOutsideOfAnyDz=!0,shadowElDropZone=originDropZone;const s=dzToConfig$1.get(originDropZone).items;s.splice(originIndex,0,o),dispatchConsiderEvent(originDropZone,s,{trigger:TRIGGERS.DRAGGED_LEFT_ALL,id:draggedElData[ITEM_ID_KEY],source:SOURCES.POINTER})}dispatchConsiderEvent(t.currentTarget,e,{trigger:TRIGGERS.DRAGGED_LEFT,id:draggedElData[ITEM_ID_KEY],source:SOURCES.POINTER})}function handleDraggedIsOverIndex(t){const{items:e,dropFromOthersDisabled:n}=dzToConfig$1.get(t.currentTarget);if(n&&t.currentTarget!==originDropZone)return;isDraggedOutsideOfAnyDz=!1;const{index:r}=t.detail.indexObj,o=findShadowElementIdx(e);e.splice(o,1),e.splice(r,0,shadowElData),dispatchConsiderEvent(t.currentTarget,e,{trigger:TRIGGERS.DRAGGED_OVER_INDEX,id:draggedElData[ITEM_ID_KEY],source:SOURCES.POINTER})}function handleMouseMove(t){t.preventDefault();const e=t.touches?t.touches[0]:t;currentMousePosition={x:e.clientX,y:e.clientY},draggedEl.style.transform=`translate3d(${currentMousePosition.x-dragStartMousePosition.x}px, ${currentMousePosition.y-dragStartMousePosition.y}px, 0)`}function handleDrop$1(){finalizingPreviousDrag=!0,window.removeEventListener("mousemove",handleMouseMove),window.removeEventListener("touchmove",handleMouseMove),window.removeEventListener("mouseup",handleDrop$1),window.removeEventListener("touchend",handleDrop$1),unWatchDraggedElement(),moveDraggedElementToWasDroppedState(draggedEl),shadowElDropZone||(shadowElDropZone=originDropZone);let{items:t,type:e}=dzToConfig$1.get(shadowElDropZone);styleInactiveDropZones(typeToDropZones$1.get(e),o=>dzToConfig$1.get(o).dropTargetStyle,o=>dzToConfig$1.get(o).dropTargetClasses);let n=findShadowElementIdx(t);n===-1&&(n=originIndex),t=t.map(o=>o[SHADOW_ITEM_MARKER_PROPERTY_NAME]?draggedElData:o);function r(){unlockOriginDzMinDimensions(),dispatchFinalizeEvent(shadowElDropZone,t,{trigger:isDraggedOutsideOfAnyDz?TRIGGERS.DROPPED_OUTSIDE_OF_ANY:TRIGGERS.DROPPED_INTO_ZONE,id:draggedElData[ITEM_ID_KEY],source:SOURCES.POINTER}),shadowElDropZone!==originDropZone&&dispatchFinalizeEvent(originDropZone,dzToConfig$1.get(originDropZone).items,{trigger:TRIGGERS.DROPPED_INTO_ANOTHER,id:draggedElData[ITEM_ID_KEY],source:SOURCES.POINTER}),unDecorateShadowElement(shadowElDropZone.children[n]),cleanupPostDrop()}animateDraggedToFinalPosition(n,r)}function animateDraggedToFinalPosition(t,e){const n=getBoundingRectNoTransforms(shadowElDropZone.children[t]),r={x:n.left-parseFloat(draggedEl.style.left),y:n.top-parseFloat(draggedEl.style.top)},{dropAnimationDurationMs:o}=dzToConfig$1.get(shadowElDropZone),i=`transform ${o}ms ease`;draggedEl.style.transition=draggedEl.style.transition?draggedEl.style.transition+","+i:i,draggedEl.style.transform=`translate3d(${r.x}px, ${r.y}px, 0)`,window.setTimeout(e,o)}function scheduleDZForRemovalAfterDrop(t,e){scheduledForRemovalAfterDrop.push({dz:t,destroy:e}),window.requestAnimationFrame(()=>{hideElement(t),document.body.appendChild(t)})}function cleanupPostDrop(){draggedEl.remove(),originalDragTarget.remove(),scheduledForRemovalAfterDrop.length&&(scheduledForRemovalAfterDrop.forEach(({dz:t,destroy:e})=>{e(),t.remove()}),scheduledForRemovalAfterDrop=[]),draggedEl=void 0,originalDragTarget=void 0,draggedElData=void 0,draggedElType=void 0,originDropZone=void 0,originIndex=void 0,shadowElData=void 0,shadowElDropZone=void 0,dragStartMousePosition=void 0,currentMousePosition=void 0,isWorkingOnPreviousDrag=!1,finalizingPreviousDrag=!1,unlockOriginDzMinDimensions=void 0,isDraggedOutsideOfAnyDz=!1}function dndzone$2(t,e){let n=!1;const r={items:void 0,type:void 0,flipDurationMs:0,dragDisabled:!1,morphDisabled:!1,dropFromOthersDisabled:!1,dropTargetStyle:DEFAULT_DROP_TARGET_STYLE$1,dropTargetClasses:[],transformDraggedElement:()=>{},centreDraggedOnCursor:!1};let o=new Map;function i(){window.addEventListener("mousemove",l,{passive:!1}),window.addEventListener("touchmove",l,{passive:!1,capture:!1}),window.addEventListener("mouseup",s,{passive:!1}),window.addEventListener("touchend",s,{passive:!1})}function a(){window.removeEventListener("mousemove",l),window.removeEventListener("touchmove",l),window.removeEventListener("mouseup",s),window.removeEventListener("touchend",s)}function s(){a(),originalDragTarget=void 0,dragStartMousePosition=void 0,currentMousePosition=void 0}function l(u){u.preventDefault();const d=u.touches?u.touches[0]:u;currentMousePosition={x:d.clientX,y:d.clientY},(Math.abs(currentMousePosition.x-dragStartMousePosition.x)>=MIN_MOVEMENT_BEFORE_DRAG_START_PX||Math.abs(currentMousePosition.y-dragStartMousePosition.y)>=MIN_MOVEMENT_BEFORE_DRAG_START_PX)&&(a(),_())}function c(u){if(u.target!==u.currentTarget&&(u.target.value!==void 0||u.target.isContentEditable)||u.button||isWorkingOnPreviousDrag)return;u.stopPropagation();const d=u.touches?u.touches[0]:u;dragStartMousePosition={x:d.clientX,y:d.clientY},currentMousePosition=Z({},dragStartMousePosition),originalDragTarget=u.currentTarget,i()}function _(){isWorkingOnPreviousDrag=!0;const u=o.get(originalDragTarget);originIndex=u,originDropZone=originalDragTarget.parentElement;const d=originDropZone.getRootNode(),m=d.body||d,{items:y,type:v,centreDraggedOnCursor:g}=r;draggedElData=Z({},y[u]),draggedElType=v,shadowElData=re(Z({},draggedElData),{[SHADOW_ITEM_MARKER_PROPERTY_NAME]:!0});const E=re(Z({},shadowElData),{[ITEM_ID_KEY]:SHADOW_PLACEHOLDER_ITEM_ID});draggedEl=createDraggedElementFrom(originalDragTarget,g&&currentMousePosition);function h(){draggedEl.parentElement?window.requestAnimationFrame(h):(m.appendChild(draggedEl),draggedEl.focus(),watchDraggedElement(),hideElement(originalDragTarget),m.appendChild(originalDragTarget))}window.requestAnimationFrame(h),styleActiveDropZones(Array.from(typeToDropZones$1.get(r.type)).filter(S=>S===originDropZone||!dzToConfig$1.get(S).dropFromOthersDisabled),S=>dzToConfig$1.get(S).dropTargetStyle,S=>dzToConfig$1.get(S).dropTargetClasses),y.splice(u,1,E),unlockOriginDzMinDimensions=preventShrinking(originDropZone),dispatchConsiderEvent(originDropZone,y,{trigger:TRIGGERS.DRAG_STARTED,id:draggedElData[ITEM_ID_KEY],source:SOURCES.POINTER}),window.addEventListener("mousemove",handleMouseMove,{passive:!1}),window.addEventListener("touchmove",handleMouseMove,{passive:!1,capture:!1}),window.addEventListener("mouseup",handleDrop$1,{passive:!1}),window.addEventListener("touchend",handleDrop$1,{passive:!1})}function f({items:u=void 0,flipDurationMs:d=0,type:m=DEFAULT_DROP_ZONE_TYPE$1,dragDisabled:y=!1,morphDisabled:v=!1,dropFromOthersDisabled:g=!1,dropTargetStyle:E=DEFAULT_DROP_TARGET_STYLE$1,dropTargetClasses:h=[],transformDraggedElement:S=()=>{},centreDraggedOnCursor:R=!1}){r.dropAnimationDurationMs=d,r.type&&m!==r.type&&unregisterDropZone$1(t,r.type),r.type=m,registerDropZone$1(t,m),r.items=[...u],r.dragDisabled=y,r.morphDisabled=v,r.transformDraggedElement=S,r.centreDraggedOnCursor=R,n&&isWorkingOnPreviousDrag&&!finalizingPreviousDrag&&(!areObjectsShallowEqual(E,r.dropTargetStyle)||!areArraysShallowEqualSameOrder(h,r.dropTargetClasses))&&(styleInactiveDropZones([t],()=>r.dropTargetStyle,()=>h),styleActiveDropZones([t],()=>E,()=>h)),r.dropTargetStyle=E,r.dropTargetClasses=[...h];function b(T,D){return dzToConfig$1.get(T)?dzToConfig$1.get(T)[D]:r[D]}n&&isWorkingOnPreviousDrag&&r.dropFromOthersDisabled!==g&&(g?styleInactiveDropZones([t],T=>b(T,"dropTargetStyle"),T=>b(T,"dropTargetClasses")):styleActiveDropZones([t],T=>b(T,"dropTargetStyle"),T=>b(T,"dropTargetClasses"))),r.dropFromOthersDisabled=g,dzToConfig$1.set(t,r);const I=findShadowElementIdx(r.items);for(let T=0;T<t.children.length;T++){const D=t.children[T];if(styleDraggable(D,y),T===I){v||morphDraggedElementToBeLike(draggedEl,D,currentMousePosition.x,currentMousePosition.y,()=>r.transformDraggedElement(draggedEl,draggedElData,T)),decorateShadowEl(D);continue}D.removeEventListener("mousedown",elToMouseDownListener.get(D)),D.removeEventListener("touchstart",elToMouseDownListener.get(D)),y||(D.addEventListener("mousedown",c),D.addEventListener("touchstart",c),elToMouseDownListener.set(D,c)),o.set(D,T),n||(n=!0)}}return f(e),{update:u=>{f(u)},destroy:()=>{function u(){unregisterDropZone$1(t,dzToConfig$1.get(t).type),dzToConfig$1.delete(t)}isWorkingOnPreviousDrag?scheduleDZForRemovalAfterDrop(t,u):u()}}}const INSTRUCTION_IDs$1={DND_ZONE_ACTIVE:"dnd-zone-active",DND_ZONE_DRAG_DISABLED:"dnd-zone-drag-disabled"},ID_TO_INSTRUCTION={[INSTRUCTION_IDs$1.DND_ZONE_ACTIVE]:"Tab to one the items and press space-bar or enter to start dragging it",[INSTRUCTION_IDs$1.DND_ZONE_DRAG_DISABLED]:"This is a disabled drag and drop list"},ALERT_DIV_ID="dnd-action-aria-alert";let alertsDiv;function initAriaOnBrowser(){alertsDiv||(alertsDiv=document.createElement("div"),function(){alertsDiv.id=ALERT_DIV_ID,alertsDiv.style.position="fixed",alertsDiv.style.bottom="0",alertsDiv.style.left="0",alertsDiv.style.zIndex="-5",alertsDiv.style.opacity="0",alertsDiv.style.height="0",alertsDiv.style.width="0",alertsDiv.setAttribute("role","alert")}(),document.body.prepend(alertsDiv),Object.entries(ID_TO_INSTRUCTION).forEach(([t,e])=>document.body.prepend(instructionToHiddenDiv(t,e))))}function initAria(){return isOnServer?null:(document.readyState==="complete"?initAriaOnBrowser():window.addEventListener("DOMContentLoaded",initAriaOnBrowser),Z({},INSTRUCTION_IDs$1))}function destroyAria(){isOnServer||!alertsDiv||(Object.keys(ID_TO_INSTRUCTION).forEach(t=>{var e;return(e=document.getElementById(t))==null?void 0:e.remove()}),alertsDiv.remove(),alertsDiv=void 0)}function instructionToHiddenDiv(t,e){const n=document.createElement("div");return n.id=t,n.innerHTML=`<p>${e}</p>`,n.style.display="none",n.style.position="fixed",n.style.zIndex="-5",n}function alertToScreenReader(t){if(isOnServer)return;alertsDiv||initAriaOnBrowser(),alertsDiv.innerHTML="";const e=document.createTextNode(t);alertsDiv.appendChild(e),alertsDiv.style.display="none",alertsDiv.style.display="inline"}const DEFAULT_DROP_ZONE_TYPE="--any--",DEFAULT_DROP_TARGET_STYLE={outline:"rgba(255, 255, 102, 0.7) solid 2px"};let isDragging=!1,draggedItemType,focusedDz,focusedDzLabel="",focusedItem,focusedItemId,focusedItemLabel="";const allDragTargets=new WeakSet,elToKeyDownListeners=new WeakMap,elToFocusListeners=new WeakMap,dzToHandles=new Map,dzToConfig=new Map,typeToDropZones=new Map;let INSTRUCTION_IDs;function registerDropZone(t,e){typeToDropZones.size===0&&(INSTRUCTION_IDs=initAria(),window.addEventListener("keydown",globalKeyDownHandler),window.addEventListener("click",globalClickHandler)),typeToDropZones.has(e)||typeToDropZones.set(e,new Set),typeToDropZones.get(e).has(t)||(typeToDropZones.get(e).add(t),incrementActiveDropZoneCount())}function unregisterDropZone(t,e){focusedDz===t&&handleDrop(),typeToDropZones.get(e).delete(t),decrementActiveDropZoneCount(),typeToDropZones.get(e).size===0&&typeToDropZones.delete(e),typeToDropZones.size===0&&(window.removeEventListener("keydown",globalKeyDownHandler),window.removeEventListener("click",globalClickHandler),INSTRUCTION_IDs=void 0,destroyAria())}function globalKeyDownHandler(t){if(!!isDragging)switch(t.key){case"Escape":{handleDrop();break}}}function globalClickHandler(){!isDragging||allDragTargets.has(document.activeElement)||handleDrop()}function handleZoneFocus(t){if(!isDragging)return;const e=t.currentTarget;if(e===focusedDz)return;focusedDzLabel=e.getAttribute("aria-label")||"";const{items:n}=dzToConfig.get(focusedDz),r=n.find(c=>c[ITEM_ID_KEY]===focusedItemId),o=n.indexOf(r),i=n.splice(o,1)[0],{items:a,autoAriaDisabled:s}=dzToConfig.get(e);e.getBoundingClientRect().top<focusedDz.getBoundingClientRect().top||e.getBoundingClientRect().left<focusedDz.getBoundingClientRect().left?(a.push(i),s||alertToScreenReader(`Moved item ${focusedItemLabel} to the end of the list ${focusedDzLabel}`)):(a.unshift(i),s||alertToScreenReader(`Moved item ${focusedItemLabel} to the beginning of the list ${focusedDzLabel}`)),dispatchFinalizeEvent(focusedDz,n,{trigger:TRIGGERS.DROPPED_INTO_ANOTHER,id:focusedItemId,source:SOURCES.KEYBOARD}),dispatchFinalizeEvent(e,a,{trigger:TRIGGERS.DROPPED_INTO_ZONE,id:focusedItemId,source:SOURCES.KEYBOARD}),focusedDz=e}function triggerAllDzsUpdate(){dzToHandles.forEach(({update:t},e)=>t(dzToConfig.get(e)))}function handleDrop(t=!0){dzToConfig.get(focusedDz).autoAriaDisabled||alertToScreenReader(`Stopped dragging item ${focusedItemLabel}`),allDragTargets.has(document.activeElement)&&document.activeElement.blur(),t&&dispatchConsiderEvent(focusedDz,dzToConfig.get(focusedDz).items,{trigger:TRIGGERS.DRAG_STOPPED,id:focusedItemId,source:SOURCES.KEYBOARD}),styleInactiveDropZones(typeToDropZones.get(draggedItemType),e=>dzToConfig.get(e).dropTargetStyle,e=>dzToConfig.get(e).dropTargetClasses),focusedItem=null,focusedItemId=null,focusedItemLabel="",draggedItemType=null,focusedDz=null,focusedDzLabel="",isDragging=!1,triggerAllDzsUpdate()}function dndzone$1(t,e){const n={items:void 0,type:void 0,dragDisabled:!1,zoneTabIndex:0,dropFromOthersDisabled:!1,dropTargetStyle:DEFAULT_DROP_TARGET_STYLE,dropTargetClasses:[],autoAriaDisabled:!1};function r(_,f,u){_.length<=1||_.splice(u,1,_.splice(f,1,_[u])[0])}function o(_){switch(_.key){case"Enter":case" ":{if((_.target.disabled!==void 0||_.target.href||_.target.isContentEditable)&&!allDragTargets.has(_.target))return;_.preventDefault(),_.stopPropagation(),isDragging?handleDrop():i(_);break}case"ArrowDown":case"ArrowRight":{if(!isDragging)return;_.preventDefault(),_.stopPropagation();const{items:f}=dzToConfig.get(t),u=Array.from(t.children),d=u.indexOf(_.currentTarget);d<u.length-1&&(n.autoAriaDisabled||alertToScreenReader(`Moved item ${focusedItemLabel} to position ${d+2} in the list ${focusedDzLabel}`),r(f,d,d+1),dispatchFinalizeEvent(t,f,{trigger:TRIGGERS.DROPPED_INTO_ZONE,id:focusedItemId,source:SOURCES.KEYBOARD}));break}case"ArrowUp":case"ArrowLeft":{if(!isDragging)return;_.preventDefault(),_.stopPropagation();const{items:f}=dzToConfig.get(t),d=Array.from(t.children).indexOf(_.currentTarget);d>0&&(n.autoAriaDisabled||alertToScreenReader(`Moved item ${focusedItemLabel} to position ${d} in the list ${focusedDzLabel}`),r(f,d,d-1),dispatchFinalizeEvent(t,f,{trigger:TRIGGERS.DROPPED_INTO_ZONE,id:focusedItemId,source:SOURCES.KEYBOARD}));break}}}function i(_){s(_.currentTarget),focusedDz=t,draggedItemType=n.type,isDragging=!0;const f=Array.from(typeToDropZones.get(n.type)).filter(u=>u===focusedDz||!dzToConfig.get(u).dropFromOthersDisabled);if(styleActiveDropZones(f,u=>dzToConfig.get(u).dropTargetStyle,u=>dzToConfig.get(u).dropTargetClasses),!n.autoAriaDisabled){let u=`Started dragging item ${focusedItemLabel}. Use the arrow keys to move it within its list ${focusedDzLabel}`;f.length>1&&(u+=", or tab to another list in order to move the item into it"),alertToScreenReader(u)}dispatchConsiderEvent(t,dzToConfig.get(t).items,{trigger:TRIGGERS.DRAG_STARTED,id:focusedItemId,source:SOURCES.KEYBOARD}),triggerAllDzsUpdate()}function a(_){!isDragging||_.currentTarget!==focusedItem&&(_.stopPropagation(),handleDrop(!1),i(_))}function s(_){const{items:f}=dzToConfig.get(t),u=Array.from(t.children),d=u.indexOf(_);focusedItem=_,focusedItem.tabIndex=0,focusedItemId=f[d][ITEM_ID_KEY],focusedItemLabel=u[d].getAttribute("aria-label")||""}function l({items:_=[],type:f=DEFAULT_DROP_ZONE_TYPE,dragDisabled:u=!1,zoneTabIndex:d=0,dropFromOthersDisabled:m=!1,dropTargetStyle:y=DEFAULT_DROP_TARGET_STYLE,dropTargetClasses:v=[],autoAriaDisabled:g=!1}){n.items=[..._],n.dragDisabled=u,n.dropFromOthersDisabled=m,n.zoneTabIndex=d,n.dropTargetStyle=y,n.dropTargetClasses=v,n.autoAriaDisabled=g,n.type&&f!==n.type&&unregisterDropZone(t,n.type),n.type=f,registerDropZone(t,f),g||(t.setAttribute("aria-disabled",u),t.setAttribute("role","list"),t.setAttribute("aria-describedby",u?INSTRUCTION_IDs.DND_ZONE_DRAG_DISABLED:INSTRUCTION_IDs.DND_ZONE_ACTIVE)),dzToConfig.set(t,n),isDragging?t.tabIndex=t===focusedDz||focusedItem.contains(t)||n.dropFromOthersDisabled||focusedDz&&n.type!==dzToConfig.get(focusedDz).type?-1:0:t.tabIndex=n.zoneTabIndex,t.addEventListener("focus",handleZoneFocus);for(let E=0;E<t.children.length;E++){const h=t.children[E];allDragTargets.add(h),h.tabIndex=isDragging?-1:0,g||h.setAttribute("role","listitem"),h.removeEventListener("keydown",elToKeyDownListeners.get(h)),h.removeEventListener("click",elToFocusListeners.get(h)),u||(h.addEventListener("keydown",o),elToKeyDownListeners.set(h,o),h.addEventListener("click",a),elToFocusListeners.set(h,a)),isDragging&&n.items[E][ITEM_ID_KEY]===focusedItemId&&(focusedItem=h,focusedItem.tabIndex=0,h.focus())}}l(e);const c={update:_=>{l(_)},destroy:()=>{unregisterDropZone(t,n.type),dzToConfig.delete(t),dzToHandles.delete(t)}};return dzToHandles.set(t,c),c}function dndzone(t,e){validateOptions(e);const n=dndzone$2(t,e),r=dndzone$1(t,e);return{update:o=>{validateOptions(o),n.update(o),r.update(o)},destroy:()=>{n.destroy(),r.destroy()}}}function validateOptions(t){const y=t,{items:e,flipDurationMs:n,type:r,dragDisabled:o,morphDisabled:i,dropFromOthersDisabled:a,zoneTabIndex:s,dropTargetStyle:l,dropTargetClasses:c,transformDraggedElement:_,autoAriaDisabled:f,centreDraggedOnCursor:u}=y,d=se(y,["items","flipDurationMs","type","dragDisabled","morphDisabled","dropFromOthersDisabled","zoneTabIndex","dropTargetStyle","dropTargetClasses","transformDraggedElement","autoAriaDisabled","centreDraggedOnCursor"]);if(Object.keys(d).length>0&&console.warn("dndzone will ignore unknown options",d),!e)throw new Error("no 'items' key provided to dndzone");const m=e.find(v=>!{}.hasOwnProperty.call(v,ITEM_ID_KEY));if(m)throw new Error(`missing '${ITEM_ID_KEY}' property for item ${toString(m)}`);if(c&&!Array.isArray(c))throw new Error(`dropTargetClasses should be an array but instead it is a ${typeof c}, ${toString(c)}`);if(s&&!isInt(s))throw new Error(`zoneTabIndex should be a number but instead it is a ${typeof s}, ${toString(s)}`)}function isInt(t){return!isNaN(t)&&function(e){return(e|0)===e}(parseFloat(t))}function isSubscription(t){return"subscription"in t}function isGroup(t){return"subscriptions"in t}var SubscriptionsEditor_svelte_svelte_type_style_lang="";const{Map:Map_1}=globals;function get_each_context(t,e,n){const r=t.slice();return r[44]=e[n],r}function get_each_context_1(t,e,n){const r=t.slice();return r[47]=e[n],r}function get_each_context_2(t,e,n){const r=t.slice();return r[44]=e[n],r}function create_default_slot_6(t){let e,n,r,o,i,a,s,l;return{c(){e=element("div"),n=element("p"),n.textContent="Deck Editor",r=space(),o=element("label"),i=element("input"),a=text(`
              Hide added subscriptions`),attr(n,"class","font-extrabold"),attr(i,"type","checkbox"),i.value=t[2],attr(e,"class","min-w-[14rem]")},m(c,_){insert(c,e,_),append(e,n),append(e,r),append(e,o),append(o,i),append(o,a),s||(l=listen(i,"change",t[9]),s=!0)},p(c,_){_[0]&4&&(i.value=c[2])},d(c){c&&detach(e),s=!1,l()}}}function create_default_slot_5(t){let e;return{c(){e=text("Subscriptions")},m(n,r){insert(n,e,r)},d(n){n&&detach(e)}}}function create_each_block_2(t,e){let n,r,o,i,a,s,l,c=e[44].subscription.title+"",_,f,u,d,m=noop,y,v;return{key:t,first:null,c(){n=element("div"),r=element("img"),s=space(),l=element("span"),_=text(c),u=space(),attr(r,"class","inline-block h-8 w-8 rounded-2xl align-middle"),src_url_equal(r.src,o=e[44].subscription.thumbnailUrl)||attr(r,"src",o),attr(r,"alt",""),attr(r,"loading","lazy"),attr(r,"width","88"),attr(r,"height","88"),attr(r,"tabindex",i=e[7]?0:-1),attr(r,"aria-label","drag-handle"),attr(r,"style",a=e[7]?"cursor: grab":"cursor: grabbing"),attr(l,"class","inline-block h-8 align-text-top truncate"),set_style(l,"max-width","calc(100% - 2.5rem)"),attr(l,"title",f=e[44].subscription.title),attr(n,"class","bg-neutral-700 m-1 p-0.5 rounded-2xl"),set_style(n,"width","calc(100% - 0.5rem)"),this.first=n},m(g,E){insert(g,n,E),append(n,r),append(n,s),append(n,l),append(l,_),append(n,u),y||(v=[listen(r,"mousedown",e[22]),listen(r,"touchstart",e[22]),listen(r,"keydown",e[23])],y=!0)},p(g,E){e=g,E[0]&8&&!src_url_equal(r.src,o=e[44].subscription.thumbnailUrl)&&attr(r,"src",o),E[0]&128&&i!==(i=e[7]?0:-1)&&attr(r,"tabindex",i),E[0]&128&&a!==(a=e[7]?"cursor: grab":"cursor: grabbing")&&attr(r,"style",a),E[0]&8&&c!==(c=e[44].subscription.title+"")&&set_data(_,c),E[0]&8&&f!==(f=e[44].subscription.title)&&attr(l,"title",f)},r(){d=n.getBoundingClientRect()},f(){fix_position(n),m()},a(){m(),m=create_animation(n,d,flip,{duration:flipDurationMs})},d(g){g&&detach(n),y=!1,run_all(v)}}}function create_default_slot_4(t){let e;return{c(){e=text("Deck")},m(n,r){insert(n,e,r)},d(n){n&&detach(e)}}}function create_if_block_1(t){let e,n,r,o,i,a,s=t[44].name+"",l,c,_,f,u=[],d=new Map_1,m,y,v,g;n=new FaLayers({props:{size:"2x",class:"-mx-1",$$slots:{default:[create_default_slot_3]},$$scope:{ctx:t}}});let E=t[44].subscriptions;const h=b=>b[47].id;for(let b=0;b<E.length;b+=1){let I=get_each_context_1(t,E,b),T=h(I);d.set(T,u[b]=create_each_block_1(T,I))}function S(...b){return t[27](t[44],...b)}function R(...b){return t[28](t[44],...b)}return{c(){e=element("span"),create_component(n.$$.fragment),i=space(),a=element("span"),l=text(s),_=space(),f=element("div");for(let b=0;b<u.length;b+=1)u[b].c();attr(e,"class","inline-block h-8 w-8 rounded-2xl bg-neutral-600 align-middle"),attr(e,"tabindex",r=t[7]?0:-1),attr(e,"aria-label","drag-handle"),attr(e,"style",o=t[7]?"cursor: grab":"cursor: grabbing"),attr(a,"class","inline-block h-8 align-text-top truncate"),set_style(a,"max-width","calc(100% - 4rem)"),attr(a,"title",c=t[44].name),attr(f,"class","w-full bg-neutral-500 py-0.5 rounded-2xl")},m(b,I){insert(b,e,I),mount_component(n,e,null),insert(b,i,I),insert(b,a,I),append(a,l),insert(b,_,I),insert(b,f,I);for(let T=0;T<u.length;T+=1)u[T].m(f,null);y=!0,v||(g=[listen(e,"mousedown",t[22]),listen(e,"touchstart",t[22]),listen(e,"keydown",t[23]),action_destroyer(m=dndzone.call(null,f,{items:t[44].subscriptions,dropFromOthersDisabled:t[6]&&t[20](t[44]),dragDisabled:t[7],flipDurationMs})),listen(f,"consider",S),listen(f,"finalize",R)],v=!0)},p(b,I){t=b;const T={};if(I[1]&2097152&&(T.$$scope={dirty:I,ctx:t}),n.$set(T),(!y||I[0]&128&&r!==(r=t[7]?0:-1))&&attr(e,"tabindex",r),(!y||I[0]&128&&o!==(o=t[7]?"cursor: grab":"cursor: grabbing"))&&attr(e,"style",o),(!y||I[0]&16)&&s!==(s=t[44].name+"")&&set_data(l,s),(!y||I[0]&16&&c!==(c=t[44].name))&&attr(a,"title",c),I[0]&14680208){E=t[44].subscriptions,group_outros();for(let D=0;D<u.length;D+=1)u[D].r();u=update_keyed_each(u,I,h,1,t,E,d,f,fix_and_outro_and_destroy_block,create_each_block_1,null,get_each_context_1);for(let D=0;D<u.length;D+=1)u[D].a();check_outros()}m&&is_function(m.update)&&I[0]&208&&m.update.call(null,{items:t[44].subscriptions,dropFromOthersDisabled:t[6]&&t[20](t[44]),dragDisabled:t[7],flipDurationMs})},i(b){if(!y){transition_in(n.$$.fragment,b);for(let I=0;I<E.length;I+=1)transition_in(u[I]);y=!0}},o(b){transition_out(n.$$.fragment,b);for(let I=0;I<u.length;I+=1)transition_out(u[I]);y=!1},d(b){b&&detach(e),destroy_component(n),b&&detach(i),b&&detach(a),b&&detach(_),b&&detach(f);for(let I=0;I<u.length;I+=1)u[I].d();v=!1,run_all(g)}}}function create_if_block$1(t){let e,n,r,o,i,a,s=t[44].subscription.title+"",l,c,_,f;return{c(){e=element("img"),i=space(),a=element("span"),l=text(s),attr(e,"class","inline-block h-8 w-8 rounded-2xl align-middle"),src_url_equal(e.src,n=t[44].subscription.thumbnailUrl)||attr(e,"src",n),attr(e,"alt",""),attr(e,"loading","lazy"),attr(e,"width","88"),attr(e,"height","88"),attr(e,"tabindex",r=t[7]?0:-1),attr(e,"aria-label","drag-handle"),attr(e,"style",o=t[7]?"cursor: grab":"cursor: grabbing"),attr(a,"class","inline-block h-8 align-text-top truncate"),set_style(a,"max-width","calc(100% - 4rem)"),attr(a,"title",c=t[44].subscription.title)},m(u,d){insert(u,e,d),insert(u,i,d),insert(u,a,d),append(a,l),_||(f=[listen(e,"mousedown",t[22]),listen(e,"touchstart",t[22]),listen(e,"keydown",t[23])],_=!0)},p(u,d){d[0]&16&&!src_url_equal(e.src,n=u[44].subscription.thumbnailUrl)&&attr(e,"src",n),d[0]&128&&r!==(r=u[7]?0:-1)&&attr(e,"tabindex",r),d[0]&128&&o!==(o=u[7]?"cursor: grab":"cursor: grabbing")&&attr(e,"style",o),d[0]&16&&s!==(s=u[44].subscription.title+"")&&set_data(l,s),d[0]&16&&c!==(c=u[44].subscription.title)&&attr(a,"title",c)},i:noop,o:noop,d(u){u&&detach(e),u&&detach(i),u&&detach(a),_=!1,run_all(f)}}}function create_default_slot_3(t){let e,n,r,o;return e=new Fa$1({props:{icon:faCircle,color:"rgb(82 82 82)"}}),r=new Fa$1({props:{icon:faUsers,scale:.5}}),{c(){create_component(e.$$.fragment),n=space(),create_component(r.$$.fragment)},m(i,a){mount_component(e,i,a),insert(i,n,a),mount_component(r,i,a),o=!0},p:noop,i(i){o||(transition_in(e.$$.fragment,i),transition_in(r.$$.fragment,i),o=!0)},o(i){transition_out(e.$$.fragment,i),transition_out(r.$$.fragment,i),o=!1},d(i){destroy_component(e,i),i&&detach(n),destroy_component(r,i)}}}function create_each_block_1(t,e){let n,r,o,i,a,s,l,c,_,f,u=e[47].subscription.title+"",d,m,y,v,g=noop,E,h,S;o=new Fa$1({props:{icon:faTimesCircle,translateY:.5}});function R(){return e[26](e[44],e[47])}return{key:t,first:null,c(){n=element("div"),r=element("span"),create_component(o.$$.fragment),i=space(),a=element("img"),_=space(),f=element("span"),d=text(u),y=space(),attr(r,"class","relative z-20 inline-block float-right h-8 w-8 px-2 -ml-8 cursor-pointer"),attr(a,"class","inline-block h-8 w-8 rounded-2xl align-middle"),src_url_equal(a.src,s=e[47].subscription.thumbnailUrl)||attr(a,"src",s),attr(a,"alt",""),attr(a,"loading","lazy"),attr(a,"width","88"),attr(a,"height","88"),attr(a,"tabindex",l=e[7]?0:-1),attr(a,"aria-label","drag-handle"),attr(a,"style",c=e[7]?"cursor: grab":"cursor: grabbing"),attr(f,"class","inline-block h-8 align-text-top truncate"),set_style(f,"max-width","calc(100% - 4rem)"),attr(f,"title",m=e[47].subscription.title),attr(n,"class","bg-neutral-700 m-1 p-0.5 rounded-2xl truncate"),set_style(n,"width","calc(100% - 0.5rem)"),this.first=n},m(b,I){insert(b,n,I),append(n,r),mount_component(o,r,null),append(n,i),append(n,a),append(n,_),append(n,f),append(f,d),append(n,y),E=!0,h||(S=[listen(r,"click",R),listen(a,"mousedown",e[22]),listen(a,"touchstart",e[22]),listen(a,"keydown",e[23])],h=!0)},p(b,I){e=b,(!E||I[0]&16&&!src_url_equal(a.src,s=e[47].subscription.thumbnailUrl))&&attr(a,"src",s),(!E||I[0]&128&&l!==(l=e[7]?0:-1))&&attr(a,"tabindex",l),(!E||I[0]&128&&c!==(c=e[7]?"cursor: grab":"cursor: grabbing"))&&attr(a,"style",c),(!E||I[0]&16)&&u!==(u=e[47].subscription.title+"")&&set_data(d,u),(!E||I[0]&16&&m!==(m=e[47].subscription.title))&&attr(f,"title",m)},r(){v=n.getBoundingClientRect()},f(){fix_position(n),g()},a(){g(),g=create_animation(n,v,flip,{duration:flipDurationMs})},i(b){E||(transition_in(o.$$.fragment,b),E=!0)},o(b){transition_out(o.$$.fragment,b),E=!1},d(b){b&&detach(n),destroy_component(o),h=!1,run_all(S)}}}function create_each_block(t,e){let n,r,o,i,a,s,l,c,_,f,u=noop,d,m,y;o=new Fa$1({props:{icon:faTimesCircle,translateY:.5}});function v(){return e[25](e[44])}const g=[create_if_block$1,create_if_block_1],E=[];function h(S,R){return R[0]&16&&(a=null),R[0]&16&&(s=null),a==null&&(a=!!isSubscription(S[44])),a?0:(s==null&&(s=!!isGroup(S[44])),s?1:-1)}return~(l=h(e,[-1,-1]))&&(c=E[l]=g[l](e)),{key:t,first:null,c(){n=element("div"),r=element("span"),create_component(o.$$.fragment),i=space(),c&&c.c(),_=space(),attr(r,"class","relative z-20 inline-block float-right h-8 w-8 px-2 -ml-8 cursor-pointer"),attr(n,"class","bg-neutral-700 m-1 p-0.5 rounded-2xl truncate"),set_style(n,"width","calc(100% - 0.5rem)"),this.first=n},m(S,R){insert(S,n,R),append(n,r),mount_component(o,r,null),append(n,i),~l&&E[l].m(n,null),append(n,_),d=!0,m||(y=listen(r,"click",v),m=!0)},p(S,R){e=S;let b=l;l=h(e,R),l===b?~l&&E[l].p(e,R):(c&&(group_outros(),transition_out(E[b],1,1,()=>{E[b]=null}),check_outros()),~l?(c=E[l],c?c.p(e,R):(c=E[l]=g[l](e),c.c()),transition_in(c,1),c.m(n,_)):c=null)},r(){f=n.getBoundingClientRect()},f(){fix_position(n),u()},a(){u(),u=create_animation(n,f,flip,{duration:flipDurationMs})},i(S){d||(transition_in(o.$$.fragment,S),transition_in(c),d=!0)},o(S){transition_out(o.$$.fragment,S),transition_out(c),d=!1},d(S){S&&detach(n),destroy_component(o),~l&&E[l].d(),m=!1,y()}}}function create_default_slot_2(t){let e;return{c(){e=text("Close")},m(n,r){insert(n,e,r)},d(n){n&&detach(e)}}}function create_default_slot_1(t){let e;return{c(){e=text("Add group")},m(n,r){insert(n,e,r)},d(n){n&&detach(e)}}}function create_default_slot$1(t){let e;return{c(){e=text("Save")},m(n,r){insert(n,e,r)},d(n){n&&detach(e)}}}function create_fragment$1(t){let e,n,r,o,i,a,s,l,c,_,f,u,d=[],m=new Map_1,y,v,g,E,h,S,R,b,I=[],T=new Map_1,D,C,w,k,G,x,M,Y,B,F,q,V,j;i=new Center({props:{$$slots:{default:[create_default_slot_6]},$$scope:{ctx:t}}}),_=new Center({props:{$$slots:{default:[create_default_slot_5]},$$scope:{ctx:t}}});let H=t[3];const W=L=>L[44].id;for(let L=0;L<H.length;L+=1){let N=get_each_context_2(t,H,L),z=W(N);m.set(z,d[L]=create_each_block_2(z,N))}h=new Center({props:{$$slots:{default:[create_default_slot_4]},$$scope:{ctx:t}}});let X=t[4];const K=L=>L[44].id;for(let L=0;L<X.length;L+=1){let N=get_each_context(t,X,L),z=K(N);T.set(z,I[L]=create_each_block(z,N))}return k=new PrimaryButton({props:{class:"w-20 m-1 float-left",$$slots:{default:[create_default_slot_2]},$$scope:{ctx:t}}}),k.$on("click",t[8]),Y=new PrimaryButton({props:{class:"w-24 rounded-l-none",$$slots:{default:[create_default_slot_1]},$$scope:{ctx:t}}}),Y.$on("click",t[10]),F=new PrimaryButton({props:{class:"w-20 m-1 float-right",$$slots:{default:[create_default_slot$1]},$$scope:{ctx:t}}}),F.$on("click",t[11]),{c(){e=element("div"),n=element("div"),r=element("div"),o=element("div"),create_component(i.$$.fragment),a=space(),s=element("div"),l=element("div"),c=element("div"),create_component(_.$$.fragment),f=space(),u=element("div");for(let L=0;L<d.length;L+=1)d[L].c();v=space(),g=element("div"),E=element("div"),create_component(h.$$.fragment),S=space(),R=element("div"),b=element("div");for(let L=0;L<I.length;L+=1)I[L].c();C=space(),w=element("div"),create_component(k.$$.fragment),G=space(),x=element("div"),M=element("input"),create_component(Y.$$.fragment),B=space(),create_component(F.$$.fragment),attr(o,"class","w-full h-16"),attr(c,"class","w-full h-6"),attr(u,"class","w-full overflow-y-auto y-scroll mb-2"),set_style(u,"height","calc(100% - 2rem)"),attr(l,"class","inline-block min-w-[9.5rem] m-1 bg-neutral-800 rounded-xl"),set_style(l,"width","calc(50% - 0.65rem)"),set_style(l,"height","calc(100% - 0.5rem)"),attr(E,"class","w-full h-6"),attr(b,"class","w-full h-max"),attr(R,"class","w-full overflow-y-auto y-scroll mb-2"),set_style(R,"height","calc(100% - 2rem)"),attr(g,"class","inline-block min-w-[9.5rem] m-1 bg-neutral-800 rounded-xl"),set_style(g,"width","calc(50% - 0.65rem)"),set_style(g,"height","calc(100% - 0.5rem)"),attr(s,"class","w-full"),set_style(s,"height","calc(100% - 7rem)"),attr(M,"type","text"),attr(M,"class","bg-neutral-800 p-1.5 rounded-l-2xl"),set_style(M,"width","calc(100% - 6rem)"),attr(x,"class","inline-block m-1"),set_style(x,"width","calc(100% - 11.5rem)"),attr(w,"class","w-full h-12"),attr(r,"class","min-w-[20.5rem] w-full h-full"),attr(n,"class","absolute inset-y-0 left-1/2 -translate-x-1/2 w-full max-w-[40rem] bg-neutral-700 rounded-2xl overflow-x-auto x-scroll"),attr(e,"class","fixed inset-0 z-10 bg-black/80 svelte-v5cnxt"),toggle_class(e,"fadeIn",t[1]),toggle_class(e,"fadeOut",!t[1])},m(L,N){insert(L,e,N),append(e,n),append(n,r),append(r,o),mount_component(i,o,null),append(r,a),append(r,s),append(s,l),append(l,c),mount_component(_,c,null),append(l,f),append(l,u);for(let z=0;z<d.length;z+=1)d[z].m(u,null);append(s,v),append(s,g),append(g,E),mount_component(h,E,null),append(g,S),append(g,R),append(R,b);for(let z=0;z<I.length;z+=1)I[z].m(b,null);t[29](R),append(r,C),append(r,w),mount_component(k,w,null),append(w,G),append(w,x),append(x,M),set_input_value(M,t[5]),mount_component(Y,x,null),append(w,B),mount_component(F,w,null),q=!0,V||(j=[action_destroyer(y=dndzone.call(null,u,{items:t[3],dropFromOthersDisabled:!0,dragDisabled:t[7],flipDurationMs})),listen(u,"consider",t[12]),listen(u,"finalize",t[13]),action_destroyer(D=dndzone.call(null,b,{items:t[4],dropFromOthersDisabled:t[6]&&t[16](),dragDisabled:t[7],flipDurationMs})),listen(b,"consider",t[14]),listen(b,"finalize",t[15]),listen(R,"scroll",t[24]),listen(M,"input",t[30])],V=!0)},p(L,N){const z={};N[0]&4|N[1]&2097152&&(z.$$scope={dirty:N,ctx:L}),i.$set(z);const J={};if(N[1]&2097152&&(J.$$scope={dirty:N,ctx:L}),_.$set(J),N[0]&12583048){H=L[3];for(let P=0;P<d.length;P+=1)d[P].r();d=update_keyed_each(d,N,W,1,L,H,m,u,fix_and_destroy_block,create_each_block_2,null,get_each_context_2);for(let P=0;P<d.length;P+=1)d[P].a()}y&&is_function(y.update)&&N[0]&136&&y.update.call(null,{items:L[3],dropFromOthersDisabled:!0,dragDisabled:L[7],flipDurationMs});const Q={};if(N[1]&2097152&&(Q.$$scope={dirty:N,ctx:L}),h.$set(Q),N[0]&16646352){X=L[4],group_outros();for(let P=0;P<I.length;P+=1)I[P].r();I=update_keyed_each(I,N,K,1,L,X,T,b,fix_and_outro_and_destroy_block,create_each_block,null,get_each_context);for(let P=0;P<I.length;P+=1)I[P].a();check_outros()}D&&is_function(D.update)&&N[0]&208&&D.update.call(null,{items:L[4],dropFromOthersDisabled:L[6]&&L[16](),dragDisabled:L[7],flipDurationMs});const A={};N[1]&2097152&&(A.$$scope={dirty:N,ctx:L}),k.$set(A),N[0]&32&&M.value!==L[5]&&set_input_value(M,L[5]);const O={};N[1]&2097152&&(O.$$scope={dirty:N,ctx:L}),Y.$set(O);const U={};N[1]&2097152&&(U.$$scope={dirty:N,ctx:L}),F.$set(U),N[0]&2&&toggle_class(e,"fadeIn",L[1]),N[0]&2&&toggle_class(e,"fadeOut",!L[1])},i(L){if(!q){transition_in(i.$$.fragment,L),transition_in(_.$$.fragment,L),transition_in(h.$$.fragment,L);for(let N=0;N<X.length;N+=1)transition_in(I[N]);transition_in(k.$$.fragment,L),transition_in(Y.$$.fragment,L),transition_in(F.$$.fragment,L),q=!0}},o(L){transition_out(i.$$.fragment,L),transition_out(_.$$.fragment,L),transition_out(h.$$.fragment,L);for(let N=0;N<I.length;N+=1)transition_out(I[N]);transition_out(k.$$.fragment,L),transition_out(Y.$$.fragment,L),transition_out(F.$$.fragment,L),q=!1},d(L){L&&detach(e),destroy_component(i),destroy_component(_);for(let N=0;N<d.length;N+=1)d[N].d();destroy_component(h);for(let N=0;N<I.length;N+=1)I[N].d();t[29](null),destroy_component(k),destroy_component(Y),destroy_component(F),V=!1,run_all(j)}}}const flipDurationMs=300,scrollOffset=32,duration=100;function instance$1(t,e,n){let r,o,i,a;component_subscribe(t,editorVisible,A=>n(1,o=A)),component_subscribe(t,settingsStore,A=>n(36,i=A)),component_subscribe(t,subscriptionsStore,A=>n(37,a=A));function s(){set_store_value(editorVisible,o=!1,o)}let l=0,c=[],_=!1,f=[],u=[],d="";function m(){n(2,_=!_),y()}function y(){if(_){const A=new Set(u.flatMap(O=>isGroup(O)?O.subscriptions.map(U=>U.subscription.channelId):[O.subscription.channelId]));n(3,f=c.filter(O=>!A.has(O.subscription.channelId)))}else n(3,f=c)}function v(){d!==""&&(u.push({id:l++,name:d,subscriptions:[]}),n(5,d=""),n(4,u))}function g(){const A=a.items,O=i.subscriptionGroups;l=0,c=A.map(P=>({id:l++,name:P.title,subscription:P}));const U=new Map(A.map(P=>[P.channelId,P]));n(4,u=O.map(P=>{const ee=P.subscriptionIds.map(te=>U.get(te));return ee.length===1&&P.name===ee[0].title?{id:l++,name:P.name,subscription:ee[0]}:{id:l++,name:P.name,subscriptions:ee.map(te=>({id:l++,name:te.title,subscription:te}))}})),y()}async function E(){set_store_value(settingsStore,i.subscriptionGroups=u.map(A=>({name:A.name,subscriptionIds:isGroup(A)?A.subscriptions.map(O=>O.subscription.channelId):[A.subscription.channelId]})),i),await writeSettings(i),set_store_value(editorVisible,o=!1,o)}let h,S=!0;function R(A){if(A.detail.info.trigger===TRIGGERS.DRAG_STARTED){const O=c.findIndex(U=>U.id==A.detail.info.id);n(6,h=c[O]),c[O]=re(Z({},h),{id:l++}),y(),j()}else A.detail.info.source===SOURCES.KEYBOARD&&A.detail.info.trigger===TRIGGERS.DRAG_STOPPED&&n(7,S=!0),n(3,f)}function b(A){A.detail.info.source===SOURCES.POINTER&&n(7,S=!0),n(3,f)}function I(A){A.detail.info.trigger===TRIGGERS.DRAG_STARTED?(n(6,h=u.find(O=>O.id==A.detail.info.id)),j()):A.detail.info.source===SOURCES.KEYBOARD&&A.detail.info.trigger===TRIGGERS.DRAG_STOPPED&&n(7,S=!0),n(4,u=A.detail.items)}function T(A){A.detail.info.source===SOURCES.POINTER&&n(7,S=!0),n(4,u=A.detail.items),y()}function D(){if(isSubscription(h)){const A=h.subscription.channelId;return u.some(O=>!O[SHADOW_ITEM_MARKER_PROPERTY_NAME]&&isSubscription(O)&&O.subscription.channelId===A)}else return!1}function C(A){n(4,u=u.filter(O=>O.id!==A.id)),y()}function w(A,O){O.detail.info.trigger===TRIGGERS.DRAG_STARTED?(n(6,h=A.subscriptions.find(U=>U.id==O.detail.info.id)),j()):O.detail.info.source===SOURCES.KEYBOARD&&O.detail.info.trigger===TRIGGERS.DRAG_STOPPED&&n(7,S=!0),A.subscriptions=O.detail.items,n(4,u)}function k(A,O){O.detail.info.source===SOURCES.POINTER&&n(7,S=!0),A.subscriptions=O.detail.items,n(4,u),y()}function G(A){if(isSubscription(h)){const O=h.subscription.channelId;return A.subscriptions.some(U=>!U[SHADOW_ITEM_MARKER_PROPERTY_NAME]&&U.subscription.channelId===O)}else return!0}function x(A,O){A.subscriptions=A.subscriptions.filter(U=>U.id!==O.id),n(4,u),y()}function M(A){A.preventDefault(),n(7,S=!1)}function Y(A){(A.key==="Enter"||A.key===" ")&&S&&n(7,S=!1)}let B;const F=tweened(0,{duration:2*duration});let q,V;onDestroy(F.subscribe(A=>B&&n(0,B.scrollTop=A,B)));function j(){q||(q=setInterval(H,duration))}function H(){const A=document.getElementById("dnd-action-dragged-el");if(A){const O=A.getBoundingClientRect();O.bottom+scrollOffset>=r.bottom?F.update(U=>W(U+O.bottom+scrollOffset-r.bottom)):O.top-scrollOffset<=r.top&&F.update(U=>W(U+O.top-scrollOffset-r.top))}else clearInterval(q),q=null}function W(A){return Math.max(0,Math.min(A,B.scrollHeight-B.clientHeight))}function X(){clearTimeout(V),V=setTimeout(()=>{F.set(B.scrollTop,{duration:0})},duration)}const K=A=>C(A),L=(A,O)=>x(A,O),N=(A,O)=>w(A,O),z=(A,O)=>k(A,O);function J(A){binding_callbacks[A?"unshift":"push"](()=>{B=A,n(0,B)})}function Q(){d=this.value,n(5,d)}return t.$$.update=()=>{t.$$.dirty[0]&2&&o&&g(),t.$$.dirty[0]&1&&(r=B==null?void 0:B.getBoundingClientRect())},[B,o,_,f,u,d,h,S,s,m,v,E,R,b,I,T,D,C,w,k,G,x,M,Y,X,K,L,N,z,J,Q]}class SubscriptionsEditor extends SvelteComponent{constructor(e){super(),init(this,e,instance$1,create_fragment$1,safe_not_equal,{},null,[-1,-1])}}function create_catch_block(t){let e,n=JSON.stringify(t[5])+"",r;return{c(){e=element("p"),r=text(n),attr(e,"class","text-center")},m(o,i){insert(o,e,i),append(e,r)},p:noop,i:noop,o:noop,d(o){o&&detach(e)}}}function create_then_block(t){let e,n,r,o;const i=[create_if_block,create_else_block],a=[];function s(l,c){return l[1]?0:1}return e=s(t),n=a[e]=i[e](t),{c(){n.c(),r=empty()},m(l,c){a[e].m(l,c),insert(l,r,c),o=!0},p(l,c){let _=e;e=s(l),e===_?a[e].p(l,c):(group_outros(),transition_out(a[_],1,1,()=>{a[_]=null}),check_outros(),n=a[e],n?n.p(l,c):(n=a[e]=i[e](l),n.c()),transition_in(n,1),n.m(r.parentNode,r))},i(l){o||(transition_in(n),o=!0)},o(l){transition_out(n),o=!1},d(l){a[e].d(l),l&&detach(r)}}}function create_else_block(t){let e,n;return e=new LoginScreen({props:{isSignedIn:t[0]}}),{c(){create_component(e.$$.fragment)},m(r,o){mount_component(e,r,o),n=!0},p(r,o){const i={};o&1&&(i.isSignedIn=r[0]),e.$set(i)},i(r){n||(transition_in(e.$$.fragment,r),n=!0)},o(r){transition_out(e.$$.fragment,r),n=!1},d(r){destroy_component(e,r)}}}function create_if_block(t){let e,n,r,o,i,a;return e=new Player({}),r=new SubscriptionsEditor({}),i=new SubscriptionsDeck({}),{c(){create_component(e.$$.fragment),n=space(),create_component(r.$$.fragment),o=space(),create_component(i.$$.fragment)},m(s,l){mount_component(e,s,l),insert(s,n,l),mount_component(r,s,l),insert(s,o,l),mount_component(i,s,l),a=!0},p:noop,i(s){a||(transition_in(e.$$.fragment,s),transition_in(r.$$.fragment,s),transition_in(i.$$.fragment,s),a=!0)},o(s){transition_out(e.$$.fragment,s),transition_out(r.$$.fragment,s),transition_out(i.$$.fragment,s),a=!1},d(s){destroy_component(e,s),s&&detach(n),destroy_component(r,s),s&&detach(o),destroy_component(i,s)}}}function create_pending_block(t){let e,n;return e=new Center({props:{$$slots:{default:[create_default_slot]},$$scope:{ctx:t}}}),{c(){create_component(e.$$.fragment)},m(r,o){mount_component(e,r,o),n=!0},p(r,o){const i={};o&64&&(i.$$scope={dirty:o,ctx:r}),e.$set(i)},i(r){n||(transition_in(e.$$.fragment,r),n=!0)},o(r){transition_out(e.$$.fragment,r),n=!1},d(r){destroy_component(e,r)}}}function create_default_slot(t){let e,n;return e=new Spinner({}),{c(){create_component(e.$$.fragment)},m(r,o){mount_component(e,r,o),n=!0},i(r){n||(transition_in(e.$$.fragment,r),n=!0)},o(r){transition_out(e.$$.fragment,r),n=!1},d(r){destroy_component(e,r)}}}function create_fragment(t){let e,n,r,o,i;n=new Header({props:{isSignedIn:t[0],isAuthorized:t[1]}});let a={ctx:t,current:null,token:null,hasCatch:!0,pending:create_pending_block,then:create_then_block,catch:create_catch_block,value:4,error:5,blocks:[,,,]};return handle_promise(t[2](),a),{c(){e=element("main"),create_component(n.$$.fragment),r=space(),o=element("section"),a.block.c(),attr(o,"class","w-full"),set_style(o,"height","calc(100% - 3rem)"),attr(e,"class","w-full h-full bg-neutral-700 text-white")},m(s,l){insert(s,e,l),mount_component(n,e,null),append(e,r),append(e,o),a.block.m(o,a.anchor=null),a.mount=()=>o,a.anchor=null,i=!0},p(s,[l]){t=s;const c={};l&1&&(c.isSignedIn=t[0]),l&2&&(c.isAuthorized=t[1]),n.$set(c),update_await_block_branch(a,t,l)},i(s){i||(transition_in(n.$$.fragment,s),transition_in(a.block),i=!0)},o(s){transition_out(n.$$.fragment,s);for(let l=0;l<3;l+=1){const c=a.blocks[l];transition_out(c)}i=!1},d(s){s&&detach(e),destroy_component(n),a.block.d(),a.token=null,a=null}}}const scope="https://www.googleapis.com/auth/youtube.readonly https://www.googleapis.com/auth/drive.appdata";function instance(t,e,n){let r,o;function i(){return new Promise((s,l)=>{gapi.load("client:auth2",()=>a().then(()=>s()).catch(c=>l(c)))})}async function a(){await gapi.client.init({apiKey:"AIzaSyBAHcJ9fPTrCjDExl1NZkF4fZd15fICEFI",clientId:"789354109817-qrqoqtfj1k3gvs01gufrpqlv38g0bi9p.apps.googleusercontent.com",scope});const s=gapi.auth2.getAuthInstance();n(0,r=s.isSignedIn.get()),s.isSignedIn.listen(l=>n(0,r=l)),n(1,o=s.currentUser.get().hasGrantedScopes(scope)),s.currentUser.listen(l=>n(1,o=l.hasGrantedScopes(scope)))}return[r,o,i]}class App extends SvelteComponent{constructor(e){super(),init(this,e,instance,create_fragment,safe_not_equal,{})}}var index="";new App({target:document.getElementById("app")});
